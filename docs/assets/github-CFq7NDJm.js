import{g as i,A as c,a as w,b as f}from"./main-C1vjIEW-.js";import"./useTheme-DaWD_7vx.js";async function h(o,r={}){const e=i(),n={Accept:c.ACCEPT_HEADER,...r.headers};return e&&(n.Authorization=`token ${e}`),await fetch(`${c.GITHUB_BASE_URL}${o}`,{...r,headers:n})}async function l(o,r,e={}){const n=e.per_page||c.PER_PAGE,s=`/repos/${o}/${r}/actions/runs?per_page=${n}&_t=${Date.now()}`;try{const t=await h(s,{cache:"no-cache"});if(!t.ok)throw new Error(`Failed to fetch workflow runs: ${t.status}`);return(await t.json()).workflow_runs.map(p=>({...p,org:o,repo:r}))}catch(t){throw console.error(`Error fetching workflow runs for ${o}/${r}:`,t),t}}async function u(o,r,e,n={},s="main"){const t=i();if(!t)throw new Error("GitHub token required to trigger workflows");try{return(await fetch(`https://api.github.com/repos/${o}/${r}/actions/workflows/${e}/dispatches`,{method:"POST",headers:{Accept:"application/vnd.github+json",Authorization:`Bearer ${t}`,"X-GitHub-Api-Version":"2022-11-28","Content-Type":"application/json"},body:JSON.stringify({ref:s,inputs:n})})).status===204}catch(a){throw console.error("Error triggering workflow:",a),a}}async function d(o,r){const e=f(),n=w();return u(e,n,"trigger-service-workflow.yml",{org:o,repo:r})}export{l as fetchWorkflowRuns,h as githubApiRequest,d as triggerScorecardWorkflow,u as triggerWorkflowDispatch};
//# sourceMappingURL=github-CFq7NDJm.js.map

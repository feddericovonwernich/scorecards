{"version":3,"mappings":"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","names":["useSearchParams","useMemo","params","useSwaggerUI","serviceData","org","repo","containerRef","useRef","swaggerUiRef","useEffect","specPath","configuredBranch","SwaggerUIBundle","n","__vite_default__","SwaggerUIStandalonePreset","__vitePreload","branches","specUrl","branch","url","specResponse","specContent","spec","THEME_KEY","THEMES","getOSPreference","getSavedTheme","saved","applyThemeToDOM","theme","useTheme","setTheme","useState","mediaQuery","handleChange","e","newTheme","toggleTheme","useCallback","current","SunIcon","jsx","MoonIcon","ApiExplorer","catalogOwner","loading","setLoading","error","setError","setServiceData","swaggerContainerRef","loadServiceData","rawBaseUrl","resultsUrl","response","data","err","title","subtitle","jsxs","Fragment","styles","container","createRoot","StrictMode"],"ignoreList":[],"sources":["../../src/pages/ApiExplorer/hooks/useSearchParams.ts","../../src/pages/ApiExplorer/hooks/useSwaggerUI.ts","../../src/hooks/useTheme.ts","../../src/pages/ApiExplorer/ApiExplorer.tsx","../../src/pages/ApiExplorer/index.tsx"],"sourcesContent":["import { useMemo } from 'react';\n\nexport function useSearchParams() {\n  return useMemo(() => {\n    const params = new URLSearchParams(window.location.search);\n    return {\n      org: params.get('org'),\n      repo: params.get('repo'),\n      catalogOwner: params.get('catalog_owner'),\n    };\n  }, []);\n}\n","import { useEffect, useRef } from 'react';\n\ninterface ServiceData {\n  service: {\n    openapi?: {\n      spec_file?: string;\n      branch?: string;\n    };\n  };\n}\n\ninterface UseSwaggerUIParams {\n  serviceData: ServiceData | null;\n  org: string | null;\n  repo: string | null;\n}\n\nexport function useSwaggerUI({ serviceData, org, repo }: UseSwaggerUIParams) {\n  const containerRef = useRef<HTMLDivElement>(null);\n  const swaggerUiRef = useRef<unknown>(null);\n\n  useEffect(() => {\n    if (!serviceData?.service.openapi || !containerRef.current || !org || !repo) {\n      return;\n    }\n\n    const initSwagger = async () => {\n      const specPath = serviceData.service.openapi!.spec_file || 'openapi.yaml';\n      const configuredBranch = serviceData.service.openapi!.branch;\n\n      // Dynamic import of SwaggerUI\n      const SwaggerUIBundle = (await import('swagger-ui-dist/swagger-ui-bundle')).default;\n      const SwaggerUIStandalonePreset = (await import('swagger-ui-dist/swagger-ui-standalone-preset')).default;\n\n      // Find spec URL by trying branches\n      const branches = configuredBranch ? [configuredBranch] : ['main', 'master'];\n      let specUrl: string | null = null;\n\n      for (const branch of branches) {\n        const url = `https://raw.githubusercontent.com/${org}/${repo}/${branch}/${specPath}`;\n        try {\n          const response = await fetch(url, { method: 'HEAD' });\n          if (response.ok) {\n            specUrl = url;\n            break;\n          }\n        } catch {\n          continue;\n        }\n      }\n\n      if (!specUrl) {\n        throw new Error(`OpenAPI spec not found at ${specPath}`);\n      }\n\n      // Fetch and parse the spec\n      const specResponse = await fetch(specUrl);\n      if (!specResponse.ok) {\n        throw new Error(`OpenAPI specification file not found at ${specUrl}`);\n      }\n\n      const specContent = await specResponse.text();\n\n      // Parse spec to get the format (JSON or YAML)\n      let spec;\n      try {\n        spec = JSON.parse(specContent);\n      } catch {\n        // If not JSON, assume YAML - Swagger UI can handle it\n        spec = specContent;\n      }\n\n      swaggerUiRef.current = SwaggerUIBundle({\n        spec: typeof spec === 'string' ? undefined : spec,\n        url: typeof spec === 'string' ? specUrl : undefined,\n        dom_id: '#swagger-ui',\n        deepLinking: true,\n        presets: [SwaggerUIBundle.presets.apis, SwaggerUIStandalonePreset],\n        plugins: [SwaggerUIBundle.plugins.DownloadUrl],\n        layout: 'StandaloneLayout',\n      });\n    };\n\n    initSwagger().catch(console.error);\n\n    return () => {\n      // Cleanup if needed\n    };\n  }, [serviceData, org, repo]);\n\n  return containerRef;\n}\n","import { useState, useEffect, useCallback } from 'react';\n\nconst THEME_KEY = 'theme';\nconst THEMES = { LIGHT: 'light', DARK: 'dark' } as const;\n\ntype Theme = typeof THEMES[keyof typeof THEMES];\n\nfunction getOSPreference(): Theme {\n  if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {\n    return THEMES.DARK;\n  }\n  return THEMES.LIGHT;\n}\n\nfunction getSavedTheme(): Theme {\n  const saved = localStorage.getItem(THEME_KEY);\n  if (saved === THEMES.DARK || saved === THEMES.LIGHT) {\n    return saved;\n  }\n  return getOSPreference();\n}\n\nfunction applyThemeToDOM(theme: Theme) {\n  document.documentElement.setAttribute('data-theme', theme);\n}\n\nexport function useTheme() {\n  const [theme, setTheme] = useState<Theme>(getSavedTheme);\n\n  useEffect(() => {\n    applyThemeToDOM(theme);\n  }, [theme]);\n\n  useEffect(() => {\n    // Listen for OS preference changes\n    if (window.matchMedia) {\n      const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');\n      const handleChange = (e: MediaQueryListEvent) => {\n        const saved = localStorage.getItem(THEME_KEY);\n        if (!saved) {\n          const newTheme = e.matches ? THEMES.DARK : THEMES.LIGHT;\n          setTheme(newTheme);\n        }\n      };\n      mediaQuery.addEventListener('change', handleChange);\n      return () => mediaQuery.removeEventListener('change', handleChange);\n    }\n  }, []);\n\n  const toggleTheme = useCallback(() => {\n    setTheme((current) => {\n      const newTheme = current === THEMES.DARK ? THEMES.LIGHT : THEMES.DARK;\n      localStorage.setItem(THEME_KEY, newTheme);\n      return newTheme;\n    });\n  }, []);\n\n  return { theme, toggleTheme };\n}\n","import { useState, useEffect } from 'react';\nimport { useSearchParams } from './hooks/useSearchParams';\nimport { useSwaggerUI } from './hooks/useSwaggerUI';\nimport { useTheme } from '../../hooks/useTheme';\nimport styles from './ApiExplorer.module.css';\n\ninterface ServiceData {\n  service: {\n    name?: string;\n    openapi?: {\n      spec_file?: string;\n      branch?: string;\n    };\n  };\n}\n\nfunction SunIcon() {\n  return (\n    <svg width=\"20\" height=\"20\" viewBox=\"0 0 16 16\" fill=\"currentColor\">\n      <path d=\"M8 12a4 4 0 1 1 0-8 4 4 0 0 1 0 8Zm0-1.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Zm5.657-8.157a.75.75 0 0 1 0 1.061l-1.061 1.06a.749.749 0 0 1-1.275-.326.749.749 0 0 1 .215-.734l1.06-1.06a.75.75 0 0 1 1.06 0Zm-9.193 9.193a.75.75 0 0 1 0 1.06l-1.06 1.061a.75.75 0 1 1-1.061-1.06l1.06-1.061a.75.75 0 0 1 1.061 0ZM8 0a.75.75 0 0 1 .75.75v1.5a.75.75 0 0 1-1.5 0V.75A.75.75 0 0 1 8 0ZM3 8a.75.75 0 0 1-.75.75H.75a.75.75 0 0 1 0-1.5h1.5A.75.75 0 0 1 3 8Zm13 0a.75.75 0 0 1-.75.75h-1.5a.75.75 0 0 1 0-1.5h1.5A.75.75 0 0 1 16 8Zm-8 5a.75.75 0 0 1 .75.75v1.5a.75.75 0 0 1-1.5 0v-1.5A.75.75 0 0 1 8 13Zm3.536-1.464a.75.75 0 0 1 1.06 0l1.061 1.06a.75.75 0 0 1-1.06 1.061l-1.061-1.06a.75.75 0 0 1 0-1.061ZM2.343 2.343a.75.75 0 0 1 1.061 0l1.06 1.061a.751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018l-1.06-1.06a.75.75 0 0 1 0-1.06Z\" />\n    </svg>\n  );\n}\n\nfunction MoonIcon() {\n  return (\n    <svg width=\"20\" height=\"20\" viewBox=\"0 0 16 16\" fill=\"currentColor\">\n      <path d=\"M9.598 1.591a.749.749 0 0 1 .785-.175 7.001 7.001 0 1 1-8.967 8.967.75.75 0 0 1 .961-.96 5.5 5.5 0 0 0 7.046-7.046.75.75 0 0 1 .175-.786Zm1.616 1.945a7 7 0 0 1-7.678 7.678 5.499 5.499 0 1 0 7.678-7.678Z\" />\n    </svg>\n  );\n}\n\nexport function ApiExplorer() {\n  const { org, repo, catalogOwner } = useSearchParams();\n  const { theme, toggleTheme } = useTheme();\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [serviceData, setServiceData] = useState<ServiceData | null>(null);\n\n  const swaggerContainerRef = useSwaggerUI({ serviceData, org, repo });\n\n  useEffect(() => {\n    if (!org || !repo) {\n      setError('Missing parameters. Please specify org and repo in the URL.');\n      setLoading(false);\n      return;\n    }\n\n    loadServiceData();\n  }, [org, repo]);\n\n  const loadServiceData = async () => {\n    const repoOwner = catalogOwner || window.location.hostname.split('.')[0] || 'your-org';\n    const rawBaseUrl = `https://raw.githubusercontent.com/${repoOwner}/scorecards/catalog`;\n\n    try {\n      const resultsUrl = `${rawBaseUrl}/results/${org}/${repo}/results.json?t=${Date.now()}`;\n      const response = await fetch(resultsUrl, { cache: 'no-cache' });\n\n      if (!response.ok) {\n        throw new Error(`Service not found or results not available (${response.status})`);\n      }\n\n      const data = await response.json();\n      setServiceData(data);\n\n      if (!data.service.openapi) {\n        throw new Error('This service does not have OpenAPI configuration');\n      }\n\n      setLoading(false);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : String(err));\n      setLoading(false);\n    }\n  };\n\n  const title = serviceData?.service.name || `${org}/${repo}`;\n  const subtitle = `${org}/${repo} - OpenAPI Specification`;\n\n  return (\n    <>\n      <div className={styles.header}>\n        <div className={styles.headerContent}>\n          <div className={styles.headerTitle}>\n            <h1>{loading ? 'API Explorer' : title}</h1>\n            <p>{loading ? 'Loading API specification...' : subtitle}</p>\n          </div>\n          <div className={styles.headerControls}>\n            <button\n              className={styles.themeToggleBtn}\n              onClick={toggleTheme}\n              title=\"Toggle night mode\"\n              aria-label=\"Toggle night mode\"\n            >\n              {theme === 'dark' ? <MoonIcon /> : <SunIcon />}\n            </button>\n            <a href=\"./\" className={styles.backBtn}>\n              ‚Üê Back to Catalog\n            </a>\n          </div>\n        </div>\n      </div>\n\n      {loading && (\n        <div className={styles.loading}>\n          <div>Loading API specification...</div>\n        </div>\n      )}\n\n      {error && (\n        <div className={styles.error}>\n          <h2>Failed to Load API</h2>\n          <p>{error}</p>\n        </div>\n      )}\n\n      <div id=\"swagger-ui\" ref={swaggerContainerRef} />\n    </>\n  );\n}\n","import { createRoot } from 'react-dom/client';\nimport { StrictMode } from 'react';\nimport { ApiExplorer } from './ApiExplorer';\n\nconst container = document.getElementById('api-explorer-root');\nif (container) {\n  const root = createRoot(container);\n  root.render(\n    <StrictMode>\n      <ApiExplorer />\n    </StrictMode>\n  );\n}\n"],"file":"assets/api-explorer-CT4YOvfL.js"}
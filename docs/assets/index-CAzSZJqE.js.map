{"version":3,"file":"index-CAzSZJqE.js","sources":["../../src/config/constants.ts","../../src/config/icons.ts","../../src/utils/formatting.ts","../../src/utils/crypto.ts","../../src/utils/css.ts","../../src/utils/clipboard.ts","../../src/utils/dom.ts","../../src/utils/animation.ts","../../src/utils/statistics.ts","../../src/utils/team-statistics.ts","../../src/utils/check-statistics.ts","../../src/utils/duration-tracker.ts","../../src/ui/toast.ts","../../src/ui/modals.ts","../../src/services/staleness.ts","../../src/ui/filters.ts","../../src/ui/workflow-run.ts","../../src/ui/service-card.ts","../../src/services/auth.ts","../../src/config/deployment.ts","../../src/api/registry.ts","../../src/ui/modals/service/header.ts","../../src/ui/modals/service/stats.ts","../../src/ui/modals/service/api-tab.ts","../../src/ui/modals/service/tabs.ts","../../src/ui/modals/service/checks-tab.ts","../../src/ui/modals/service/links-tab.ts","../../src/ui/modals/service/contributors-tab.ts","../../src/ui/modals/service/workflows-tab.ts","../../src/ui/modals/service/badges-tab.ts","../../src/ui/modals/service/index.ts","../../src/ui/service-workflows.ts","../../src/ui/actions-widget.ts","../../src/ui/settings.ts","../../src/ui/stats.ts","../../src/ui/button-states.ts","../../src/ui/team-filter.ts","../../src/ui/team-dashboard.ts","../../src/ui/team-edit-modal.ts","../../src/api/github.ts","../../src/api/github-teams.ts","../../src/api/checks.ts","../../src/ui/modals/shared/tab-manager.ts","../../src/ui/team-modal.ts","../../src/ui/check-filter.ts","../../src/ui/check-adoption-dashboard.ts","../../src/config/workflows.ts","../../src/api/workflow-triggers.ts","../../src/services/theme.ts","../../src/app-init.ts","../../src/main.ts"],"sourcesContent":["/**\n * Application Constants\n * Centralized configuration values for the Scorecards application\n */\n\nimport type { RankName } from '../types/index';\n\n// API Configuration\nexport const API_CONFIG = {\n  PER_PAGE: 25,\n  GITHUB_BASE_URL: 'https://api.github.com',\n  ACCEPT_HEADER: 'application/vnd.github.v3+json',\n} as const;\n\n// Timing Constants (milliseconds)\nexport const TIMING = {\n  // User feedback durations\n  BUTTON_FEEDBACK: 2000,\n  TOAST_DURATION: 3000,\n  BUTTON_STATE_DURATION: 3000,\n\n  // Animation delays\n  ANIMATION_SHORT: 100,\n  ANIMATION_MEDIUM: 300,\n  ANIMATION_LONG: 500,\n  TAB_INIT_DELAY: 100,\n\n  // Polling intervals\n  POLLING_ACTIVE: 30000,\n  POLLING_IDLE: 60000,\n  WORKFLOW_POLL_DEFAULT: 30000,\n\n  // Cache TTL\n  CACHE_SHORT: 10000,\n  CACHE_MEDIUM: 15000,\n\n  // Workflow specific\n  WORKFLOW_RECHECK_DELAY: 5000,\n  LIVE_DURATION_UPDATE: 1000,\n} as const;\n\n// LocalStorage Keys\nexport const STORAGE_KEYS = {\n  WIDGET_POLL_INTERVAL: 'widget_poll_interval',\n  SERVICE_WORKFLOW_POLL_INTERVAL: 'service_workflow_poll_interval',\n  THEME: 'scorecards_theme',\n} as const;\n\n// Rank Definitions\nexport const RANKS: readonly RankName[] = ['platinum', 'gold', 'silver', 'bronze'];\n\n// Workflow Status Constants\nexport const WORKFLOW_STATUS = {\n  IN_PROGRESS: 'in_progress',\n  QUEUED: 'queued',\n  COMPLETED: 'completed',\n} as const;\n\nexport const WORKFLOW_CONCLUSION = {\n  SUCCESS: 'success',\n  FAILURE: 'failure',\n  CANCELLED: 'cancelled',\n} as const;\n\n// Type exports for the constants\nexport type WorkflowStatus = (typeof WORKFLOW_STATUS)[keyof typeof WORKFLOW_STATUS];\nexport type WorkflowConclusion = (typeof WORKFLOW_CONCLUSION)[keyof typeof WORKFLOW_CONCLUSION];\n","/**\n * SVG Icon Definitions\n * Centralized repository of all SVG icons used in the application\n */\n\nexport const ICONS = {\n  github: `<svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"currentColor\">\n        <path d=\"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z\"></path>\n    </svg>`,\n\n  refresh: `<svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"currentColor\">\n        <path d=\"M1.705 8.005a.75.75 0 0 1 .834.656 5.5 5.5 0 0 0 9.592 2.97l-1.204-1.204a.25.25 0 0 1 .177-.427h3.646a.25.25 0 0 1 .25.25v3.646a.25.25 0 0 1-.427.177l-1.38-1.38A7.002 7.002 0 0 1 1.05 8.84a.75.75 0 0 1 .656-.834ZM8 2.5a5.487 5.487 0 0 0-4.131 1.869l1.204 1.204A.25.25 0 0 1 4.896 6H1.25A.25.25 0 0 1 1 5.75V2.104a.25.25 0 0 1 .427-.177l1.38 1.38A7.002 7.002 0 0 1 14.95 7.16a.75.75 0 0 1-1.49.178A5.5 5.5 0 0 0 8 2.5Z\"></path>\n    </svg>`,\n\n  checkmark: `<svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"currentColor\">\n        <path d=\"M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z\"></path>\n    </svg>`,\n\n  xMark: `<svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"currentColor\">\n        <path d=\"M3.72 3.72a.75.75 0 0 1 1.06 0L8 6.94l3.22-3.22a.749.749 0 0 1 1.275.326.749.749 0 0 1-.215.734L9.06 8l3.22 3.22a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L8 9.06l-3.22 3.22a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042L6.94 8 3.72 4.78a.75.75 0 0 1 0-1.06Z\"></path>\n    </svg>`,\n\n  externalLink: `<svg width=\"12\" height=\"12\" viewBox=\"0 0 16 16\" fill=\"currentColor\">\n        <path d=\"M3.75 2h3.5a.75.75 0 0 1 0 1.5h-3.5a.25.25 0 0 0-.25.25v8.5c0 .138.112.25.25.25h8.5a.25.25 0 0 0 .25-.25v-3.5a.75.75 0 0 1 1.5 0v3.5A1.75 1.75 0 0 1 12.25 14h-8.5A1.75 1.75 0 0 1 2 12.25v-8.5C2 2.784 2.784 2 3.75 2Zm6.854-1h4.146a.25.25 0 0 1 .25.25v4.146a.25.25 0 0 1-.427.177L13.03 4.03 9.28 7.78a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042l3.75-3.75-1.543-1.543A.25.25 0 0 1 10.604 1Z\"></path>\n    </svg>`,\n\n  pullRequest: `<svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"currentColor\">\n        <path d=\"M1.5 3.25a2.25 2.25 0 1 1 3 2.122v5.256a2.251 2.251 0 1 1-1.5 0V5.372A2.25 2.25 0 0 1 1.5 3.25Zm5.677-.177L9.573.677A.25.25 0 0 1 10 .854V2.5h1A2.5 2.5 0 0 1 13.5 5v5.628a2.251 2.251 0 1 1-1.5 0V5a1 1 0 0 0-1-1h-1v1.646a.25.25 0 0 1-.427.177L7.177 3.427a.25.25 0 0 1 0-.354ZM3.75 2.5a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Zm0 9.5a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Zm8.25.75a.75.75 0 1 0 1.5 0 .75.75 0 0 0-1.5 0Z\"></path>\n    </svg>`,\n\n  download: `<svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"currentColor\">\n        <path d=\"M2.75 14A1.75 1.75 0 0 1 1 12.25v-2.5a.75.75 0 0 1 1.5 0v2.5c0 .138.112.25.25.25h10.5a.25.25 0 0 0 .25-.25v-2.5a.75.75 0 0 1 1.5 0v2.5A1.75 1.75 0 0 1 13.25 14Z\"></path>\n        <path d=\"M7.25 7.689V2a.75.75 0 0 1 1.5 0v5.689l1.97-1.969a.749.749 0 1 1 1.06 1.06l-3.25 3.25a.749.749 0 0 1-1.06 0L4.22 6.78a.749.749 0 1 1 1.06-1.06l1.97 1.969Z\"></path>\n    </svg>`,\n\n  arrowLeft: `<svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n        <path d=\"M15 18l-6-6 6-6\"></path>\n    </svg>`,\n\n  arrowRight: `<svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n        <path d=\"M9 18l6-6-6-6\"></path>\n    </svg>`,\n\n  chevronDown: `<svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n        <polyline points=\"6 9 12 15 18 9\"></polyline>\n    </svg>`,\n} as const;\n\nexport type IconName = keyof typeof ICONS;\n\nexport interface IconOptions {\n  size?: number;\n  className?: string;\n}\n\n/**\n * Get icon HTML with optional size override\n */\nexport function getIcon(name: IconName, options: IconOptions = {}): string {\n  const icon = ICONS[name];\n  if (!icon) {\n    console.warn(`Icon \"${name}\" not found`);\n    return '';\n  }\n\n  let result: string = icon;\n\n  if (options.size) {\n    result = result\n      .replace(/width=\"\\d+\"/, `width=\"${options.size}\"`)\n      .replace(/height=\"\\d+\"/, `height=\"${options.size}\"`);\n  }\n\n  if (options.className) {\n    result = result.replace('<svg', `<svg class=\"${options.className}\"`);\n  }\n\n  return result;\n}\n","/**\n * Formatting Utilities\n * Pure utility functions for formatting dates, times, and text\n */\n\n/**\n * Format timestamp as relative time\n */\nexport function formatRelativeTime(timestamp: string | Date | null | undefined): string {\n  if (!timestamp) {return 'Unknown';}\n\n  const now = new Date();\n  const date = new Date(timestamp);\n  const seconds = Math.floor((now.getTime() - date.getTime()) / 1000);\n\n  if (seconds < 60) {return 'Just now';}\n  if (seconds < 3600) {\n    const minutes = Math.floor(seconds / 60);\n    return `${minutes} minute${minutes !== 1 ? 's' : ''} ago`;\n  }\n  if (seconds < 86400) {\n    const hours = Math.floor(seconds / 3600);\n    return `${hours} hour${hours !== 1 ? 's' : ''} ago`;\n  }\n  if (seconds < 604800) {\n    const days = Math.floor(seconds / 86400);\n    return `${days} day${days !== 1 ? 's' : ''} ago`;\n  }\n\n  // For older dates, show the actual date\n  return date.toLocaleDateString();\n}\n\n/**\n * Format date with relative time for recent dates\n */\nexport function formatDate(dateString: string): string {\n  const date = new Date(dateString);\n  const now = new Date();\n  const diffMs = now.getTime() - date.getTime();\n  const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24));\n\n  if (diffDays === 0) {return 'Today';}\n  if (diffDays === 1) {return 'Yesterday';}\n  if (diffDays < 7) {return `${diffDays} days ago`;}\n  if (diffDays < 30) {return `${Math.floor(diffDays / 7)} weeks ago`;}\n\n  return date.toLocaleDateString('en-US', {\n    year: 'numeric',\n    month: 'short',\n    day: 'numeric',\n  });\n}\n\n/**\n * Format duration in milliseconds to human-readable string\n */\nexport function formatDuration(durationMs: number): string {\n  const seconds = Math.floor(durationMs / 1000);\n  const minutes = Math.floor(seconds / 60);\n  const hours = Math.floor(minutes / 60);\n\n  if (hours > 0) {\n    return `${hours}h ${minutes % 60}m ago`;\n  } else if (minutes > 0) {\n    return `${minutes}m ago`;\n  } else {\n    return `${seconds}s ago`;\n  }\n}\n\n/**\n * Format interval in milliseconds to human-readable string\n */\nexport function formatInterval(ms: number): string {\n  if (ms === 0) {\n    return 'Off';\n  } else if (ms < 60000) {\n    return `${ms / 1000} second${ms !== 1000 ? 's' : ''}`;\n  } else {\n    const minutes = ms / 60000;\n    return `${minutes} minute${minutes !== 1 ? 's' : ''}`;\n  }\n}\n\n/**\n * Escape HTML special characters to prevent XSS\n */\nexport function escapeHtml(text: string): string {\n  const div = document.createElement('div');\n  div.textContent = text;\n  return div.innerHTML;\n}\n\n/**\n * Capitalize first letter of string\n */\nexport function capitalize(str: string | null | undefined): string {\n  if (!str) {return '';}\n  return str.charAt(0).toUpperCase() + str.slice(1);\n}\n","/**\n * Cryptographic Utilities\n * MD5 hashing function for Gravatar email hash generation\n */\n\n/**\n * Calculate MD5 hash of a string\n * Used primarily for generating Gravatar hashes from email addresses\n */\nexport function md5(string: string): string {\n  function rotateLeft(lValue: number, iShiftBits: number): number {\n    return (lValue << iShiftBits) | (lValue >>> (32 - iShiftBits));\n  }\n\n  function addUnsigned(lX: number, lY: number): number {\n    const lX8 = lX & 0x80000000;\n    const lY8 = lY & 0x80000000;\n    const lX4 = lX & 0x40000000;\n    const lY4 = lY & 0x40000000;\n    const lResult = (lX & 0x3fffffff) + (lY & 0x3fffffff);\n    if (lX4 & lY4) {return lResult ^ 0x80000000 ^ lX8 ^ lY8;}\n    if (lX4 | lY4) {\n      if (lResult & 0x40000000) {return lResult ^ 0xc0000000 ^ lX8 ^ lY8;}\n      else {return lResult ^ 0x40000000 ^ lX8 ^ lY8;}\n    } else {return lResult ^ lX8 ^ lY8;}\n  }\n\n  function F(x: number, y: number, z: number): number {\n    return (x & y) | (~x & z);\n  }\n  function G(x: number, y: number, z: number): number {\n    return (x & z) | (y & ~z);\n  }\n  function H(x: number, y: number, z: number): number {\n    return x ^ y ^ z;\n  }\n  function I(x: number, y: number, z: number): number {\n    return y ^ (x | ~z);\n  }\n\n  function FF(\n    a: number,\n    b: number,\n    c: number,\n    d: number,\n    x: number,\n    s: number,\n    ac: number\n  ): number {\n    a = addUnsigned(a, addUnsigned(addUnsigned(F(b, c, d), x), ac));\n    return addUnsigned(rotateLeft(a, s), b);\n  }\n\n  function GG(\n    a: number,\n    b: number,\n    c: number,\n    d: number,\n    x: number,\n    s: number,\n    ac: number\n  ): number {\n    a = addUnsigned(a, addUnsigned(addUnsigned(G(b, c, d), x), ac));\n    return addUnsigned(rotateLeft(a, s), b);\n  }\n\n  function HH(\n    a: number,\n    b: number,\n    c: number,\n    d: number,\n    x: number,\n    s: number,\n    ac: number\n  ): number {\n    a = addUnsigned(a, addUnsigned(addUnsigned(H(b, c, d), x), ac));\n    return addUnsigned(rotateLeft(a, s), b);\n  }\n\n  function II(\n    a: number,\n    b: number,\n    c: number,\n    d: number,\n    x: number,\n    s: number,\n    ac: number\n  ): number {\n    a = addUnsigned(a, addUnsigned(addUnsigned(I(b, c, d), x), ac));\n    return addUnsigned(rotateLeft(a, s), b);\n  }\n\n  function convertToWordArray(string: string): number[] {\n    const lMessageLength = string.length;\n    const lNumberOfWords_temp1 = lMessageLength + 8;\n    const lNumberOfWords_temp2 =\n      (lNumberOfWords_temp1 - (lNumberOfWords_temp1 % 64)) / 64;\n    const lNumberOfWords = (lNumberOfWords_temp2 + 1) * 16;\n    const lWordArray: number[] = new Array(lNumberOfWords - 1);\n    let lBytePosition = 0;\n    let lByteCount = 0;\n    while (lByteCount < lMessageLength) {\n      const lWordCount = (lByteCount - (lByteCount % 4)) / 4;\n      lBytePosition = (lByteCount % 4) * 8;\n      lWordArray[lWordCount] =\n        lWordArray[lWordCount] | (string.charCodeAt(lByteCount) << lBytePosition);\n      lByteCount++;\n    }\n    const lWordCount = (lByteCount - (lByteCount % 4)) / 4;\n    lBytePosition = (lByteCount % 4) * 8;\n    lWordArray[lWordCount] = lWordArray[lWordCount] | (0x80 << lBytePosition);\n    lWordArray[lNumberOfWords - 2] = lMessageLength << 3;\n    lWordArray[lNumberOfWords - 1] = lMessageLength >>> 29;\n    return lWordArray;\n  }\n\n  function wordToHex(lValue: number): string {\n    let wordToHexValue = '';\n    for (let lCount = 0; lCount <= 3; lCount++) {\n      const lByte = (lValue >>> (lCount * 8)) & 255;\n      const wordToHexValue_temp = '0' + lByte.toString(16);\n      wordToHexValue =\n        wordToHexValue +\n        wordToHexValue_temp.substr(wordToHexValue_temp.length - 2, 2);\n    }\n    return wordToHexValue;\n  }\n\n  const x = convertToWordArray(string);\n  const S11 = 7,\n    S12 = 12,\n    S13 = 17,\n    S14 = 22;\n  const S21 = 5,\n    S22 = 9,\n    S23 = 14,\n    S24 = 20;\n  const S31 = 4,\n    S32 = 11,\n    S33 = 16,\n    S34 = 23;\n  const S41 = 6,\n    S42 = 10,\n    S43 = 15,\n    S44 = 21;\n\n  let a = 0x67452301,\n    b = 0xefcdab89,\n    c = 0x98badcfe,\n    d = 0x10325476;\n\n  for (let k = 0; k < x.length; k += 16) {\n    const AA = a,\n      BB = b,\n      CC = c,\n      DD = d;\n    a = FF(a, b, c, d, x[k + 0], S11, 0xd76aa478);\n    d = FF(d, a, b, c, x[k + 1], S12, 0xe8c7b756);\n    c = FF(c, d, a, b, x[k + 2], S13, 0x242070db);\n    b = FF(b, c, d, a, x[k + 3], S14, 0xc1bdceee);\n    a = FF(a, b, c, d, x[k + 4], S11, 0xf57c0faf);\n    d = FF(d, a, b, c, x[k + 5], S12, 0x4787c62a);\n    c = FF(c, d, a, b, x[k + 6], S13, 0xa8304613);\n    b = FF(b, c, d, a, x[k + 7], S14, 0xfd469501);\n    a = FF(a, b, c, d, x[k + 8], S11, 0x698098d8);\n    d = FF(d, a, b, c, x[k + 9], S12, 0x8b44f7af);\n    c = FF(c, d, a, b, x[k + 10], S13, 0xffff5bb1);\n    b = FF(b, c, d, a, x[k + 11], S14, 0x895cd7be);\n    a = FF(a, b, c, d, x[k + 12], S11, 0x6b901122);\n    d = FF(d, a, b, c, x[k + 13], S12, 0xfd987193);\n    c = FF(c, d, a, b, x[k + 14], S13, 0xa679438e);\n    b = FF(b, c, d, a, x[k + 15], S14, 0x49b40821);\n    a = GG(a, b, c, d, x[k + 1], S21, 0xf61e2562);\n    d = GG(d, a, b, c, x[k + 6], S22, 0xc040b340);\n    c = GG(c, d, a, b, x[k + 11], S23, 0x265e5a51);\n    b = GG(b, c, d, a, x[k + 0], S24, 0xe9b6c7aa);\n    a = GG(a, b, c, d, x[k + 5], S21, 0xd62f105d);\n    d = GG(d, a, b, c, x[k + 10], S22, 0x2441453);\n    c = GG(c, d, a, b, x[k + 15], S23, 0xd8a1e681);\n    b = GG(b, c, d, a, x[k + 4], S24, 0xe7d3fbc8);\n    a = GG(a, b, c, d, x[k + 9], S21, 0x21e1cde6);\n    d = GG(d, a, b, c, x[k + 14], S22, 0xc33707d6);\n    c = GG(c, d, a, b, x[k + 3], S23, 0xf4d50d87);\n    b = GG(b, c, d, a, x[k + 8], S24, 0x455a14ed);\n    a = GG(a, b, c, d, x[k + 13], S21, 0xa9e3e905);\n    d = GG(d, a, b, c, x[k + 2], S22, 0xfcefa3f8);\n    c = GG(c, d, a, b, x[k + 7], S23, 0x676f02d9);\n    b = GG(b, c, d, a, x[k + 12], S24, 0x8d2a4c8a);\n    a = HH(a, b, c, d, x[k + 5], S31, 0xfffa3942);\n    d = HH(d, a, b, c, x[k + 8], S32, 0x8771f681);\n    c = HH(c, d, a, b, x[k + 11], S33, 0x6d9d6122);\n    b = HH(b, c, d, a, x[k + 14], S34, 0xfde5380c);\n    a = HH(a, b, c, d, x[k + 1], S31, 0xa4beea44);\n    d = HH(d, a, b, c, x[k + 4], S32, 0x4bdecfa9);\n    c = HH(c, d, a, b, x[k + 7], S33, 0xf6bb4b60);\n    b = HH(b, c, d, a, x[k + 10], S34, 0xbebfbc70);\n    a = HH(a, b, c, d, x[k + 13], S31, 0x289b7ec6);\n    d = HH(d, a, b, c, x[k + 0], S32, 0xeaa127fa);\n    c = HH(c, d, a, b, x[k + 3], S33, 0xd4ef3085);\n    b = HH(b, c, d, a, x[k + 6], S34, 0x4881d05);\n    a = HH(a, b, c, d, x[k + 9], S31, 0xd9d4d039);\n    d = HH(d, a, b, c, x[k + 12], S32, 0xe6db99e5);\n    c = HH(c, d, a, b, x[k + 15], S33, 0x1fa27cf8);\n    b = HH(b, c, d, a, x[k + 2], S34, 0xc4ac5665);\n    a = II(a, b, c, d, x[k + 0], S41, 0xf4292244);\n    d = II(d, a, b, c, x[k + 7], S42, 0x432aff97);\n    c = II(c, d, a, b, x[k + 14], S43, 0xab9423a7);\n    b = II(b, c, d, a, x[k + 5], S44, 0xfc93a039);\n    a = II(a, b, c, d, x[k + 12], S41, 0x655b59c3);\n    d = II(d, a, b, c, x[k + 3], S42, 0x8f0ccc92);\n    c = II(c, d, a, b, x[k + 10], S43, 0xffeff47d);\n    b = II(b, c, d, a, x[k + 1], S44, 0x85845dd1);\n    a = II(a, b, c, d, x[k + 8], S41, 0x6fa87e4f);\n    d = II(d, a, b, c, x[k + 15], S42, 0xfe2ce6e0);\n    c = II(c, d, a, b, x[k + 6], S43, 0xa3014314);\n    b = II(b, c, d, a, x[k + 13], S44, 0x4e0811a1);\n    a = II(a, b, c, d, x[k + 4], S41, 0xf7537e82);\n    d = II(d, a, b, c, x[k + 11], S42, 0xbd3af235);\n    c = II(c, d, a, b, x[k + 2], S43, 0x2ad7d2bb);\n    b = II(b, c, d, a, x[k + 9], S44, 0xeb86d391);\n    a = addUnsigned(a, AA);\n    b = addUnsigned(b, BB);\n    c = addUnsigned(c, CC);\n    d = addUnsigned(d, DD);\n  }\n\n  return (wordToHex(a) + wordToHex(b) + wordToHex(c) + wordToHex(d)).toLowerCase();\n}\n","/**\n * CSS Utilities\n * Helper functions for CSS variable access in JavaScript\n */\n\n/**\n * Get computed CSS variable value\n */\nexport function getCssVar(varName: string): string {\n  // Normalize variable name (add -- prefix if not present)\n  const normalizedName = varName.startsWith('--') ? varName : `--${varName}`;\n  return getComputedStyle(document.documentElement)\n    .getPropertyValue(normalizedName)\n    .trim();\n}\n\n/**\n * Set a CSS variable value\n */\nexport function setCssVar(varName: string, value: string): void {\n  const normalizedName = varName.startsWith('--') ? varName : `--${varName}`;\n  document.documentElement.style.setProperty(normalizedName, value);\n}\n","/**\n * Clipboard Utilities\n * Functions for copying text to clipboard with fallback support\n */\n\nimport { getCssVar } from './css.js';\nimport { TIMING } from '../config/constants.js';\n\n/**\n * Fallback method for copying to clipboard using legacy execCommand\n */\nfunction fallbackCopyToClipboard(text: string): boolean {\n  const textArea = document.createElement('textarea');\n  textArea.value = text;\n  textArea.style.position = 'fixed';\n  textArea.style.left = '-999999px';\n  textArea.style.top = '-999999px';\n  document.body.appendChild(textArea);\n  textArea.focus();\n  textArea.select();\n\n  try {\n    const successful = document.execCommand('copy');\n    document.body.removeChild(textArea);\n    return successful;\n  } catch (_err) {\n    document.body.removeChild(textArea);\n    return false;\n  }\n}\n\n/**\n * Copy badge code to clipboard with visual feedback\n */\nexport async function copyBadgeCode(\n  elementId: string,\n  event?: Event | null\n): Promise<void> {\n  const element = document.getElementById(elementId);\n  if (!element) {return;}\n\n  const text = element.textContent || '';\n  const button = (event?.currentTarget || event?.target) as HTMLElement | null;\n\n  try {\n    // Try modern Clipboard API first (requires HTTPS or localhost)\n    if (navigator.clipboard && window.isSecureContext) {\n      await navigator.clipboard.writeText(text);\n    } else {\n      // Fallback for non-HTTPS or older browsers\n      const success = fallbackCopyToClipboard(text);\n      if (!success) {\n        throw new Error('Fallback copy failed');\n      }\n    }\n\n    // Success feedback\n    if (button) {\n      const originalText = button.textContent || '';\n      button.textContent = 'Copied!';\n      (button as HTMLElement).style.background = getCssVar('--color-copy-success');\n\n      setTimeout(() => {\n        button.textContent = originalText;\n        (button as HTMLElement).style.background = getCssVar('--color-copy-default');\n      }, TIMING.BUTTON_FEEDBACK);\n    }\n  } catch (err) {\n    console.error('Failed to copy:', err);\n\n    // Provide specific error messages\n    let message = 'Failed to copy to clipboard. ';\n    if (!window.isSecureContext) {\n      message += 'This page must be served over HTTPS.';\n    } else if (err instanceof Error && err.name === 'NotAllowedError') {\n      message += 'Please allow clipboard access in your browser.';\n    } else {\n      message += 'Please select and copy the text manually.';\n    }\n\n    alert(message);\n  }\n}\n","/**\n * DOM Utilities\n * Helper functions for DOM manipulation\n */\n\nexport interface ElementAttributes {\n  className?: string;\n  style?: Partial<CSSStyleDeclaration>;\n  dataset?: Record<string, string>;\n  [key: string]: unknown;\n}\n\nexport type ElementChild = string | HTMLElement | null | undefined;\n\n/**\n * Create an element with attributes and children\n */\nexport function createElement<K extends keyof HTMLElementTagNameMap>(\n  tag: K,\n  attrs: ElementAttributes = {},\n  children: ElementChild | ElementChild[] = []\n): HTMLElementTagNameMap[K] {\n  const element = document.createElement(tag);\n\n  // Set attributes\n  Object.entries(attrs).forEach(([key, value]) => {\n    if (key === 'className' && typeof value === 'string') {\n      element.className = value;\n    } else if (key === 'style' && typeof value === 'object' && value !== null) {\n      Object.assign(element.style, value);\n    } else if (key.startsWith('on') && typeof value === 'function') {\n      element.addEventListener(\n        key.substring(2).toLowerCase(),\n        value as EventListener\n      );\n    } else if (key === 'dataset' && typeof value === 'object' && value !== null) {\n      Object.entries(value as Record<string, string>).forEach(\n        ([dataKey, dataValue]) => {\n          element.dataset[dataKey] = dataValue;\n        }\n      );\n    } else if (typeof value === 'string' || typeof value === 'number') {\n      element.setAttribute(key, String(value));\n    }\n  });\n\n  // Add children\n  const childArray = Array.isArray(children) ? children : [children];\n  childArray.forEach((child) => {\n    if (typeof child === 'string') {\n      element.appendChild(document.createTextNode(child));\n    } else if (child instanceof HTMLElement) {\n      element.appendChild(child);\n    }\n  });\n\n  return element;\n}\n\n/**\n * Show an element\n */\nexport function show(element: HTMLElement | string | null): void {\n  const el =\n    typeof element === 'string' ? document.querySelector<HTMLElement>(element) : element;\n  if (el) {el.style.display = '';}\n}\n\n/**\n * Hide an element\n */\nexport function hide(element: HTMLElement | string | null): void {\n  const el =\n    typeof element === 'string' ? document.querySelector<HTMLElement>(element) : element;\n  if (el) {el.style.display = 'none';}\n}\n\n/**\n * Toggle element visibility\n */\nexport function toggle(element: HTMLElement | string | null): void {\n  const el =\n    typeof element === 'string' ? document.querySelector<HTMLElement>(element) : element;\n  if (el) {\n    el.style.display = el.style.display === 'none' ? '' : 'none';\n  }\n}\n\n/**\n * Add event listener with delegation\n */\nexport function delegateEvent(\n  parent: HTMLElement,\n  selector: string,\n  event: string,\n  handler: (this: HTMLElement, e: Event) => void\n): void {\n  parent.addEventListener(event, (e: Event) => {\n    const target = (e.target as HTMLElement).closest<HTMLElement>(selector);\n    if (target) {\n      handler.call(target, e);\n    }\n  });\n}\n\n/**\n * Add or remove a class from an element\n */\nexport function toggleClass(\n  element: HTMLElement | string | null,\n  className: string,\n  add: boolean\n): void {\n  const el =\n    typeof element === 'string' ? document.querySelector<HTMLElement>(element) : element;\n  if (el) {\n    if (add) {\n      el.classList.add(className);\n    } else {\n      el.classList.remove(className);\n    }\n  }\n}\n\n/**\n * Set innerHTML safely (for trusted content only)\n */\nexport function setHTML(element: HTMLElement | string | null, html: string): void {\n  const el =\n    typeof element === 'string' ? document.querySelector<HTMLElement>(element) : element;\n  if (el) {\n    el.innerHTML = html;\n  }\n}\n","/**\n * Animation Utilities\n * Reusable animation helper functions\n */\n\n/**\n * Start spinning animation on a button's SVG icon\n */\nexport function startButtonSpin(button: HTMLElement | null): void {\n  if (!button) {return;}\n\n  const svg =\n    button.tagName === 'svg' ? button : button.querySelector('svg');\n  if (svg) {\n    (svg as HTMLElement).style.animation = 'spin 1s linear infinite';\n  }\n}\n\n/**\n * Stop spinning animation on a button's SVG icon\n */\nexport function stopButtonSpin(button: HTMLElement | null): void {\n  if (!button) {return;}\n\n  const svg =\n    button.tagName === 'svg' ? button : button.querySelector('svg');\n  if (svg) {\n    (svg as HTMLElement).style.animation = '';\n  }\n}\n\n/**\n * Add spinning class to element (uses CSS animation)\n */\nexport function addSpinningClass(element: HTMLElement | null): void {\n  if (!element) {return;}\n\n  const svg =\n    element.tagName === 'svg' ? element : element.querySelector('svg');\n  if (svg) {\n    svg.classList.add('spinning');\n  }\n}\n\n/**\n * Remove spinning class from element\n */\nexport function removeSpinningClass(element: HTMLElement | null): void {\n  if (!element) {return;}\n\n  const svg =\n    element.tagName === 'svg' ? element : element.querySelector('svg');\n  if (svg) {\n    svg.classList.remove('spinning');\n  }\n}\n","/**\n * Statistics Calculation Utilities\n * Reusable functions for calculating service statistics\n */\n\nimport { RANKS } from '../config/constants.js';\nimport type { ServiceData, RankCounts } from '../types/index.js';\n\nexport interface ServiceStats {\n  total: number;\n  avgScore: number;\n  ranks: RankCounts;\n  apiCount: number;\n  staleCount: number;\n  installedCount: number;\n}\n\n/**\n * Count services by rank\n */\nexport function countByRank(services: ServiceData[]): RankCounts {\n  const counts: RankCounts = {\n    platinum: 0,\n    gold: 0,\n    silver: 0,\n    bronze: 0,\n  };\n  RANKS.forEach((rank) => {\n    counts[rank] = services.filter((s) => s.rank === rank).length;\n  });\n  return counts;\n}\n\n/**\n * Calculate average score for services\n */\nexport function calculateAverageScore(services: ServiceData[]): number {\n  if (!services || services.length === 0) {return 0;}\n  const total = services.reduce((sum, s) => sum + (s.score || 0), 0);\n  return Math.round(total / services.length);\n}\n\nexport type StalenessCheckFn = (service: ServiceData, hash: string | null) => boolean;\n\n/**\n * Calculate comprehensive statistics for services\n */\nexport function calculateServiceStats(\n  services: ServiceData[],\n  isStaleCheck: StalenessCheckFn | null,\n  checksHash: string | null\n): ServiceStats {\n  return {\n    total: services.length,\n    avgScore: calculateAverageScore(services),\n    ranks: countByRank(services),\n    apiCount: services.filter((s) => s.has_api).length,\n    staleCount: isStaleCheck\n      ? services.filter((s) => isStaleCheck(s, checksHash)).length\n      : 0,\n    installedCount: services.filter((s) => s.installed).length,\n  };\n}\n","/**\n * Team Statistics Utilities\n * Functions for calculating and managing team statistics from services\n */\n\nimport { RANKS } from '../config/constants.js';\nimport { countByRank, calculateAverageScore } from './statistics.js';\nimport type { ServiceData, RankName, RankCounts } from '../types/index.js';\n\nexport interface SingleTeamStats {\n  serviceCount: number;\n  averageScore: number;\n  rankDistribution: RankCounts;\n  staleCount: number;\n  installedCount: number;\n}\n\nexport interface TeamStatsEntry extends SingleTeamStats {\n  name: string;\n  github_org: string | null;\n  github_slug: string | null;\n}\n\nexport interface MergedTeamData {\n  id: string;\n  name: string;\n  description: string | null;\n  aliases: string[];\n  metadata: Record<string, unknown>;\n  statistics: SingleTeamStats;\n}\n\nexport interface TeamsJsonData {\n  teams?: Record<string, {\n    name?: string;\n    description?: string;\n    aliases?: string[];\n    metadata?: Record<string, unknown>;\n  }>;\n}\n\nexport type StalenessCheckFn = (service: ServiceData, hash: string | null) => boolean;\n\n/**\n * Get team name from service (handles both string and object formats)\n */\nexport function getTeamName(service: ServiceData): string | null {\n  if (!service.team) {return null;}\n  if (typeof service.team === 'string') {return service.team;}\n  return service.team.primary || service.team.all?.[0] || null;\n}\n\n/**\n * Get all team names from service\n */\nexport function getAllTeams(service: ServiceData): string[] {\n  if (!service.team) {return [];}\n  if (typeof service.team === 'string') {return [service.team];}\n  return service.team.all || (service.team.primary ? [service.team.primary] : []);\n}\n\n/**\n * Get unique teams from services array\n */\nexport function getUniqueTeams(services: ServiceData[]): string[] {\n  const teams = new Set<string>();\n  services.forEach((service) => {\n    const team = getTeamName(service);\n    if (team) {teams.add(team);}\n  });\n  return Array.from(teams).sort((a, b) => a.localeCompare(b));\n}\n\n/**\n * Get team count from services\n */\nexport function getTeamCount(services: ServiceData[]): number {\n  return getUniqueTeams(services).length;\n}\n\n/**\n * Calculate statistics for a single team\n */\nexport function calculateSingleTeamStats(\n  services: ServiceData[],\n  isStaleCheck: StalenessCheckFn | null,\n  checksHash: string | null\n): SingleTeamStats {\n  return {\n    serviceCount: services.length,\n    averageScore: calculateAverageScore(services),\n    rankDistribution: countByRank(services),\n    staleCount: isStaleCheck\n      ? services.filter((s) => isStaleCheck(s, checksHash)).length\n      : 0,\n    installedCount: services.filter((s) => s.installed).length,\n  };\n}\n\n/**\n * Calculate statistics for all teams\n */\nexport function calculateTeamStats(\n  services: ServiceData[],\n  isStaleCheck: StalenessCheckFn | null = null,\n  checksHash: string | null = null\n): Record<string, TeamStatsEntry> {\n  const teamServices: Record<string, ServiceData[]> = {};\n  const teamGitHubInfo: Record<string, { github_org: string | null; github_slug: string | null }> = {};\n\n  // Group services by primary team\n  services.forEach((service) => {\n    const team = getTeamName(service);\n    if (!team) {return;}\n\n    if (!teamServices[team]) {\n      teamServices[team] = [];\n      // Extract GitHub info from first service with this team\n      if (service.team && typeof service.team === 'object') {\n        teamGitHubInfo[team] = {\n          github_org: service.team.github_org || null,\n          github_slug: service.team.github_slug || null,\n        };\n      }\n    }\n    teamServices[team].push(service);\n  });\n\n  // Calculate stats for each team\n  const teamStats: Record<string, TeamStatsEntry> = {};\n  Object.entries(teamServices).forEach(([team, teamServiceList]) => {\n    teamStats[team] = {\n      name: team,\n      ...calculateSingleTeamStats(teamServiceList, isStaleCheck, checksHash),\n      // Include GitHub linking info\n      github_org: teamGitHubInfo[team]?.github_org || null,\n      github_slug: teamGitHubInfo[team]?.github_slug || null,\n    };\n  });\n\n  return teamStats;\n}\n\nexport type TeamSortBy = 'name' | 'serviceCount' | 'averageScore' | 'staleCount';\nexport type SortDirection = 'asc' | 'desc';\n\n/**\n * Sort team statistics by various criteria\n */\nexport function sortTeamStats(\n  teamStats: Record<string, TeamStatsEntry>,\n  sortBy: TeamSortBy = 'serviceCount',\n  direction: SortDirection = 'desc'\n): TeamStatsEntry[] {\n  const teams = Object.values(teamStats);\n\n  const sortFunctions: Record<TeamSortBy, (a: TeamStatsEntry, b: TeamStatsEntry) => number> = {\n    name: (a, b) => a.name.localeCompare(b.name),\n    serviceCount: (a, b) => a.serviceCount - b.serviceCount,\n    averageScore: (a, b) => a.averageScore - b.averageScore,\n    staleCount: (a, b) => a.staleCount - b.staleCount,\n  };\n\n  const sortFn = sortFunctions[sortBy] || sortFunctions.serviceCount;\n  const multiplier = direction === 'asc' ? 1 : -1;\n\n  return teams.sort((a, b) => sortFn(a, b) * multiplier);\n}\n\n/**\n * Get services for a specific team\n */\nexport function getServicesForTeam(\n  services: ServiceData[],\n  teamName: string\n): ServiceData[] {\n  return services.filter((service) => {\n    const teams = getAllTeams(service);\n    return teams.includes(teamName);\n  });\n}\n\n/**\n * Get services without a team assigned\n */\nexport function getServicesWithoutTeam(services: ServiceData[]): ServiceData[] {\n  return services.filter((service) => !getTeamName(service));\n}\n\n/**\n * Merge team data from all-teams.json with calculated statistics\n */\nexport function mergeTeamDataWithStats(\n  teamsData: TeamsJsonData | null,\n  calculatedStats: Record<string, TeamStatsEntry>\n): Record<string, MergedTeamData> {\n  const merged: Record<string, MergedTeamData> = {};\n\n  // Start with teams from the teams.json file\n  if (teamsData && teamsData.teams) {\n    Object.entries(teamsData.teams).forEach(([teamId, teamData]) => {\n      const teamName = teamData.name || teamId;\n      const stats = calculatedStats[teamName] || {\n        serviceCount: 0,\n        averageScore: 0,\n        rankDistribution: { platinum: 0, gold: 0, silver: 0, bronze: 0 },\n        staleCount: 0,\n        installedCount: 0,\n      };\n\n      merged[teamId] = {\n        id: teamId,\n        name: teamName,\n        description: teamData.description || null,\n        aliases: teamData.aliases || [],\n        metadata: teamData.metadata || {},\n        statistics: stats,\n      };\n    });\n  }\n\n  // Add any teams found in services but not in teams.json\n  Object.entries(calculatedStats).forEach(([teamName, stats]) => {\n    const teamId = teamName.toLowerCase().replace(/\\s+/g, '-');\n    if (!merged[teamId]) {\n      merged[teamId] = {\n        id: teamId,\n        name: teamName,\n        description: null,\n        aliases: [],\n        metadata: {},\n        statistics: stats,\n      };\n    }\n  });\n\n  return merged;\n}\n\n/**\n * Build rank distribution summary string\n */\nexport function buildRankSummary(rankDistribution: RankCounts | null): string {\n  if (!rankDistribution) {return '';}\n\n  const parts: string[] = [];\n  RANKS.forEach((rank) => {\n    const count = rankDistribution[rank] || 0;\n    if (count > 0) {\n      parts.push(`${count} ${rank.charAt(0).toUpperCase() + rank.slice(1)}`);\n    }\n  });\n\n  return parts.join(', ');\n}\n\n/**\n * Get rank for a team based on average score\n */\nexport function getRank(team: { averageScore?: number }): RankName {\n  const score = team.averageScore || 0;\n  if (score >= 90) {return 'platinum';}\n  if (score >= 75) {return 'gold';}\n  if (score >= 50) {return 'silver';}\n  return 'bronze';\n}\n","/**\n * Check Statistics Utilities\n * Functions for calculating check adoption and statistics\n */\n\nimport { getTeamName } from './team-statistics.js';\nimport type { ServiceData, RankName, CheckStatus } from '../types/index.js';\n\nexport interface ServiceCheckInfo {\n  org: string;\n  repo: string;\n  name: string;\n  score: number;\n  rank: RankName;\n  exclusionReason?: string | null;\n  checkStatus?: CheckStatus | 'excluded' | 'unknown';\n}\n\nexport interface CheckAdoptionStats {\n  total: number;\n  activeTotal: number;\n  passing: number;\n  failing: number;\n  excluded: number;\n  unknown: number;\n  percentage: number;\n}\n\nexport interface TeamCheckStats extends CheckAdoptionStats {\n  services: ServiceCheckInfo[];\n}\n\nexport interface CheckAdoptionEntry extends CheckAdoptionStats {\n  checkId: string;\n  name: string;\n  category: string;\n  weight: number;\n}\n\nexport interface TeamAdoptionEntry extends TeamCheckStats {\n  teamName: string;\n}\n\n/**\n * Check if a service has a specific check excluded\n */\nexport function isCheckExcluded(service: ServiceData, checkId: string): boolean {\n  return service.excluded_checks?.some((e) => e.check === checkId) ?? false;\n}\n\n/**\n * Get exclusion reason for a check\n */\nexport function getExclusionReason(\n  service: ServiceData,\n  checkId: string\n): string | null {\n  return service.excluded_checks?.find((e) => e.check === checkId)?.reason ?? null;\n}\n\n/**\n * Get services that have excluded a specific check\n */\nexport function getExcludedServicesForCheck(\n  services: ServiceData[],\n  checkId: string\n): ServiceCheckInfo[] {\n  return services\n    .filter((s) => isCheckExcluded(s, checkId))\n    .map((s) => ({\n      org: s.org,\n      repo: s.repo,\n      name: s.name,\n      score: s.score,\n      rank: s.rank,\n      exclusionReason: getExclusionReason(s, checkId),\n    }));\n}\n\n/**\n * Calculate overall check adoption for a specific check\n * Excluded services are not counted in the denominator for percentage\n */\nexport function calculateOverallCheckAdoption(\n  services: ServiceData[],\n  checkId: string\n): CheckAdoptionStats {\n  let passing = 0;\n  let failing = 0;\n  let excluded = 0;\n  let unknown = 0;\n\n  for (const service of services) {\n    // Check if this check is excluded for this service\n    if (isCheckExcluded(service, checkId)) {\n      excluded++;\n      continue;\n    }\n\n    const status = service.check_results?.[checkId];\n    if (status === 'pass') {\n      passing++;\n    } else if (status === 'fail') {\n      failing++;\n    } else {\n      unknown++;\n    }\n  }\n\n  const total = services.length;\n  const activeTotal = total - excluded;\n  const percentage = activeTotal > 0 ? Math.round((passing / activeTotal) * 100) : 0;\n\n  return {\n    total,\n    activeTotal,\n    passing,\n    failing,\n    excluded,\n    unknown,\n    percentage,\n  };\n}\n\n/**\n * Calculate check adoption by team\n * Excluded services are tracked separately and not counted in percentage\n */\nexport function calculateCheckAdoptionByTeam(\n  services: ServiceData[],\n  checkId: string\n): Record<string, TeamCheckStats> {\n  const teamStats: Record<string, TeamCheckStats> = {};\n\n  for (const service of services) {\n    const teamName = getTeamName(service) || 'No Team';\n\n    if (!teamStats[teamName]) {\n      teamStats[teamName] = {\n        total: 0,\n        activeTotal: 0,\n        passing: 0,\n        failing: 0,\n        excluded: 0,\n        unknown: 0,\n        percentage: 0,\n        services: [],\n      };\n    }\n\n    const stats = teamStats[teamName];\n    stats.total++;\n\n    // Check if this check is excluded for this service\n    const isExcluded = isCheckExcluded(service, checkId);\n\n    if (isExcluded) {\n      stats.excluded++;\n      stats.services.push({\n        org: service.org,\n        repo: service.repo,\n        name: service.name,\n        score: service.score,\n        rank: service.rank,\n        checkStatus: 'excluded',\n        exclusionReason: getExclusionReason(service, checkId),\n      });\n      continue;\n    }\n\n    const status = service.check_results?.[checkId];\n    if (status === 'pass') {\n      stats.passing++;\n    } else if (status === 'fail') {\n      stats.failing++;\n    } else {\n      stats.unknown++;\n    }\n\n    stats.services.push({\n      org: service.org,\n      repo: service.repo,\n      name: service.name,\n      score: service.score,\n      rank: service.rank,\n      checkStatus: status || 'unknown',\n    });\n  }\n\n  // Calculate percentages and sort services\n  for (const teamName of Object.keys(teamStats)) {\n    const stats = teamStats[teamName];\n    // Active total excludes excluded services\n    stats.activeTotal = stats.total - stats.excluded;\n    stats.percentage =\n      stats.activeTotal > 0\n        ? Math.round((stats.passing / stats.activeTotal) * 100)\n        : 0;\n\n    // Sort services: passing first, then failing, then excluded, then by score\n    stats.services.sort((a, b) => {\n      const order: Record<string, number> = { pass: 0, fail: 1, excluded: 2, unknown: 3 };\n      const orderA = order[a.checkStatus || 'unknown'] ?? 3;\n      const orderB = order[b.checkStatus || 'unknown'] ?? 3;\n      if (orderA !== orderB) {return orderA - orderB;}\n      return b.score - a.score;\n    });\n  }\n\n  return teamStats;\n}\n\nexport type CheckFilterMap = Map<string, CheckStatus | null>;\n\n/**\n * Filter services by check criteria\n */\nexport function filterByCheckCriteria(\n  services: ServiceData[],\n  checkFilters: CheckFilterMap | null\n): ServiceData[] {\n  if (!checkFilters || checkFilters.size === 0) {\n    return services;\n  }\n\n  return services.filter((service) => {\n    for (const [checkId, requiredStatus] of checkFilters) {\n      // Skip if no filter set for this check\n      if (requiredStatus === null || requiredStatus === undefined) {\n        continue;\n      }\n\n      const actualStatus = service.check_results?.[checkId];\n\n      // Apply filter based on required status\n      if (requiredStatus === 'pass' && actualStatus !== 'pass') {\n        return false;\n      }\n      if (requiredStatus === 'fail' && actualStatus !== 'fail') {\n        return false;\n      }\n    }\n    return true;\n  });\n}\n\n/**\n * Get services that pass a specific check\n */\nexport function getServicesPassingCheck(\n  services: ServiceData[],\n  checkId: string\n): ServiceData[] {\n  return services.filter((s) => s.check_results?.[checkId] === 'pass');\n}\n\n/**\n * Get services that fail a specific check\n */\nexport function getServicesFailingCheck(\n  services: ServiceData[],\n  checkId: string\n): ServiceData[] {\n  return services.filter((s) => s.check_results?.[checkId] === 'fail');\n}\n\nexport interface CheckMetadata {\n  id: string;\n  name: string;\n  category: string;\n  weight: number;\n}\n\n/**\n * Get check adoption statistics for all checks\n */\nexport function getAllChecksAdoptionStats(\n  services: ServiceData[],\n  checks: CheckMetadata[]\n): CheckAdoptionEntry[] {\n  return checks.map((check) => {\n    const adoption = calculateOverallCheckAdoption(services, check.id);\n    return {\n      checkId: check.id,\n      name: check.name,\n      category: check.category,\n      weight: check.weight,\n      ...adoption,\n    };\n  });\n}\n\n/**\n * Sort teams by adoption percentage\n */\nexport function sortTeamsByAdoption(\n  teamStats: Record<string, TeamCheckStats>,\n  direction: 'asc' | 'desc' = 'desc'\n): TeamAdoptionEntry[] {\n  const entries = Object.entries(teamStats).map(([teamName, stats]) => ({\n    teamName,\n    ...stats,\n  }));\n\n  entries.sort((a, b) => {\n    const diff = a.percentage - b.percentage;\n    return direction === 'desc' ? -diff : diff;\n  });\n\n  return entries;\n}\n\n/**\n * Get active check filter count\n */\nexport function getActiveCheckFilterCount(checkFilters: CheckFilterMap | null): number {\n  if (!checkFilters) {return 0;}\n\n  let count = 0;\n  for (const [, status] of checkFilters) {\n    if (status !== null && status !== undefined) {\n      count++;\n    }\n  }\n  return count;\n}\n","/**\n * Duration Tracker Utilities\n * Live duration updates for workflow runs\n */\n\nimport { formatDuration } from './formatting.js';\nimport { TIMING } from '../config/constants.js';\n\n// Store interval IDs for cleanup\nconst intervals = new Map<string, ReturnType<typeof setInterval>>();\n\n/**\n * Start live duration updates for workflow elements in a container\n */\nexport function startLiveDurationUpdates(\n  containerSelector: string,\n  id: string = 'default'\n): ReturnType<typeof setInterval> | null {\n  // Clear any existing interval with the same ID\n  stopLiveDurationUpdates(id);\n\n  const container = document.querySelector(containerSelector);\n  if (!container) {\n    return null;\n  }\n\n  const intervalId = setInterval(() => {\n    const currentContainer = document.querySelector(containerSelector);\n    if (!currentContainer) {\n      stopLiveDurationUpdates(id);\n      return;\n    }\n\n    updateDurationElements(currentContainer as HTMLElement);\n  }, TIMING.LIVE_DURATION_UPDATE);\n\n  intervals.set(id, intervalId);\n  return intervalId;\n}\n\n/**\n * Stop live duration updates\n */\nexport function stopLiveDurationUpdates(id: string = 'default'): void {\n  const intervalId = intervals.get(id);\n  if (intervalId) {\n    clearInterval(intervalId);\n    intervals.delete(id);\n  }\n}\n\n/**\n * Stop all live duration trackers\n */\nexport function stopAllDurationUpdates(): void {\n  intervals.forEach((intervalId) => {\n    clearInterval(intervalId);\n  });\n  intervals.clear();\n}\n\n/**\n * Update all duration elements in a container\n */\nfunction updateDurationElements(container: HTMLElement): void {\n  const elements = container.querySelectorAll<HTMLElement>('.widget-run-duration');\n\n  elements.forEach((el) => {\n    const startedAt = el.dataset.started;\n    const status = el.dataset.status;\n\n    if (startedAt) {\n      const start = new Date(startedAt);\n      const now = new Date();\n      const durationMs = now.getTime() - start.getTime();\n\n      const timeStr = formatDuration(durationMs);\n\n      let label: string;\n      if (status === 'in_progress') {\n        label = 'Running for';\n      } else if (status === 'queued') {\n        label = 'Queued';\n      } else {\n        label = 'Completed';\n      }\n\n      el.textContent = `${label} ${timeStr}`;\n    }\n  });\n}\n","/**\n * Toast Notification System\n * Function for displaying temporary notification messages\n */\n\nimport { escapeHtml } from '../utils/formatting.js';\n\nexport type ToastType = 'info' | 'success' | 'error' | 'warning';\n\n/**\n * Show a toast notification\n */\nexport function showToast(message: string, type: ToastType = 'info'): void {\n  // Create toast container if it doesn't exist\n  let container = document.getElementById('toast-container');\n  if (!container) {\n    container = document.createElement('div');\n    container.id = 'toast-container';\n    document.body.appendChild(container);\n  }\n\n  // Create toast element\n  const toast = document.createElement('div');\n  toast.className = `toast toast-${type}`;\n\n  // Add icon based on type\n  let icon = '';\n  switch (type) {\n  case 'success':\n    icon = '✓';\n    break;\n  case 'error':\n    icon = '✗';\n    break;\n  case 'warning':\n    icon = '⚠';\n    break;\n  case 'info':\n  default:\n    icon = 'ℹ';\n    break;\n  }\n\n  toast.innerHTML = `\n        <span class=\"toast-icon\">${icon}</span>\n        <span class=\"toast-message\">${escapeHtml(message)}</span>\n    `;\n\n  // Add to container\n  container.appendChild(toast);\n\n  // Trigger animation\n  setTimeout(() => {\n    toast.classList.add('show');\n  }, 10);\n\n  // Remove after delay\n  setTimeout(() => {\n    toast.classList.remove('show');\n    setTimeout(() => {\n      container?.removeChild(toast);\n    }, 300);\n  }, 5000);\n}\n","/**\n * Modal Management\n * Functions for opening, closing, and managing modal dialogs\n */\n\n/**\n * Show a modal by ID\n */\nexport function showModal(modalId: string): void {\n  const modal = document.getElementById(modalId);\n  if (modal) {\n    modal.classList.remove('hidden');\n    // Prevent body scroll when modal is open\n    document.body.style.overflow = 'hidden';\n  }\n}\n\n/**\n * Hide a modal by ID\n */\nexport function hideModal(modalId: string): void {\n  const modal = document.getElementById(modalId);\n  if (modal) {\n    modal.classList.add('hidden');\n    // Restore body scroll\n    document.body.style.overflow = '';\n  }\n}\n\n/**\n * Toggle a modal's visibility\n */\nexport function toggleModal(modalId: string): void {\n  const modal = document.getElementById(modalId);\n  if (modal) {\n    if (modal.classList.contains('hidden')) {\n      showModal(modalId);\n    } else {\n      hideModal(modalId);\n    }\n  }\n}\n\n/**\n * Close all modals\n */\nexport function closeAllModals(): void {\n  const modals = document.querySelectorAll('[id$=\"-modal\"]');\n  modals.forEach((modal) => {\n    modal.classList.add('hidden');\n  });\n  document.body.style.overflow = '';\n}\n\n/**\n * Setup modal close handlers (click outside, ESC key)\n */\nexport function setupModalHandlers(\n  modalId: string,\n  onClose: (() => void) | null = null\n): void {\n  const modal = document.getElementById(modalId);\n  if (!modal) {return;}\n\n  // Close on click outside\n  modal.addEventListener('click', (e: MouseEvent) => {\n    if (e.target === modal) {\n      hideModal(modalId);\n      if (onClose) {onClose();}\n    }\n  });\n\n  // Close on ESC key\n  document.addEventListener('keydown', (e: KeyboardEvent) => {\n    if (e.key === 'Escape' && !modal.classList.contains('hidden')) {\n      hideModal(modalId);\n      if (onClose) {onClose();}\n    }\n  });\n}\n\n/**\n * Create a simple confirmation dialog\n */\nexport function showConfirmation(\n  message: string,\n  onConfirm: () => void,\n  onCancel: (() => void) | null = null\n): void {\n  // Use native confirm for simplicity (can be replaced with custom modal)\n  if (confirm(message)) {\n    onConfirm();\n  } else if (onCancel) {\n    onCancel();\n  }\n}\n\n/**\n * Update modal content\n */\nexport function updateModalContent(\n  modalId: string,\n  contentSelector: string,\n  content: string | HTMLElement\n): void {\n  const modal = document.getElementById(modalId);\n  if (!modal) {return;}\n\n  const contentElement = modal.querySelector(contentSelector);\n  if (!contentElement) {return;}\n\n  if (typeof content === 'string') {\n    contentElement.innerHTML = content;\n  } else if (content instanceof HTMLElement) {\n    contentElement.innerHTML = '';\n    contentElement.appendChild(content);\n  }\n}\n\n/**\n * Set modal title\n */\nexport function setModalTitle(modalId: string, title: string): void {\n  const modal = document.getElementById(modalId);\n  if (!modal) {return;}\n\n  const titleElement = modal.querySelector(\n    'h2, .modal-title, [data-modal-title]'\n  );\n  if (titleElement) {\n    titleElement.textContent = title;\n  }\n}\n","/**\n * Staleness Detection Service\n * Checks if service results are out-of-date based on checks hash\n */\n\nimport type { ServiceData } from '../types/index';\n\nexport interface StalenessInfo {\n  isStale: boolean;\n  message: string;\n  serviceHash: string;\n  currentHash: string;\n}\n\nexport interface StalenessStats {\n  total: number;\n  stale: number;\n  upToDate: number;\n  percentage: number;\n}\n\n/**\n * Check if a service is stale (needs re-running due to updated checks)\n */\nexport function isServiceStale(\n  service: ServiceData,\n  currentHash: string | null\n): boolean {\n  // If no current hash available, can't determine staleness\n  if (!currentHash) {\n    return false;\n  }\n\n  // Backwards compatibility: if service has no checks_hash, assume it's stale\n  if (!service.checks_hash) {\n    return true;\n  }\n\n  // Compare hashes\n  return service.checks_hash !== currentHash;\n}\n\n/**\n * Get staleness information for a service\n */\nexport function getStalenessInfo(\n  service: ServiceData,\n  currentHash: string | null\n): StalenessInfo {\n  const stale = isServiceStale(service, currentHash);\n\n  return {\n    isStale: stale,\n    message: stale\n      ? 'Score may be outdated (checks have been updated)'\n      : 'Score is current',\n    serviceHash: service.checks_hash || 'unknown',\n    currentHash: currentHash || 'unknown',\n  };\n}\n\n/**\n * Filter services to get only stale ones\n */\nexport function filterStaleServices(\n  services: ServiceData[],\n  currentHash: string | null\n): ServiceData[] {\n  return services.filter((service) => isServiceStale(service, currentHash));\n}\n\n/**\n * Get staleness statistics for a set of services\n */\nexport function getStalenessStats(\n  services: ServiceData[],\n  currentHash: string | null\n): StalenessStats {\n  const staleServices = filterStaleServices(services, currentHash);\n\n  return {\n    total: services.length,\n    stale: staleServices.length,\n    upToDate: services.length - staleServices.length,\n    percentage:\n      services.length > 0\n        ? Math.round((staleServices.length / services.length) * 100)\n        : 0,\n  };\n}\n\n/**\n * Count stale services among installed services\n */\nexport function countStaleInstalled(\n  services: ServiceData[],\n  currentHash: string | null\n): number {\n  return services.filter(\n    (s) => isServiceStale(s, currentHash) && s.installed\n  ).length;\n}\n","/**\n * Filtering and Sorting\n * Functions for filtering and sorting services\n */\n\nimport { isServiceStale } from '../services/staleness.js';\nimport { countByRank } from '../utils/statistics.js';\nimport type { ServiceData, RankCounts } from '../types/index.js';\n\nexport type FilterState = 'include' | 'exclude';\nexport type FilterMap = Map<string, FilterState>;\n\nexport type SortBy =\n  | 'score-desc'\n  | 'score-asc'\n  | 'name-asc'\n  | 'name-desc'\n  | 'updated-desc'\n  | 'updated-asc';\n\nexport interface FilterStats {\n  total: number;\n  filtered: number;\n  stale: number;\n  installed: number;\n  hasApi: number;\n  ranks: RankCounts;\n}\n\n/**\n * Filter services based on active filters and search query\n */\nexport function filterServices(\n  services: ServiceData[],\n  activeFilters: FilterMap | null,\n  searchQuery: string,\n  currentHash: string | null\n): ServiceData[] {\n  return services.filter((service) => {\n    // Multi-select filters with include/exclude (AND logic)\n    if (activeFilters && activeFilters.size > 0) {\n      for (const [filterName, filterState] of activeFilters) {\n        // Determine if service matches this filter\n        let matches = false;\n\n        if (filterName === 'has-api') {\n          matches = service.has_api;\n        } else if (filterName === 'stale') {\n          matches = isServiceStale(service, currentHash);\n        } else if (filterName === 'installed') {\n          matches = service.installed;\n        } else if (\n          filterName === 'platinum' ||\n          filterName === 'gold' ||\n          filterName === 'silver' ||\n          filterName === 'bronze'\n        ) {\n          matches = service.rank === filterName;\n        }\n\n        // Apply include/exclude logic\n        if (filterState === 'include') {\n          // Include: service must match\n          if (!matches) {\n            return false;\n          }\n        } else if (filterState === 'exclude') {\n          // Exclude: service must NOT match\n          if (matches) {\n            return false;\n          }\n        }\n      }\n    }\n\n    // Search filter\n    if (searchQuery) {\n      const teamStr =\n        typeof service.team === 'string'\n          ? service.team\n          : service.team?.primary || '';\n      const searchText =\n        `${service.name} ${service.org} ${service.repo} ${teamStr}`.toLowerCase();\n      if (!searchText.includes(searchQuery)) {\n        return false;\n      }\n    }\n\n    return true;\n  });\n}\n\n/**\n * Sort services by specified criteria\n */\nexport function sortServices(\n  services: ServiceData[],\n  sortBy: SortBy\n): ServiceData[] {\n  services.sort((a, b) => {\n    switch (sortBy) {\n    case 'score-desc':\n      return b.score - a.score;\n    case 'score-asc':\n      return a.score - b.score;\n    case 'name-asc':\n      return a.name.localeCompare(b.name);\n    case 'name-desc':\n      return b.name.localeCompare(a.name);\n    case 'updated-desc':\n      return (\n        new Date(b.last_updated).getTime() -\n          new Date(a.last_updated).getTime()\n      );\n    case 'updated-asc':\n      return (\n        new Date(a.last_updated).getTime() -\n          new Date(b.last_updated).getTime()\n      );\n    default:\n      return 0;\n    }\n  });\n\n  return services;\n}\n\n/**\n * Apply both filtering and sorting\n */\nexport function filterAndSort(\n  services: ServiceData[],\n  activeFilters: FilterMap | null,\n  searchQuery: string,\n  sortBy: SortBy,\n  currentHash: string | null\n): ServiceData[] {\n  const filtered = filterServices(services, activeFilters, searchQuery, currentHash);\n  return sortServices(filtered, sortBy);\n}\n\n/**\n * Get statistics about filtered services\n */\nexport function getFilterStats(\n  allServices: ServiceData[],\n  filteredServices: ServiceData[],\n  currentHash: string | null\n): FilterStats {\n  const staleCount = allServices.filter((s) =>\n    isServiceStale(s, currentHash)\n  ).length;\n  const installedCount = allServices.filter((s) => s.installed).length;\n  const hasApiCount = allServices.filter((s) => s.has_api).length;\n\n  return {\n    total: allServices.length,\n    filtered: filteredServices.length,\n    stale: staleCount,\n    installed: installedCount,\n    hasApi: hasApiCount,\n    ranks: countByRank(allServices),\n  };\n}\n","/**\n * Workflow Run Rendering\n * Functions for rendering GitHub Actions workflow runs\n */\n\nimport { escapeHtml, formatDuration } from '../utils/formatting.js';\nimport type { WorkflowRun, WorkflowStatus, WorkflowConclusion } from '../types/index.js';\n\nexport interface DurationInfo {\n  label: string;\n  time: string;\n}\n\n/**\n * Render a workflow run card\n */\nexport function renderWorkflowRun(run: WorkflowRun): string {\n  const statusClass =\n    run.status === 'completed'\n      ? run.conclusion === 'success'\n        ? 'success'\n        : run.conclusion === 'failure'\n          ? 'failure'\n          : 'neutral'\n      : run.status;\n\n  const statusIcon = getStatusIcon(run.status, run.conclusion || null);\n  const durationInfo = calculateDuration(run);\n\n  return `\n        <div class=\"widget-run-item\" data-run-id=\"${run.id}\">\n            <div class=\"widget-run-header\">\n                <span class=\"widget-run-status status-${statusClass}\">${statusIcon}</span>\n                <div class=\"widget-run-info\">\n                    <div class=\"widget-run-name\">${escapeHtml(run.name)}</div>\n                    <div class=\"widget-run-repo\">${escapeHtml(run.org || '')}/${escapeHtml(run.repo || '')}</div>\n                </div>\n            </div>\n            <div class=\"widget-run-meta\">\n                <span class=\"widget-run-duration\" data-started=\"${run.run_started_at || run.created_at}\" data-status=\"${run.status}\">\n                    ${durationInfo.label} ${durationInfo.time}\n                </span>\n                <a href=\"${run.html_url}\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"widget-run-link\" onclick=\"event.stopPropagation()\">\n                    View\n                    <svg width=\"12\" height=\"12\" viewBox=\"0 0 16 16\" fill=\"currentColor\">\n                        <path d=\"M3.75 2h3.5a.75.75 0 0 1 0 1.5h-3.5a.25.25 0 0 0-.25.25v8.5c0 .138.112.25.25.25h8.5a.25.25 0 0 0 .25-.25v-3.5a.75.75 0 0 1 1.5 0v3.5A1.75 1.75 0 0 1 12.25 14h-8.5A1.75 1.75 0 0 1 2 12.25v-8.5C2 2.784 2.784 2 3.75 2Zm6.854-1h4.146a.25.25 0 0 1 .25.25v4.146a.25.25 0 0 1-.427.177L13.03 4.03 9.28 7.78a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042l3.75-3.75-1.543-1.543A.25.25 0 0 1 10.604 1Z\"></path>\n                    </svg>\n                </a>\n            </div>\n        </div>\n    `;\n}\n\n/**\n * Get status icon based on workflow status and conclusion\n */\nexport function getStatusIcon(\n  status: WorkflowStatus,\n  conclusion: WorkflowConclusion | null\n): string {\n  if (status === 'in_progress') {\n    return '<span class=\"spinner-small\"></span>';\n  } else if (status === 'queued') {\n    return '⏳';\n  } else if (status === 'completed') {\n    if (conclusion === 'success') {return '✓';}\n    if (conclusion === 'failure') {return '✗';}\n    if (conclusion === 'cancelled') {return '⊘';}\n    return '●';\n  }\n  return '●';\n}\n\n/**\n * Calculate duration information for a workflow run\n */\nexport function calculateDuration(run: WorkflowRun): DurationInfo {\n  const now = new Date();\n\n  if (run.status === 'completed') {\n    // Show time since completion\n    const completedAt = new Date(run.updated_at);\n    const timeSince = now.getTime() - completedAt.getTime();\n    return {\n      label: 'Completed',\n      time: formatDuration(timeSince),\n    };\n  } else if (run.status === 'in_progress') {\n    // Show running time\n    const startedAt = new Date(run.run_started_at || run.created_at);\n    const elapsed = now.getTime() - startedAt.getTime();\n    return {\n      label: 'Running for',\n      time: formatDuration(elapsed),\n    };\n  } else {\n    // Queued - show time since creation\n    const createdAt = new Date(run.created_at);\n    const waiting = now.getTime() - createdAt.getTime();\n    return {\n      label: 'Queued',\n      time: formatDuration(waiting),\n    };\n  }\n}\n","/**\n * Service Card Renderer\n * Handles rendering of service cards in the catalog grid\n */\n\nimport {\n  escapeHtml,\n  formatDate,\n  formatRelativeTime,\n  capitalize,\n} from '../utils/formatting.js';\nimport { isServiceStale } from '../services/staleness.js';\nimport { getTeamName } from '../utils/team-statistics.js';\nimport type { ServiceData } from '../types/index.js';\n\n// Window types are defined in types/globals.d.ts\n\ndeclare const filteredServices: ServiceData[];\ndeclare const currentChecksHash: string | null;\n\n/**\n * Render clickable team link\n */\nfunction renderTeamLink(service: ServiceData): string {\n  const teamName = getTeamName(service);\n  if (!teamName) {return '';}\n\n  return `<div class=\"service-team\">Team: <span class=\"service-team-link\" onclick=\"event.stopPropagation(); window.showTeamDetail && window.showTeamDetail('${escapeHtml(teamName)}')\">${escapeHtml(teamName)}</span></div>`;\n}\n\n/**\n * Renders the services grid with filtered services\n * Uses global variables: filteredServices, currentChecksHash\n */\nexport function renderServices(): void {\n  const grid = document.getElementById('services-grid');\n  if (!grid) {return;}\n\n  const services = window.filteredServices || filteredServices;\n  const checksHash = window.currentChecksHash ?? currentChecksHash;\n\n  if (services.length === 0) {\n    grid.innerHTML =\n      '<div class=\"empty-state\"><h3>No services match your criteria</h3></div>';\n    return;\n  }\n\n  grid.innerHTML = services\n    .map((service) => {\n      const isStale = isServiceStale(service, checksHash);\n      const canTrigger = isStale && service.installed;\n      return `\n        <div class=\"service-card rank-${service.rank}\" onclick=\"showServiceDetail('${service.org}', '${service.repo}')\">\n            <div class=\"service-header\">\n                <div>\n                    <div class=\"service-title-wrapper\">\n                        <div class=\"service-name\">${escapeHtml(service.name)}</div>\n                        <div class=\"service-badges\">\n                            ${service.has_api ? '<span class=\"badge-api\">API</span>' : ''}\n                            ${isStale ? '<span class=\"badge-stale\">STALE</span>' : ''}\n                            ${service.installed ? '<span class=\"badge-installed\">INSTALLED</span>' : ''}\n                        </div>\n                    </div>\n                    <div class=\"service-org\">${escapeHtml(service.org)}/${escapeHtml(service.repo)}</div>\n                </div>\n                <div style=\"display: flex; align-items: center; gap: 12px;\">\n                    ${\n  canTrigger\n    ? `\n                    <button\n                        class=\"trigger-btn trigger-btn-icon\"\n                        onclick=\"event.stopPropagation(); triggerServiceWorkflow('${escapeHtml(service.org)}', '${escapeHtml(service.repo)}', this)\"\n                        title=\"Re-run scorecard workflow\">\n                        <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"currentColor\">\n                            <path d=\"M1.705 8.005a.75.75 0 0 1 .834.656 5.5 5.5 0 0 0 9.592 2.97l-1.204-1.204a.25.25 0 0 1 .177-.427h3.646a.25.25 0 0 1 .25.25v3.646a.25.25 0 0 1-.427.177l-1.38-1.38A7.002 7.002 0 0 1 1.05 8.84a.75.75 0 0 1 .656-.834ZM8 2.5a5.487 5.487 0 0 0-4.131 1.869l1.204 1.204A.25.25 0 0 1 4.896 6H1.25A.25.25 0 0 1 1 5.75V2.104a.25.25 0 0 1 .427-.177l1.38 1.38A7.002 7.002 0 0 1 14.95 7.16a.75.75 0 0 1-1.49.178A5.5 5.5 0 0 0 8 2.5Z\"></path>\n                        </svg>\n                    </button>\n                    `\n    : ''\n}\n                    <a href=\"https://github.com/${escapeHtml(service.org)}/${escapeHtml(service.repo)}\"\n                       target=\"_blank\"\n                       rel=\"noopener noreferrer\"\n                       class=\"github-icon-link\"\n                       onclick=\"event.stopPropagation()\"\n                       title=\"View on GitHub\">\n                        <svg width=\"18\" height=\"18\" viewBox=\"0 0 16 16\" fill=\"currentColor\">\n                            <path d=\"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z\"></path>\n                        </svg>\n                    </a>\n                    ${\n  !service.installed && service.installation_pr\n    ? `\n                    <a href=\"${escapeHtml(service.installation_pr.url)}\"\n                       target=\"_blank\"\n                       rel=\"noopener noreferrer\"\n                       class=\"pr-icon-link pr-icon-${service.installation_pr.state.toLowerCase()}\"\n                       onclick=\"event.stopPropagation()\"\n                       title=\"${service.installation_pr.state === 'OPEN' ? 'Open installation PR' : 'Closed installation PR'} #${service.installation_pr.number}\">\n                        <svg width=\"18\" height=\"18\" viewBox=\"0 0 16 16\" fill=\"currentColor\">\n                            <path d=\"M1.5 3.25a2.25 2.25 0 1 1 3 2.122v5.256a2.251 2.251 0 1 1-1.5 0V5.372A2.25 2.25 0 0 1 1.5 3.25Zm5.677-.177L9.573.677A.25.25 0 0 1 10 .854V2.5h1A2.5 2.5 0 0 1 13.5 5v5.628a2.251 2.251 0 1 1-1.5 0V5a1 1 0 0 0-1-1h-1v1.646a.25.25 0 0 1-.427.177L7.177 3.427a.25.25 0 0 1 0-.354ZM3.75 2.5a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Zm0 9.5a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Zm8.25.75a.75.75 0 1 0 1.5 0 .75.75 0 0 0-1.5 0Z\"/>\n                        </svg>\n                    </a>\n                    `\n    : ''\n}\n                    <div class=\"score-badge\">${service.score}</div>\n                </div>\n            </div>\n            <div class=\"rank-badge ${service.rank}\">${capitalize(service.rank)}</div>\n            ${renderTeamLink(service)}\n            <div class=\"service-meta\">\n                <div>Last updated: ${formatDate(service.last_updated)}</div>\n                ${\n  service.installation_pr && service.installation_pr.updated_at\n    ? `\n                <div class=\"pr-status-timestamp\" title=\"PR status last fetched at ${new Date(service.installation_pr.updated_at).toLocaleString()}\">\n                    PR status: ${formatRelativeTime(service.installation_pr.updated_at)}\n                </div>\n                `\n    : ''\n}\n            </div>\n        </div>\n    `;\n    })\n    .join('');\n}\n","/**\n * Authentication and Token Management\n * Handles GitHub Personal Access Token (PAT) storage and validation\n */\n\n// In-memory PAT storage (not persisted to localStorage for security)\nlet githubPAT: string | null = null;\n\n/**\n * Get the currently stored GitHub token\n */\nexport function getToken(): string | null {\n  return githubPAT;\n}\n\n/**\n * Check if a GitHub token is currently set\n */\nexport function hasToken(): boolean {\n  return !!githubPAT;\n}\n\n/**\n * Set the GitHub token\n */\nexport function setToken(token: string | null): void {\n  githubPAT = token ? token.trim() : null;\n}\n\n/**\n * Clear the stored GitHub token\n */\nexport function clearToken(): void {\n  githubPAT = null;\n}\n\n/**\n * Test if a PAT is valid by making a request to GitHub API\n */\nexport async function validateToken(pat: string): Promise<boolean> {\n  try {\n    const response = await fetch('https://api.github.com/user', {\n      headers: {\n        Authorization: `token ${pat}`,\n        Accept: 'application/vnd.github.v3+json',\n      },\n    });\n    return response.ok;\n  } catch (error) {\n    console.error('Error validating PAT:', error);\n    return false;\n  }\n}\n\n/**\n * Validate and save a GitHub token\n */\nexport async function validateAndSaveToken(token: string): Promise<boolean> {\n  if (!token || !token.trim()) {\n    return false;\n  }\n\n  const isValid = await validateToken(token.trim());\n\n  if (isValid) {\n    setToken(token.trim());\n    return true;\n  }\n\n  return false;\n}\n\n/**\n * Get token for authorization headers\n */\nexport function getTokenForAuth(): string | null {\n  return getToken();\n}\n","/**\n * Deployment configuration - centralizes environment-specific values\n * @module config/deployment\n */\n\nimport type { DeploymentConfig } from '../types/index';\n\ndeclare const process: { env?: Record<string, string | undefined> } | undefined;\n\n/**\n * Detect repository owner from hostname or environment\n */\nexport function detectRepoOwner(): string {\n  // Check environment variable first\n  if (typeof process !== 'undefined' && process.env?.SCORECARD_REPO_OWNER) {\n    return process.env.SCORECARD_REPO_OWNER;\n  }\n\n  // Browser context\n  if (typeof window !== 'undefined') {\n    const hostname = window.location.hostname;\n    // Local development\n    if (\n      hostname === 'localhost' ||\n      hostname === '127.0.0.1' ||\n      hostname.startsWith('192.168.')\n    ) {\n      return (window as Window & { SCORECARD_REPO_OWNER?: string }).SCORECARD_REPO_OWNER || 'feddericovonwernich';\n    }\n    // GitHub Pages: owner.github.io\n    return hostname.split('.')[0] || 'feddericovonwernich';\n  }\n\n  return 'feddericovonwernich';\n}\n\nexport const DEPLOYMENT: DeploymentConfig = {\n  repoOwner: detectRepoOwner(),\n  repoName: 'scorecards',\n  catalogBranch: 'catalog',\n  ports: {\n    devServer: 8080,\n    testServer: 8080,\n  },\n  api: {\n    githubBase: 'https://api.github.com',\n    version: '2022-11-28',\n    acceptHeader: 'application/vnd.github.v3+json',\n  },\n  git: {\n    botName: 'scorecard-bot',\n    botEmail: 'scorecard-bot@users.noreply.github.com',\n  },\n};\n","/**\n * Registry API\n * Fetches and parses service registry data from GitHub\n */\n\nimport { getToken } from '../services/auth.js';\nimport { DEPLOYMENT } from '../config/deployment.js';\nimport type { ServiceData, TeamsData, CurrentChecksResponse } from '../types/index.js';\n\n// Repository configuration from centralized config\nconst REPO_OWNER = DEPLOYMENT.repoOwner;\nconst REPO_NAME = DEPLOYMENT.repoName;\nconst BRANCH = DEPLOYMENT.catalogBranch;\nconst RAW_BASE_URL = `https://raw.githubusercontent.com/${REPO_OWNER}/${REPO_NAME}/${BRANCH}`;\n\n// Cache for current checks hash\nlet currentChecksHashCache: string | null = null;\nlet checksHashTimestamp = 0;\nconst CACHE_TTL = 10 * 1000; // 10 seconds\n\nexport interface FetchResult {\n  response: Response;\n  usedAPI: boolean;\n}\n\nexport interface LoadServicesResult {\n  services: ServiceData[];\n  usedAPI: boolean;\n}\n\nexport interface LoadTeamsResult {\n  teams: TeamsData | null;\n  usedAPI: boolean;\n}\n\n/**\n * Fetch with hybrid authentication (API with PAT or raw URL fallback)\n */\nexport async function fetchWithHybridAuth(\n  path: string,\n  options: RequestInit = {}\n): Promise<FetchResult> {\n  const token = getToken();\n  let response: Response | undefined;\n  let usedAPI = false;\n\n  if (token) {\n    // Try GitHub API first with PAT\n    try {\n      const apiUrl = `https://api.github.com/repos/${REPO_OWNER}/${REPO_NAME}/contents/${path}?ref=${BRANCH}`;\n      response = await fetch(apiUrl, {\n        ...options,\n        cache: 'no-cache',\n        headers: {\n          ...options.headers,\n          Accept: 'application/vnd.github.raw',\n          Authorization: `token ${token}`,\n        },\n      });\n\n      usedAPI = true;\n\n      // Handle rate limit or auth errors gracefully\n      if (\n        response.status === 403 ||\n        response.status === 429 ||\n        response.status === 401\n      ) {\n        console.warn(\n          `API fetch failed with status ${response.status}, falling back to CDN`\n        );\n        usedAPI = false;\n      } else if (!response.ok) {\n        console.warn(\n          `API fetch failed with status ${response.status}, falling back to CDN`\n        );\n        usedAPI = false;\n      }\n    } catch (error) {\n      console.error('Error with API fetch, falling back to CDN:', error);\n      usedAPI = false;\n    }\n  }\n\n  // If no PAT or API failed, use raw.githubusercontent.com\n  if (!usedAPI) {\n    const rawUrl = `${RAW_BASE_URL}/${path}?t=${Date.now()}`;\n    response = await fetch(rawUrl, {\n      ...options,\n      cache: 'no-cache',\n    });\n  }\n\n  return {\n    response: response!,\n    usedAPI,\n  };\n}\n\n/**\n * Fetch current checks hash from catalog\n */\nexport async function fetchCurrentChecksHash(): Promise<string | null> {\n  const now = Date.now();\n\n  // Return cached value if still valid\n  if (currentChecksHashCache && now - checksHashTimestamp < CACHE_TTL) {\n    console.log('Using cached checks hash:', currentChecksHashCache);\n    return currentChecksHashCache;\n  }\n\n  console.log('Fetching current checks hash from catalog...');\n\n  try {\n    // Fetch the pre-computed hash from the catalog branch\n    const hashUrl = `${RAW_BASE_URL}/current-checks.json?t=${Date.now()}`;\n    const response = await fetch(hashUrl, { cache: 'no-cache' });\n\n    if (!response.ok) {\n      console.error('Failed to fetch current checks hash:', response.status);\n      return null;\n    }\n\n    const data: CurrentChecksResponse = await response.json();\n    const hash = data.checks_hash;\n\n    // Update cache\n    currentChecksHashCache = hash;\n    checksHashTimestamp = now;\n\n    console.log('Current checks hash:', hash);\n    console.log('Checks count:', data.checks_count);\n    console.log('Generated at:', data.generated_at);\n    return hash;\n  } catch (error) {\n    console.error('Error fetching current checks hash:', error);\n    return null;\n  }\n}\n\ninterface GitHubTreeItem {\n  path: string;\n  type: string;\n  sha: string;\n}\n\ninterface GitHubTreeResponse {\n  tree: GitHubTreeItem[];\n}\n\ninterface RegistryResponse {\n  services: ServiceData[];\n  generated_at: string;\n}\n\n/**\n * Load all services from registry (consolidated or tree API)\n */\nexport async function loadServices(): Promise<LoadServicesResult> {\n  let loadedFromConsolidated = false;\n  let usedAPI = false;\n  let services: ServiceData[] = [];\n\n  // Try to load consolidated registry first\n  try {\n    console.log('Attempting to load consolidated registry...');\n    const { response, usedAPI: fetchUsedAPI } = await fetchWithHybridAuth(\n      'registry/all-services.json'\n    );\n    usedAPI = fetchUsedAPI;\n\n    if (response.ok) {\n      const registryData: RegistryResponse = await response.json();\n      if (registryData.services && Array.isArray(registryData.services)) {\n        services = registryData.services;\n        loadedFromConsolidated = true;\n        console.log(\n          `Loaded ${services.length} services from consolidated registry (generated at ${registryData.generated_at})`\n        );\n      }\n    }\n  } catch (error) {\n    console.warn(\n      'Failed to load consolidated registry, falling back to tree API:',\n      error\n    );\n  }\n\n  // Fallback: Use tree API to discover individual files\n  if (!loadedFromConsolidated) {\n    console.log('Loading services via tree API...');\n    const apiUrl = `https://api.github.com/repos/${REPO_OWNER}/${REPO_NAME}/git/trees/${BRANCH}?recursive=1`;\n    const response = await fetch(apiUrl);\n\n    if (!response.ok) {\n      throw new Error(`Failed to fetch repository tree: ${response.status}`);\n    }\n\n    const treeData: GitHubTreeResponse = await response.json();\n\n    // Find all registry JSON files, excluding all-services.json\n    const registryFiles = treeData.tree\n      .filter(\n        (item) =>\n          item.path.startsWith('registry/') &&\n          item.path.endsWith('.json') &&\n          item.path !== 'registry/all-services.json'\n      )\n      .map((item) => item.path);\n\n    if (registryFiles.length === 0) {\n      throw new Error('No services registered yet');\n    }\n\n    // Fetch all registry files in parallel\n    const fetchPromises = registryFiles.map(async (path) => {\n      const { response, usedAPI: fetchUsedAPI } =\n        await fetchWithHybridAuth(path);\n      if (fetchUsedAPI) {usedAPI = true;}\n      if (response.ok) {\n        return response.json() as Promise<ServiceData>;\n      }\n      return null;\n    });\n\n    const results = await Promise.all(fetchPromises);\n    services = results.filter((service): service is ServiceData => service !== null);\n    console.log(`Loaded ${services.length} services via tree API`);\n  }\n\n  return {\n    services,\n    usedAPI,\n  };\n}\n\n// Cache for teams data\nlet teamsDataCache: TeamsData | null = null;\nlet teamsDataTimestamp = 0;\nconst TEAMS_CACHE_TTL = 60 * 1000; // 60 seconds\n\n/**\n * Load all teams from the teams registry\n */\nexport async function loadTeams(forceRefresh = false): Promise<LoadTeamsResult> {\n  const now = Date.now();\n\n  // Return cached value if still valid\n  if (\n    !forceRefresh &&\n    teamsDataCache &&\n    now - teamsDataTimestamp < TEAMS_CACHE_TTL\n  ) {\n    console.log('Using cached teams data');\n    return {\n      teams: teamsDataCache,\n      usedAPI: false,\n    };\n  }\n\n  console.log('Loading teams from registry...');\n\n  try {\n    const { response, usedAPI } =\n      await fetchWithHybridAuth('teams/all-teams.json');\n\n    if (!response.ok) {\n      console.warn('Failed to load teams registry:', response.status);\n      return {\n        teams: null,\n        usedAPI,\n      };\n    }\n\n    const teamsData: TeamsData = await response.json();\n\n    // Update cache\n    teamsDataCache = teamsData;\n    teamsDataTimestamp = now;\n\n    console.log(\n      `Loaded ${teamsData.count || 0} teams from registry (generated at ${teamsData.generated_at})`\n    );\n\n    return {\n      teams: teamsData,\n      usedAPI,\n    };\n  } catch (error) {\n    console.error('Error loading teams:', error);\n    return {\n      teams: null,\n      usedAPI: false,\n    };\n  }\n}\n\n/**\n * Load a single team file\n */\nexport async function loadTeamById(\n  teamId: string\n): Promise<Record<string, unknown> | null> {\n  try {\n    const { response } = await fetchWithHybridAuth(`teams/${teamId}.json`);\n\n    if (!response.ok) {\n      console.warn(`Failed to load team ${teamId}:`, response.status);\n      return null;\n    }\n\n    return response.json();\n  } catch (error) {\n    console.error(`Error loading team ${teamId}:`, error);\n    return null;\n  }\n}\n\n/**\n * Clear teams cache\n */\nexport function clearTeamsCache(): void {\n  teamsDataCache = null;\n  teamsDataTimestamp = 0;\n}\n\n/**\n * Get repository owner\n */\nexport function getRepoOwner(): string {\n  return REPO_OWNER;\n}\n\n/**\n * Get repository name\n */\nexport function getRepoName(): string {\n  return REPO_NAME;\n}\n\n/**\n * Get branch name\n */\nexport function getBranch(): string {\n  return BRANCH;\n}\n\n/**\n * Get raw base URL for GitHub content\n */\nexport function getRawBaseUrl(): string {\n  return RAW_BASE_URL;\n}\n","/**\n * Service modal header components\n * @module ui/modals/service/header\n */\n\nimport { escapeHtml, capitalize } from '../../../utils/formatting.js';\nimport type { ServiceResults } from '../../../types/index.js';\n\n/**\n * Renders staleness warning banner\n */\nexport function renderStalenessWarning(\n  isStale: boolean,\n  canTrigger: boolean,\n  org: string,\n  repo: string\n): string {\n  if (!isStale) {\n    return '';\n  }\n\n  return `\n        <div class=\"stale-warning\">\n            <div style=\"display: flex; align-items: center; gap: 10px;\">\n                <span style=\"font-size: 1.5rem;\">\\u26A0\\uFE0F</span>\n                <div style=\"flex: 1;\">\n                    <strong class=\"stale-warning-text\">Scorecard is Stale</strong>\n                    <p class=\"stale-warning-text\" style=\"margin: 5px 0 0 0;\">\n                        This scorecard was generated with an older version of the check suite.\n                        New checks may have been added or existing checks may have been modified.\n                        ${canTrigger ? 'Click the \"Re-run Scorecard\" button to get up-to-date results.' : 'Re-run the scorecard workflow to get up-to-date results.'}\n                    </p>\n                </div>\n                ${\n  canTrigger\n    ? `\n                <button\n                    id=\"modal-trigger-btn\"\n                    class=\"trigger-btn\"\n                    onclick=\"triggerServiceWorkflow('${escapeHtml(org)}', '${escapeHtml(repo)}', this)\"\n                    style=\"margin-left: auto;\">\n                    <svg width=\"14\" height=\"14\" viewBox=\"0 0 16 16\" fill=\"currentColor\" style=\"margin-right: 6px;\">\n                        <path d=\"M1.705 8.005a.75.75 0 0 1 .834.656 5.5 5.5 0 0 0 9.592 2.97l-1.204-1.204a.25.25 0 0 1 .177-.427h3.646a.25.25 0 0 1 .25.25v3.646a.25.25 0 0 1-.427.177l-1.38-1.38A7.002 7.002 0 0 1 1.05 8.84a.75.75 0 0 1 .656-.834ZM8 2.5a5.487 5.487 0 0 0-4.131 1.869l1.204 1.204A.25.25 0 0 1 4.896 6H1.25A.25.25 0 0 1 1 5.75V2.104a.25.25 0 0 1 .427-.177l1.38 1.38A7.002 7.002 0 0 1 14.95 7.16a.75.75 0 0 1-1.49.178A5.5 5.5 0 0 0 8 2.5Z\"></path>\n                    </svg>\n                    Re-run Scorecard\n                </button>\n                `\n    : ''\n}\n            </div>\n        </div>\n    `;\n}\n\n/**\n * Renders on-demand trigger button for non-stale installed services\n */\nexport function renderOnDemandTrigger(\n  isInstalled: boolean,\n  isStale: boolean,\n  org: string,\n  repo: string\n): string {\n  // Only show for installed services that are NOT stale\n  // (Stale services get the trigger button in the staleness warning instead)\n  if (!isInstalled || isStale) {\n    return '';\n  }\n\n  return `\n        <button\n            id=\"modal-trigger-btn\"\n            class=\"trigger-btn trigger-btn-neutral\"\n            onclick=\"triggerServiceWorkflow('${escapeHtml(org)}', '${escapeHtml(repo)}', this)\"\n            title=\"Run scorecard workflow on-demand\">\n            <svg width=\"14\" height=\"14\" viewBox=\"0 0 16 16\" fill=\"currentColor\" style=\"margin-right: 6px;\">\n                <path d=\"M1.705 8.005a.75.75 0 0 1 .834.656 5.5 5.5 0 0 0 9.592 2.97l-1.204-1.204a.25.25 0 0 1 .177-.427h3.646a.25.25 0 0 1 .25.25v3.646a.25.25 0 0 1-.427.177l-1.38-1.38A7.002 7.002 0 0 1 1.05 8.84a.75.75 0 0 1 .656-.834ZM8 2.5a5.487 5.487 0 0 0-4.131 1.869l1.204 1.204A.25.25 0 0 1 4.896 6H1.25A.25.25 0 0 1 1 5.75V2.104a.25.25 0 0 1 .427-.177l1.38 1.38A7.002 7.002 0 0 1 14.95 7.16a.75.75 0 0 1-1.49.178A5.5 5.5 0 0 0 8 2.5Z\"></path>\n            </svg>\n            Run Scorecard\n        </button>\n    `;\n}\n\n/**\n * Renders modal header with title, org/repo, and action buttons\n */\nexport function renderModalHeader(\n  data: ServiceResults,\n  org: string,\n  repo: string,\n  isInstalled: boolean,\n  isStale: boolean\n): string {\n  return `\n        <div class=\"rank-badge modal-header-badge ${data.rank}\">\n            ${capitalize(data.rank)}\n        </div>\n\n        <h2>${escapeHtml(data.service.name)}</h2>\n        <p class=\"tab-section-description\">\n            ${escapeHtml(data.service.org)}/${escapeHtml(data.service.repo)}\n        </p>\n        <div style=\"display: flex; gap: 10px; margin-bottom: 20px; flex-wrap: wrap;\">\n            <a href=\"https://github.com/${escapeHtml(data.service.org)}/${escapeHtml(data.service.repo)}\"\n               target=\"_blank\"\n               rel=\"noopener noreferrer\"\n               class=\"github-button\">\n                <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"currentColor\">\n                    <path d=\"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z\"></path>\n                </svg>\n                View on GitHub\n            </a>\n            <button\n                id=\"modal-refresh-btn\"\n                class=\"github-button\"\n                onclick=\"refreshServiceData('${escapeHtml(org)}', '${escapeHtml(repo)}')\"\n                title=\"Refresh service data\">\n                <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"currentColor\">\n                    <path d=\"M1.705 8.005a.75.75 0 0 1 .834.656 5.5 5.5 0 0 0 9.592 2.97l-1.204-1.204a.25.25 0 0 1 .177-.427h3.646a.25.25 0 0 1 .25.25v3.646a.25.25 0 0 1-.427.177l-1.38-1.38A7.002 7.002 0 0 1 1.05 8.84a.75.75 0 0 1 .656-.834ZM8 2.5a5.487 5.487 0 0 0-4.131 1.869l1.204 1.204A.25.25 0 0 1 4.896 6H1.25A.25.25 0 0 1 1 5.75V2.104a.25.25 0 0 1 .427-.177l1.38 1.38A7.002 7.002 0 0 1 14.95 7.16a.75.75 0 0 1-1.49.178A5.5 5.5 0 0 0 8 2.5Z\"></path>\n                </svg>\n                Refresh Data\n            </button>\n            ${renderOnDemandTrigger(isInstalled, isStale, org, repo)}\n            ${\n  !data.installed &&\n              data.installation_pr &&\n              data.installation_pr.state === 'OPEN'\n    ? `\n            <a href=\"${escapeHtml(data.installation_pr.url)}\"\n               target=\"_blank\"\n               rel=\"noopener noreferrer\"\n               class=\"pr-button pr-button-open\">\n                <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"currentColor\">\n                    <path d=\"M1.5 3.25a2.25 2.25 0 1 1 3 2.122v5.256a2.251 2.251 0 1 1-1.5 0V5.372A2.25 2.25 0 0 1 1.5 3.25Zm5.677-.177L9.573.677A.25.25 0 0 1 10 .854V2.5h1A2.5 2.5 0 0 1 13.5 5v5.628a2.251 2.251 0 1 1-1.5 0V5a1 1 0 0 0-1-1h-1v1.646a.25.25 0 0 1-.427.177L7.177 3.427a.25.25 0 0 1 0-.354ZM3.75 2.5a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Zm0 9.5a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Zm8.25.75a.75.75 0 1 0 1.5 0 .75.75 0 0 0-1.5 0Z\"/>\n                </svg>\n                Open Installation PR #${data.installation_pr.number}\n            </a>\n            `\n    : ''\n}\n            ${\n  !data.installed &&\n              (!data.installation_pr ||\n                data.installation_pr.state === 'MERGED' ||\n                data.installation_pr.state === 'CLOSED')\n    ? `\n            <button\n                id=\"install-btn\"\n                class=\"install-button\"\n                onclick=\"installService('${escapeHtml(org)}', '${escapeHtml(repo)}', this)\"\n                title=\"${data.installation_pr ? `Previous PR #${data.installation_pr.number} was ${data.installation_pr.state.toLowerCase()}` : 'Create installation PR'}\">\n                <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"currentColor\" style=\"margin-right: 6px;\">\n                    <path d=\"M2.75 14A1.75 1.75 0 0 1 1 12.25v-2.5a.75.75 0 0 1 1.5 0v2.5c0 .138.112.25.25.25h10.5a.25.25 0 0 0 .25-.25v-2.5a.75.75 0 0 1 1.5 0v2.5A1.75 1.75 0 0 1 13.25 14Z\"></path>\n                    <path d=\"M7.25 7.689V2a.75.75 0 0 1 1.5 0v5.689l1.97-1.969a.749.749 0 1 1 1.06 1.06l-3.25 3.25a.749.749 0 0 1-1.06 0L4.22 6.78a.749.749 0 1 1 1.06-1.06l1.97 1.969Z\"></path>\n                </svg>\n                ${data.installation_pr ? 'Re-create' : 'Install'} Scorecards\n            </button>\n            `\n    : ''\n}\n        </div>\n    `;\n}\n","/**\n * Service modal stats component\n * @module ui/modals/service/stats\n */\n\nimport {\n  escapeHtml,\n  formatDate,\n  formatRelativeTime,\n} from '../../../utils/formatting.js';\nimport { getTeamName } from '../../../utils/team-statistics.js';\nimport type { ServiceResults } from '../../../types/index.js';\n\n/**\n * Renders modal stats section\n */\nexport function renderModalStats(data: ServiceResults): string {\n  // Count excluded checks from checks array\n  const excludedCount = data.checks\n    ? data.checks.filter((c) => c.status === 'excluded').length\n    : 0;\n\n  return `\n        <div class=\"modal-stats-container\">\n            <div class=\"modal-stat-item\">\n                <div class=\"modal-stat-value\">${data.score}</div>\n                <div class=\"modal-stat-label\">Score</div>\n            </div>\n            <div class=\"modal-stat-item\">\n                <div class=\"modal-stat-value\">${data.passed_checks}/${data.total_checks}</div>\n                <div class=\"modal-stat-label\">Checks Passed</div>\n            </div>\n            ${\n  excludedCount > 0\n    ? `\n            <div class=\"modal-stat-item\">\n                <div class=\"modal-stat-value modal-stat-excluded\">${excludedCount}</div>\n                <div class=\"modal-stat-label\">Excluded</div>\n            </div>\n            `\n    : ''\n}\n        </div>\n\n        ${getTeamName(data.service) ? `<p><strong>Team:</strong> ${escapeHtml(getTeamName(data.service)!)}</p>` : ''}\n        <p><strong>Last Run:</strong> ${formatDate(data.timestamp)}</p>\n        ${data.commit_sha ? `<p><strong>Commit:</strong> <code>${data.commit_sha.substring(0, 7)}</code></p>` : ''}\n        ${data.recent_contributors && data.recent_contributors.length > 0 && data.recent_contributors[0].last_commit_hash ? `<p><strong>Last Commit:</strong> <code>${data.recent_contributors[0].last_commit_hash}</code></p>` : ''}\n        ${\n  data.installation_pr && data.installation_pr.updated_at\n    ? `\n        <p><strong>PR Status Updated:</strong> ${formatRelativeTime(data.installation_pr.updated_at)}\n            <span class=\"tab-section-description\" style=\"font-size: 0.9em;\" title=\"${new Date(data.installation_pr.updated_at).toLocaleString()}\">(${new Date(data.installation_pr.updated_at).toLocaleString()})</span>\n        </p>\n        `\n    : ''\n}\n    `;\n}\n","/**\n * Service modal API specification tab component\n * @module ui/modals/service/api-tab\n */\n\nimport { escapeHtml } from '../../../utils/formatting.js';\nimport { getIcon } from '../../../config/icons.js';\nimport type { ServiceResults, OpenAPIConfig } from '../../../types/index.js';\n\n// Window types are defined in types/globals.d.ts\n\ninterface OpenAPISummary {\n  title: string | null;\n  openApiVersion: string | null;\n  paths: number | null;\n  operations: number | null;\n}\n\ninterface OpenAPIInfo {\n  hasSpec: boolean;\n  specInfo: OpenAPIConfig | null;\n  fromConfig: boolean;\n  summary: OpenAPISummary | null;\n}\n\n/**\n * Parses summary information from check 06 stdout\n */\nexport function parseOpenAPISummary(stdout: string): OpenAPISummary | null {\n  if (!stdout) {\n    return null;\n  }\n\n  const titleMatch = stdout.match(/Title: (.+)/);\n  const versionMatch = stdout.match(/OpenAPI version: ([\\d.]+)/);\n  const endpointsMatch = stdout.match(\n    /Endpoints: (\\d+) paths?, (\\d+) operations?/\n  );\n\n  // Only return summary if we found at least some data\n  if (!titleMatch && !versionMatch && !endpointsMatch) {\n    return null;\n  }\n\n  return {\n    title: titleMatch ? titleMatch[1].trim() : null,\n    openApiVersion: versionMatch ? versionMatch[1] : null,\n    paths: endpointsMatch ? parseInt(endpointsMatch[1]) : null,\n    operations: endpointsMatch ? parseInt(endpointsMatch[2]) : null,\n  };\n}\n\n/**\n * Determines if service has OpenAPI specification\n * Checks both config-based openapi and check 06-openapi-spec results\n */\nexport function getOpenAPIInfo(data: ServiceResults): OpenAPIInfo {\n  // Get check 06 data for summary (used in both paths)\n  const openApiCheck = data.checks?.find((c) => c.check_id === '06-openapi-spec');\n  const summary =\n    openApiCheck?.status === 'pass'\n      ? parseOpenAPISummary(openApiCheck.stdout || '')\n      : null;\n\n  // Check if config-based openapi exists\n  if (data.service.openapi) {\n    return {\n      hasSpec: true,\n      specInfo: data.service.openapi,\n      fromConfig: true,\n      summary,\n    };\n  }\n\n  // Check if 06-openapi-spec check passed (auto-detected spec without config)\n  if (openApiCheck && openApiCheck.status === 'pass') {\n    // Parse spec file from stdout: \"OpenAPI specification found and validated: openapi.yaml\"\n    const match = openApiCheck.stdout?.match(/found and validated: (.+)/);\n    const specFile = match ? match[1].trim() : 'openapi.yaml';\n\n    return {\n      hasSpec: true,\n      specInfo: { spec_file: specFile },\n      fromConfig: false,\n      summary,\n    };\n  }\n\n  return { hasSpec: false, specInfo: null, fromConfig: false, summary: null };\n}\n\n/**\n * Renders API specification tab content\n */\nexport function renderAPITab(\n  openapiInfo: OpenAPIInfo,\n  org: string,\n  repo: string,\n  defaultBranch: string\n): string {\n  if (!openapiInfo.hasSpec) {\n    return '';\n  }\n  const { specInfo, fromConfig, summary } = openapiInfo;\n  const specFile = specInfo?.spec_file || 'openapi.yaml';\n  const branch = defaultBranch || 'main';\n\n  // Build GitHub URLs\n  const viewUrl = `https://github.com/${org}/${repo}/blob/${branch}/${specFile}`;\n\n  return `\n        <div class=\"tab-content\" id=\"api-tab\">\n            <div class=\"api-tab-content\">\n                <!-- Structured Summary Card -->\n                <div class=\"api-summary-card\">\n                    ${\n  summary?.title\n    ? `\n                        <div class=\"api-summary-title\">${escapeHtml(summary.title)}</div>\n                    `\n    : ''\n}\n\n                    <div class=\"api-summary-meta\">\n                        <span class=\"api-meta-item\">\n                            <strong>File:</strong>\n                            <code>${escapeHtml(specFile)}</code>\n                        </span>\n                        ${\n  summary?.openApiVersion\n    ? `\n                            <span class=\"api-meta-item\">\n                                <strong>OpenAPI:</strong> ${escapeHtml(summary.openApiVersion)}\n                            </span>\n                        `\n    : ''\n}\n                        ${\n  summary?.paths\n    ? `\n                            <span class=\"api-meta-item\">\n                                <strong>Endpoints:</strong> ${summary.paths} path${summary.paths !== 1 ? 's' : ''}, ${summary.operations} operation${summary.operations !== 1 ? 's' : ''}\n                            </span>\n                        `\n    : ''\n}\n                    </div>\n\n                    <div class=\"api-actions\">\n                        <a href=\"${viewUrl}\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"github-link-button\">\n                            ${getIcon('github')} View on GitHub\n                        </a>\n                    </div>\n                </div>\n\n                <!-- Collapsible Raw Spec -->\n                <details class=\"spec-details\" data-repo=\"${org}/${repo}\" data-branch=\"${branch}\" data-spec-file=\"${specFile}\">\n                    <summary class=\"spec-summary\">View Raw Specification</summary>\n                    <div class=\"spec-content\" id=\"spec-content-${org}-${repo}\">\n                        <div class=\"spec-loading\">Loading specification...</div>\n                    </div>\n                </details>\n\n                <!-- Environments section (if configured) -->\n                ${\n  specInfo?.environments\n    ? `\n                    <h4 class=\"api-section-header\">Environments</h4>\n                    <div class=\"environments-grid\">\n                        ${Object.entries(specInfo.environments)\n    .map(\n      ([envName, envConfig]) => `\n                            <div class=\"environment-card\">\n                                <div class=\"environment-card-name\">${escapeHtml(envName)}</div>\n                                <div class=\"environment-card-url\">${escapeHtml(envConfig.base_url)}</div>\n                                ${envConfig.description ? `<div class=\"environment-card-description\">${escapeHtml(envConfig.description)}</div>` : ''}\n                            </div>\n                        `\n    )\n    .join('')}\n                    </div>\n\n                    <div class=\"api-explorer-section\">\n                        <button\n                            onclick=\"openApiExplorer('${escapeHtml(org)}', '${escapeHtml(repo)}')\"\n                            class=\"api-explorer-button\"\n                        >\n                            Open API Explorer\n                        </button>\n                        <p class=\"environment-card-description\">\n                            Explore and test the API with an interactive Swagger UI interface\n                        </p>\n                    </div>\n                `\n    : ''\n}\n\n                <!-- Hint when no environments configured -->\n                ${\n  !fromConfig\n    ? `\n                    <p class=\"environment-card-description api-hint\">\n                        Configure environments in <code>.scorecard/config.yml</code> to enable the interactive API Explorer.\n                    </p>\n                `\n    : ''\n}\n            </div>\n        </div>\n    `;\n}\n\n/**\n * Loads and displays the raw OpenAPI specification content\n */\nexport async function loadSpecContent(\n  org: string,\n  repo: string,\n  branch: string,\n  specFile: string\n): Promise<void> {\n  const containerId = `spec-content-${org}-${repo}`;\n  const container = document.getElementById(containerId);\n  if (!container) {\n    return;\n  }\n\n  // Check if already loaded\n  if (container.dataset.loaded === 'true') {\n    return;\n  }\n\n  const rawUrl = `https://raw.githubusercontent.com/${org}/${repo}/${branch}/${specFile}`;\n\n  try {\n    const response = await fetch(rawUrl);\n    if (!response.ok) {\n      throw new Error(`HTTP ${response.status}`);\n    }\n    const content = await response.text();\n\n    container.innerHTML = `\n            <div class=\"spec-toolbar\">\n                <button onclick=\"copySpecContent('${containerId}')\" class=\"copy-spec-button\">\n                    Copy\n                </button>\n            </div>\n            <pre class=\"spec-code\"><code id=\"spec-code-${containerId}\">${escapeHtml(content)}</code></pre>\n        `;\n    container.dataset.loaded = 'true';\n  } catch (error) {\n    container.innerHTML = `\n            <div class=\"spec-error\">\n                <p>Failed to load spec: ${escapeHtml(error instanceof Error ? error.message : String(error))}</p>\n                <a href=\"${rawUrl}\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"spec-error-link\">View raw file on GitHub</a>\n            </div>\n        `;\n  }\n}\n\n/**\n * Copies the spec content to clipboard\n */\nexport async function copySpecContent(containerId: string): Promise<void> {\n  const codeElement = document.getElementById(`spec-code-${containerId}`);\n  if (!codeElement) {\n    return;\n  }\n\n  try {\n    await navigator.clipboard.writeText(codeElement.textContent || '');\n\n    // Show feedback on copy button\n    const container = document.getElementById(containerId);\n    const button = container?.querySelector(\n      '.copy-spec-button'\n    ) as HTMLButtonElement | null;\n    if (button) {\n      const originalText = button.textContent;\n      button.textContent = 'Copied!';\n      button.classList.add('copied');\n      setTimeout(() => {\n        button.textContent = originalText;\n        button.classList.remove('copied');\n      }, 2000);\n    }\n  } catch (error) {\n    console.error('Failed to copy:', error);\n  }\n}\n\n/**\n * Handles the toggle event on spec details element\n */\nfunction handleSpecToggle(e: Event): void {\n  const details = e.target as HTMLDetailsElement;\n  if (details.open) {\n    const repoData = details.dataset.repo;\n    const branch = details.dataset.branch;\n    const specFile = details.dataset.specFile;\n    if (repoData && branch && specFile) {\n      const [org, repo] = repoData.split('/');\n      loadSpecContent(org, repo, branch, specFile);\n    }\n  }\n}\n\n/**\n * Initializes spec details toggle listeners for lazy loading\n */\nexport function initSpecDetailsListeners(): void {\n  document.querySelectorAll('.spec-details').forEach((details) => {\n    // Remove any existing listener to avoid duplicates\n    details.removeEventListener('toggle', handleSpecToggle);\n    details.addEventListener('toggle', handleSpecToggle);\n  });\n}\n\n// Register copySpecContent on window for onclick handlers\nif (typeof window !== 'undefined') {\n  window.copySpecContent = copySpecContent;\n}\n","/**\n * Service modal tab navigation components\n * @module ui/modals/service/tabs\n */\n\nimport { getOpenAPIInfo } from './api-tab.js';\nimport type { ServiceResults } from '../../../types/index.js';\n\n// Window types are defined in types/globals.d.ts\n\n/**\n * Renders tab navigation\n */\nexport function renderTabs(data: ServiceResults): string {\n  const leftArrowSvg =\n    '<svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"><path d=\"M15 18l-6-6 6-6\"/></svg>';\n  const rightArrowSvg =\n    '<svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"><path d=\"M9 18l6-6-6-6\"/></svg>';\n\n  return `\n        <div class=\"tabs-container\">\n            <button class=\"tabs-scroll-btn tabs-scroll-left\" onclick=\"scrollTabs('left')\" aria-label=\"Scroll tabs left\">\n                ${leftArrowSvg}\n            </button>\n            <div class=\"tabs\">\n                <button class=\"tab-btn active\" onclick=\"switchTab(event, 'checks')\">Check Results</button>\n                ${getOpenAPIInfo(data).hasSpec ? '<button class=\"tab-btn\" onclick=\"switchTab(event, \\'api\\')\">API Specification</button>' : ''}\n                ${data.service.links && data.service.links.length > 0 ? '<button class=\"tab-btn\" onclick=\"switchTab(event, \\'links\\')\">Links</button>' : ''}\n                ${data.recent_contributors && data.recent_contributors.length > 0 ? '<button class=\"tab-btn\" onclick=\"switchTab(event, \\'contributors\\')\">Contributors</button>' : ''}\n                <button class=\"tab-btn\" onclick=\"switchTab(event, 'workflows')\">Workflow Runs</button>\n                <button class=\"tab-btn\" onclick=\"switchTab(event, 'badges')\">Badges</button>\n            </div>\n            <button class=\"tabs-scroll-btn tabs-scroll-right\" onclick=\"scrollTabs('right')\" aria-label=\"Scroll tabs right\">\n                ${rightArrowSvg}\n            </button>\n        </div>\n    `;\n}\n\n/**\n * Switches between tabs in the service modal\n */\nexport function switchTab(event: Event, tabName: string): void {\n  // Remove active class from all tab buttons and content\n  document\n    .querySelectorAll('.tab-btn')\n    .forEach((btn) => btn.classList.remove('active'));\n  document\n    .querySelectorAll('.tab-content')\n    .forEach((content) => content.classList.remove('active'));\n\n  // Add active class to clicked button and corresponding content\n  (event.target as HTMLElement).classList.add('active');\n  document.getElementById(`${tabName}-tab`)?.classList.add('active');\n\n  // Lazy load workflow runs when workflows tab is opened\n  if (tabName === 'workflows' && !window.serviceWorkflowLoaded) {\n    window.loadWorkflowRunsForService();\n  }\n}\n\n/**\n * Scrolls the tabs container left or right\n */\nexport function scrollTabs(direction: 'left' | 'right'): void {\n  const tabsContainer = document.querySelector('.tabs');\n  if (!tabsContainer) {\n    return;\n  }\n\n  const scrollAmount = 150;\n  const newScrollLeft =\n    direction === 'left'\n      ? tabsContainer.scrollLeft - scrollAmount\n      : tabsContainer.scrollLeft + scrollAmount;\n\n  tabsContainer.scrollTo({\n    left: newScrollLeft,\n    behavior: 'smooth',\n  });\n}\n\n/**\n * Updates the visibility of tab scroll arrows based on scroll position\n */\nexport function updateTabScrollArrows(): void {\n  const tabsContainer = document.querySelector('.tabs');\n  const leftBtn = document.querySelector('.tabs-scroll-left');\n  const rightBtn = document.querySelector('.tabs-scroll-right');\n\n  if (!tabsContainer || !leftBtn || !rightBtn) {\n    return;\n  }\n\n  const scrollLeft = tabsContainer.scrollLeft;\n  const maxScroll = tabsContainer.scrollWidth - tabsContainer.clientWidth;\n\n  // Show left arrow if not at the beginning\n  if (scrollLeft > 5) {\n    leftBtn.classList.add('visible');\n  } else {\n    leftBtn.classList.remove('visible');\n  }\n\n  // Show right arrow if not at the end\n  if (scrollLeft < maxScroll - 5) {\n    rightBtn.classList.add('visible');\n  } else {\n    rightBtn.classList.remove('visible');\n  }\n}\n\n/**\n * Initializes tab scroll arrows event listeners\n */\nexport function initTabScrollArrows(): void {\n  const tabsContainer = document.querySelector('.tabs');\n  if (!tabsContainer) {\n    return;\n  }\n\n  // Update arrows on scroll\n  tabsContainer.addEventListener('scroll', updateTabScrollArrows);\n\n  // Initial check after a small delay to ensure layout is complete\n  setTimeout(updateTabScrollArrows, 100);\n}\n","/**\n * Service modal checks tab component\n * @module ui/modals/service/checks-tab\n */\n\nimport { escapeHtml } from '../../../utils/formatting.js';\nimport type { CheckResult, CheckStatus } from '../../../types/index.js';\n\n/**\n * Groups checks by category (read from check metadata)\n */\nexport function groupChecksByCategory(\n  checks: CheckResult[]\n): Record<string, CheckResult[]> {\n  const categories: Record<string, CheckResult[]> = {};\n\n  checks.forEach((check) => {\n    // Read category from check metadata, default to 'Other' if missing\n    const category = check.category || 'Other';\n    if (!categories[category]) {\n      categories[category] = [];\n    }\n    categories[category].push(check);\n  });\n\n  // Define category order for consistent display\n  const categoryOrder = [\n    'Scorecards Setup',\n    'Documentation',\n    'Testing & CI',\n    'Configuration & Compliance',\n    'Other',\n  ];\n\n  // Return categories in defined order (case-insensitive matching)\n  const orderedCategories: Record<string, CheckResult[]> = {};\n  categoryOrder.forEach((category) => {\n    // Find matching category key (case-insensitive)\n    const matchingKey = Object.keys(categories).find(\n      (key) => key.toLowerCase() === category.toLowerCase()\n    );\n    if (matchingKey) {\n      orderedCategories[category] = categories[matchingKey];\n    }\n  });\n\n  return orderedCategories;\n}\n\n/**\n * Gets the status icon for a check\n */\nfunction getStatusIcon(status: CheckStatus): string {\n  switch (status) {\n  case 'pass':\n    return '\\u2713';\n  case 'excluded':\n    return '\\u2298';\n  default:\n    return '\\u2717';\n  }\n}\n\n/**\n * Renders a single check result\n */\nfunction renderCheck(check: CheckResult): string {\n  const isExcluded = check.status === 'excluded';\n\n  return `\n        <div class=\"check-result ${check.status}\">\n            <div class=\"check-name\">\n                ${getStatusIcon(check.status)} ${escapeHtml(check.name)}\n            </div>\n            <div class=\"check-description\">${escapeHtml(check.description)}</div>\n            ${\n  isExcluded\n    ? `\n                <div class=\"check-excluded-notice\">\n                    <em>Excluded from scoring</em>\n                </div>\n            `\n    : ''\n}\n            ${\n  check.stdout && check.stdout.trim()\n    ? `\n                <div class=\"check-output\">\n                    <strong>Output:</strong><br>\n                    ${escapeHtml(check.stdout.trim())}\n                </div>\n            `\n    : ''\n}\n            ${\n  check.stderr && check.stderr.trim() && check.status === 'fail'\n    ? `\n                <div class=\"check-output check-output-error\">\n                    <strong>Error:</strong><br>\n                    ${escapeHtml(check.stderr.trim())}\n                </div>\n            `\n    : ''\n}\n            <div class=\"check-meta\">\n                Weight: ${check.weight} | Duration: ${check.duration}s\n            </div>\n        </div>\n    `;\n}\n\n/**\n * Renders checks tab content with collapsible category grouping\n */\nexport function renderChecksTab(checks: CheckResult[]): string {\n  const categorizedChecks = groupChecksByCategory(checks);\n\n  return `\n        <div class=\"tab-content active\" id=\"checks-tab\">\n            <div class=\"check-categories\">\n                ${Object.entries(categorizedChecks)\n    .map(([category, categoryChecks]) => {\n      const passCount = categoryChecks.filter(\n        (c) => c.status === 'pass'\n      ).length;\n      const excludedCount = categoryChecks.filter(\n        (c) => c.status === 'excluded'\n      ).length;\n      const activeCount = categoryChecks.length - excludedCount;\n      const allPassed = passCount === activeCount && activeCount > 0;\n\n      return `\n                        <details class=\"check-category\" open>\n                            <summary class=\"check-category-header\">\n                                <span class=\"category-arrow\">\\u25BC</span>\n                                <span class=\"category-name\">${category}</span>\n                                <span class=\"category-stats ${allPassed ? 'all-passed' : 'has-failures'}\">\n                                    ${passCount}/${activeCount} passed${excludedCount > 0 ? ` <span class=\"excluded-count\">(${excludedCount} excluded)</span>` : ''}\n                                </span>\n                            </summary>\n                            <div class=\"check-category-content\">\n                                ${categoryChecks.map((check) => renderCheck(check)).join('')}\n                            </div>\n                        </details>\n                    `;\n    })\n    .join('')}\n            </div>\n        </div>\n    `;\n}\n","/**\n * Service modal links tab component\n * @module ui/modals/service/links-tab\n */\n\nimport { escapeHtml } from '../../../utils/formatting.js';\nimport type { ServiceLink } from '../../../types/index.js';\n\n/**\n * Renders links tab content\n */\nexport function renderLinksTab(links?: ServiceLink[]): string {\n  if (!links || links.length === 0) {\n    return '';\n  }\n\n  return `\n        <div class=\"tab-content\" id=\"links-tab\">\n            <ul class=\"link-list\">\n                ${links\n    .map(\n      (link) => `\n                    <li class=\"link-item\">\n                        <a href=\"${escapeHtml(link.url)}\" target=\"_blank\" rel=\"noopener noreferrer\">\n                            <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"currentColor\" style=\"flex-shrink: 0; margin-right: 8px;\">\n                                <path d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path>\n                            </svg>\n                            <div class=\"link-content\">\n                                <strong class=\"link-name\">${escapeHtml(link.name)}</strong>\n                                ${link.description ? `<p class=\"link-description\">${escapeHtml(link.description)}</p>` : ''}\n                            </div>\n                        </a>\n                    </li>\n                `\n    )\n    .join('')}\n            </ul>\n        </div>\n    `;\n}\n","/**\n * Service modal contributors tab component\n * @module ui/modals/service/contributors-tab\n */\n\nimport { escapeHtml, formatDate } from '../../../utils/formatting.js';\nimport { md5 } from '../../../utils/crypto.js';\nimport type { Contributor } from '../../../types/index.js';\n\n/**\n * Renders contributors tab content\n */\nexport function renderContributorsTab(contributors?: Contributor[]): string {\n  if (!contributors || contributors.length === 0) {\n    return '';\n  }\n\n  return `\n        <div class=\"tab-content\" id=\"contributors-tab\">\n            <h4 class=\"tab-section-header\">\n                Recent Contributors (Last 20 Commits)\n            </h4>\n            <p class=\"tab-section-description\" style=\"margin-bottom: 20px;\">\n                Contributors who have committed to this repository recently, ordered by commit count.\n            </p>\n            <div class=\"contributors-list\">\n                ${contributors\n    .map((contributor) => {\n      const emailHash = md5(contributor.email.toLowerCase().trim());\n      const avatarUrl = `https://www.gravatar.com/avatar/${emailHash}?d=identicon&s=48`;\n      const githubUsername = contributor.email\n        .split('@')[0]\n        .replace(/[^a-zA-Z0-9-]/g, '');\n      const isGithubEmail =\n                      contributor.email.includes('github') ||\n                      contributor.email.includes('users.noreply.github.com');\n\n      return `\n                        <div class=\"contributor-item\">\n                            <img src=\"${avatarUrl}\"\n                                 alt=\"${escapeHtml(contributor.name)}\"\n                                 class=\"contributor-avatar\"\n                                 onerror=\"this.src='https://www.gravatar.com/avatar/00000000000000000000000000000000?d=mp&s=48'\"\n                            >\n                            <div class=\"contributor-info\">\n                                <div class=\"contributor-name\">\n                                    <strong>${escapeHtml(contributor.name)}</strong>\n                                    ${\n  isGithubEmail\n    ? `<a href=\"https://github.com/${githubUsername}\"\n                                            target=\"_blank\"\n                                            rel=\"noopener noreferrer\"\n                                            class=\"contributor-github-link\"\n                                            title=\"View GitHub profile\">\n                                            <svg width=\"14\" height=\"14\" viewBox=\"0 0 16 16\" fill=\"currentColor\">\n                                                <path d=\"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z\"></path>\n                                            </svg>\n                                        </a>`\n    : ''\n}\n                                </div>\n                                <div class=\"contributor-email\">${escapeHtml(contributor.email)}</div>\n                                <div class=\"contributor-meta\">\n                                    <span class=\"contributor-commits\" title=\"${contributor.commit_count} commit${contributor.commit_count !== 1 ? 's' : ''}\">\n                                        <svg width=\"12\" height=\"12\" viewBox=\"0 0 16 16\" fill=\"currentColor\" style=\"vertical-align: middle; margin-right: 4px;\">\n                                            <path d=\"M1.643 3.143.427 1.927A.25.25 0 0 1 .604 1.5h6.792a.25.25 0 0 1 .177.427L6.357 3.143a.25.25 0 0 1-.177.073H1.82a.25.25 0 0 1-.177-.073ZM2.976 7.5A2.5 2.5 0 0 1 0 7.5v-2a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 .5.5v2a2.5 2.5 0 0 1-2.024 0Zm1.524-.5h-3v.25a1.5 1.5 0 0 0 3 0V7ZM8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0ZM1.5 8a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0Z\"></path>\n                                        </svg>\n                                        ${contributor.commit_count} commit${contributor.commit_count !== 1 ? 's' : ''}\n                                    </span>\n                                    <span class=\"contributor-date\" title=\"${new Date(contributor.last_commit_date).toLocaleString()}\">\n                                        Last commit: ${formatDate(contributor.last_commit_date)}\n                                    </span>\n                                    <span class=\"contributor-hash\">\n                                        <code>${contributor.last_commit_hash}</code>\n                                    </span>\n                                </div>\n                            </div>\n                        </div>\n                    `;\n    })\n    .join('')}\n            </div>\n        </div>\n    `;\n}\n","/**\n * Service modal workflows tab component\n * @module ui/modals/service/workflows-tab\n */\n\n/**\n * Renders workflows tab content\n */\nexport function renderWorkflowsTab(): string {\n  return `\n        <div class=\"tab-content\" id=\"workflows-tab\">\n            <div style=\"margin-bottom: 20px;\">\n                <div style=\"display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;\">\n                    <div class=\"widget-filters\" style=\"margin: 0;\">\n                        <button class=\"widget-filter-btn active\" data-status=\"all\" onclick=\"filterServiceWorkflows('all')\">\n                            All <span class=\"filter-count\" id=\"service-filter-count-all\">0</span>\n                        </button>\n                        <button class=\"widget-filter-btn\" data-status=\"in_progress\" onclick=\"filterServiceWorkflows('in_progress')\">\n                            In Progress <span class=\"filter-count\" id=\"service-filter-count-in_progress\">0</span>\n                        </button>\n                        <button class=\"widget-filter-btn\" data-status=\"queued\" onclick=\"filterServiceWorkflows('queued')\">\n                            Queued <span class=\"filter-count\" id=\"service-filter-count-queued\">0</span>\n                        </button>\n                        <button class=\"widget-filter-btn\" data-status=\"completed\" onclick=\"filterServiceWorkflows('completed')\">\n                            Completed <span class=\"filter-count\" id=\"service-filter-count-completed\">0</span>\n                        </button>\n                    </div>\n                    <div style=\"display: flex; gap: 8px; align-items: center;\">\n                        <select id=\"service-workflow-interval-select\" class=\"widget-interval-select\" onchange=\"changeServicePollingInterval()\" title=\"Auto-refresh interval\">\n                            <option value=\"5000\">5s</option>\n                            <option value=\"10000\">10s</option>\n                            <option value=\"15000\">15s</option>\n                            <option value=\"30000\" selected>30s</option>\n                            <option value=\"60000\">1m</option>\n                            <option value=\"120000\">2m</option>\n                            <option value=\"300000\">5m</option>\n                            <option value=\"0\">Off</option>\n                        </select>\n                        <button id=\"service-workflow-refresh\" class=\"widget-refresh-btn\" onclick=\"refreshServiceWorkflowRuns()\" title=\"Refresh\" style=\"padding: 6px 10px;\">\n                            <svg width=\"14\" height=\"14\" viewBox=\"0 0 16 16\" fill=\"currentColor\">\n                                <path d=\"M1.705 8.005a.75.75 0 0 1 .834.656 5.5 5.5 0 0 0 9.592 2.97l-1.204-1.204a.25.25 0 0 1 .177-.427h3.646a.25.25 0 0 1 .25.25v3.646a.25.25 0 0 1-.427.177l-1.38-1.38A7.002 7.002 0 0 1 1.05 8.84a.75.75 0 0 1 .656-.834ZM8 2.5a5.487 5.487 0 0 0-4.131 1.869l1.204 1.204A.25.25 0 0 1 4.896 6H1.25A.25.25 0 0 1 1 5.75V2.104a.25.25 0 0 1 .427-.177l1.38 1.38A7.002 7.002 0 0 1 14.95 7.16a.75.75 0 0 1-1.49.178A5.5 5.5 0 0 0 8 2.5Z\"></path>\n                            </svg>\n                        </button>\n                    </div>\n                </div>\n            </div>\n            <div id=\"service-workflows-content\">\n                <div class=\"loading\">Click to load workflow runs...</div>\n            </div>\n        </div>\n    `;\n}\n","/**\n * Service modal badges tab component\n * @module ui/modals/service/badges-tab\n */\n\nimport { getRawBaseUrl } from '../../../api/registry.js';\n\n/**\n * Renders badges tab content\n */\nexport function renderBadgesTab(org: string, repo: string): string {\n  const rawBaseUrl = getRawBaseUrl();\n  return `\n        <div class=\"tab-content\" id=\"badges-tab\">\n            <h4 class=\"tab-section-header\">Badge Preview</h4>\n            <div class=\"badge-preview-container\">\n                <img src=\"https://img.shields.io/endpoint?url=${rawBaseUrl}/badges/${org}/${repo}/score.json\" alt=\"Score Badge\" style=\"height: 20px;\">\n                <img src=\"https://img.shields.io/endpoint?url=${rawBaseUrl}/badges/${org}/${repo}/rank.json\" alt=\"Rank Badge\" style=\"height: 20px;\">\n            </div>\n\n            <h4 class=\"tab-section-header\" style=\"margin-bottom: 10px;\">Add to Your README</h4>\n            <p class=\"tab-section-description\">\n                Copy the markdown below:\n            </p>\n\n            <div style=\"position: relative; margin-bottom: 15px;\">\n                <button onclick=\"copyBadgeCode('score-badge-${org}-${repo}', event)\" class=\"copy-button\">Copy</button>\n                <pre id=\"score-badge-${org}-${repo}\" class=\"badge-code-block\">![Score](https://img.shields.io/endpoint?url=${rawBaseUrl}/badges/${org}/${repo}/score.json)</pre>\n            </div>\n\n            <div style=\"position: relative;\">\n                <button onclick=\"copyBadgeCode('rank-badge-${org}-${repo}', event)\" class=\"copy-button\">Copy</button>\n                <pre id=\"rank-badge-${org}-${repo}\" class=\"badge-code-block\">![Rank](https://img.shields.io/endpoint?url=${rawBaseUrl}/badges/${org}/${repo}/rank.json)</pre>\n            </div>\n        </div>\n    `;\n}\n","/**\n * Service modal - main orchestrator\n * @module ui/modals/service\n */\n\nimport { fetchWithHybridAuth } from '../../../api/registry.js';\nimport { isServiceStale } from '../../../services/staleness.js';\nimport { STORAGE_KEYS } from '../../../config/constants.js';\nimport { startButtonSpin } from '../../../utils/animation.js';\nimport type { ServiceResults, RegistryEntry } from '../../../types/index.js';\n\n// Import tab components\nimport { renderModalHeader, renderStalenessWarning } from './header.js';\nimport { renderModalStats } from './stats.js';\nimport {\n  renderTabs,\n  switchTab,\n  scrollTabs,\n  initTabScrollArrows,\n} from './tabs.js';\nimport { renderChecksTab } from './checks-tab.js';\nimport {\n  renderAPITab,\n  getOpenAPIInfo,\n  initSpecDetailsListeners,\n} from './api-tab.js';\nimport { renderLinksTab } from './links-tab.js';\nimport { renderContributorsTab } from './contributors-tab.js';\nimport { renderWorkflowsTab } from './workflows-tab.js';\nimport { renderBadgesTab } from './badges-tab.js';\n\n// Window types are defined in types/globals.d.ts\n\n// Re-export tab functions for external use\nexport { switchTab, scrollTabs };\n\n/**\n * Composes the full modal content HTML\n */\nfunction composeModalContent(\n  data: ServiceResults,\n  org: string,\n  repo: string,\n  isStale: boolean,\n  canTrigger: boolean\n): string {\n  const openapiInfo = getOpenAPIInfo(data);\n  const defaultBranch = data.default_branch || 'main';\n  return (\n    renderModalHeader(data, org, repo, data.installed, isStale) +\n    renderStalenessWarning(isStale, canTrigger, org, repo) +\n    renderModalStats(data) +\n    renderTabs(data) +\n    renderChecksTab(data.checks) +\n    renderAPITab(openapiInfo, org, repo, defaultBranch) +\n    renderLinksTab(data.service.links) +\n    renderContributorsTab(data.recent_contributors) +\n    renderWorkflowsTab() +\n    renderBadgesTab(org, repo)\n  );\n}\n\n/**\n * Restores the interval dropdown state from localStorage\n */\nfunction restoreIntervalDropdownState(): void {\n  const savedInterval = localStorage.getItem(\n    STORAGE_KEYS.SERVICE_WORKFLOW_POLL_INTERVAL\n  );\n  if (savedInterval !== null) {\n    window.serviceWorkflowPollIntervalTime = parseInt(savedInterval);\n    const select = document.getElementById(\n      'service-workflow-interval-select'\n    ) as HTMLSelectElement | null;\n    if (select) {\n      select.value = savedInterval;\n    }\n  }\n}\n\n/**\n * Shows service detail modal\n */\nexport async function showServiceDetail(\n  org: string,\n  repo: string\n): Promise<void> {\n  const modal = document.getElementById('service-modal');\n  const detailDiv = document.getElementById('service-detail');\n\n  if (!modal || !detailDiv) {return;}\n\n  // Store current service context for workflow runs\n  window.currentServiceOrg = org;\n  window.currentServiceRepo = repo;\n  window.serviceWorkflowLoaded = false;\n\n  modal.classList.remove('hidden');\n  detailDiv.innerHTML = '<div class=\"loading\">Loading service details...</div>';\n\n  try {\n    // Fetch both results and registry in parallel using hybrid approach\n    const resultsPath = `results/${org}/${repo}/results.json`;\n    const registryPath = `registry/${org}/${repo}.json`;\n\n    const [resultsData, registryData] = await Promise.all([\n      fetchWithHybridAuth(resultsPath),\n      fetchWithHybridAuth(registryPath),\n    ]);\n\n    const resultsRes = resultsData.response;\n    const registryRes = registryData.response;\n\n    if (!resultsRes.ok) {\n      throw new Error(`Failed to fetch results: ${resultsRes.status}`);\n    }\n\n    const data: ServiceResults = await resultsRes.json();\n\n    // Merge installation_pr and default_branch from registry if available\n    if (registryRes.ok) {\n      const registry: RegistryEntry = await registryRes.json();\n      if (registry.installation_pr) {\n        data.installation_pr = registry.installation_pr;\n      }\n      if (registry.default_branch) {\n        data.default_branch = registry.default_branch;\n      }\n    }\n\n    // Check staleness\n    const stale = isServiceStale(data, window.currentChecksHash);\n    const canTrigger = stale && data.installed;\n\n    // Compose modal HTML using helper function\n    detailDiv.innerHTML = composeModalContent(data, org, repo, stale, canTrigger);\n\n    // Initialize service workflow polling interval dropdown with saved preference\n    restoreIntervalDropdownState();\n\n    // Initialize tab scroll arrows for mobile\n    initTabScrollArrows();\n\n    // Initialize spec details toggle listeners for lazy loading\n    initSpecDetailsListeners();\n  } catch (error) {\n    console.error('Error loading service details:', error);\n    detailDiv.innerHTML = `\n            <h3>Error Loading Details</h3>\n            <p>Could not load details for ${org}/${repo}</p>\n            <p class=\"tab-section-description\">${error instanceof Error ? error.message : String(error)}</p>\n        `;\n  }\n}\n\n/**\n * Refreshes service data in the modal\n */\nexport async function refreshServiceData(\n  org: string,\n  repo: string\n): Promise<void> {\n  const button = document.getElementById('modal-refresh-btn');\n  if (!button) {\n    return;\n  }\n\n  // Get current active tab to preserve state\n  const activeTab = document.querySelector('.tab-btn.active');\n  const activeTabName = activeTab\n    ? activeTab.textContent?.trim().toLowerCase().replace(/\\s+/g, '-') ||\n      'check-results'\n    : 'check-results';\n\n  // Add spinning animation\n  const originalContent = button.innerHTML;\n  startButtonSpin(button);\n  (button as HTMLButtonElement).disabled = true;\n\n  try {\n    // Fetch both results and registry with cache bypass\n    const resultsPath = `results/${org}/${repo}/results.json`;\n    const registryPath = `registry/${org}/${repo}.json`;\n\n    const [resultsData, registryData] = await Promise.all([\n      fetchWithHybridAuth(resultsPath),\n      fetchWithHybridAuth(registryPath),\n    ]);\n\n    const resultsRes = resultsData.response;\n    const registryRes = registryData.response;\n\n    if (!resultsRes.ok) {\n      throw new Error(`Failed to fetch results: ${resultsRes.status}`);\n    }\n\n    const data: ServiceResults = await resultsRes.json();\n\n    // Merge installation_pr and default_branch from registry if available\n    if (registryRes.ok) {\n      const registry: RegistryEntry = await registryRes.json();\n      if (registry.installation_pr) {\n        data.installation_pr = registry.installation_pr;\n      }\n      if (registry.default_branch) {\n        data.default_branch = registry.default_branch;\n      }\n    }\n\n    // Re-render the modal (reuse showServiceDetail logic)\n    const detailDiv = document.getElementById('service-detail');\n    if (!detailDiv) {return;}\n\n    // Store current service context\n    window.currentServiceOrg = org;\n    window.currentServiceRepo = repo;\n\n    // Check staleness\n    const stale = isServiceStale(data, window.currentChecksHash);\n    const canTrigger = stale && data.installed;\n\n    // Regenerate modal content using helper function\n    detailDiv.innerHTML = composeModalContent(data, org, repo, stale, canTrigger);\n\n    // Re-initialize interval dropdown with saved preference\n    restoreIntervalDropdownState();\n\n    // Re-initialize spec details toggle listeners\n    initSpecDetailsListeners();\n\n    window.showToast('Service data refreshed', 'success');\n\n    // Restore previously active tab if it exists\n    setTimeout(() => {\n      const tabButtons = document.querySelectorAll('.tab-btn');\n      for (const btn of tabButtons) {\n        const btnText =\n          btn.textContent?.trim().toLowerCase().replace(/\\s+/g, '-') || '';\n        if (btnText === activeTabName) {\n          (btn as HTMLElement).click();\n          break;\n        }\n      }\n    }, 100);\n  } catch (error) {\n    console.error('Error refreshing service data:', error);\n    window.showToast(\n      `Failed to refresh service data: ${error instanceof Error ? error.message : String(error)}`,\n      'error'\n    );\n  } finally {\n    // Remove spinning animation and re-enable button\n    if (button) {\n      (button as HTMLButtonElement).disabled = false;\n      button.innerHTML = originalContent;\n    }\n  }\n}\n\n/**\n * Closes the service modal\n */\nexport function closeModal(): void {\n  const modal = document.getElementById('service-modal');\n  if (modal) {\n    modal.classList.add('hidden');\n  }\n\n  // Clean up service workflow polling\n  if (window.serviceWorkflowPollInterval) {\n    clearInterval(window.serviceWorkflowPollInterval);\n    window.serviceWorkflowPollInterval = null;\n  }\n\n  // Clean up service duration updates\n  if (window.serviceDurationUpdateInterval) {\n    clearInterval(window.serviceDurationUpdateInterval);\n    window.serviceDurationUpdateInterval = null;\n  }\n\n  // Reset service workflow state\n  window.currentServiceOrg = null;\n  window.currentServiceRepo = null;\n  window.serviceWorkflowRuns = [];\n  window.serviceWorkflowLoaded = false;\n  window.serviceWorkflowFilterStatus = 'all';\n}\n","/**\n * Service Workflows Manager\n * Handles workflow runs display and management for the service modal\n */\n\nimport {\n  escapeHtml,\n  formatInterval,\n  formatDuration,\n} from '../utils/formatting.js';\nimport { renderWorkflowRun } from './workflow-run.js';\nimport { showToast } from './toast.js';\nimport { getToken } from '../services/auth.js';\nimport { getCssVar } from '../utils/css.js';\nimport { API_CONFIG, STORAGE_KEYS } from '../config/constants.js';\nimport { startButtonSpin, stopButtonSpin } from '../utils/animation.js';\nimport type { WorkflowRun, WorkflowStatus } from '../types/index.js';\n\n// Window types are defined in types/globals.d.ts\n\n// Access window state variables\nconst getServiceOrg = (): string | null => window.currentServiceOrg;\nconst getServiceRepo = (): string | null => window.currentServiceRepo;\n\ninterface GitHubWorkflowRunsResponse {\n  workflow_runs: WorkflowRun[];\n}\n\n/**\n * Load workflow runs for the current service\n * Uses global variables: currentServiceOrg, currentServiceRepo\n */\nexport async function loadWorkflowRunsForService(): Promise<void> {\n  const currentServiceOrg = getServiceOrg();\n  const currentServiceRepo = getServiceRepo();\n  if (!currentServiceOrg || !currentServiceRepo) {\n    return;\n  }\n\n  if (!getToken()) {\n    const content = document.getElementById('service-workflows-content');\n    if (!content) {return;}\n\n    const linkBtnColor = getCssVar('--color-link-btn');\n    const linkBtnHover = getCssVar('--color-link-btn-hover');\n    const textSecondary = getCssVar('--color-text-secondary');\n    content.innerHTML = `\n            <div class=\"widget-empty\">\n                <p style=\"margin-bottom: 15px;\">GitHub Personal Access Token required to view workflow runs.</p>\n                <button\n                    onclick=\"openSettings()\"\n                    style=\"background: ${linkBtnColor}; color: white; padding: 10px 20px; border: none; border-radius: 6px; cursor: pointer; font-size: 0.95rem; font-weight: 500;\"\n                    onmouseover=\"this.style.background='${linkBtnHover}'\"\n                    onmouseout=\"this.style.background='${linkBtnColor}'\">\n                    Set GitHub PAT\n                </button>\n                <p style=\"margin-top: 10px; font-size: 0.85rem; color: ${textSecondary};\">\n                    Need a PAT with <code>workflow</code> scope to view workflow runs.\n                </p>\n            </div>\n        `;\n    return;\n  }\n\n  const content = document.getElementById('service-workflows-content');\n  if (!content) {return;}\n\n  // Only show loading message on initial load, not on refresh (prevents blink)\n  if (!window.serviceWorkflowLoaded) {\n    content.innerHTML = '<div class=\"loading\">Loading workflow runs...</div>';\n  }\n\n  try {\n    const response = await fetch(\n      `${API_CONFIG.GITHUB_BASE_URL}/repos/${currentServiceOrg}/${currentServiceRepo}/actions/runs?per_page=${API_CONFIG.PER_PAGE}&_t=${Date.now()}`,\n      {\n        headers: {\n          Authorization: `token ${getToken()}`,\n          Accept: API_CONFIG.ACCEPT_HEADER,\n        },\n        cache: 'no-cache',\n      }\n    );\n\n    if (!response.ok) {\n      throw new Error(`Failed to fetch workflow runs: ${response.status}`);\n    }\n\n    const data: GitHubWorkflowRunsResponse = await response.json();\n\n    // Add org/repo metadata to each run\n    window.serviceWorkflowRuns = data.workflow_runs.map((run) => ({\n      ...run,\n      org: currentServiceOrg,\n      repo: currentServiceRepo,\n    }));\n\n    window.serviceWorkflowLoaded = true;\n\n    // Update UI\n    renderServiceWorkflowRuns();\n\n    // Start polling for updates with configured interval\n    startServiceWorkflowPolling();\n  } catch (error) {\n    console.error('Error fetching service workflow runs:', error);\n    const errorColor = getCssVar('--color-text-error');\n    const textSecondary = getCssVar('--color-text-secondary');\n    content.innerHTML = `\n            <div class=\"widget-empty\">\n                <p style=\"color: ${errorColor}; margin-bottom: 10px;\">Error loading workflow runs</p>\n                <p style=\"font-size: 0.9rem; color: ${textSecondary};\">${escapeHtml(error instanceof Error ? error.message : String(error))}</p>\n            </div>\n        `;\n  }\n}\n\n/**\n * Start or restart polling for service workflow runs\n */\nexport function startServiceWorkflowPolling(): void {\n  // Clear existing interval\n  if (window.serviceWorkflowPollInterval) {\n    clearInterval(window.serviceWorkflowPollInterval);\n    window.serviceWorkflowPollInterval = null;\n  }\n\n  // Only start polling if interval is not 0 (disabled) and PAT is available\n  if (window.serviceWorkflowPollIntervalTime > 0 && getToken()) {\n    window.serviceWorkflowPollInterval = setInterval(() => {\n      loadWorkflowRunsForService();\n    }, window.serviceWorkflowPollIntervalTime);\n  }\n}\n\n/**\n * Change service workflow polling interval\n */\nexport function changeServicePollingInterval(): void {\n  const select = document.getElementById(\n    'service-workflow-interval-select'\n  ) as HTMLSelectElement | null;\n  if (!select) {return;}\n\n  const newInterval = parseInt(select.value);\n\n  // Save preference\n  localStorage.setItem(\n    STORAGE_KEYS.SERVICE_WORKFLOW_POLL_INTERVAL,\n    String(newInterval)\n  );\n  window.serviceWorkflowPollIntervalTime = newInterval;\n\n  // Restart polling with new interval\n  startServiceWorkflowPolling();\n\n  // Provide user feedback\n  if (newInterval === 0) {\n    showToast(\n      'Auto-refresh disabled. Use refresh button for manual updates.',\n      'info'\n    );\n  } else {\n    const intervalText = formatInterval(newInterval);\n    showToast(`Auto-refresh set to ${intervalText}`, 'success');\n  }\n}\n\n/**\n * Refresh service workflow runs manually\n */\nexport async function refreshServiceWorkflowRuns(): Promise<void> {\n  const button = document.getElementById('service-workflow-refresh');\n  if (!button) {return;}\n\n  // Add spinning animation\n  startButtonSpin(button);\n\n  // Clear loaded flag to force fresh fetch\n  window.serviceWorkflowLoaded = false;\n\n  try {\n    await loadWorkflowRunsForService();\n    showToast('Workflow runs refreshed', 'success');\n  } catch (_error) {\n    showToast('Failed to refresh workflow runs', 'error');\n  } finally {\n    // Remove spinning animation\n    stopButtonSpin(button);\n  }\n}\n\n/**\n * Render service workflow runs with current filter\n */\nexport function renderServiceWorkflowRuns(): void {\n  const content = document.getElementById('service-workflows-content');\n  if (!content) {return;}\n\n  // Filter runs based on selected status\n  let filteredRuns = window.serviceWorkflowRuns;\n  if (window.serviceWorkflowFilterStatus !== 'all') {\n    filteredRuns = window.serviceWorkflowRuns.filter(\n      (run) => run.status === window.serviceWorkflowFilterStatus\n    );\n  }\n\n  // Update filter counts\n  updateServiceFilterCounts();\n\n  if (filteredRuns.length === 0) {\n    const statusText =\n      window.serviceWorkflowFilterStatus === 'all'\n        ? ''\n        : window.serviceWorkflowFilterStatus.replace('_', ' ');\n    content.innerHTML = `\n            <div class=\"widget-empty\">\n                <p>No ${statusText} workflow runs found</p>\n            </div>\n        `;\n    return;\n  }\n\n  // Render workflow runs using existing renderWorkflowRun function\n  content.innerHTML = filteredRuns.map((run) => renderWorkflowRun(run)).join('');\n\n  // Start live duration updates for running workflows\n  if (\n    window.serviceWorkflowFilterStatus === 'all' ||\n    window.serviceWorkflowFilterStatus === 'in_progress'\n  ) {\n    startServiceLiveDurationUpdates();\n  }\n}\n\n/**\n * Update service filter counts\n */\nexport function updateServiceFilterCounts(): void {\n  const all = window.serviceWorkflowRuns.length;\n  const running = window.serviceWorkflowRuns.filter(\n    (r) => r.status === 'in_progress'\n  ).length;\n  const queued = window.serviceWorkflowRuns.filter((r) => r.status === 'queued').length;\n  const completed = window.serviceWorkflowRuns.filter(\n    (r) => r.status === 'completed'\n  ).length;\n\n  const setCount = (id: string, count: number): void => {\n    const el = document.getElementById(id);\n    if (el) {el.textContent = String(count);}\n  };\n\n  setCount('service-filter-count-all', all);\n  setCount('service-filter-count-in_progress', running);\n  setCount('service-filter-count-queued', queued);\n  setCount('service-filter-count-completed', completed);\n}\n\n/**\n * Filter service workflows by status\n */\nexport function filterServiceWorkflows(status: 'all' | WorkflowStatus): void {\n  window.serviceWorkflowFilterStatus = status;\n\n  // Update active button in the workflows tab\n  const workflowsTab = document.getElementById('workflows-tab');\n  if (workflowsTab) {\n    workflowsTab.querySelectorAll('.widget-filter-btn').forEach((btn) => {\n      btn.classList.remove('active');\n    });\n    const activeBtn = workflowsTab.querySelector(`[data-status=\"${status}\"]`);\n    if (activeBtn) {\n      activeBtn.classList.add('active');\n    }\n  }\n\n  // Re-render content\n  renderServiceWorkflowRuns();\n}\n\n/**\n * Start live duration updates for service workflows\n */\nexport function startServiceLiveDurationUpdates(): void {\n  // Clear any existing interval\n  if (window.serviceDurationUpdateInterval) {\n    clearInterval(window.serviceDurationUpdateInterval);\n  }\n\n  // Update every second\n  window.serviceDurationUpdateInterval = setInterval(() => {\n    const serviceContent = document.getElementById('service-workflows-content');\n    if (!serviceContent) {\n      if (window.serviceDurationUpdateInterval) {\n        clearInterval(window.serviceDurationUpdateInterval);\n      }\n      return;\n    }\n\n    const durationElements =\n      serviceContent.querySelectorAll<HTMLElement>('.widget-run-duration');\n    durationElements.forEach((el) => {\n      const startedAt = el.dataset.started;\n      const status = el.dataset.status;\n\n      if (startedAt) {\n        const start = new Date(startedAt);\n        const now = new Date();\n        const durationMs = now.getTime() - start.getTime();\n\n        const timeStr = formatDuration(durationMs);\n\n        // Add appropriate label based on status\n        const label =\n          status === 'in_progress'\n            ? 'Running for'\n            : status === 'queued'\n              ? 'Queued'\n              : 'Completed';\n\n        el.textContent = `${label} ${timeStr}`;\n      }\n    });\n  }, 1000);\n}\n","/**\n * GitHub Actions Widget\n * Sidebar widget for monitoring workflow runs in the scorecards repository\n */\n\nimport {\n  escapeHtml,\n  formatDuration,\n  formatInterval,\n} from '../utils/formatting.js';\nimport { showToast } from './toast.js';\nimport { getToken } from '../services/auth.js';\nimport { API_CONFIG, TIMING, STORAGE_KEYS } from '../config/constants.js';\nimport { getRepoOwner, getRepoName } from '../api/registry.js';\nimport type { WorkflowRun, WorkflowStatus, WorkflowConclusion } from '../types/index.js';\n\n// Window types are defined in types/globals.d.ts\n\n// Widget State\nlet widgetOpen = false;\nlet widgetWorkflowRuns: WorkflowRun[] = [];\nlet widgetFilterStatus: 'all' | WorkflowStatus = 'all';\nlet widgetPollInterval: ReturnType<typeof setInterval> | null = null;\nlet widgetLastFetch = 0;\nlet currentPollingInterval: number = TIMING.POLLING_ACTIVE; // Default, configurable\nconst WIDGET_CACHE_TTL: number = TIMING.CACHE_MEDIUM; // 15 seconds cache\n\ninterface GitHubWorkflowRunResponse {\n  workflow_runs: Array<{\n    id: number;\n    name: string;\n    status: 'queued' | 'in_progress' | 'completed' | 'waiting';\n    conclusion: WorkflowConclusion | null;\n    html_url: string;\n    created_at: string;\n    updated_at: string;\n    run_started_at?: string;\n  }>;\n}\n\n/**\n * Initialize the widget\n */\nexport function initializeActionsWidget(): void {\n  // Load saved interval preference\n  const savedInterval = localStorage.getItem(STORAGE_KEYS.WIDGET_POLL_INTERVAL);\n  if (savedInterval !== null) {\n    currentPollingInterval = parseInt(savedInterval);\n    // Update dropdown to reflect saved value\n    const select = document.getElementById(\n      'widget-interval-select'\n    ) as HTMLSelectElement | null;\n    if (select) {\n      select.value = savedInterval;\n    }\n  }\n\n  // Set GitHub Actions link URL\n  const actionsLink = document.getElementById(\n    'widget-actions-link'\n  ) as HTMLAnchorElement | null;\n  if (actionsLink) {\n    actionsLink.href = `https://github.com/${getRepoOwner()}/${getRepoName()}/actions`;\n  }\n\n  // Start polling if PAT is available\n  if (getToken()) {\n    startWidgetPolling();\n  }\n}\n\n/**\n * Toggle widget visibility\n */\nexport function toggleActionsWidget(): void {\n  widgetOpen = !widgetOpen;\n  const sidebar = document.getElementById('widget-sidebar');\n  const toggle = document.getElementById('widget-toggle');\n\n  if (widgetOpen) {\n    sidebar?.classList.add('open');\n    toggle?.classList.add('active');\n\n    // Fetch data when opening if PAT is available\n    if (getToken()) {\n      fetchWorkflowRuns();\n    }\n  } else {\n    sidebar?.classList.remove('open');\n    toggle?.classList.remove('active');\n  }\n}\n\n/**\n * Start polling for workflow runs\n */\nexport function startWidgetPolling(): void {\n  // Clear existing interval\n  if (widgetPollInterval) {\n    clearInterval(widgetPollInterval);\n    widgetPollInterval = null;\n  }\n\n  // Initial fetch\n  fetchWorkflowRuns();\n\n  // If interval is 0 (disabled), don't start polling\n  if (currentPollingInterval === 0) {\n    console.log('Widget auto-refresh disabled by user preference');\n    return;\n  }\n\n  // Set up polling with current interval\n  widgetPollInterval = setInterval(() => {\n    fetchWorkflowRuns();\n  }, currentPollingInterval);\n\n  console.log(`Widget polling started with ${currentPollingInterval}ms interval`);\n}\n\n/**\n * Stop polling\n */\nexport function stopWidgetPolling(): void {\n  if (widgetPollInterval) {\n    clearInterval(widgetPollInterval);\n    widgetPollInterval = null;\n  }\n}\n\n/**\n * Fetch workflow runs from GitHub Actions API\n */\nexport async function fetchWorkflowRuns(): Promise<void> {\n  if (!getToken()) {\n    renderWidgetEmpty('no-pat');\n    return;\n  }\n\n  // Check cache\n  const now = Date.now();\n  if (now - widgetLastFetch < WIDGET_CACHE_TTL && widgetWorkflowRuns.length > 0) {\n    console.log('Using cached workflow runs');\n    return;\n  }\n\n  try {\n    // Fetch workflow runs from the scorecards repository\n    const response = await fetch(\n      `${API_CONFIG.GITHUB_BASE_URL}/repos/${getRepoOwner()}/${getRepoName()}/actions/runs?per_page=${API_CONFIG.PER_PAGE}&_t=${Date.now()}`,\n      {\n        headers: {\n          Authorization: `token ${getToken()}`,\n          Accept: API_CONFIG.ACCEPT_HEADER,\n        },\n        cache: 'no-cache',\n      }\n    );\n\n    if (!response.ok) {\n      throw new Error(`Failed to fetch workflow runs: ${response.status}`);\n    }\n\n    const data: GitHubWorkflowRunResponse = await response.json();\n\n    // Add org/repo metadata to each run\n    const allRuns: WorkflowRun[] = data.workflow_runs.map((run) => ({\n      ...run,\n      org: getRepoOwner(),\n      repo: getRepoName(),\n      service_name: 'Scorecards',\n    }));\n\n    // Filter to recent runs (last 24 hours) and sort by created_at\n    const oneDayAgo = new Date(Date.now() - 24 * 60 * 60 * 1000);\n    widgetWorkflowRuns = allRuns\n      .filter((run) => new Date(run.created_at) > oneDayAgo)\n      .sort(\n        (a, b) =>\n          new Date(b.created_at).getTime() - new Date(a.created_at).getTime()\n      );\n\n    widgetLastFetch = now;\n\n    // Update UI\n    updateWidgetBadge();\n    renderWidgetContent();\n  } catch (error) {\n    console.error('Error fetching workflow runs:', error);\n    renderWidgetEmpty(\n      'error',\n      error instanceof Error ? error.message : String(error)\n    );\n  }\n}\n\n/**\n * Update widget badge count\n */\nexport function updateWidgetBadge(): void {\n  const badge = document.getElementById('widget-badge');\n  if (!badge) {return;}\n\n  const activeRuns = widgetWorkflowRuns.filter(\n    (run) => run.status === 'in_progress' || run.status === 'queued'\n  );\n\n  badge.textContent = String(activeRuns.length);\n  badge.style.display = activeRuns.length > 0 ? 'flex' : 'none';\n}\n\n/**\n * Render widget content based on current filter\n */\nexport function renderWidgetContent(): void {\n  const content = document.getElementById('widget-content');\n  if (!content) {return;}\n\n  // Filter runs based on selected status\n  let filteredRuns = widgetWorkflowRuns;\n  if (widgetFilterStatus !== 'all') {\n    filteredRuns = widgetWorkflowRuns.filter(\n      (run) => run.status === widgetFilterStatus\n    );\n  }\n\n  // Update filter counts\n  updateFilterCounts();\n\n  if (filteredRuns.length === 0) {\n    content.innerHTML = `\n            <div class=\"widget-empty\">\n                <p>No ${widgetFilterStatus === 'all' ? '' : widgetFilterStatus} workflow runs in the last 24 hours</p>\n            </div>\n        `;\n    return;\n  }\n\n  // Render workflow runs\n  content.innerHTML = filteredRuns.map((run) => renderWorkflowRun(run)).join('');\n\n  // Start live duration updates for running workflows\n  if (widgetFilterStatus === 'all' || widgetFilterStatus === 'in_progress') {\n    startLiveDurationUpdates();\n  }\n}\n\n/**\n * Render a single workflow run\n */\nfunction renderWorkflowRun(run: WorkflowRun): string {\n  const statusClass =\n    run.status === 'completed'\n      ? run.conclusion === 'success'\n        ? 'success'\n        : run.conclusion === 'failure'\n          ? 'failure'\n          : 'neutral'\n      : run.status;\n\n  const statusIcon = getStatusIcon(run.status, run.conclusion || null);\n  const durationInfo = calculateDuration(run);\n\n  return `\n        <div class=\"widget-run-item\" data-run-id=\"${run.id}\">\n            <div class=\"widget-run-header\">\n                <span class=\"widget-run-status status-${statusClass}\">${statusIcon}</span>\n                <div class=\"widget-run-info\">\n                    <div class=\"widget-run-name\">${escapeHtml(run.name)}</div>\n                    <div class=\"widget-run-repo\">${escapeHtml(run.org || '')}/${escapeHtml(run.repo || '')}</div>\n                </div>\n            </div>\n            <div class=\"widget-run-meta\">\n                <span class=\"widget-run-duration\" data-started=\"${run.run_started_at || run.created_at}\" data-status=\"${run.status}\">\n                    ${durationInfo.label} ${durationInfo.time}\n                </span>\n                <a href=\"${run.html_url}\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"widget-run-link\" onclick=\"event.stopPropagation()\">\n                    View\n                    <svg width=\"12\" height=\"12\" viewBox=\"0 0 16 16\" fill=\"currentColor\">\n                        <path d=\"M3.75 2h3.5a.75.75 0 0 1 0 1.5h-3.5a.25.25 0 0 0-.25.25v8.5c0 .138.112.25.25.25h8.5a.25.25 0 0 0 .25-.25v-3.5a.75.75 0 0 1 1.5 0v3.5A1.75 1.75 0 0 1 12.25 14h-8.5A1.75 1.75 0 0 1 2 12.25v-8.5C2 2.784 2.784 2 3.75 2Zm6.854-1h4.146a.25.25 0 0 1 .25.25v4.146a.25.25 0 0 1-.427.177L13.03 4.03 9.28 7.78a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042l3.75-3.75-1.543-1.543A.25.25 0 0 1 10.604 1Z\"></path>\n                    </svg>\n                </a>\n            </div>\n        </div>\n    `;\n}\n\n/**\n * Get status icon based on status and conclusion\n */\nfunction getStatusIcon(\n  status: WorkflowStatus,\n  conclusion: WorkflowConclusion | null\n): string {\n  if (status === 'in_progress') {\n    return '<span class=\"spinner-small\"></span>';\n  } else if (status === 'queued') {\n    return '⏳';\n  } else if (status === 'completed') {\n    if (conclusion === 'success') {return '✓';}\n    if (conclusion === 'failure') {return '✗';}\n    if (conclusion === 'cancelled') {return '⊘';}\n    return '●';\n  }\n  return '●';\n}\n\ninterface DurationInfo {\n  label: string;\n  time: string;\n}\n\n/**\n * Calculate duration for a workflow run\n */\nfunction calculateDuration(run: WorkflowRun): DurationInfo {\n  const now = new Date();\n\n  if (run.status === 'completed') {\n    // Show time since completion\n    const completedAt = new Date(run.updated_at);\n    const timeSince = now.getTime() - completedAt.getTime();\n    return {\n      label: 'Completed',\n      time: formatDuration(timeSince),\n    };\n  } else if (run.status === 'in_progress') {\n    // Show running time\n    const startedAt = new Date(run.run_started_at || run.created_at);\n    const elapsed = now.getTime() - startedAt.getTime();\n    return {\n      label: 'Running for',\n      time: formatDuration(elapsed),\n    };\n  } else {\n    // Queued - show time since creation\n    const createdAt = new Date(run.created_at);\n    const waiting = now.getTime() - createdAt.getTime();\n    return {\n      label: 'Queued',\n      time: formatDuration(waiting),\n    };\n  }\n}\n\n/**\n * Start live duration updates for running workflows\n */\nfunction startLiveDurationUpdates(): void {\n  // Update every second\n  setInterval(() => {\n    const durationElements =\n      document.querySelectorAll<HTMLElement>('.widget-run-duration');\n    durationElements.forEach((el) => {\n      const startedAt = el.dataset.started;\n      const status = el.dataset.status;\n\n      if (startedAt) {\n        const start = new Date(startedAt);\n        const now = new Date();\n        const durationMs = now.getTime() - start.getTime();\n\n        const timeStr = formatDuration(durationMs);\n\n        // Add appropriate label based on status\n        const label =\n          status === 'in_progress'\n            ? 'Running for'\n            : status === 'queued'\n              ? 'Queued'\n              : 'Completed';\n\n        el.textContent = `${label} ${timeStr}`;\n      }\n    });\n  }, 1000);\n}\n\n/**\n * Update filter counts\n */\nfunction updateFilterCounts(): void {\n  const all = widgetWorkflowRuns.length;\n  const running = widgetWorkflowRuns.filter(\n    (r) => r.status === 'in_progress'\n  ).length;\n  const queued = widgetWorkflowRuns.filter((r) => r.status === 'queued').length;\n  const completed = widgetWorkflowRuns.filter(\n    (r) => r.status === 'completed'\n  ).length;\n\n  const setCount = (id: string, count: number): void => {\n    const el = document.getElementById(id);\n    if (el) {el.textContent = String(count);}\n  };\n\n  setCount('count-all', all);\n  setCount('count-running', running);\n  setCount('count-queued', queued);\n  setCount('count-completed', completed);\n}\n\n/**\n * Filter actions by status\n */\nexport function filterActions(status: 'all' | WorkflowStatus): void {\n  widgetFilterStatus = status;\n\n  // Update active button\n  document.querySelectorAll('.widget-filter-btn').forEach((btn) => {\n    btn.classList.remove('active');\n  });\n  document.querySelector(`[data-status=\"${status}\"]`)?.classList.add('active');\n\n  // Re-render content\n  renderWidgetContent();\n}\n\n/**\n * Refresh widget manually\n */\nexport async function refreshActionsWidget(): Promise<void> {\n  const btn = document.getElementById('widget-refresh');\n  btn?.classList.add('spinning');\n\n  // Clear cache\n  widgetLastFetch = 0;\n\n  // Fetch new data\n  await fetchWorkflowRuns();\n\n  // Remove spinning class\n  setTimeout(() => {\n    btn?.classList.remove('spinning');\n  }, 500);\n\n  showToast('GitHub Actions refreshed', 'success');\n}\n\n/**\n * Change polling interval\n */\nexport function changePollingInterval(): void {\n  const select = document.getElementById(\n    'widget-interval-select'\n  ) as HTMLSelectElement | null;\n  if (!select) {return;}\n\n  const newInterval = parseInt(select.value);\n\n  // Save preference\n  localStorage.setItem(STORAGE_KEYS.WIDGET_POLL_INTERVAL, String(newInterval));\n  currentPollingInterval = newInterval;\n\n  // Restart polling with new interval (if PAT is available)\n  if (getToken()) {\n    startWidgetPolling();\n  }\n\n  // Provide user feedback\n  if (newInterval === 0) {\n    showToast(\n      'Auto-refresh disabled. Use refresh button for manual updates.',\n      'info'\n    );\n  } else {\n    const intervalText = formatInterval(newInterval);\n    showToast(`Auto-refresh set to ${intervalText}`, 'success');\n  }\n}\n\n/**\n * Render empty state\n */\nfunction renderWidgetEmpty(\n  reason: 'no-pat' | 'error',\n  errorMessage = ''\n): void {\n  const content = document.getElementById('widget-content');\n  if (!content) {return;}\n\n  if (reason === 'no-pat') {\n    content.innerHTML = `\n            <div class=\"widget-empty\">\n                <p>Configure GitHub PAT in settings to view workflow runs</p>\n                <button onclick=\"openSettings()\" class=\"widget-empty-btn\">Open Settings</button>\n            </div>\n        `;\n  } else if (reason === 'error') {\n    content.innerHTML = `\n            <div class=\"widget-empty\">\n                <p>Error loading workflow runs</p>\n                <p class=\"widget-error-msg\">${escapeHtml(errorMessage)}</p>\n            </div>\n        `;\n  }\n\n  // Update badge and counts\n  updateWidgetBadge();\n  const setZero = (id: string): void => {\n    const el = document.getElementById(id);\n    if (el) {el.textContent = '0';}\n  };\n  setZero('count-all');\n  setZero('count-running');\n  setZero('count-queued');\n  setZero('count-completed');\n}\n\n/**\n * Handle PAT save - restart widget polling\n * This should be called after PAT is saved\n */\nexport function handlePATSaved(): void {\n  // Start widget polling if PAT was saved successfully\n  if (getToken()) {\n    startWidgetPolling();\n  }\n}\n\n/**\n * Handle PAT clear - stop widget polling\n * This should be called after PAT is cleared\n */\nexport function handlePATCleared(): void {\n  // Stop widget polling when PAT is cleared\n  stopWidgetPolling();\n  renderWidgetEmpty('no-pat');\n}\n","/**\n * Settings Modal and PAT Management\n * Handles GitHub Personal Access Token configuration and display\n */\n\nimport { showToast } from './toast.js';\nimport { handlePATSaved, handlePATCleared } from './actions-widget.js';\nimport { setToken, clearToken, getToken } from '../services/auth.js';\n\n/**\n * Open settings modal\n */\nexport function openSettings(): void {\n  const modal = document.getElementById('settings-modal');\n  modal?.classList.remove('hidden');\n\n  // Update UI to reflect current PAT state\n  updateModeIndicator();\n\n  // Auto-check rate limit when opening settings\n  checkRateLimit();\n}\n\n/**\n * Close settings modal\n */\nexport function closeSettings(): void {\n  const modal = document.getElementById('settings-modal');\n  modal?.classList.add('hidden');\n}\n\n/**\n * Test if a PAT is valid\n */\nexport async function testPAT(pat: string): Promise<boolean> {\n  try {\n    const response = await fetch('https://api.github.com/user', {\n      headers: {\n        Authorization: `token ${pat}`,\n        Accept: 'application/vnd.github.v3+json',\n      },\n    });\n    return response.ok;\n  } catch (error) {\n    console.error('Error testing PAT:', error);\n    return false;\n  }\n}\n\n/**\n * Save PAT to in-memory storage\n */\nexport async function savePAT(): Promise<void> {\n  const input = document.getElementById(\n    'github-pat-input'\n  ) as HTMLInputElement | null;\n  const pat = input?.value.trim();\n\n  if (!pat) {\n    showToast('Please enter a valid PAT', 'error');\n    return;\n  }\n\n  // Test the PAT first\n  showToast('Validating token...', 'info');\n  const isValid = await testPAT(pat);\n\n  if (isValid) {\n    setToken(pat);\n    updateWidgetState();\n    updateModeIndicator();\n\n    // Notify actions widget\n    handlePATSaved();\n\n    showToast('PAT saved successfully! Using GitHub API mode.', 'success');\n    checkRateLimit(); // Update rate limit display\n  } else {\n    showToast('Invalid PAT. Please check and try again.', 'error');\n  }\n}\n\n/**\n * Clear PAT from in-memory storage\n */\nexport function clearPAT(): void {\n  clearToken();\n  const input = document.getElementById(\n    'github-pat-input'\n  ) as HTMLInputElement | null;\n  if (input) {input.value = '';}\n  updateWidgetState();\n  updateModeIndicator();\n\n  // Notify actions widget\n  handlePATCleared();\n\n  showToast('PAT cleared. Using public CDN mode.', 'info');\n  checkRateLimit(); // Update rate limit display\n}\n\n/**\n * Update the widget visual state based on PAT presence\n */\nexport function updateWidgetState(): void {\n  const settingsBtn = document.getElementById('settings-btn');\n  const unlockedIcon = document.querySelector<HTMLElement>('.unlocked-icon');\n  const lockedIcon = document.querySelector<HTMLElement>('.locked-icon');\n\n  if (getToken()) {\n    // PAT loaded - show locked icon\n    settingsBtn?.classList.add('has-token');\n    if (unlockedIcon) {unlockedIcon.style.display = 'none';}\n    if (lockedIcon) {lockedIcon.style.display = 'block';}\n    settingsBtn?.setAttribute('title', 'Settings (PAT loaded)');\n    settingsBtn?.setAttribute('aria-label', 'Settings (PAT loaded)');\n  } else {\n    // No PAT - show unlocked icon\n    settingsBtn?.classList.remove('has-token');\n    if (unlockedIcon) {unlockedIcon.style.display = 'block';}\n    if (lockedIcon) {lockedIcon.style.display = 'none';}\n    settingsBtn?.setAttribute('title', 'Settings');\n    settingsBtn?.setAttribute('aria-label', 'Settings');\n  }\n}\n\n/**\n * Update mode indicator in settings modal\n */\nexport function updateModeIndicator(): void {\n  const indicator = document.getElementById('mode-indicator');\n  const currentMode = document.querySelector('.current-mode');\n\n  if (getToken()) {\n    if (indicator) {indicator.textContent = 'GitHub API (fast, authenticated)';}\n    currentMode?.classList.add('api-mode');\n  } else {\n    if (indicator) {indicator.textContent = 'Public CDN (slower, no rate limits)';}\n    currentMode?.classList.remove('api-mode');\n  }\n}\n\ninterface RateLimitResponse {\n  rate: {\n    remaining: number;\n    limit: number;\n    reset: number;\n  };\n}\n\n/**\n * Check and display GitHub API rate limit status\n */\nexport async function checkRateLimit(): Promise<void> {\n  try {\n    const token = getToken();\n    const headers: Record<string, string> = token\n      ? { Authorization: `token ${token}` }\n      : {};\n\n    const response = await fetch('https://api.github.com/rate_limit', {\n      headers,\n    });\n    const data: RateLimitResponse = await response.json();\n\n    const setElementText = (id: string, value: string | number): void => {\n      const el = document.getElementById(id);\n      if (el) {el.textContent = String(value);}\n    };\n\n    setElementText('rate-limit-remaining', data.rate.remaining);\n    setElementText('rate-limit-limit', data.rate.limit);\n    setElementText(\n      'rate-limit-reset',\n      new Date(data.rate.reset * 1000).toLocaleTimeString()\n    );\n\n    if (data.rate.remaining < 10) {\n      showToast('Warning: Low rate limit remaining!', 'warning');\n    }\n  } catch (error) {\n    console.error('Error checking rate limit:', error);\n    const setError = (id: string, value: string): void => {\n      const el = document.getElementById(id);\n      if (el) {el.textContent = value;}\n    };\n    setError('rate-limit-remaining', 'Error');\n    setError('rate-limit-limit', '-');\n    setError('rate-limit-reset', '-');\n  }\n}\n","/**\n * Statistics Display\n * Calculates and updates dashboard statistics\n */\n\nimport { isServiceStale } from '../services/staleness.js';\nimport { countByRank, calculateAverageScore } from '../utils/statistics.js';\nimport type { ServiceData } from '../types/index.js';\n\n// Window types are defined in types/globals.d.ts\n\ndeclare const allServices: ServiceData[];\ndeclare const currentChecksHash: string | null;\n\n/**\n * Update dashboard statistics\n * Uses global variables: allServices, currentChecksHash\n */\nexport function updateStats(): void {\n  const services = window.allServices || allServices;\n  const checksHash = window.currentChecksHash ?? currentChecksHash;\n\n  const total = services.length;\n  const avgScore = calculateAverageScore(services);\n  const rankCounts = countByRank(services);\n\n  const apiCount = services.filter((s) => s.has_api).length;\n  const staleCount = services.filter((s) =>\n    isServiceStale(s, checksHash)\n  ).length;\n  const installedCount = services.filter((s) => s.installed).length;\n\n  const setElementText = (id: string, value: number | string): void => {\n    const el = document.getElementById(id);\n    if (el) {el.textContent = String(value);}\n  };\n\n  setElementText('total-services', total);\n  setElementText('avg-score', avgScore);\n  setElementText('api-count', apiCount);\n  setElementText('stale-count', staleCount);\n  setElementText('installed-count', installedCount);\n  setElementText('platinum-count', rankCounts.platinum);\n  setElementText('gold-count', rankCounts.gold);\n  setElementText('silver-count', rankCounts.silver);\n  setElementText('bronze-count', rankCounts.bronze);\n}\n","/**\n * Button State Management\n * Centralized button UI state transitions\n */\n\nimport { getCssVar } from '../utils/css.js';\nimport { getIcon } from '../config/icons.js';\nimport { TIMING } from '../config/constants.js';\n\n/**\n * Set button to loading state\n */\nexport function setButtonLoading(\n  button: HTMLButtonElement | null,\n  message = 'Loading...'\n): void {\n  if (!button) {return;}\n\n  // Store original state\n  button.disabled = true;\n  button.dataset.originalHTML = button.innerHTML;\n  button.dataset.originalTitle = button.title || '';\n\n  // Add spinning animation to existing icon\n  const svg = button.querySelector('svg');\n  if (svg) {\n    svg.classList.add('spinning');\n  }\n\n  // Update tooltip\n  button.title = message;\n}\n\n/**\n * Set button to success state\n */\nexport function setButtonSuccess(\n  button: HTMLButtonElement | null,\n  message: string,\n  duration = TIMING.BUTTON_STATE_DURATION\n): Promise<void> {\n  if (!button) {return Promise.resolve();}\n\n  // Store original state if not already stored\n  if (!button.dataset.originalHTML) {\n    button.dataset.originalHTML = button.innerHTML;\n    button.dataset.originalTitle = button.title || '';\n  }\n  button.dataset.originalBackground = button.style.background || '';\n  button.dataset.originalColor = button.style.color || '';\n\n  // Show success state - replace with checkmark icon\n  button.innerHTML = getIcon('checkmark');\n  button.style.background = getCssVar('--color-success-btn');\n  button.style.color = 'white';\n  button.title = message;\n\n  return new Promise((resolve) => {\n    setTimeout(() => {\n      resetButton(button);\n      resolve();\n    }, duration);\n  });\n}\n\n/**\n * Set button to error state\n */\nexport function setButtonError(\n  button: HTMLButtonElement | null,\n  message: string,\n  duration = TIMING.BUTTON_STATE_DURATION\n): Promise<void> {\n  if (!button) {return Promise.resolve();}\n\n  // Store original state if not already stored\n  if (!button.dataset.originalHTML) {\n    button.dataset.originalHTML = button.innerHTML;\n    button.dataset.originalTitle = button.title || '';\n  }\n  button.dataset.originalBackground = button.style.background || '';\n  button.dataset.originalColor = button.style.color || '';\n\n  // Show error state - replace with X icon\n  button.innerHTML = getIcon('xMark');\n  button.style.background = getCssVar('--color-error-btn');\n  button.style.color = 'white';\n  button.title = message;\n\n  return new Promise((resolve) => {\n    setTimeout(() => {\n      resetButton(button);\n      resolve();\n    }, duration);\n  });\n}\n\n/**\n * Reset button to original state\n */\nexport function resetButton(button: HTMLButtonElement | null): void {\n  if (!button) {return;}\n\n  button.disabled = false;\n\n  // Restore original HTML (icon)\n  if (button.dataset.originalHTML) {\n    button.innerHTML = button.dataset.originalHTML;\n    delete button.dataset.originalHTML;\n  }\n\n  // Restore original title\n  if (button.dataset.originalTitle !== undefined) {\n    button.title = button.dataset.originalTitle;\n    delete button.dataset.originalTitle;\n  }\n\n  // Restore original styles\n  button.style.background = button.dataset.originalBackground || '';\n  button.style.color = button.dataset.originalColor || '';\n\n  // Clean up any spinning animation\n  const svg = button.querySelector('svg');\n  if (svg) {\n    svg.classList.remove('spinning');\n  }\n}\n","/**\n * Team Filter Component\n * Multi-select dropdown for filtering services by team\n */\n\nimport { getUniqueTeams, getTeamName } from '../utils/team-statistics.js';\nimport type { ServiceData } from '../types/index.js';\n\n// Window types are defined in types/globals.d.ts\n\nexport interface TeamFilterState {\n  teams: string[];\n  includeNoTeam: boolean;\n}\n\ntype FilterChangeCallback = (state: TeamFilterState) => void;\n\n// State\nlet selectedTeams = new Set<string>();\nlet allTeams: string[] = [];\nlet includeNoTeam = false;\nlet onFilterChange: FilterChangeCallback | null = null;\n\n/**\n * Initialize the team filter\n */\nexport function initTeamFilter(\n  services: ServiceData[],\n  onChange: FilterChangeCallback\n): void {\n  onFilterChange = onChange;\n  allTeams = getUniqueTeams(services);\n  selectedTeams.clear();\n  includeNoTeam = false;\n\n  renderTeamFilter();\n}\n\n/**\n * Update team filter with new service data\n */\nexport function updateTeamFilter(services: ServiceData[]): void {\n  allTeams = getUniqueTeams(services);\n  renderTeamFilter();\n}\n\n/**\n * Render the team filter dropdown\n */\nfunction renderTeamFilter(): void {\n  const container = document.getElementById('team-filter-container');\n  if (!container) {return;}\n\n  const selectedCount = selectedTeams.size + (includeNoTeam ? 1 : 0);\n  const hasSelection = selectedCount > 0;\n\n  container.innerHTML = `\n        <div class=\"team-filter-dropdown\">\n            <button class=\"team-filter-toggle ${hasSelection ? 'active' : ''}\" onclick=\"window.toggleTeamDropdown()\">\n                <svg width=\"14\" height=\"14\" viewBox=\"0 0 16 16\" fill=\"currentColor\" style=\"margin-right: 6px;\">\n                    <path d=\"M1.5 14.25c0 .138.112.25.25.25H4v-1.25a.75.75 0 0 1 .75-.75h2.5a.75.75 0 0 1 .75.75v1.25h2.25a.25.25 0 0 0 .25-.25V1.75a.25.25 0 0 0-.25-.25h-8.5a.25.25 0 0 0-.25.25ZM1.75 0h8.5C11.216 0 12 .784 12 1.75v12.5c0 .085-.006.168-.018.25h2.268a.25.25 0 0 0 .25-.25V8.285a.25.25 0 0 0-.111-.208l-1.055-.703a.749.749 0 1 1 .832-1.248l1.055.703c.487.325.779.871.779 1.456v5.965A1.75 1.75 0 0 1 14.25 16h-3.5a.766.766 0 0 1-.197-.026c-.099.017-.2.026-.303.026h-3a.75.75 0 0 1-.75-.75V14h-1v1.25a.75.75 0 0 1-.75.75h-3A1.75 1.75 0 0 1 0 14.25V1.75C0 .784.784 0 1.75 0ZM3 3.75A.75.75 0 0 1 3.75 3h.5a.75.75 0 0 1 0 1.5h-.5A.75.75 0 0 1 3 3.75ZM3.75 6h.5a.75.75 0 0 1 0 1.5h-.5a.75.75 0 0 1 0-1.5ZM3 9.75A.75.75 0 0 1 3.75 9h.5a.75.75 0 0 1 0 1.5h-.5A.75.75 0 0 1 3 9.75ZM7.75 9h.5a.75.75 0 0 1 0 1.5h-.5a.75.75 0 0 1 0-1.5ZM7 6.75A.75.75 0 0 1 7.75 6h.5a.75.75 0 0 1 0 1.5h-.5A.75.75 0 0 1 7 6.75ZM7.75 3h.5a.75.75 0 0 1 0 1.5h-.5a.75.75 0 0 1 0-1.5Z\"></path>\n                </svg>\n                Teams${hasSelection ? ` (${selectedCount})` : ''}\n                <svg width=\"12\" height=\"12\" viewBox=\"0 0 16 16\" fill=\"currentColor\" style=\"margin-left: 6px;\">\n                    <path d=\"M4.427 7.427a.75.75 0 0 1 1.06 0L8 9.94l2.513-2.513a.75.75 0 0 1 1.06 1.06l-3.043 3.043a.75.75 0 0 1-1.06 0L4.427 8.487a.75.75 0 0 1 0-1.06Z\"></path>\n                </svg>\n            </button>\n            <div class=\"team-dropdown-menu\" id=\"team-dropdown-menu\">\n                <div class=\"team-dropdown-header\">\n                    <span>Filter by Team</span>\n                    ${hasSelection ? '<button class=\"team-clear-btn\" onclick=\"window.clearTeamFilter(event)\">Clear</button>' : ''}\n                </div>\n                <div class=\"team-dropdown-search\">\n                    <input type=\"text\" placeholder=\"Search teams...\" id=\"team-search-input\" oninput=\"window.filterTeamOptions(this.value)\">\n                </div>\n                <div class=\"team-dropdown-options\" id=\"team-dropdown-options\">\n                    <label class=\"team-option ${includeNoTeam ? 'selected' : ''}\">\n                        <input type=\"checkbox\" ${includeNoTeam ? 'checked' : ''} onchange=\"window.toggleNoTeamFilter(this.checked)\">\n                        <span class=\"team-name no-team\">No Team Assigned</span>\n                    </label>\n                    ${allTeams\n    .map(\n      (team) => `\n                        <label class=\"team-option ${selectedTeams.has(team) ? 'selected' : ''}\" data-team=\"${team}\">\n                            <input type=\"checkbox\" ${selectedTeams.has(team) ? 'checked' : ''} onchange=\"window.toggleTeamSelection('${team}', this.checked)\">\n                            <span class=\"team-name\">${team}</span>\n                        </label>\n                    `\n    )\n    .join('')}\n                </div>\n            </div>\n        </div>\n    `;\n}\n\n/**\n * Toggle dropdown visibility\n */\nexport function toggleTeamDropdown(): void {\n  const menu = document.getElementById('team-dropdown-menu');\n  if (menu) {\n    menu.classList.toggle('open');\n\n    if (menu.classList.contains('open')) {\n      // Focus search input when opened\n      const searchInput = document.getElementById(\n        'team-search-input'\n      ) as HTMLInputElement | null;\n      if (searchInput) {\n        searchInput.focus();\n      }\n\n      // Add click outside listener\n      setTimeout(() => {\n        document.addEventListener('click', handleClickOutside);\n      }, 0);\n    } else {\n      document.removeEventListener('click', handleClickOutside);\n    }\n  }\n}\n\n/**\n * Handle click outside dropdown\n */\nfunction handleClickOutside(e: Event): void {\n  const dropdown = document.querySelector('.team-filter-dropdown');\n  if (dropdown && !dropdown.contains(e.target as Node)) {\n    const menu = document.getElementById('team-dropdown-menu');\n    if (menu) {\n      menu.classList.remove('open');\n    }\n    document.removeEventListener('click', handleClickOutside);\n  }\n}\n\n/**\n * Toggle team selection\n */\nexport function toggleTeamSelection(team: string, checked: boolean): void {\n  if (checked) {\n    selectedTeams.add(team);\n  } else {\n    selectedTeams.delete(team);\n  }\n\n  updateOptionUI(team, checked);\n  updateToggleButton();\n  notifyFilterChange();\n}\n\n/**\n * Toggle no-team filter\n */\nexport function toggleNoTeamFilter(checked: boolean): void {\n  includeNoTeam = checked;\n  updateToggleButton();\n  notifyFilterChange();\n}\n\n/**\n * Update option UI without re-rendering\n */\nfunction updateOptionUI(team: string, selected: boolean): void {\n  const option = document.querySelector(`.team-option[data-team=\"${team}\"]`);\n  if (option) {\n    option.classList.toggle('selected', selected);\n  }\n}\n\n/**\n * Update toggle button state\n */\nfunction updateToggleButton(): void {\n  const toggle = document.querySelector('.team-filter-toggle');\n  const selectedCount = selectedTeams.size + (includeNoTeam ? 1 : 0);\n\n  if (toggle) {\n    toggle.classList.toggle('active', selectedCount > 0);\n\n    // Update button text\n    toggle.innerHTML = toggle.innerHTML.replace(\n      /Teams(\\s*\\(\\d+\\))?/,\n      `Teams${selectedCount > 0 ? ` (${selectedCount})` : ''}`\n    );\n  }\n\n  // Update header clear button\n  const header = document.querySelector('.team-dropdown-header');\n  if (header) {\n    const existingBtn = header.querySelector('.team-clear-btn');\n    if (selectedCount > 0 && !existingBtn) {\n      const btn = document.createElement('button');\n      btn.className = 'team-clear-btn';\n      btn.textContent = 'Clear';\n      btn.onclick = (e) => window.clearTeamFilter(e);\n      header.appendChild(btn);\n    } else if (selectedCount === 0 && existingBtn) {\n      existingBtn.remove();\n    }\n  }\n}\n\n/**\n * Filter team options by search\n */\nexport function filterTeamOptions(query: string): void {\n  const options = document.querySelectorAll<HTMLElement>('.team-option');\n  const normalizedQuery = query.toLowerCase();\n\n  options.forEach((option) => {\n    const teamNameEl = option.querySelector('.team-name');\n    const teamName = teamNameEl?.textContent?.toLowerCase() || '';\n    option.style.display = teamName.includes(normalizedQuery) ? '' : 'none';\n  });\n}\n\n/**\n * Clear all team filters\n */\nexport function clearTeamFilter(e?: Event): void {\n  if (e) {\n    e.stopPropagation();\n  }\n\n  selectedTeams.clear();\n  includeNoTeam = false;\n\n  // Uncheck all checkboxes\n  const checkboxes = document.querySelectorAll<HTMLInputElement>(\n    '#team-dropdown-options input[type=\"checkbox\"]'\n  );\n  checkboxes.forEach((cb) => {\n    cb.checked = false;\n    cb.closest('.team-option')?.classList.remove('selected');\n  });\n\n  updateToggleButton();\n  notifyFilterChange();\n}\n\n/**\n * Notify about filter changes\n */\nfunction notifyFilterChange(): void {\n  if (onFilterChange) {\n    onFilterChange({\n      teams: Array.from(selectedTeams),\n      includeNoTeam,\n    });\n  }\n}\n\n/**\n * Get current filter state\n */\nexport function getTeamFilterState(): TeamFilterState {\n  return {\n    teams: Array.from(selectedTeams),\n    includeNoTeam,\n  };\n}\n\n/**\n * Set filter state programmatically\n */\nexport function setTeamFilterState(\n  teams: string[],\n  noTeam = false\n): void {\n  selectedTeams = new Set(teams);\n  includeNoTeam = noTeam;\n  renderTeamFilter();\n  notifyFilterChange();\n}\n\n/**\n * Filter services by team selection\n */\nexport function filterByTeam(services: ServiceData[]): ServiceData[] {\n  const hasTeamFilter = selectedTeams.size > 0 || includeNoTeam;\n\n  if (!hasTeamFilter) {\n    return services;\n  }\n\n  return services.filter((service) => {\n    const team = getTeamName(service);\n\n    // Check if no team assigned\n    if (!team) {\n      return includeNoTeam;\n    }\n\n    // Check if team is in selected list\n    return selectedTeams.has(team);\n  });\n}\n\n/**\n * Select a single team (used for quick filtering)\n */\nexport function selectTeam(teamName: string | null): void {\n  selectedTeams.clear();\n  includeNoTeam = false;\n\n  if (teamName) {\n    selectedTeams.add(teamName);\n  }\n\n  renderTeamFilter();\n  notifyFilterChange();\n}\n\n// Expose functions to window for onclick handlers\nwindow.toggleTeamDropdown = toggleTeamDropdown;\nwindow.toggleTeamSelection = toggleTeamSelection;\nwindow.toggleNoTeamFilter = toggleNoTeamFilter;\nwindow.filterTeamOptions = filterTeamOptions;\nwindow.clearTeamFilter = clearTeamFilter;\nwindow.selectTeam = selectTeam;\n","/**\n * Team Dashboard Modal\n * Displays team statistics and allows filtering by team\n */\n\nimport { showModal, hideModal, setupModalHandlers } from './modals.js';\nimport {\n  calculateTeamStats,\n  sortTeamStats,\n  buildRankSummary,\n  mergeTeamDataWithStats,\n  type TeamStatsEntry,\n  type MergedTeamData,\n  type StalenessCheckFn,\n  type TeamSortBy,\n  type SortDirection,\n} from '../utils/team-statistics.js';\nimport { loadTeams } from '../api/registry.js';\nimport { selectTeam } from './team-filter.js';\nimport type { ServiceData, RankCounts, RankName, TeamsData } from '../types/index.js';\n\n// Window types are defined in types/globals.d.ts\n\ninterface SortState {\n  by: TeamSortBy;\n  direction: SortDirection;\n}\n\n// State\nlet currentServices: ServiceData[] = [];\nlet currentTeamsData: TeamsData | null = null;\nlet currentSort: SortState = { by: 'serviceCount', direction: 'desc' };\nlet searchQuery = '';\nlet currentChecksHash: string | null = null;\nlet isStaleCheck: StalenessCheckFn | null = null;\n\nconst MODAL_ID = 'team-dashboard-modal';\n\n/**\n * Initialize team dashboard\n */\nexport function initTeamDashboard(staleCheckFn: StalenessCheckFn): void {\n  isStaleCheck = staleCheckFn;\n  setupModalHandlers(MODAL_ID);\n}\n\n/**\n * Open the team dashboard modal\n */\nexport async function openTeamDashboard(\n  services: ServiceData[],\n  checksHash: string | null\n): Promise<void> {\n  currentServices = services;\n  currentChecksHash = checksHash;\n\n  // Load teams data\n  try {\n    const { teams } = await loadTeams();\n    currentTeamsData = teams;\n  } catch (error) {\n    console.error('Failed to load teams:', error);\n    currentTeamsData = null;\n  }\n\n  showModal(MODAL_ID);\n  renderDashboard();\n}\n\n/**\n * Close the team dashboard\n */\nexport function closeTeamDashboard(): void {\n  hideModal(MODAL_ID);\n}\n\n/**\n * Render the dashboard content\n */\nfunction renderDashboard(): void {\n  const content = document.getElementById('team-dashboard-content');\n  if (!content) {return;}\n\n  // Calculate statistics from current services\n  const calculatedStats = calculateTeamStats(\n    currentServices,\n    isStaleCheck,\n    currentChecksHash\n  );\n\n  // Merge with team registry data if available\n  const teamData: Record<string, MergedTeamData> = currentTeamsData\n    ? mergeTeamDataWithStats(currentTeamsData, calculatedStats)\n    : Object.fromEntries(\n      Object.entries(calculatedStats).map(([name, stats]) => [\n        name.toLowerCase().replace(/\\s+/g, '-'),\n        {\n          id: name.toLowerCase().replace(/\\s+/g, '-'),\n          name,\n          description: null,\n          aliases: [],\n          metadata: {},\n          statistics: stats,\n        },\n      ])\n    );\n\n  // Convert to array and sort\n  let teamsArray = Object.values(teamData);\n\n  // Filter by search\n  if (searchQuery) {\n    const query = searchQuery.toLowerCase();\n    teamsArray = teamsArray.filter(\n      (team) =>\n        team.name.toLowerCase().includes(query) ||\n        team.description?.toLowerCase().includes(query) ||\n        team.aliases?.some((a) => a.toLowerCase().includes(query))\n    );\n  }\n\n  // Sort - need to flatten statistics for sorting\n  const flattenedForSort = teamsArray.map((t) => ({\n    ...t,\n    ...t.statistics,\n  }));\n\n  const sortedFlat = sortTeamStats(\n    flattenedForSort as unknown as Record<string, TeamStatsEntry>,\n    currentSort.by,\n    currentSort.direction\n  );\n\n  // Map back to MergedTeamData\n  teamsArray = sortedFlat.map((flat) =>\n    teamsArray.find((t) => t.id === (flat as unknown as MergedTeamData).id)!\n  );\n\n  // Calculate totals\n  const totalServices = Object.values(calculatedStats).reduce(\n    (sum, t) => sum + t.serviceCount,\n    0\n  );\n  const totalTeams = Object.keys(calculatedStats).length;\n  const servicesWithoutTeam = currentServices.filter((s) => !s.team).length;\n\n  content.innerHTML = `\n        <div class=\"team-dashboard-header\">\n            <div class=\"team-dashboard-summary\">\n                <div class=\"summary-stat\">\n                    <span class=\"summary-value\">${totalTeams}</span>\n                    <span class=\"summary-label\">Teams</span>\n                </div>\n                <div class=\"summary-stat\">\n                    <span class=\"summary-value\">${totalServices}</span>\n                    <span class=\"summary-label\">Services with Team</span>\n                </div>\n                ${\n  servicesWithoutTeam > 0\n    ? `\n                <div class=\"summary-stat warning\">\n                    <span class=\"summary-value\">${servicesWithoutTeam}</span>\n                    <span class=\"summary-label\">Without Team</span>\n                </div>\n                `\n    : ''\n}\n            </div>\n            <div class=\"team-dashboard-controls\">\n                <input\n                    type=\"text\"\n                    class=\"team-search\"\n                    placeholder=\"Search teams...\"\n                    value=\"${searchQuery}\"\n                    oninput=\"window.searchTeamsDashboard(this.value)\"\n                >\n                <select class=\"team-sort-select\" onchange=\"window.sortTeamsDashboard(this.value)\">\n                    <option value=\"serviceCount-desc\" ${currentSort.by === 'serviceCount' && currentSort.direction === 'desc' ? 'selected' : ''}>Services: High to Low</option>\n                    <option value=\"serviceCount-asc\" ${currentSort.by === 'serviceCount' && currentSort.direction === 'asc' ? 'selected' : ''}>Services: Low to High</option>\n                    <option value=\"averageScore-desc\" ${currentSort.by === 'averageScore' && currentSort.direction === 'desc' ? 'selected' : ''}>Score: High to Low</option>\n                    <option value=\"averageScore-asc\" ${currentSort.by === 'averageScore' && currentSort.direction === 'asc' ? 'selected' : ''}>Score: Low to High</option>\n                    <option value=\"name-asc\" ${currentSort.by === 'name' && currentSort.direction === 'asc' ? 'selected' : ''}>Name: A to Z</option>\n                    <option value=\"name-desc\" ${currentSort.by === 'name' && currentSort.direction === 'desc' ? 'selected' : ''}>Name: Z to A</option>\n                </select>\n                <button class=\"team-create-btn\" onclick=\"window.openCreateTeamModal && window.openCreateTeamModal()\" title=\"Create new team\">\n                    <svg width=\"14\" height=\"14\" viewBox=\"0 0 16 16\" fill=\"currentColor\">\n                        <path d=\"M7.75 2a.75.75 0 0 1 .75.75V7h4.25a.75.75 0 0 1 0 1.5H8.5v4.25a.75.75 0 0 1-1.5 0V8.5H2.75a.75.75 0 0 1 0-1.5H7V2.75A.75.75 0 0 1 7.75 2Z\"></path>\n                    </svg>\n                    Create Team\n                </button>\n            </div>\n        </div>\n\n        <div class=\"team-cards-grid\">\n            ${\n  teamsArray.length === 0\n    ? `\n                <div class=\"team-empty-state\">\n                    ${searchQuery ? 'No teams match your search.' : 'No teams found.'}\n                </div>\n            `\n    : teamsArray.map((team) => renderTeamCard(team)).join('')\n}\n        </div>\n    `;\n}\n\n/**\n * Render a single team card\n */\nfunction renderTeamCard(team: MergedTeamData): string {\n  const stats = team.statistics;\n  const rankSummary = buildRankSummary(stats.rankDistribution);\n  const progressPercent =\n    stats.serviceCount > 0\n      ? Math.round((stats.installedCount / stats.serviceCount) * 100)\n      : 0;\n\n  return `\n        <div class=\"team-card\" data-team-id=\"${team.id}\">\n            <div class=\"team-card-header\">\n                <h3 class=\"team-card-name\">${team.name}</h3>\n                ${\n  (team.metadata as { slack_channel?: string })?.slack_channel\n    ? `\n                    <span class=\"team-slack\" title=\"Slack channel\">${(team.metadata as { slack_channel: string }).slack_channel}</span>\n                `\n    : ''\n}\n            </div>\n\n            ${\n  team.description\n    ? `\n                <p class=\"team-card-description\">${team.description}</p>\n            `\n    : ''\n}\n\n            <div class=\"team-card-stats\">\n                <div class=\"team-stat\">\n                    <span class=\"team-stat-value\">${stats.serviceCount}</span>\n                    <span class=\"team-stat-label\">Services</span>\n                </div>\n                <div class=\"team-stat\">\n                    <span class=\"team-stat-value\">${stats.averageScore}</span>\n                    <span class=\"team-stat-label\">Avg Score</span>\n                </div>\n                ${\n  stats.staleCount > 0\n    ? `\n                <div class=\"team-stat warning\">\n                    <span class=\"team-stat-value\">${stats.staleCount}</span>\n                    <span class=\"team-stat-label\">Stale</span>\n                </div>\n                `\n    : ''\n}\n            </div>\n\n            ${\n  rankSummary\n    ? `\n                <div class=\"team-card-ranks\">\n                    ${renderMiniRankBadges(stats.rankDistribution)}\n                </div>\n            `\n    : ''\n}\n\n            <div class=\"team-card-progress\">\n                <div class=\"progress-label\">\n                    <span>Installed</span>\n                    <span>${stats.installedCount}/${stats.serviceCount} (${progressPercent}%)</span>\n                </div>\n                <div class=\"progress-bar\">\n                    <div class=\"progress-fill\" style=\"width: ${progressPercent}%\"></div>\n                </div>\n            </div>\n\n            <div class=\"team-card-actions\">\n                <button class=\"team-filter-btn\" onclick=\"window.filterCatalogByTeam('${team.name}')\">\n                    <svg width=\"14\" height=\"14\" viewBox=\"0 0 16 16\" fill=\"currentColor\">\n                        <path d=\"M.75 3h14.5a.75.75 0 0 1 0 1.5H.75a.75.75 0 0 1 0-1.5ZM3 7.75A.75.75 0 0 1 3.75 7h8.5a.75.75 0 0 1 0 1.5h-8.5A.75.75 0 0 1 3 7.75Zm3 4a.75.75 0 0 1 .75-.75h2.5a.75.75 0 0 1 0 1.5h-2.5a.75.75 0 0 1-.75-.75Z\"></path>\n                    </svg>\n                    Filter\n                </button>\n                <button class=\"team-edit-btn\" onclick=\"window.openTeamEditModal && window.openTeamEditModal('${team.id}')\" title=\"Edit team\">\n                    <svg width=\"14\" height=\"14\" viewBox=\"0 0 16 16\" fill=\"currentColor\">\n                        <path d=\"M11.013 1.427a1.75 1.75 0 0 1 2.474 0l1.086 1.086a1.75 1.75 0 0 1 0 2.474l-8.61 8.61c-.21.21-.47.364-.756.445l-3.251.93a.75.75 0 0 1-.927-.928l.929-3.25c.081-.286.235-.547.445-.758l8.61-8.61Zm.176 4.823L9.75 4.81l-6.286 6.287a.253.253 0 0 0-.064.108l-.558 1.953 1.953-.558a.253.253 0 0 0 .108-.064Zm1.238-3.763a.25.25 0 0 0-.354 0L10.811 3.75l1.439 1.44 1.263-1.263a.25.25 0 0 0 0-.354Z\"></path>\n                    </svg>\n                    Edit\n                </button>\n            </div>\n        </div>\n    `;\n}\n\n/**\n * Render mini rank badges\n */\nfunction renderMiniRankBadges(rankDistribution: RankCounts): string {\n  const ranks: RankName[] = ['platinum', 'gold', 'silver', 'bronze'];\n  return ranks\n    .filter((rank) => rankDistribution[rank] > 0)\n    .map(\n      (rank) => `\n            <span class=\"mini-rank-badge rank-${rank}\">${rankDistribution[rank]}</span>\n        `\n    )\n    .join('');\n}\n\n/**\n * Search teams in dashboard\n */\nexport function searchTeamsDashboard(query: string): void {\n  searchQuery = query;\n  renderDashboard();\n}\n\n/**\n * Sort teams in dashboard\n */\nexport function sortTeamsDashboard(value: string): void {\n  const [by, direction] = value.split('-') as [TeamSortBy, SortDirection];\n  currentSort = { by, direction };\n  renderDashboard();\n}\n\n/**\n * Filter catalog by team (close modal and apply filter)\n */\nexport function filterCatalogByTeam(teamName: string): void {\n  closeTeamDashboard();\n  selectTeam(teamName);\n}\n\n/**\n * Update services in dashboard\n */\nexport function updateDashboardServices(\n  services: ServiceData[],\n  checksHash: string | null\n): void {\n  currentServices = services;\n  currentChecksHash = checksHash;\n\n  const modal = document.getElementById(MODAL_ID);\n  if (modal && !modal.classList.contains('hidden')) {\n    renderDashboard();\n  }\n}\n\n// Expose functions to window for onclick handlers\nwindow.searchTeamsDashboard = searchTeamsDashboard;\nwindow.sortTeamsDashboard = sortTeamsDashboard;\nwindow.filterCatalogByTeam = filterCatalogByTeam;\nwindow.openTeamDashboard = openTeamDashboard;\nwindow.closeTeamDashboard = closeTeamDashboard;\n","/**\n * Team Edit Modal\n * Modal for creating and editing team metadata\n */\n\nimport { showModal, hideModal, setupModalHandlers } from './modals.js';\nimport { showToast } from './toast.js';\nimport { getToken, hasToken } from '../services/auth.js';\nimport { loadTeamById } from '../api/registry.js';\nimport { API_CONFIG } from '../config/constants.js';\nimport { escapeHtml } from '../utils/formatting.js';\n// Note: TeamData type used in function signatures but not explicitly imported due to being part of API returns\n\n// Window types are defined in types/globals.d.ts\n\ninterface TeamFormData {\n  id: string;\n  name: string;\n  description: string;\n  aliases: string[];\n  metadata: {\n    slack_channel?: string;\n    oncall_rotation?: string;\n  };\n}\n\ninterface WorkflowInputs {\n  team_id: string;\n  action: 'create' | 'update';\n  name?: string;\n  description?: string;\n  aliases?: string;\n  slack_channel?: string;\n  oncall_rotation?: string;\n}\n\ntype SaveCallback = (teamId: string, isCreate: boolean) => void;\n\nconst MODAL_ID = 'team-edit-modal';\n\n// State\nlet currentTeam: TeamFormData | null = null;\nlet isCreateMode = false;\nlet onSaveCallback: SaveCallback | null = null;\n\n/**\n * Initialize team edit modal\n */\nexport function initTeamEditModal(onSave: SaveCallback): void {\n  onSaveCallback = onSave;\n  ensureModalExists();\n  setupModalHandlers(MODAL_ID);\n}\n\n/**\n * Ensure the modal HTML exists in the DOM\n */\nfunction ensureModalExists(): void {\n  if (document.getElementById(MODAL_ID)) {return;}\n\n  const modalHtml = `\n        <div id=\"${MODAL_ID}\" class=\"modal hidden\">\n            <div class=\"modal-content team-edit-modal-content\">\n                <div class=\"modal-header\">\n                    <h2 id=\"team-edit-title\">Edit Team</h2>\n                    <button class=\"modal-close\" onclick=\"window.closeTeamEditModal()\">&times;</button>\n                </div>\n                <div class=\"modal-body\" id=\"team-edit-body\">\n                    <!-- Form rendered dynamically -->\n                </div>\n            </div>\n        </div>\n    `;\n\n  document.body.insertAdjacentHTML('beforeend', modalHtml);\n}\n\n/**\n * Open modal to edit an existing team\n */\nexport async function openTeamEditModal(teamId: string): Promise<void> {\n  if (!hasToken()) {\n    showToast(\n      'GitHub PAT required to edit teams. Please configure in Settings.',\n      'error'\n    );\n    return;\n  }\n\n  ensureModalExists();\n  isCreateMode = false;\n\n  // Load existing team data\n  try {\n    const team = await loadTeamById(teamId);\n    if (!team) {\n      throw new Error('Team not found');\n    }\n    currentTeam = {\n      id: (team.id as string) || teamId,\n      name: (team.name as string) || '',\n      description: (team.description as string) || '',\n      aliases: (team.aliases as string[]) || [],\n      metadata: (team.metadata as Record<string, unknown>) || {},\n    };\n  } catch (error) {\n    console.error('Failed to load team:', error);\n    showToast(\n      `Failed to load team: ${error instanceof Error ? error.message : String(error)}`,\n      'error'\n    );\n    return;\n  }\n\n  const titleEl = document.getElementById('team-edit-title');\n  if (titleEl) {\n    titleEl.textContent = 'Edit Team';\n  }\n  showModal(MODAL_ID);\n  renderForm();\n}\n\n/**\n * Open modal to create a new team\n */\nexport function openCreateTeamModal(): void {\n  if (!hasToken()) {\n    showToast(\n      'GitHub PAT required to create teams. Please configure in Settings.',\n      'error'\n    );\n    return;\n  }\n\n  ensureModalExists();\n  isCreateMode = true;\n  currentTeam = {\n    id: '',\n    name: '',\n    description: '',\n    aliases: [],\n    metadata: {},\n  };\n\n  const titleEl = document.getElementById('team-edit-title');\n  if (titleEl) {\n    titleEl.textContent = 'Create Team';\n  }\n  showModal(MODAL_ID);\n  renderForm();\n}\n\n/**\n * Close the team edit modal\n */\nexport function closeTeamEditModal(): void {\n  hideModal(MODAL_ID);\n  currentTeam = null;\n}\n\n/**\n * Render the edit form\n */\nfunction renderForm(): void {\n  const body = document.getElementById('team-edit-body');\n  if (!body || !currentTeam) {return;}\n\n  const aliasesString = currentTeam.aliases ? currentTeam.aliases.join(', ') : '';\n\n  body.innerHTML = `\n        <form id=\"team-edit-form\" class=\"team-edit-form\" onsubmit=\"window.submitTeamEdit(event)\">\n            <div class=\"form-group\">\n                <label for=\"team-id\">Team ID</label>\n                <input\n                    type=\"text\"\n                    id=\"team-id\"\n                    name=\"team_id\"\n                    value=\"${escapeHtml(currentTeam.id || '')}\"\n                    ${!isCreateMode ? 'readonly' : ''}\n                    placeholder=\"e.g., platform-engineering\"\n                    pattern=\"^[a-z0-9-]+$\"\n                    title=\"Lowercase letters, numbers, and hyphens only\"\n                    required\n                >\n                ${isCreateMode ? '<small class=\"form-hint\">Lowercase letters, numbers, and hyphens only</small>' : ''}\n            </div>\n\n            <div class=\"form-group\">\n                <label for=\"team-name\">Display Name</label>\n                <input\n                    type=\"text\"\n                    id=\"team-name\"\n                    name=\"name\"\n                    value=\"${escapeHtml(currentTeam.name || '')}\"\n                    placeholder=\"e.g., Platform Engineering\"\n                    required\n                >\n            </div>\n\n            <div class=\"form-group\">\n                <label for=\"team-description\">Description</label>\n                <textarea\n                    id=\"team-description\"\n                    name=\"description\"\n                    rows=\"3\"\n                    placeholder=\"Brief description of the team's responsibilities\"\n                >${escapeHtml(currentTeam.description || '')}</textarea>\n            </div>\n\n            <div class=\"form-group\">\n                <label for=\"team-aliases\">Aliases</label>\n                <input\n                    type=\"text\"\n                    id=\"team-aliases\"\n                    name=\"aliases\"\n                    value=\"${escapeHtml(aliasesString)}\"\n                    placeholder=\"e.g., platform, plat-eng (comma-separated)\"\n                >\n                <small class=\"form-hint\">Alternative names that map to this team (comma-separated)</small>\n            </div>\n\n            <div class=\"form-row\">\n                <div class=\"form-group\">\n                    <label for=\"team-slack\">Slack Channel</label>\n                    <input\n                        type=\"text\"\n                        id=\"team-slack\"\n                        name=\"slack_channel\"\n                        value=\"${escapeHtml(currentTeam.metadata?.slack_channel || '')}\"\n                        placeholder=\"#platform-eng\"\n                    >\n                </div>\n\n                <div class=\"form-group\">\n                    <label for=\"team-oncall\">On-Call Rotation</label>\n                    <input\n                        type=\"text\"\n                        id=\"team-oncall\"\n                        name=\"oncall_rotation\"\n                        value=\"${escapeHtml(currentTeam.metadata?.oncall_rotation || '')}\"\n                        placeholder=\"platform-oncall\"\n                    >\n                </div>\n            </div>\n\n            <div class=\"form-actions\">\n                <button type=\"button\" class=\"btn-secondary\" onclick=\"window.closeTeamEditModal()\">\n                    Cancel\n                </button>\n                <button type=\"submit\" class=\"btn-primary\" id=\"team-save-btn\">\n                    ${isCreateMode ? 'Create Team' : 'Save Changes'}\n                </button>\n            </div>\n        </form>\n\n        <div class=\"team-edit-info\">\n            <p>\n                <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"currentColor\">\n                    <path d=\"M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z\"></path>\n                </svg>\n                Changes are submitted via GitHub workflow and may take a few moments to appear.\n            </p>\n        </div>\n    `;\n}\n\n/**\n * Auto-generate team ID from name\n */\nexport function autoGenerateTeamId(): void {\n  if (!isCreateMode) {return;}\n\n  const nameInput = document.getElementById('team-name') as HTMLInputElement | null;\n  const idInput = document.getElementById('team-id') as HTMLInputElement | null;\n\n  if (nameInput && idInput && !idInput.value) {\n    idInput.value = nameInput.value\n      .toLowerCase()\n      .replace(/[^a-z0-9]+/g, '-')\n      .replace(/^-|-$/g, '');\n  }\n}\n\n/**\n * Submit the team edit form\n */\nexport async function submitTeamEdit(event: Event): Promise<void> {\n  event.preventDefault();\n\n  const form = event.target as HTMLFormElement;\n  const saveBtn = document.getElementById('team-save-btn') as HTMLButtonElement | null;\n\n  // Collect form data\n  const formData = new FormData(form);\n  const teamId = formData.get('team_id') as string;\n  const name = formData.get('name') as string;\n  const description = formData.get('description') as string;\n  const aliases = formData.get('aliases') as string;\n  const slackChannel = formData.get('slack_channel') as string;\n  const oncallRotation = formData.get('oncall_rotation') as string;\n\n  // Validate\n  if (!teamId || !teamId.match(/^[a-z0-9-]+$/)) {\n    showToast(\n      'Team ID must be lowercase letters, numbers, and hyphens only',\n      'error'\n    );\n    return;\n  }\n\n  if (!name) {\n    showToast('Display name is required', 'error');\n    return;\n  }\n\n  // Disable button and show loading\n  if (saveBtn) {\n    saveBtn.disabled = true;\n    saveBtn.innerHTML = '<span class=\"spinner\"></span> Saving...';\n  }\n\n  try {\n    await triggerTeamUpdateWorkflow({\n      team_id: teamId,\n      action: isCreateMode ? 'create' : 'update',\n      name,\n      description,\n      aliases,\n      slack_channel: slackChannel,\n      oncall_rotation: oncallRotation,\n    });\n\n    showToast(\n      isCreateMode\n        ? `Team \"${name}\" creation workflow triggered. Changes will appear shortly.`\n        : `Team \"${name}\" update workflow triggered. Changes will appear shortly.`,\n      'success'\n    );\n\n    closeTeamEditModal();\n\n    // Notify callback\n    if (onSaveCallback) {\n      onSaveCallback(teamId, isCreateMode);\n    }\n  } catch (error) {\n    console.error('Failed to update team:', error);\n    showToast(\n      `Failed to ${isCreateMode ? 'create' : 'update'} team: ${error instanceof Error ? error.message : String(error)}`,\n      'error'\n    );\n  } finally {\n    if (saveBtn) {\n      saveBtn.disabled = false;\n      saveBtn.innerHTML = isCreateMode ? 'Create Team' : 'Save Changes';\n    }\n  }\n}\n\n/**\n * Trigger the update-team-registry workflow\n */\nasync function triggerTeamUpdateWorkflow(inputs: WorkflowInputs): Promise<void> {\n  const token = getToken();\n  if (!token) {\n    throw new Error('GitHub PAT required');\n  }\n\n  // Get repository info from current URL or config\n  const repoOwner = getRepoOwnerFromUrl();\n  const repoName = getRepoNameFromUrl();\n\n  const workflowFile = 'update-team-registry.yml';\n  const endpoint = `${API_CONFIG.GITHUB_BASE_URL}/repos/${repoOwner}/${repoName}/actions/workflows/${workflowFile}/dispatches`;\n\n  // Build inputs object, only including non-empty values\n  const workflowInputs: Record<string, string> = {\n    team_id: inputs.team_id,\n    action: inputs.action,\n  };\n\n  if (inputs.name) {workflowInputs.name = inputs.name;}\n  if (inputs.description) {workflowInputs.description = inputs.description;}\n  if (inputs.aliases) {workflowInputs.aliases = inputs.aliases;}\n  if (inputs.slack_channel) {workflowInputs.slack_channel = inputs.slack_channel;}\n  if (inputs.oncall_rotation)\n  {workflowInputs.oncall_rotation = inputs.oncall_rotation;}\n\n  const response = await fetch(endpoint, {\n    method: 'POST',\n    headers: {\n      Authorization: `token ${token}`,\n      Accept: 'application/vnd.github.v3+json',\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({\n      ref: 'main',\n      inputs: workflowInputs,\n    }),\n  });\n\n  if (!response.ok) {\n    const errorText = await response.text();\n    let message = `HTTP ${response.status}`;\n\n    if (response.status === 404) {\n      message = 'Workflow not found or insufficient permissions';\n    } else if (response.status === 403) {\n      message = 'PAT does not have workflow dispatch permissions';\n    } else if (errorText) {\n      try {\n        const errorJson = JSON.parse(errorText);\n        message = errorJson.message || message;\n      } catch {\n        message = errorText;\n      }\n    }\n\n    throw new Error(message);\n  }\n}\n\n/**\n * Get repository owner from current URL\n */\nfunction getRepoOwnerFromUrl(): string {\n  // Try to extract from GitHub Pages URL pattern: owner.github.io/repo\n  const hostname = window.location.hostname;\n\n  // GitHub Pages: username.github.io/reponame\n  const ghPagesMatch = hostname.match(/^([^.]+)\\.github\\.io$/);\n  if (ghPagesMatch) {\n    return ghPagesMatch[1];\n  }\n\n  // Custom domain - check meta tag or fallback\n  const metaOwner = document.querySelector<HTMLMetaElement>(\n    'meta[name=\"github-repo-owner\"]'\n  )?.content;\n  if (metaOwner) {\n    return metaOwner;\n  }\n\n  // Fallback - try localStorage or default\n  return localStorage.getItem('scorecards-repo-owner') || 'openscorecard';\n}\n\n/**\n * Get repository name from current URL\n */\nfunction getRepoNameFromUrl(): string {\n  const pathname = window.location.pathname;\n\n  // GitHub Pages: /reponame/path\n  const pathParts = pathname.split('/').filter(Boolean);\n  if (pathParts.length > 0 && pathParts[0] !== 'index.html') {\n    return pathParts[0];\n  }\n\n  // Check meta tag\n  const metaRepo = document.querySelector<HTMLMetaElement>(\n    'meta[name=\"github-repo-name\"]'\n  )?.content;\n  if (metaRepo) {\n    return metaRepo;\n  }\n\n  // Fallback\n  return localStorage.getItem('scorecards-repo-name') || 'scorecards';\n}\n\n// Expose functions to window for onclick handlers\nwindow.openTeamEditModal = openTeamEditModal;\nwindow.openCreateTeamModal = openCreateTeamModal;\nwindow.closeTeamEditModal = closeTeamEditModal;\nwindow.submitTeamEdit = submitTeamEdit;\nwindow.autoGenerateTeamId = autoGenerateTeamId;\n","/**\n * GitHub API Client\n * Functions for interacting with GitHub's REST API\n */\n\nimport { getToken } from '../services/auth.js';\nimport { getRepoOwner, getRepoName } from './registry.js';\nimport { API_CONFIG } from '../config/constants.js';\nimport type { WorkflowRun, RateLimitInfo, GitHubUser } from '../types/index.js';\n\ninterface WorkflowRunsResponse {\n  workflow_runs: WorkflowRun[];\n  total_count: number;\n}\n\ninterface RateLimitResponse {\n  rate: {\n    remaining: number;\n    limit: number;\n    reset: number;\n  };\n}\n\nexport interface FetchWorkflowRunsOptions {\n  per_page?: number;\n}\n\n/**\n * Make a GitHub API request\n */\nexport async function githubApiRequest(\n  endpoint: string,\n  options: RequestInit = {}\n): Promise<Response> {\n  const token = getToken();\n\n  const headers: Record<string, string> = {\n    Accept: API_CONFIG.ACCEPT_HEADER,\n    ...(options.headers as Record<string, string>),\n  };\n\n  if (token) {\n    headers['Authorization'] = `token ${token}`;\n  }\n\n  const response = await fetch(`${API_CONFIG.GITHUB_BASE_URL}${endpoint}`, {\n    ...options,\n    headers,\n  });\n\n  return response;\n}\n\n/**\n * Check GitHub API rate limit\n */\nexport async function checkRateLimit(): Promise<RateLimitInfo> {\n  try {\n    const response = await githubApiRequest('/rate_limit');\n    const data: RateLimitResponse = await response.json();\n\n    return {\n      remaining: data.rate.remaining,\n      limit: data.rate.limit,\n      reset: new Date(data.rate.reset * 1000),\n    };\n  } catch (error) {\n    console.error('Error checking rate limit:', error);\n    return {\n      remaining: null,\n      limit: null,\n      reset: null,\n      error: error instanceof Error ? error.message : String(error),\n    };\n  }\n}\n\n/**\n * Fetch workflow runs for a repository\n */\nexport async function fetchWorkflowRuns(\n  org: string,\n  repo: string,\n  options: FetchWorkflowRunsOptions = {}\n): Promise<WorkflowRun[]> {\n  const perPage = options.per_page || API_CONFIG.PER_PAGE;\n  const endpoint = `/repos/${org}/${repo}/actions/runs?per_page=${perPage}&_t=${Date.now()}`;\n\n  try {\n    const response = await githubApiRequest(endpoint, {\n      cache: 'no-cache',\n    });\n\n    if (!response.ok) {\n      throw new Error(`Failed to fetch workflow runs: ${response.status}`);\n    }\n\n    const data: WorkflowRunsResponse = await response.json();\n\n    // Add org/repo metadata to each run\n    return data.workflow_runs.map((run) => ({\n      ...run,\n      org,\n      repo,\n    }));\n  } catch (error) {\n    console.error(`Error fetching workflow runs for ${org}/${repo}:`, error);\n    throw error;\n  }\n}\n\n/**\n * Trigger a workflow dispatch event\n */\nexport async function triggerWorkflowDispatch(\n  org: string,\n  repo: string,\n  workflow: string,\n  inputs: Record<string, string> = {},\n  ref = 'main'\n): Promise<boolean> {\n  const token = getToken();\n\n  if (!token) {\n    throw new Error('GitHub token required to trigger workflows');\n  }\n\n  try {\n    const response = await fetch(\n      `https://api.github.com/repos/${org}/${repo}/actions/workflows/${workflow}/dispatches`,\n      {\n        method: 'POST',\n        headers: {\n          Accept: 'application/vnd.github+json',\n          Authorization: `Bearer ${token}`,\n          'X-GitHub-Api-Version': '2022-11-28',\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          ref,\n          inputs,\n        }),\n      }\n    );\n\n    // GitHub returns 204 No Content on success\n    return response.status === 204;\n  } catch (error) {\n    console.error('Error triggering workflow:', error);\n    throw error;\n  }\n}\n\n/**\n * Trigger scorecard workflow for a service\n */\nexport async function triggerScorecardWorkflow(\n  org: string,\n  repo: string\n): Promise<boolean> {\n  const scorecardOrg = getRepoOwner();\n  const scorecardRepo = getRepoName();\n\n  return triggerWorkflowDispatch(\n    scorecardOrg,\n    scorecardRepo,\n    'trigger-service-workflow.yml',\n    { org, repo }\n  );\n}\n\nexport interface ServiceIdentifier {\n  org: string;\n  repo: string;\n}\n\n/**\n * Trigger scorecards for multiple services (bulk operation)\n */\nexport async function triggerBulkScorecardWorkflows(\n  services: ServiceIdentifier[]\n): Promise<boolean> {\n  const scorecardOrg = getRepoOwner();\n  const scorecardRepo = getRepoName();\n\n  const servicesArray = services.map((s) => ({ org: s.org, repo: s.repo }));\n\n  return triggerWorkflowDispatch(\n    scorecardOrg,\n    scorecardRepo,\n    'trigger-service-workflow.yml',\n    { services: JSON.stringify(servicesArray) }\n  );\n}\n\n/**\n * Create installation PR for a service\n */\nexport async function createInstallationPR(\n  org: string,\n  repo: string\n): Promise<boolean> {\n  const scorecardOrg = getRepoOwner();\n  const scorecardRepo = getRepoName();\n\n  return triggerWorkflowDispatch(\n    scorecardOrg,\n    scorecardRepo,\n    'create-installation-pr.yml',\n    { org, repo }\n  );\n}\n\n/**\n * Get user information from GitHub\n */\nexport async function getUserInfo(): Promise<GitHubUser> {\n  const response = await githubApiRequest('/user');\n\n  if (!response.ok) {\n    throw new Error('Failed to fetch user info');\n  }\n\n  return response.json();\n}\n","/**\n * GitHub Teams API\n * Functions for fetching GitHub team information\n */\n\nimport { githubApiRequest } from './github.js';\nimport { getToken } from '../services/auth.js';\n\nexport interface TeamMember {\n  login: string;\n  id: number;\n  avatar_url: string;\n  html_url: string;\n}\n\ninterface GitHubMemberResponse {\n  login: string;\n  id: number;\n  avatar_url: string;\n  html_url: string;\n}\n\n// In-memory cache for team members (cleared on page refresh)\nconst membersCache = new Map<string, TeamMember[]>();\n\n/**\n * Fetch GitHub team members\n */\nexport async function fetchTeamMembers(\n  org: string,\n  teamSlug: string\n): Promise<TeamMember[] | null> {\n  const token = getToken();\n\n  if (!token) {\n    return null; // Not authenticated\n  }\n\n  // Check cache first\n  const cacheKey = `${org}/${teamSlug}`;\n  if (membersCache.has(cacheKey)) {\n    return membersCache.get(cacheKey)!;\n  }\n\n  try {\n    const response = await githubApiRequest(\n      `/orgs/${org}/teams/${teamSlug}/members`\n    );\n\n    if (!response.ok) {\n      // Team not found or no access\n      console.warn(\n        `Failed to fetch team members for ${org}/${teamSlug}: ${response.status}`\n      );\n      return [];\n    }\n\n    const members: GitHubMemberResponse[] = await response.json();\n    const result: TeamMember[] = members.map((m) => ({\n      login: m.login,\n      id: m.id,\n      avatar_url: m.avatar_url,\n      html_url: m.html_url,\n    }));\n\n    // Cache the result\n    membersCache.set(cacheKey, result);\n\n    return result;\n  } catch (error) {\n    console.error(\n      `Error fetching team members for ${org}/${teamSlug}:`,\n      error\n    );\n    return [];\n  }\n}\n\n/**\n * Get GitHub team URL\n */\nexport function getTeamUrl(org: string, teamSlug: string): string {\n  return `https://github.com/orgs/${org}/teams/${teamSlug}`;\n}\n\n/**\n * Clear the members cache (useful for testing or force refresh)\n */\nexport function clearMembersCache(): void {\n  membersCache.clear();\n}\n","/**\n * Checks API\n * Functions for loading and working with check metadata\n */\n\nimport { fetchWithHybridAuth } from './registry.js';\nimport type { CheckMetadata, AllChecksResponse } from '../types/index.js';\n\n// Cache for checks metadata\nlet checksCache: AllChecksResponse | null = null;\nlet checksTimestamp = 0;\nconst CACHE_TTL = 5 * 60 * 1000; // 5 minutes\n\n/**\n * Load all checks metadata\n */\nexport async function loadChecks(): Promise<AllChecksResponse> {\n  // Return cached if valid\n  const now = Date.now();\n  if (checksCache && now - checksTimestamp < CACHE_TTL) {\n    return checksCache;\n  }\n\n  try {\n    const { response } = await fetchWithHybridAuth('all-checks.json');\n    if (!response.ok) {\n      throw new Error(`Failed to fetch all-checks.json: ${response.status}`);\n    }\n    checksCache = await response.json();\n    checksTimestamp = now;\n    return checksCache!;\n  } catch (error) {\n    console.warn('Failed to load checks metadata:', error);\n    // Return default empty structure\n    return {\n      version: '1.0.0',\n      checks: [],\n      categories: [],\n      count: 0,\n    };\n  }\n}\n\n/**\n * Get a check by its ID\n */\nexport function getCheckById(checkId: string): CheckMetadata | null {\n  if (!checksCache) {return null;}\n  return checksCache.checks.find((c) => c.id === checkId) || null;\n}\n\n/**\n * Get all checks\n */\nexport function getAllChecks(): CheckMetadata[] {\n  return checksCache?.checks || [];\n}\n\n/**\n * Get checks grouped by category\n */\nexport function getChecksByCategory(): Record<string, CheckMetadata[]> {\n  if (!checksCache) {return {};}\n\n  const grouped: Record<string, CheckMetadata[]> = {};\n  for (const check of checksCache.checks) {\n    const category = check.category || 'Other';\n    if (!grouped[category]) {\n      grouped[category] = [];\n    }\n    grouped[category].push(check);\n  }\n\n  // Sort by category order\n  const orderedCategories = checksCache.categories || [];\n  const result: Record<string, CheckMetadata[]> = {};\n\n  // Add categories in order\n  for (const category of orderedCategories) {\n    if (grouped[category]) {\n      result[category] = grouped[category];\n    }\n  }\n\n  // Add any remaining categories\n  for (const category of Object.keys(grouped)) {\n    if (!result[category]) {\n      result[category] = grouped[category];\n    }\n  }\n\n  return result;\n}\n\n/**\n * Get the list of categories\n */\nexport function getCategories(): string[] {\n  return checksCache?.categories || [];\n}\n\n/**\n * Clear the checks cache\n */\nexport function clearChecksCache(): void {\n  checksCache = null;\n  checksTimestamp = 0;\n}\n","/**\n * Generic tab management utility\n */\n\nexport interface TabConfig {\n  containerId: string;\n  tabButtonSelector?: string;\n  tabContentSelector?: string;\n  activeClass?: string;\n  getTabContentId?: (tabName: string) => string;\n  onActivate?: Record<string, () => void>;\n}\n\nexport interface TabManager {\n  switchTab: (tabName: string, event?: Event) => void;\n  getActiveTab: () => string | null;\n}\n\n/**\n * Create a tab manager for a modal\n */\nexport function createTabManager(config: TabConfig): TabManager {\n  const {\n    containerId,\n    tabButtonSelector = '.tab-btn',\n    tabContentSelector = '.tab-content',\n    activeClass = 'active',\n    getTabContentId = (tabName: string) => `${tabName}-tab`,\n    onActivate = {},\n  } = config;\n\n  const container = document.getElementById(containerId);\n  if (!container) {\n    throw new Error(`Container not found: ${containerId}`);\n  }\n\n  /**\n   * Switch to a specific tab\n   */\n  function switchTab(tabName: string, event?: Event): void {\n    // Remove active from all buttons\n    container.querySelectorAll(tabButtonSelector).forEach((btn) => {\n      btn.classList.remove(activeClass);\n    });\n\n    // Remove active from all content\n    container.querySelectorAll(tabContentSelector).forEach((content) => {\n      content.classList.remove(activeClass);\n    });\n\n    // Activate clicked button\n    if (event?.target) {\n      (event.target as HTMLElement).classList.add(activeClass);\n    } else {\n      const btn = container.querySelector(\n        `${tabButtonSelector}[data-tab=\"${tabName}\"]`\n      );\n      if (btn) {\n        btn.classList.add(activeClass);\n      }\n    }\n\n    // Activate content\n    const content = document.getElementById(getTabContentId(tabName));\n    if (content) {\n      content.classList.add(activeClass);\n    }\n\n    // Call activation callback if exists\n    if (onActivate[tabName]) {\n      onActivate[tabName]();\n    }\n  }\n\n  /**\n   * Get currently active tab name\n   */\n  function getActiveTab(): string | null {\n    const activeBtn = container.querySelector<HTMLElement>(\n      `${tabButtonSelector}.${activeClass}`\n    );\n    return activeBtn?.dataset.tab || null;\n  }\n\n  return { switchTab, getActiveTab };\n}\n","/**\n * Team Modal Management\n * Handles showing team details and tab switching\n */\n\nimport { capitalize, escapeHtml } from '../utils/formatting.js';\nimport {\n  getTeamName,\n  getRank,\n  calculateTeamStats,\n} from '../utils/team-statistics.js';\nimport { fetchTeamMembers, getTeamUrl } from '../api/github-teams.js';\n// Auth module used for token checks in settings\nimport { openSettings } from './settings.js';\nimport { getIcon } from '../config/icons.js';\nimport { loadChecks } from '../api/checks.js';\nimport { calculateCheckAdoptionByTeam } from '../utils/check-statistics.js';\nimport { createTabManager, type TabManager } from './modals/shared/tab-manager.js';\nimport type {\n  ServiceData,\n  RankName,\n  RankCounts,\n  TeamMember,\n} from '../types/index.js';\n\n// Window types are defined in types/globals.d.ts\n\ninterface TeamWithGitHub {\n  name: string;\n  serviceCount: number;\n  averageScore: number;\n  rankDistribution: RankCounts;\n  staleCount: number;\n  installedCount: number;\n  github_org?: string | null;\n  github_slug?: string | null;\n  slack_channel?: string;\n  oncall_rotation?: string;\n  description?: string;\n  aliases?: string[];\n  id?: string;\n}\n\ninterface CheckAdoptionTeamStats {\n  passing: number;\n  failing: number;\n  excluded?: number;\n  total: number;\n  activeTotal?: number;\n  percentage: number;\n  services: Array<{\n    org: string;\n    repo: string;\n    name: string;\n    score: number;\n    rank: RankName;\n    checkStatus?: 'pass' | 'fail' | 'excluded' | 'error' | 'skipped' | 'unknown';\n    exclusionReason?: string;\n  }>;\n}\n\n// State for check adoption tab\nlet currentTeamServices: ServiceData[] = [];\nlet selectedCheckId: string | null = null;\nlet teamCheckDropdownOpen = false;\nlet teamTabManager: TabManager | null = null;\n\n/**\n * Render GitHub team section HTML\n */\nfunction renderGitHubSection(\n  team: TeamWithGitHub,\n  members: TeamMember[] | null\n): string {\n  const teamUrl = getTeamUrl(team.github_org!, team.github_slug!);\n\n  // Not authenticated\n  if (members === null) {\n    return `\n            <div class=\"team-github-section\">\n                <a href=\"${escapeHtml(teamUrl)}\" target=\"_blank\" class=\"team-github-link\">\n                    ${getIcon('github')} ${escapeHtml(team.github_slug!)}\n                    ${getIcon('externalLink')}\n                </a>\n                <div class=\"team-github-signin\">\n                    <button class=\"btn-link\" onclick=\"window.openSettingsForTeam()\">\n                        Sign in to view team members\n                    </button>\n                </div>\n            </div>\n        `;\n  }\n\n  // Authenticated but no members or error\n  if (!members || members.length === 0) {\n    return `\n            <div class=\"team-github-section\">\n                <a href=\"${escapeHtml(teamUrl)}\" target=\"_blank\" class=\"team-github-link\">\n                    ${getIcon('github')} ${escapeHtml(team.github_slug!)}\n                    ${getIcon('externalLink')}\n                </a>\n                <div class=\"team-members-empty\">No members found or unable to access team</div>\n            </div>\n        `;\n  }\n\n  // Has members\n  const membersHtml = members\n    .map(\n      (m) => `\n        <a href=\"${escapeHtml(m.html_url)}\" target=\"_blank\" class=\"team-member\" title=\"${escapeHtml(m.login)}\">\n            <img src=\"${escapeHtml(m.avatar_url)}&s=48\" alt=\"${escapeHtml(m.login)}\" class=\"team-member-avatar\">\n            <span class=\"team-member-name\">@${escapeHtml(m.login)}</span>\n        </a>\n    `\n    )\n    .join('');\n\n  return `\n        <div class=\"team-github-section\">\n            <a href=\"${escapeHtml(teamUrl)}\" target=\"_blank\" class=\"team-github-link\">\n                ${getIcon('github')} ${escapeHtml(team.github_slug!)}\n                ${getIcon('externalLink')}\n            </a>\n            <div class=\"team-members\">\n                <span class=\"members-label\">Members (${members.length}):</span>\n                <div class=\"members-grid\">\n                    ${membersHtml}\n                </div>\n            </div>\n        </div>\n    `;\n}\n\n/**\n * Show team detail modal\n */\nexport async function showTeamModal(teamName: string): Promise<void> {\n  // Lazily compute team data if not already available\n  if (!window.allTeams || window.allTeams.length === 0) {\n    const services = window.allServices || [];\n    if (services.length > 0) {\n      const teamData = calculateTeamStats(services);\n      window.allTeams = Object.values(teamData);\n    }\n  }\n\n  const team = window.allTeams?.find(\n    (t) => t.name === teamName\n  ) as TeamWithGitHub | undefined;\n  if (!team) {\n    console.error('Team not found:', teamName);\n    return;\n  }\n\n  // Get services for this team\n  const teamServices = (window.allServices || []).filter(\n    (s) => getTeamName(s) === team.name\n  );\n\n  const modal = document.getElementById('team-modal');\n  const content = document.getElementById('team-detail');\n\n  if (!modal || !content) {return;}\n\n  const dominantRank = getRank(team);\n  const rankDist: RankCounts = team.rankDistribution || {\n    platinum: 0,\n    gold: 0,\n    silver: 0,\n    bronze: 0,\n  };\n\n  // Build rank distribution bars\n  const rankBars = (['platinum', 'gold', 'silver', 'bronze'] as RankName[])\n    .map((rank) => {\n      const count = rankDist[rank] || 0;\n      const pct =\n        team.serviceCount > 0\n          ? Math.round((count / team.serviceCount) * 100)\n          : 0;\n      return `\n            <div class=\"rank-dist-row\">\n                <span class=\"rank-dist-label\">${capitalize(rank)}</span>\n                <div class=\"rank-dist-bar-container\">\n                    <div class=\"rank-dist-bar rank-${rank}\" style=\"width: ${pct}%\"></div>\n                </div>\n                <span class=\"rank-dist-count\">${count}</span>\n            </div>\n        `;\n    })\n    .join('');\n\n  // Build services list\n  const servicesList = teamServices\n    .map((s) => {\n      const score = s.score;\n      const rank = s.rank;\n      const scoreDisplay = score !== null && score !== undefined ? Math.round(score) : '-';\n      const rankClass = rank ? `rank-${rank}` : '';\n      return `\n            <div class=\"team-service-item\" onclick=\"window.showServiceDetail && window.showServiceDetail('${s.org}', '${s.repo}')\">\n                <span class=\"service-name\">${escapeHtml(s.repo)}</span>\n                <span class=\"service-score ${rankClass}\">${scoreDisplay}</span>\n            </div>\n        `;\n    })\n    .join('');\n\n  const teamId =\n    team.id || team.name.toLowerCase().replace(/\\s+/g, '-');\n\n  content.innerHTML = `\n        <div class=\"rank-badge modal-header-badge ${dominantRank}\">${capitalize(dominantRank)}</div>\n        <h2>${escapeHtml(team.name)} <button class=\"edit-icon-btn\" onclick=\"window.openTeamEditModal && window.openTeamEditModal('${escapeHtml(teamId)}')\" title=\"Edit Team\"><svg width=\"14\" height=\"14\" viewBox=\"0 0 16 16\" fill=\"currentColor\"><path d=\"M11.013 1.427a1.75 1.75 0 012.474 0l1.086 1.086a1.75 1.75 0 010 2.474l-8.61 8.61c-.21.21-.47.364-.756.445l-3.251.93a.75.75 0 01-.927-.928l.929-3.25c.081-.286.235-.547.445-.758l8.61-8.61zm.176 4.823L9.75 4.81l-6.286 6.287a.253.253 0 00-.064.108l-.558 1.953 1.953-.558a.253.253 0 00.108-.064l6.286-6.286zm1.238-3.763a.25.25 0 00-.354 0L10.811 3.75l1.439 1.44 1.263-1.263a.25.25 0 000-.354l-1.086-1.086z\"></path></svg></button></h2>\n        <div class=\"team-metadata\">\n            <span class=\"team-id\">ID: ${escapeHtml(teamId)}</span>\n            ${team.description ? `<p class=\"team-description\">${escapeHtml(team.description)}</p>` : ''}\n            ${\n  team.aliases && team.aliases.length > 0\n    ? `\n            <div class=\"team-aliases\">\n                <span class=\"aliases-label\">Also known as:</span>\n                ${team.aliases.map((a) => `<span class=\"alias-tag\">${escapeHtml(a)}</span>`).join('')}\n            </div>\n            `\n    : ''\n}\n        </div>\n\n        <div class=\"team-modal-stats\">\n            <div class=\"team-modal-stat\">\n                <span class=\"stat-value\">${Math.round(team.averageScore || 0)}</span>\n                <span class=\"stat-label\">Average Score</span>\n            </div>\n            <div class=\"team-modal-stat\">\n                <span class=\"stat-value\">${team.serviceCount}</span>\n                <span class=\"stat-label\">Services</span>\n            </div>\n            <div class=\"team-modal-stat\">\n                <span class=\"stat-value\">${team.installedCount}</span>\n                <span class=\"stat-label\">Installed</span>\n            </div>\n            <div class=\"team-modal-stat ${team.staleCount > 0 ? 'warning' : ''}\">\n                <span class=\"stat-value\">${team.staleCount || 0}</span>\n                <span class=\"stat-label\">Stale</span>\n            </div>\n        </div>\n\n        ${\n  team.slack_channel || team.oncall_rotation\n    ? `\n        <div class=\"team-modal-contact\">\n            ${team.slack_channel ? `<span class=\"contact-item\"><svg width=\"14\" height=\"14\" viewBox=\"0 0 16 16\" fill=\"currentColor\"><path d=\"M5.2 8.4a1.2 1.2 0 102.4 0 1.2 1.2 0 00-2.4 0zm6 0a1.2 1.2 0 102.4 0 1.2 1.2 0 00-2.4 0z\"/></svg> ${escapeHtml(team.slack_channel)}</span>` : ''}\n            ${team.oncall_rotation ? `<span class=\"contact-item\"><svg width=\"14\" height=\"14\" viewBox=\"0 0 16 16\" fill=\"currentColor\"><path d=\"M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0ZM1.5 8a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0Zm7-3.25v2.992l2.028.812a.75.75 0 0 1-.557 1.392l-2.5-1A.75.75 0 0 1 7 8.25v-3.5a.75.75 0 0 1 1.5 0Z\"/></svg> ${escapeHtml(team.oncall_rotation)}</span>` : ''}\n        </div>\n        `\n    : ''\n}\n\n        <div class=\"tabs\">\n            <button class=\"tab-btn active\" data-tab=\"services\" onclick=\"switchTeamModalTab('services')\">Services</button>\n            <button class=\"tab-btn\" data-tab=\"distribution\" onclick=\"switchTeamModalTab('distribution')\">Distribution</button>\n            <button class=\"tab-btn\" data-tab=\"adoption\" onclick=\"switchTeamModalTab('adoption')\">Check Adoption</button>\n            <button class=\"tab-btn\" data-tab=\"github\" onclick=\"switchTeamModalTab('github')\">GitHub</button>\n        </div>\n\n        <div class=\"team-tab-content tab-content active\" id=\"team-tab-services\">\n            <div class=\"team-services-list\">\n                ${servicesList || '<div class=\"empty-state\">No services in this team</div>'}\n            </div>\n        </div>\n\n        <div class=\"team-tab-content tab-content\" id=\"team-tab-distribution\">\n            <div class=\"rank-distribution-detail\">\n                ${rankBars}\n            </div>\n        </div>\n\n        <div class=\"team-tab-content tab-content\" id=\"team-tab-adoption\">\n            <div class=\"check-adoption-loading\">\n                <span class=\"loading-spinner\"></span> Loading check data...\n            </div>\n        </div>\n\n        <div class=\"team-tab-content tab-content\" id=\"team-tab-github\">\n            ${\n  team.github_org && team.github_slug\n    ? `\n                <div class=\"team-github-section team-github-loading\">\n                    <span class=\"loading-spinner\"></span> Loading GitHub team...\n                </div>\n            `\n    : `\n                <div class=\"team-not-linked\">\n                    Not linked to a GitHub team\n                </div>\n            `\n}\n        </div>\n    `;\n\n  // Store team services for check adoption tab\n  currentTeamServices = teamServices;\n\n  // Initialize tab manager for team modal\n  teamTabManager = createTabManager({\n    containerId: 'team-modal',\n    tabButtonSelector: '.tab-btn',\n    tabContentSelector: '.team-tab-content',\n    getTabContentId: (tabName: string) => `team-tab-${tabName}`,\n    onActivate: {\n      adoption: loadCheckAdoptionTab,\n    },\n  });\n\n  modal.classList.remove('hidden');\n\n  // Fetch GitHub team members asynchronously if team is linked\n  if (team.github_org && team.github_slug) {\n    const members = await fetchTeamMembers(team.github_org, team.github_slug);\n    const section = document.getElementById('team-tab-github');\n    if (section) {\n      section.innerHTML = renderGitHubSection(team, members);\n    }\n  }\n}\n\n/**\n * Switch tabs within the team modal\n */\nexport function switchTeamModalTab(tabName: string): void {\n  if (teamTabManager) {\n    teamTabManager.switchTab(tabName);\n  }\n}\n\n/**\n * Load and render check adoption tab content\n */\nasync function loadCheckAdoptionTab(): Promise<void> {\n  const section = document.getElementById('team-tab-adoption');\n  if (!section) {return;}\n\n  try {\n    // Load checks metadata\n    const checksData = await loadChecks();\n    const checks = checksData.checks || [];\n\n    if (checks.length === 0) {\n      section.innerHTML =\n        '<div class=\"empty-state\">No check metadata available</div>';\n      return;\n    }\n\n    // Default to first check if none selected\n    if (!selectedCheckId) {\n      selectedCheckId = checks[0].id;\n    }\n\n    renderCheckAdoptionContent(section, checks);\n  } catch (error) {\n    console.error('Failed to load check adoption:', error);\n    section.innerHTML =\n      '<div class=\"empty-state\">Failed to load check data</div>';\n  }\n}\n\n/**\n * Render check adoption content\n */\nfunction renderCheckAdoptionContent(\n  section: HTMLElement,\n  checks: Array<{ id: string; name: string; description?: string }>\n): void {\n  const services = currentTeamServices;\n  const selectedCheck =\n    checks.find((c) => c.id === selectedCheckId) || checks[0];\n\n  // Calculate adoption for selected check\n  const teamStats = calculateCheckAdoptionByTeam(services, selectedCheckId!);\n  const currentTeamName = services[0]\n    ? getTeamName(services[0]) || 'No Team'\n    : 'No Team';\n  const stats: CheckAdoptionTeamStats = teamStats[currentTeamName] || {\n    passing: 0,\n    failing: 0,\n    excluded: 0,\n    total: 0,\n    activeTotal: 0,\n    percentage: 0,\n    services: [],\n  };\n\n  // Build check selector options\n  const checkOptions = checks\n    .map(\n      (check) => `\n        <div class=\"check-selector-option ${check.id === selectedCheckId ? 'selected' : ''}\"\n             data-check-id=\"${check.id}\"\n             onclick=\"window.selectTeamCheck('${check.id}')\">\n            ${escapeHtml(check.name)}\n        </div>\n    `\n    )\n    .join('');\n\n  // Build passing/failing/excluded service lists\n  const passingServices = stats.services.filter((s) => s.checkStatus === 'pass');\n  const failingServices = stats.services.filter((s) => s.checkStatus === 'fail');\n  const excludedServices = stats.services.filter(\n    (s) => s.checkStatus === 'excluded'\n  );\n\n  const passingList =\n    passingServices.length > 0\n      ? passingServices\n        .map(\n          (s) => `\n            <div class=\"adoption-service-item passing\" onclick=\"window.showServiceDetail && window.showServiceDetail('${s.org}', '${s.repo}')\">\n                <span class=\"service-name\">${escapeHtml(s.name)}</span>\n                <span class=\"service-score rank-${s.rank}\">${Math.round(s.score)}</span>\n            </div>\n        `\n        )\n        .join('')\n      : '<div class=\"empty-list\">No passing services</div>';\n\n  const failingList =\n    failingServices.length > 0\n      ? failingServices\n        .map(\n          (s) => `\n            <div class=\"adoption-service-item failing\" onclick=\"window.showServiceDetail && window.showServiceDetail('${s.org}', '${s.repo}')\">\n                <span class=\"service-name\">${escapeHtml(s.name)}</span>\n                <span class=\"service-score rank-${s.rank}\">${Math.round(s.score)}</span>\n            </div>\n        `\n        )\n        .join('')\n      : '<div class=\"empty-list\">No failing services</div>';\n\n  const excludedList =\n    excludedServices.length > 0\n      ? excludedServices\n        .map(\n          (s) => `\n            <div class=\"adoption-service-item excluded\" onclick=\"window.showServiceDetail && window.showServiceDetail('${s.org}', '${s.repo}')\">\n                <span class=\"service-name\">${escapeHtml(s.name)}</span>\n                <span class=\"exclusion-reason\" title=\"${escapeHtml(s.exclusionReason || 'Excluded')}\">${escapeHtml(s.exclusionReason || 'Excluded')}</span>\n            </div>\n        `\n        )\n        .join('')\n      : '<div class=\"empty-list\">No excluded services</div>';\n\n  // Calculate active services for progress display\n  const activeTotal = stats.activeTotal || stats.total - (stats.excluded || 0);\n\n  section.innerHTML = `\n        <div class=\"check-adoption-content\">\n            <div class=\"check-selector\">\n                <label>Select Check:</label>\n                <div class=\"check-selector-dropdown\">\n                    <button class=\"check-selector-toggle\" onclick=\"window.toggleTeamCheckDropdown()\">\n                        <span class=\"check-selector-text\">${escapeHtml(selectedCheck.name)}</span>\n                        ${getIcon('chevronDown', { size: 16 })}\n                    </button>\n                    <div class=\"check-selector-menu\" id=\"team-check-selector-menu\">\n                        <div class=\"check-selector-search\">\n                            <input type=\"text\" placeholder=\"Search checks...\"\n                                   oninput=\"window.filterTeamCheckOptions(this.value)\">\n                        </div>\n                        <div class=\"check-selector-options\">\n                            ${checkOptions}\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <div class=\"check-info\">\n                <p class=\"check-description\">${escapeHtml(selectedCheck.description || '')}</p>\n            </div>\n\n            <div class=\"adoption-progress\">\n                <div class=\"progress-header\">\n                    <span class=\"progress-label\">Adoption Rate</span>\n                    <span class=\"progress-value\">\n                        ${stats.percentage}% (${stats.passing}/${activeTotal} active)\n                        ${excludedServices.length > 0 ? `<span class=\"excluded-note\">${excludedServices.length} excluded</span>` : ''}\n                    </span>\n                </div>\n                <div class=\"progress-bar-large\">\n                    <div class=\"progress-fill ${stats.percentage >= 80 ? 'high' : stats.percentage >= 50 ? 'medium' : 'low'}\" style=\"width: ${stats.percentage}%\"></div>\n                </div>\n            </div>\n\n            <div class=\"adoption-lists ${excludedServices.length > 0 ? 'three-columns' : ''}\">\n                <div class=\"adoption-column passing\">\n                    <h4>Passing (${passingServices.length})</h4>\n                    <div class=\"adoption-service-list\">\n                        ${passingList}\n                    </div>\n                </div>\n                <div class=\"adoption-column failing\">\n                    <h4>Failing (${failingServices.length})</h4>\n                    <div class=\"adoption-service-list\">\n                        ${failingList}\n                    </div>\n                </div>\n                ${\n  excludedServices.length > 0\n    ? `\n                <div class=\"adoption-column excluded\">\n                    <h4>Excluded (${excludedServices.length})</h4>\n                    <div class=\"adoption-service-list excluded-list\">\n                        ${excludedList}\n                    </div>\n                </div>\n                `\n    : ''\n}\n            </div>\n        </div>\n    `;\n}\n\n/**\n * Change selected check in team modal\n */\nexport function changeTeamCheck(checkId: string): void {\n  selectedCheckId = checkId;\n  loadCheckAdoptionTab();\n}\n\n/**\n * Toggle team check dropdown\n */\nexport function toggleTeamCheckDropdown(): void {\n  const menu = document.getElementById('team-check-selector-menu');\n  if (!menu) {return;}\n\n  teamCheckDropdownOpen = !teamCheckDropdownOpen;\n  menu.classList.toggle('open', teamCheckDropdownOpen);\n\n  if (teamCheckDropdownOpen) {\n    // Focus search input\n    const searchInput = menu.querySelector('input') as HTMLInputElement | null;\n    if (searchInput) {\n      searchInput.value = '';\n      searchInput.focus();\n    }\n    // Reset filter\n    filterTeamCheckOptions('');\n\n    // Add click-outside listener\n    setTimeout(() => {\n      document.addEventListener('click', handleClickOutsideTeamCheckDropdown);\n    }, 0);\n  } else {\n    document.removeEventListener('click', handleClickOutsideTeamCheckDropdown);\n  }\n}\n\n/**\n * Handle click outside team check dropdown\n */\nfunction handleClickOutsideTeamCheckDropdown(e: Event): void {\n  const dropdown = document\n    .querySelector('#team-check-selector-menu')\n    ?.closest('.check-selector-dropdown');\n  if (dropdown && !dropdown.contains(e.target as Node)) {\n    closeTeamCheckDropdown();\n  }\n}\n\n/**\n * Close team check dropdown\n */\nfunction closeTeamCheckDropdown(): void {\n  const menu = document.getElementById('team-check-selector-menu');\n  if (menu) {\n    menu.classList.remove('open');\n    teamCheckDropdownOpen = false;\n  }\n  document.removeEventListener('click', handleClickOutsideTeamCheckDropdown);\n}\n\n/**\n * Select check from team dropdown\n */\nexport function selectTeamCheck(checkId: string): void {\n  selectedCheckId = checkId;\n  closeTeamCheckDropdown();\n  loadCheckAdoptionTab();\n}\n\n/**\n * Filter team check options by search query\n */\nexport function filterTeamCheckOptions(query: string): void {\n  const options = document.querySelectorAll<HTMLElement>(\n    '#team-check-selector-menu .check-selector-option'\n  );\n  const lowerQuery = query.toLowerCase();\n\n  options.forEach((option) => {\n    const text = option.textContent?.toLowerCase() || '';\n    option.style.display = text.includes(lowerQuery) ? '' : 'none';\n  });\n}\n\n// Expose dropdown functions to window\nwindow.changeTeamCheck = changeTeamCheck;\nwindow.toggleTeamCheckDropdown = toggleTeamCheckDropdown;\nwindow.selectTeamCheck = selectTeamCheck;\nwindow.filterTeamCheckOptions = filterTeamCheckOptions;\n\n/**\n * Close team detail modal\n */\nexport function closeTeamModal(): void {\n  const modal = document.getElementById('team-modal');\n  if (modal) {\n    modal.classList.add('hidden');\n  }\n}\n\n// Expose to window for onclick handlers\nwindow.showTeamDetail = showTeamModal;\nwindow.closeTeamModal = closeTeamModal;\nwindow.switchTeamModalTab = switchTeamModalTab;\nwindow.openSettingsForTeam = openSettings;\n","/**\n * Check Filter Component\n * Modal dialog for filtering services by check status\n * Each check can be set to: any (null), must pass ('pass'), or must fail ('fail')\n */\n\nimport { loadChecks, getChecksByCategory } from '../api/checks.js';\nimport {\n  getActiveCheckFilterCount,\n  filterByCheckCriteria,\n  calculateOverallCheckAdoption,\n} from '../utils/check-statistics.js';\nimport { showModal, hideModal, setupModalHandlers } from './modals.js';\nimport { escapeHtml } from '../utils/formatting.js';\nimport type { ServiceData, ChecksData, CheckMetadata, CheckFilter } from '../types/index.js';\n\n// Window types are defined in types/globals.d.ts\n\ninterface AdoptionStats {\n  passing: number;\n  failing: number;\n  excluded?: number;\n  total: number;\n  percentage: number;\n}\n\ntype FilterChangeCallback = (filters: Map<string, CheckFilter>) => void;\n\n// Constants\nconst CHECK_FILTER_MODAL_ID = 'check-filter-modal';\n\n// State\nlet checkFilters = new Map<string, CheckFilter>();\nlet checksData: ChecksData | null = null;\nlet onFilterChange: FilterChangeCallback | null = null;\nlet searchQuery = '';\nlet allServices: ServiceData[] = [];\nconst adoptionStatsCache = new Map<string, AdoptionStats>();\n\n/**\n * Initialize the check filter\n */\nexport async function initCheckFilter(onChange: FilterChangeCallback): Promise<void> {\n  onFilterChange = onChange;\n  checkFilters.clear();\n  searchQuery = '';\n  adoptionStatsCache.clear();\n\n  // Load checks metadata\n  try {\n    checksData = await loadChecks();\n  } catch (error) {\n    console.error('Failed to load checks for filter:', error);\n    checksData = { checks: [], categories: [], version: '', count: 0 };\n  }\n\n  // Create modal if needed\n  createModalIfNeeded();\n\n  // Render the toggle button\n  renderToggleButton();\n}\n\n/**\n * Update check filter with refreshed checks data\n */\nexport async function updateCheckFilter(): Promise<void> {\n  try {\n    checksData = await loadChecks();\n    adoptionStatsCache.clear();\n    renderToggleButton();\n  } catch (error) {\n    console.error('Failed to update checks filter:', error);\n  }\n}\n\n/**\n * Set services data for adoption stats calculation\n */\nexport function setServicesForStats(services: ServiceData[]): void {\n  allServices = services || [];\n  adoptionStatsCache.clear();\n}\n\n/**\n * Create the modal element if it doesn't exist\n */\nfunction createModalIfNeeded(): void {\n  if (document.getElementById(CHECK_FILTER_MODAL_ID)) {\n    return;\n  }\n\n  const modal = document.createElement('div');\n  modal.id = CHECK_FILTER_MODAL_ID;\n  modal.className = 'modal hidden';\n  modal.innerHTML = `\n        <div class=\"modal-content check-filter-modal-content\">\n            <div class=\"check-filter-modal-header\">\n                <h2>Filter by Check</h2>\n                <button class=\"modal-close\" onclick=\"window.closeCheckFilterModal()\">&times;</button>\n            </div>\n            <div class=\"check-filter-modal-body\">\n                <div id=\"check-filter-modal-content\"></div>\n            </div>\n        </div>\n    `;\n\n  document.body.appendChild(modal);\n  setupModalHandlers(CHECK_FILTER_MODAL_ID, () => {\n    // Optional: callback when modal closes\n  });\n}\n\n/**\n * Render the toggle button in the container\n */\nfunction renderToggleButton(): void {\n  const container = document.getElementById('check-filter-container');\n  if (!container) {return;}\n\n  const activeCount = getActiveCheckFilterCount(checkFilters);\n  const hasSelection = activeCount > 0;\n\n  container.innerHTML = `\n        <div class=\"check-filter-dropdown\">\n            <button class=\"check-filter-toggle ${hasSelection ? 'active' : ''}\" onclick=\"window.openCheckFilterModal()\">\n                <svg width=\"14\" height=\"14\" viewBox=\"0 0 16 16\" fill=\"currentColor\" style=\"margin-right: 6px;\">\n                    <path d=\"M.75 3h14.5a.75.75 0 0 1 0 1.5H.75a.75.75 0 0 1 0-1.5ZM3 7.75A.75.75 0 0 1 3.75 7h8.5a.75.75 0 0 1 0 1.5h-8.5A.75.75 0 0 1 3 7.75Zm3 4a.75.75 0 0 1 .75-.75h2.5a.75.75 0 0 1 0 1.5h-2.5a.75.75 0 0 1-.75-.75Z\"></path>\n                </svg>\n                Check Filter${hasSelection ? ` (${activeCount})` : ''}\n            </button>\n        </div>\n    `;\n}\n\n/**\n * Open the check filter modal\n */\nexport function openCheckFilterModal(): void {\n  createModalIfNeeded();\n\n  // Calculate adoption stats for all checks when modal opens\n  calculateAllAdoptionStats();\n\n  // Render modal content\n  renderModalContent();\n\n  // Show modal\n  showModal(CHECK_FILTER_MODAL_ID);\n\n  // Focus search input\n  setTimeout(() => {\n    const searchInput = document.getElementById(\n      'check-filter-search'\n    ) as HTMLInputElement | null;\n    if (searchInput) {\n      searchInput.focus();\n    }\n  }, 100);\n}\n\n/**\n * Close the check filter modal\n */\nexport function closeCheckFilterModal(): void {\n  hideModal(CHECK_FILTER_MODAL_ID);\n}\n\n/**\n * Calculate adoption stats for all checks\n */\nfunction calculateAllAdoptionStats(): void {\n  if (!allServices.length || !checksData?.checks) {\n    return;\n  }\n\n  adoptionStatsCache.clear();\n\n  for (const check of checksData.checks) {\n    const stats = calculateOverallCheckAdoption(allServices, check.id);\n    adoptionStatsCache.set(check.id, stats);\n  }\n}\n\n/**\n * Get adoption stats for a check\n */\nfunction getAdoptionStats(checkId: string): AdoptionStats {\n  return (\n    adoptionStatsCache.get(checkId) || {\n      passing: 0,\n      failing: 0,\n      total: 0,\n      percentage: 0,\n    }\n  );\n}\n\n/**\n * Render the modal content\n */\nfunction renderModalContent(): void {\n  const contentContainer = document.getElementById('check-filter-modal-content');\n  if (!contentContainer) {return;}\n\n  const activeCount = getActiveCheckFilterCount(checkFilters);\n  const checksByCategory = getChecksByCategory();\n\n  contentContainer.innerHTML = `\n        <div class=\"check-filter-search-section\">\n            <input\n                type=\"text\"\n                id=\"check-filter-search\"\n                placeholder=\"Search checks by name or description...\"\n                value=\"${escapeHtml(searchQuery)}\"\n                oninput=\"window.filterCheckOptions(this.value)\"\n            >\n            ${\n  activeCount > 0\n    ? `\n                <div class=\"check-filter-summary\">\n                    <span class=\"check-filter-summary-count\">\n                        <strong>${activeCount}</strong> filter${activeCount !== 1 ? 's' : ''} active\n                    </span>\n                    <button class=\"check-clear-btn\" onclick=\"window.clearCheckFilter(event)\">Clear all</button>\n                </div>\n            `\n    : ''\n}\n        </div>\n        <div id=\"check-filter-categories\">\n            ${renderCheckCategories(checksByCategory)}\n        </div>\n    `;\n}\n\n/**\n * Render check categories with collapsible sections\n */\nfunction renderCheckCategories(\n  checksByCategory: Record<string, CheckMetadata[]>\n): string {\n  const categories = Object.keys(checksByCategory);\n\n  if (categories.length === 0) {\n    return '<div class=\"check-filter-empty\">No checks available</div>';\n  }\n\n  return categories\n    .map((category) => {\n      const checks = checksByCategory[category];\n      const categoryId = category.toLowerCase().replace(/\\s+/g, '-');\n\n      // Calculate category-level stats\n      let categoryPassing = 0;\n      let categoryTotal = 0;\n      checks.forEach((check) => {\n        const stats = getAdoptionStats(check.id);\n        categoryPassing += stats.passing;\n        categoryTotal += stats.total;\n      });\n      const categoryAvgPassing =\n        categoryTotal > 0\n          ? Math.round((categoryPassing / categoryTotal) * 100)\n          : 0;\n\n      return `\n            <div class=\"check-category-section\" data-category=\"${categoryId}\">\n                <div class=\"check-category-header\" onclick=\"window.toggleCheckCategory('${categoryId}')\">\n                    <div class=\"check-category-header-left\">\n                        <svg width=\"12\" height=\"12\" viewBox=\"0 0 16 16\" fill=\"currentColor\">\n                            <path d=\"M6.22 3.22a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042L9.94 8 6.22 4.28a.75.75 0 0 1 0-1.06Z\"></path>\n                        </svg>\n                        <span class=\"check-category-header-title\">${escapeHtml(category)}</span>\n                        <span class=\"check-category-header-count\">(${checks.length})</span>\n                    </div>\n                    ${\n  allServices.length > 0\n    ? `\n                        <span class=\"check-category-header-stats\">${categoryAvgPassing}% avg adoption</span>\n                    `\n    : ''\n}\n                </div>\n                <div class=\"check-category-content\" id=\"check-category-${categoryId}\">\n                    ${checks.map((check) => renderCheckOptionCard(check)).join('')}\n                </div>\n            </div>\n        `;\n    })\n    .join('');\n}\n\n/**\n * Render a single check option card with description and stats\n */\nfunction renderCheckOptionCard(check: CheckMetadata): string {\n  const currentState = checkFilters.get(check.id) || null;\n  const stats = getAdoptionStats(check.id);\n  const searchLower = searchQuery.toLowerCase();\n  const matchesSearch =\n    !searchQuery ||\n    check.name.toLowerCase().includes(searchLower) ||\n    check.id.toLowerCase().includes(searchLower) ||\n    (check.description || '').toLowerCase().includes(searchLower);\n\n  const display = matchesSearch ? '' : 'display: none;';\n\n  // Determine progress bar class\n  let progressClass = 'low';\n  if (stats.percentage >= 75) {progressClass = 'high';}\n  else if (stats.percentage >= 40) {progressClass = 'medium';}\n\n  return `\n        <div class=\"check-option-card\" data-check-id=\"${check.id}\" style=\"${display}\">\n            <div class=\"check-option-info\">\n                <div class=\"check-option-name\">${escapeHtml(check.name)}</div>\n                ${\n  check.description\n    ? `\n                    <div class=\"check-option-description\">${escapeHtml(check.description)}</div>\n                `\n    : ''\n}\n                ${\n  allServices.length > 0\n    ? `\n                    <div class=\"check-option-stats\">\n                        <span class=\"check-option-stat passing\">\n                            <svg width=\"12\" height=\"12\" viewBox=\"0 0 16 16\" fill=\"currentColor\">\n                                <path d=\"M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z\"></path>\n                            </svg>\n                            <span class=\"check-option-stat-value\">${stats.passing}</span> passing\n                        </span>\n                        <span class=\"check-option-stat failing\">\n                            <svg width=\"12\" height=\"12\" viewBox=\"0 0 16 16\" fill=\"currentColor\">\n                                <path d=\"M3.72 3.72a.75.75 0 0 1 1.06 0L8 6.94l3.22-3.22a.749.749 0 0 1 1.275.326.749.749 0 0 1-.215.734L9.06 8l3.22 3.22a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L8 9.06l-3.22 3.22a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042L6.94 8 3.72 4.78a.75.75 0 0 1 0-1.06Z\"></path>\n                            </svg>\n                            <span class=\"check-option-stat-value\">${stats.failing}</span> failing\n                        </span>\n                        ${\n  stats.excluded && stats.excluded > 0\n    ? `\n                        <span class=\"check-option-stat excluded\">\n                            <svg width=\"12\" height=\"12\" viewBox=\"0 0 16 16\" fill=\"currentColor\">\n                                <circle cx=\"8\" cy=\"8\" r=\"7\" stroke=\"currentColor\" stroke-width=\"1.5\" fill=\"none\"/>\n                                <line x1=\"3\" y1=\"13\" x2=\"13\" y2=\"3\" stroke=\"currentColor\" stroke-width=\"1.5\"/>\n                            </svg>\n                            <span class=\"check-option-stat-value\">${stats.excluded}</span> excluded\n                        </span>\n                        `\n    : ''\n}\n                        <span class=\"check-option-progress\">\n                            <span class=\"check-option-progress-bar\">\n                                <span class=\"check-option-progress-fill ${progressClass}\" style=\"width: ${stats.percentage}%\"></span>\n                            </span>\n                            <span class=\"check-option-progress-text\">${stats.percentage}%</span>\n                        </span>\n                    </div>\n                `\n    : ''\n}\n            </div>\n            <div class=\"check-state-toggle\">\n                <button\n                    class=\"state-btn state-any ${currentState === null ? 'active' : ''}\"\n                    onclick=\"window.setCheckState('${check.id}', null)\"\n                    title=\"Any status\">\n                    Any\n                </button>\n                <button\n                    class=\"state-btn state-pass ${currentState === 'pass' ? 'active' : ''}\"\n                    onclick=\"window.setCheckState('${check.id}', 'pass')\"\n                    title=\"Must pass\">\n                    <svg width=\"12\" height=\"12\" viewBox=\"0 0 16 16\" fill=\"currentColor\">\n                        <path d=\"M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z\"></path>\n                    </svg>\n                </button>\n                <button\n                    class=\"state-btn state-fail ${currentState === 'fail' ? 'active' : ''}\"\n                    onclick=\"window.setCheckState('${check.id}', 'fail')\"\n                    title=\"Must fail\">\n                    <svg width=\"12\" height=\"12\" viewBox=\"0 0 16 16\" fill=\"currentColor\">\n                        <path d=\"M3.72 3.72a.75.75 0 0 1 1.06 0L8 6.94l3.22-3.22a.749.749 0 0 1 1.275.326.749.749 0 0 1-.215.734L9.06 8l3.22 3.22a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L8 9.06l-3.22 3.22a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042L6.94 8 3.72 4.78a.75.75 0 0 1 0-1.06Z\"></path>\n                    </svg>\n                </button>\n            </div>\n        </div>\n    `;\n}\n\n/**\n * Toggle category expanded/collapsed\n */\nexport function toggleCheckCategory(categoryId: string): void {\n  const section = document.querySelector(\n    `.check-category-section[data-category=\"${categoryId}\"]`\n  );\n  if (section) {\n    section.classList.toggle('collapsed');\n  }\n}\n\n/**\n * Set check filter state\n */\nexport function setCheckState(checkId: string, state: CheckFilter): void {\n  if (state === null) {\n    checkFilters.delete(checkId);\n  } else {\n    checkFilters.set(checkId, state);\n  }\n\n  // Update just the button states without full re-render\n  updateCheckOptionUI(checkId, state);\n  updateFilterSummary();\n  renderToggleButton();\n  notifyFilterChange();\n}\n\n/**\n * Update check option UI without full re-render\n */\nfunction updateCheckOptionUI(checkId: string, state: CheckFilter): void {\n  const option = document.querySelector(\n    `.check-option-card[data-check-id=\"${checkId}\"]`\n  );\n  if (option) {\n    option.querySelectorAll('.state-btn').forEach((btn) => {\n      btn.classList.remove('active');\n    });\n\n    const activeBtn = option.querySelector(`.state-${state || 'any'}`);\n    if (activeBtn) {\n      activeBtn.classList.add('active');\n    }\n  }\n}\n\n/**\n * Update filter summary in modal\n */\nfunction updateFilterSummary(): void {\n  const searchSection = document.querySelector('.check-filter-search-section');\n  if (!searchSection) {return;}\n\n  const activeCount = getActiveCheckFilterCount(checkFilters);\n  const existingSummary = searchSection.querySelector('.check-filter-summary');\n\n  if (activeCount > 0) {\n    const summaryHtml = `\n            <div class=\"check-filter-summary\">\n                <span class=\"check-filter-summary-count\">\n                    <strong>${activeCount}</strong> filter${activeCount !== 1 ? 's' : ''} active\n                </span>\n                <button class=\"check-clear-btn\" onclick=\"window.clearCheckFilter(event)\">Clear all</button>\n            </div>\n        `;\n\n    if (existingSummary) {\n      existingSummary.outerHTML = summaryHtml;\n    } else {\n      searchSection.insertAdjacentHTML('beforeend', summaryHtml);\n    }\n  } else if (existingSummary) {\n    existingSummary.remove();\n  }\n}\n\n/**\n * Filter check options by search\n */\nexport function filterCheckOptions(query: string): void {\n  searchQuery = query.toLowerCase();\n  const options = document.querySelectorAll<HTMLElement>('.check-option-card');\n\n  options.forEach((option) => {\n    const checkId = option.dataset.checkId;\n    const check = checksData?.checks?.find((c) => c.id === checkId);\n    if (!check) {return;}\n\n    const matchesSearch =\n      !searchQuery ||\n      check.name.toLowerCase().includes(searchQuery) ||\n      check.id.toLowerCase().includes(searchQuery) ||\n      (check.description || '').toLowerCase().includes(searchQuery);\n\n    option.style.display = matchesSearch ? '' : 'none';\n  });\n\n  // Show categories that have visible options\n  document\n    .querySelectorAll<HTMLElement>('.check-category-section')\n    .forEach((category) => {\n      const visibleOptions = category.querySelectorAll(\n        '.check-option-card:not([style*=\"display: none\"])'\n      );\n      category.style.display = visibleOptions.length > 0 ? '' : 'none';\n    });\n}\n\n/**\n * Clear all check filters\n */\nexport function clearCheckFilter(e?: Event): void {\n  if (e) {\n    e.stopPropagation();\n  }\n\n  checkFilters.clear();\n\n  // Update all buttons\n  document.querySelectorAll('.check-option-card').forEach((option) => {\n    option.querySelectorAll('.state-btn').forEach((btn) => {\n      btn.classList.remove('active');\n    });\n    option.querySelector('.state-any')?.classList.add('active');\n  });\n\n  updateFilterSummary();\n  renderToggleButton();\n  notifyFilterChange();\n}\n\n/**\n * Notify about filter changes\n */\nfunction notifyFilterChange(): void {\n  if (onFilterChange) {\n    onFilterChange(new Map(checkFilters));\n  }\n}\n\n/**\n * Filter services by current check filter state\n */\nexport function filterByChecks(services: ServiceData[]): ServiceData[] {\n  return filterByCheckCriteria(services, checkFilters);\n}\n\n/**\n * Get current filter state\n */\nexport function getCheckFilterState(): Map<string, CheckFilter> {\n  return new Map(checkFilters);\n}\n\n/**\n * Set filter state programmatically\n */\nexport function setCheckFilterState(\n  filters: Map<string, CheckFilter>\n): void {\n  checkFilters = new Map(filters);\n  renderToggleButton();\n  notifyFilterChange();\n}\n\n/**\n * Get count of active filters\n */\nexport function getActiveFilterCount(): number {\n  return getActiveCheckFilterCount(checkFilters);\n}\n\n// Expose functions to window for onclick handlers\nwindow.openCheckFilterModal = openCheckFilterModal;\nwindow.closeCheckFilterModal = closeCheckFilterModal;\nwindow.toggleCheckCategory = toggleCheckCategory;\nwindow.setCheckState = setCheckState;\nwindow.filterCheckOptions = filterCheckOptions;\nwindow.clearCheckFilter = clearCheckFilter;\n","/**\n * Check Adoption Dashboard\n * Shows check adoption rates across all teams\n */\n\nimport { showModal, hideModal, setupModalHandlers } from './modals.js';\nimport { loadChecks } from '../api/checks.js';\nimport {\n  calculateCheckAdoptionByTeam,\n  sortTeamsByAdoption,\n  calculateOverallCheckAdoption,\n} from '../utils/check-statistics.js';\nimport { escapeHtml } from '../utils/formatting.js';\nimport { getIcon } from '../config/icons.js';\nimport type { ServiceData, ChecksData } from '../types/index.js';\n\n// Window types are defined in types/globals.d.ts\n\ntype AdoptionSortBy = 'name' | 'percentage';\ntype SortDirection = 'asc' | 'desc';\n\ninterface SortState {\n  by: AdoptionSortBy;\n  direction: SortDirection;\n}\n\nconst MODAL_ID = 'check-adoption-modal';\n\n// State\nlet currentServices: ServiceData[] = [];\nlet selectedCheckId: string | null = null;\nconst currentSort: SortState = { by: 'percentage', direction: 'desc' };\nlet checksData: ChecksData | null = null;\nlet dropdownOpen = false;\n\n/**\n * Initialize check adoption dashboard\n */\nexport function initCheckAdoptionDashboard(): void {\n  // Create modal HTML if not exists\n  createModalIfNeeded();\n  setupModalHandlers(MODAL_ID);\n}\n\n/**\n * Create modal HTML element\n */\nfunction createModalIfNeeded(): void {\n  if (document.getElementById(MODAL_ID)) {return;}\n\n  const modal = document.createElement('div');\n  modal.id = MODAL_ID;\n  modal.className = 'modal hidden';\n  modal.innerHTML = `\n        <div class=\"modal-content check-adoption-modal-content\">\n            <div class=\"modal-header\">\n                <h2>Check Adoption Dashboard</h2>\n                <button class=\"modal-close\" aria-label=\"Close\" onclick=\"window.closeCheckAdoptionDashboard()\">\n                    ${getIcon('xMark', { size: 20 })}\n                </button>\n            </div>\n            <div class=\"modal-body\">\n                <div id=\"check-adoption-dashboard-content\"></div>\n            </div>\n        </div>\n    `;\n  document.body.appendChild(modal);\n}\n\n/**\n * Open the check adoption dashboard\n */\nexport async function openCheckAdoptionDashboard(\n  services: ServiceData[]\n): Promise<void> {\n  currentServices = services;\n\n  // Load checks metadata\n  try {\n    checksData = await loadChecks();\n    if (!selectedCheckId && checksData.checks.length > 0) {\n      selectedCheckId = checksData.checks[0].id;\n    }\n  } catch (error) {\n    console.error('Failed to load checks:', error);\n    checksData = { checks: [], categories: [], version: '', count: 0 };\n  }\n\n  showModal(MODAL_ID);\n  renderDashboard();\n}\n\n/**\n * Close the dashboard\n */\nexport function closeCheckAdoptionDashboard(): void {\n  hideModal(MODAL_ID);\n}\n\n/**\n * Render the dashboard content\n */\nfunction renderDashboard(): void {\n  const content = document.getElementById('check-adoption-dashboard-content');\n  if (!content) {return;}\n\n  const checks = checksData?.checks || [];\n\n  if (checks.length === 0) {\n    content.innerHTML =\n      '<div class=\"empty-state\">No check metadata available</div>';\n    return;\n  }\n\n  const selectedCheck =\n    checks.find((c) => c.id === selectedCheckId) || checks[0];\n\n  // Calculate adoption by team for selected check\n  const teamStats = calculateCheckAdoptionByTeam(\n    currentServices,\n    selectedCheckId!\n  );\n  const sortedTeams = sortTeamsByAdoption(teamStats, currentSort.direction);\n\n  // Apply name sorting if selected\n  if (currentSort.by === 'name') {\n    sortedTeams.sort((a, b) => {\n      const comparison = a.teamName.localeCompare(b.teamName);\n      return currentSort.direction === 'desc' ? -comparison : comparison;\n    });\n  }\n\n  // Build check selector options\n  const checkOptions = checks\n    .map(\n      (check) => `\n        <div class=\"check-selector-option ${check.id === selectedCheckId ? 'selected' : ''}\"\n             data-check-id=\"${check.id}\"\n             onclick=\"window.selectCheckFromDropdown('${check.id}')\">\n            ${escapeHtml(check.name)}\n        </div>\n    `\n    )\n    .join('');\n\n  // Build team rows with excluded column\n  const teamRows = sortedTeams\n    .map((team) => {\n      const progressClass =\n        team.percentage >= 80\n          ? 'high'\n          : team.percentage >= 50\n            ? 'medium'\n            : 'low';\n      const isNoTeam = team.teamName === 'No Team';\n      const rowClass = isNoTeam ? 'adoption-row no-team' : 'adoption-row';\n      // For 0%, show an empty state indicator\n      const progressWidth = team.percentage === 0 ? '0' : team.percentage;\n      const progressFillClass =\n        team.percentage === 0\n          ? 'progress-fill none'\n          : `progress-fill ${progressClass}`;\n      const excludedCount = team.excluded || 0;\n      const activeTotal = team.activeTotal || team.total - excludedCount;\n      return `\n            <tr class=\"${rowClass}\" onclick=\"window.showTeamDetail && window.showTeamDetail('${escapeHtml(team.teamName)}')\">\n                <td class=\"team-name-cell\">${escapeHtml(team.teamName)}</td>\n                <td class=\"adoption-cell\">${team.percentage}%</td>\n                <td class=\"progress-cell\">\n                    <div class=\"progress-bar-inline\">\n                        <div class=\"${progressFillClass}\" style=\"width: ${progressWidth}%\"></div>\n                    </div>\n                </td>\n                <td class=\"count-cell\">${team.passing}/${activeTotal}</td>\n                <td class=\"excluded-cell ${excludedCount > 0 ? 'has-excluded' : ''}\">${excludedCount > 0 ? excludedCount : '-'}</td>\n            </tr>\n        `;\n    })\n    .join('');\n\n  // Calculate overall stats using the new function that handles exclusions\n  const overallStats = calculateOverallCheckAdoption(\n    currentServices,\n    selectedCheckId!\n  );\n  const {\n    total: _totalServices,\n    activeTotal,\n    passing: passingTotal,\n    excluded: excludedTotal,\n    percentage: overallPercentage,\n  } = overallStats;\n\n  content.innerHTML = `\n        <div class=\"adoption-dashboard-header\">\n            <div class=\"check-selector-large\">\n                <label>Select Check:</label>\n                <div class=\"check-selector-dropdown\">\n                    <button class=\"check-selector-toggle\" onclick=\"window.toggleCheckSelectorDropdown()\">\n                        <span class=\"check-selector-text\">${escapeHtml(selectedCheck.name)}</span>\n                        ${getIcon('chevronDown', { size: 16 })}\n                    </button>\n                    <div class=\"check-selector-menu\" id=\"check-selector-menu\">\n                        <div class=\"check-selector-search\">\n                            <input type=\"text\" placeholder=\"Search checks...\"\n                                   oninput=\"window.filterCheckSelectorOptions(this.value)\">\n                        </div>\n                        <div class=\"check-selector-options\">\n                            ${checkOptions}\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class=\"adoption-stats-row\">\n                <div class=\"adoption-stat-card\">\n                    <span class=\"adoption-stat-value\">${overallPercentage}%</span>\n                    <span class=\"adoption-stat-label\">Overall Adoption</span>\n                </div>\n                <div class=\"adoption-stat-card\">\n                    <span class=\"adoption-stat-value\">${passingTotal}/${activeTotal}</span>\n                    <span class=\"adoption-stat-label\">Services Passing</span>\n                </div>\n                ${\n  excludedTotal > 0\n    ? `\n                <div class=\"adoption-stat-card excluded\">\n                    <span class=\"adoption-stat-value\">${excludedTotal}</span>\n                    <span class=\"adoption-stat-label\">Excluded</span>\n                </div>\n                `\n    : ''\n}\n            </div>\n        </div>\n\n        <div class=\"check-description-box\">\n            <strong>${escapeHtml(selectedCheck.name)}</strong>\n            <p>${escapeHtml(selectedCheck.description || 'No description available')}</p>\n        </div>\n\n        <div class=\"adoption-table-container\">\n            <table class=\"adoption-table\">\n                <thead>\n                    <tr>\n                        <th class=\"sortable\" onclick=\"window.sortAdoptionTable('name')\">\n                            Team\n                            <span class=\"sort-indicator\">${currentSort.by === 'name' ? (currentSort.direction === 'asc' ? '\\u2191' : '\\u2193') : ''}</span>\n                        </th>\n                        <th class=\"sortable\" onclick=\"window.sortAdoptionTable('percentage')\">\n                            Adoption\n                            <span class=\"sort-indicator\">${currentSort.by === 'percentage' ? (currentSort.direction === 'asc' ? '\\u2191' : '\\u2193') : ''}</span>\n                        </th>\n                        <th>Progress</th>\n                        <th>Passing</th>\n                        <th>Excl.</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    ${teamRows || '<tr><td colspan=\"5\" class=\"empty-row\">No teams found</td></tr>'}\n                </tbody>\n            </table>\n        </div>\n    `;\n}\n\n/**\n * Toggle check selector dropdown\n */\nexport function toggleCheckSelectorDropdown(): void {\n  const menu = document.getElementById('check-selector-menu');\n  if (!menu) {return;}\n\n  dropdownOpen = !dropdownOpen;\n  menu.classList.toggle('open', dropdownOpen);\n\n  if (dropdownOpen) {\n    // Focus search input\n    const searchInput = menu.querySelector('input') as HTMLInputElement | null;\n    if (searchInput) {\n      searchInput.value = '';\n      searchInput.focus();\n    }\n    // Reset filter\n    filterCheckSelectorOptions('');\n\n    // Add click-outside listener\n    setTimeout(() => {\n      document.addEventListener('click', handleClickOutsideCheckSelector);\n    }, 0);\n  } else {\n    document.removeEventListener('click', handleClickOutsideCheckSelector);\n  }\n}\n\n/**\n * Handle click outside dropdown\n */\nfunction handleClickOutsideCheckSelector(e: Event): void {\n  const dropdown = document.querySelector('.check-selector-dropdown');\n  if (dropdown && !dropdown.contains(e.target as Node)) {\n    closeCheckSelectorDropdown();\n  }\n}\n\n/**\n * Close dropdown\n */\nfunction closeCheckSelectorDropdown(): void {\n  const menu = document.getElementById('check-selector-menu');\n  if (menu) {\n    menu.classList.remove('open');\n    dropdownOpen = false;\n  }\n  document.removeEventListener('click', handleClickOutsideCheckSelector);\n}\n\n/**\n * Select check from dropdown\n */\nexport function selectCheckFromDropdown(checkId: string): void {\n  selectedCheckId = checkId;\n  closeCheckSelectorDropdown();\n  renderDashboard();\n}\n\n/**\n * Filter check selector options\n */\nexport function filterCheckSelectorOptions(query: string): void {\n  const options = document.querySelectorAll<HTMLElement>(\n    '.check-selector-option'\n  );\n  const lowerQuery = query.toLowerCase();\n\n  options.forEach((option) => {\n    const text = option.textContent?.toLowerCase() || '';\n    option.style.display = text.includes(lowerQuery) ? '' : 'none';\n  });\n}\n\n/**\n * Change selected check (legacy - kept for compatibility)\n */\nexport function changeAdoptionCheck(checkId: string): void {\n  selectedCheckId = checkId;\n  renderDashboard();\n}\n\n/**\n * Sort adoption table\n */\nexport function sortAdoptionTable(sortBy: AdoptionSortBy): void {\n  if (currentSort.by === sortBy) {\n    currentSort.direction = currentSort.direction === 'desc' ? 'asc' : 'desc';\n  } else {\n    currentSort.by = sortBy;\n    currentSort.direction = sortBy === 'name' ? 'asc' : 'desc';\n  }\n  renderDashboard();\n}\n\n// Expose to window\nwindow.openCheckAdoptionDashboard = openCheckAdoptionDashboard;\nwindow.closeCheckAdoptionDashboard = closeCheckAdoptionDashboard;\nwindow.changeAdoptionCheck = changeAdoptionCheck;\nwindow.sortAdoptionTable = sortAdoptionTable;\nwindow.toggleCheckSelectorDropdown = toggleCheckSelectorDropdown;\nwindow.selectCheckFromDropdown = selectCheckFromDropdown;\nwindow.filterCheckSelectorOptions = filterCheckSelectorOptions;\n","/**\n * Workflow configuration - centralizes workflow names and API settings\n * @module config/workflows\n */\n\nimport type { WorkflowConfig } from '../types/index';\n\nexport const WORKFLOWS: WorkflowConfig = {\n  files: {\n    triggerService: 'trigger-service-workflow.yml',\n    createInstallPR: 'create-installation-pr.yml',\n    scorecard: 'scorecard.yml',\n  },\n  polling: {\n    default: 30000,\n    min: 10000,\n    max: 120000,\n  },\n};\n\n/**\n * Build workflow dispatch URL\n */\nexport function getWorkflowDispatchUrl(\n  owner: string,\n  repo: string,\n  workflowFile: string\n): string {\n  return `https://api.github.com/repos/${owner}/${repo}/actions/workflows/${workflowFile}/dispatches`;\n}\n","/**\n * GitHub Actions Workflow Triggers\n * Handles triggering scorecards workflows via GitHub API\n */\n\nimport { getToken, clearToken } from '../services/auth.js';\nimport {\n  setButtonLoading,\n  setButtonSuccess,\n  setButtonError,\n  resetButton,\n} from '../ui/button-states.js';\nimport { showToast } from '../ui/toast.js';\nimport { DEPLOYMENT } from '../config/deployment.js';\nimport { WORKFLOWS, getWorkflowDispatchUrl } from '../config/workflows.js';\nimport type { ServiceData } from '../types/index.js';\n\n// Window types are defined in types/globals.d.ts\n\n// Get repo info from registry module\nconst getRepoInfo = (): { owner: string; name: string } => {\n  const { getRepoOwner, getRepoName } = window.ScorecardModules.registry;\n  return {\n    owner: getRepoOwner(),\n    name: getRepoName(),\n  };\n};\n\n/**\n * Trigger scorecard workflow for a single service\n */\nexport async function triggerServiceWorkflow(\n  org: string,\n  repo: string,\n  buttonElement: HTMLButtonElement\n): Promise<boolean> {\n  const token = getToken();\n\n  if (!token) {\n    showToast(\n      'Please configure a GitHub PAT in Settings to trigger workflows',\n      'warning'\n    );\n    window.openSettings();\n    return false;\n  }\n\n  setButtonLoading(buttonElement, 'Triggering...');\n\n  try {\n    const { owner, name } = getRepoInfo();\n    const response = await fetch(\n      getWorkflowDispatchUrl(owner, name, WORKFLOWS.files.triggerService),\n      {\n        method: 'POST',\n        headers: {\n          Accept: 'application/vnd.github+json',\n          Authorization: `Bearer ${token}`,\n          'X-GitHub-Api-Version': DEPLOYMENT.api.version,\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          ref: 'main',\n          inputs: { org, repo },\n        }),\n      }\n    );\n\n    if (response.status === 204) {\n      showToast(`Scorecard workflow triggered for ${org}/${repo}`, 'success');\n      await setButtonSuccess(buttonElement, '✓ Triggered Successfully');\n      return true;\n    } else if (response.status === 401) {\n      clearToken();\n      showToast(\n        'Invalid GitHub token. Please enter a valid token in Settings.',\n        'error'\n      );\n      await setButtonError(buttonElement, '✗ Trigger Failed');\n      return false;\n    } else {\n      const errorData = await response.json().catch(() => ({}));\n      console.error('Failed to trigger workflow:', response.status, errorData);\n      showToast(\n        `Failed to trigger workflow: ${(errorData as { message?: string }).message || response.statusText}`,\n        'error'\n      );\n      await setButtonError(buttonElement, '✗ Trigger Failed');\n      return false;\n    }\n  } catch (error) {\n    console.error('Error triggering workflow:', error);\n    showToast(\n      `Error triggering workflow: ${error instanceof Error ? error.message : String(error)}`,\n      'error'\n    );\n    await setButtonError(buttonElement, '✗ Trigger Failed');\n    return false;\n  }\n}\n\n/**\n * Create installation PR for a service\n */\nexport async function installService(\n  org: string,\n  repo: string,\n  buttonElement: HTMLButtonElement\n): Promise<boolean> {\n  const token = getToken();\n\n  if (!token) {\n    showToast(\n      'GitHub token is required to create installation PRs',\n      'error'\n    );\n    return false;\n  }\n\n  setButtonLoading(buttonElement, 'Creating PR...');\n\n  try {\n    const { owner, name } = getRepoInfo();\n    const response = await fetch(\n      getWorkflowDispatchUrl(owner, name, WORKFLOWS.files.createInstallPR),\n      {\n        method: 'POST',\n        headers: {\n          Accept: 'application/vnd.github+json',\n          Authorization: `Bearer ${token}`,\n          'X-GitHub-Api-Version': DEPLOYMENT.api.version,\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          ref: 'main',\n          inputs: { org, repo },\n        }),\n      }\n    );\n\n    if (response.status === 204) {\n      showToast(\n        `Installation PR creation started for ${org}/${repo}`,\n        'success'\n      );\n\n      setTimeout(() => {\n        showToast(\n          'Note: PR status will appear in the catalog in 3-5 minutes due to GitHub Pages deployment.',\n          'info'\n        );\n      }, 2000);\n\n      if (buttonElement) {\n        buttonElement.innerHTML = '⏳ PR Creating...';\n\n        // Poll and refresh\n        setTimeout(async () => {\n          try {\n            await new Promise((resolve) => setTimeout(resolve, 5000));\n            showToast('Installation PR created! Refreshing...', 'success');\n\n            const modal = document.getElementById('service-modal');\n            modal?.classList.add('hidden');\n            setTimeout(() => window.showServiceDetail(org, repo), 500);\n          } catch (error) {\n            console.error('Error checking PR status:', error);\n            resetButton(buttonElement);\n          }\n        }, 1000);\n      }\n\n      return true;\n    } else if (response.status === 401) {\n      clearToken();\n      showToast(\n        'Invalid GitHub token. Please enter a valid token with workflow permissions.',\n        'error'\n      );\n      resetButton(buttonElement);\n      return false;\n    } else {\n      const errorData = await response.json().catch(() => ({}));\n      console.error(\n        'Failed to create installation PR:',\n        response.status,\n        errorData\n      );\n      showToast(\n        `Failed to create installation PR: ${(errorData as { message?: string }).message || response.statusText}`,\n        'error'\n      );\n      resetButton(buttonElement);\n      return false;\n    }\n  } catch (error) {\n    console.error('Error creating installation PR:', error);\n    showToast(\n      `Error creating installation PR: ${error instanceof Error ? error.message : String(error)}`,\n      'error'\n    );\n    resetButton(buttonElement);\n    return false;\n  }\n}\n\n/**\n * Trigger workflows for multiple services (bulk operation)\n */\nexport async function triggerBulkWorkflows(\n  services: ServiceData[],\n  buttonElement: HTMLButtonElement\n): Promise<boolean> {\n  const token = getToken();\n\n  if (!token) {\n    showToast('GitHub token is required to trigger workflows', 'error');\n    return false;\n  }\n\n  setButtonLoading(buttonElement, 'Triggering...');\n\n  try {\n    const servicesArray = services.map((s) => ({ org: s.org, repo: s.repo }));\n    const { owner, name } = getRepoInfo();\n\n    const response = await fetch(\n      getWorkflowDispatchUrl(owner, name, WORKFLOWS.files.triggerService),\n      {\n        method: 'POST',\n        headers: {\n          Accept: 'application/vnd.github+json',\n          Authorization: `Bearer ${token}`,\n          'X-GitHub-Api-Version': DEPLOYMENT.api.version,\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          ref: 'main',\n          inputs: {\n            services: JSON.stringify(servicesArray),\n          },\n        }),\n      }\n    );\n\n    if (response.status === 204) {\n      const count = services.length;\n      showToast(\n        `Triggered workflows for ${count} service${count !== 1 ? 's' : ''}`,\n        'success'\n      );\n      await setButtonSuccess(\n        buttonElement,\n        `✓ Triggered ${count} service${count !== 1 ? 's' : ''}`\n      );\n      return true;\n    } else if (response.status === 401) {\n      clearToken();\n      showToast(\n        'Invalid GitHub token. Please enter a valid token in Settings.',\n        'error'\n      );\n      resetButton(buttonElement);\n      return false;\n    } else {\n      const errorData = await response.json().catch(() => ({}));\n      console.error(\n        'Failed to trigger bulk workflows:',\n        response.status,\n        errorData\n      );\n      showToast(\n        `Failed to trigger workflows: ${(errorData as { message?: string }).message || response.statusText}`,\n        'error'\n      );\n      resetButton(buttonElement);\n      return false;\n    }\n  } catch (error) {\n    console.error('Error triggering bulk workflows:', error);\n    showToast(\n      `Error triggering workflows: ${error instanceof Error ? error.message : String(error)}`,\n      'error'\n    );\n    resetButton(buttonElement);\n    return false;\n  }\n}\n\n/**\n * Handle bulk trigger button click (stale services only)\n */\nexport function handleBulkTrigger(event: Event): void {\n  event.preventDefault();\n\n  const { isServiceStale } = window.ScorecardModules.staleness;\n  const staleServices = window.allServices.filter(\n    (s) => isServiceStale(s, window.currentChecksHash) && s.installed\n  );\n\n  if (staleServices.length === 0) {\n    showToast('No stale services to trigger', 'info');\n    return;\n  }\n\n  if (\n    confirm(\n      `This will trigger scorecard workflows for ${staleServices.length} stale service${staleServices.length !== 1 ? 's' : ''}.\\n\\nContinue?`\n    )\n  ) {\n    triggerBulkWorkflows(staleServices, event.currentTarget as HTMLButtonElement);\n  }\n}\n\n/**\n * Handle bulk trigger all button click (all installed services)\n */\nexport function handleBulkTriggerAll(event: Event): void {\n  event.preventDefault();\n\n  const installedServices = window.allServices.filter((s) => s.installed);\n\n  if (installedServices.length === 0) {\n    showToast('No installed services to trigger', 'info');\n    return;\n  }\n\n  if (\n    confirm(\n      `This will trigger scorecard workflows for ALL ${installedServices.length} installed service${installedServices.length !== 1 ? 's' : ''}.\\n\\nThis may take a while. Continue?`\n    )\n  ) {\n    triggerBulkWorkflows(installedServices, event.currentTarget as HTMLButtonElement);\n  }\n}\n","/**\n * Theme Management\n * Handles light/dark mode with OS preference detection and localStorage persistence\n */\n\nconst THEME_KEY = 'theme';\n\nexport type Theme = 'light' | 'dark';\n\nconst THEMES: Record<string, Theme> = {\n  LIGHT: 'light',\n  DARK: 'dark',\n} as const;\n\n/**\n * Detect the user's OS-level dark mode preference\n */\nfunction getOSPreference(): Theme {\n  if (\n    window.matchMedia &&\n    window.matchMedia('(prefers-color-scheme: dark)').matches\n  ) {\n    return THEMES.DARK;\n  }\n  return THEMES.LIGHT;\n}\n\n/**\n * Get the saved theme from localStorage or fall back to OS preference\n */\nfunction getSavedTheme(): Theme {\n  const saved = localStorage.getItem(THEME_KEY);\n  if (saved === THEMES.DARK || saved === THEMES.LIGHT) {\n    return saved as Theme;\n  }\n  return getOSPreference();\n}\n\n/**\n * Apply the theme to the document\n */\nfunction applyTheme(theme: Theme): void {\n  document.documentElement.setAttribute('data-theme', theme);\n}\n\n/**\n * Save the theme preference to localStorage\n */\nfunction saveTheme(theme: Theme): void {\n  localStorage.setItem(THEME_KEY, theme);\n}\n\n/**\n * Get the current active theme\n */\nexport function getCurrentTheme(): Theme {\n  return (document.documentElement.getAttribute('data-theme') as Theme) || THEMES.LIGHT;\n}\n\n/**\n * Initialize the theme system\n * Loads saved preference or detects OS preference, then applies the theme\n * Should be called early in app initialization to prevent flash\n */\nexport function initTheme(): void {\n  const theme = getSavedTheme();\n  applyTheme(theme);\n\n  // Listen for OS preference changes\n  if (window.matchMedia) {\n    window\n      .matchMedia('(prefers-color-scheme: dark)')\n      .addEventListener('change', (e: MediaQueryListEvent) => {\n        // Only auto-switch if user hasn't manually set a preference\n        const saved = localStorage.getItem(THEME_KEY);\n        if (!saved) {\n          const newTheme: Theme = e.matches ? THEMES.DARK : THEMES.LIGHT;\n          applyTheme(newTheme);\n        }\n      });\n  }\n}\n\n/**\n * Toggle between light and dark themes\n * Saves the new preference to localStorage\n */\nexport function toggleTheme(): Theme {\n  const current = getCurrentTheme();\n  const newTheme: Theme = current === THEMES.DARK ? THEMES.LIGHT : THEMES.DARK;\n  applyTheme(newTheme);\n  saveTheme(newTheme);\n  return newTheme;\n}\n\n/**\n * Set a specific theme\n */\nexport function setTheme(theme: Theme): void {\n  if (theme === THEMES.DARK || theme === THEMES.LIGHT) {\n    applyTheme(theme);\n    saveTheme(theme);\n  }\n}\n","/**\n * Application Initialization\n * Handles app bootstrap, data loading, filtering, and refresh logic\n */\n\nimport { loadServices, fetchCurrentChecksHash } from './api/registry.js';\nimport { isServiceStale } from './services/staleness.js';\nimport { initTheme, getCurrentTheme } from './services/theme.js';\nimport { renderServices } from './ui/service-card.js';\nimport { updateStats } from './ui/stats.js';\nimport { showToast } from './ui/toast.js';\nimport { getCssVar } from './utils/css.js';\nimport {\n  initTeamFilter,\n  updateTeamFilter,\n  filterByTeam,\n} from './ui/team-filter.js';\nimport { initTeamDashboard } from './ui/team-dashboard.js';\nimport { getTeamName } from './utils/team-statistics.js';\nimport {\n  initCheckFilter,\n  updateCheckFilter,\n  filterByChecks,\n  setServicesForStats,\n} from './ui/check-filter.js';\nimport { initCheckAdoptionDashboard } from './ui/check-adoption-dashboard.js';\n\n// Window types are defined in types/globals.d.ts\n\n/**\n * Filter and render services based on active filters\n */\nexport function filterAndRenderServices(): void {\n  // Start with all services\n  let services = [...window.allServices];\n\n  // Apply team filter first\n  services = filterByTeam(services);\n\n  // Apply check filters (must pass / must fail)\n  services = filterByChecks(services);\n\n  // Then apply other filters\n  window.filteredServices = services.filter((service) => {\n    // Multi-select filters with include/exclude (AND logic)\n    if (window.activeFilters.size > 0) {\n      for (const [filterName, filterState] of window.activeFilters) {\n        // Determine if service matches this filter\n        let matches = false;\n\n        if (filterName === 'has-api') {\n          matches = service.has_api;\n        } else if (filterName === 'stale') {\n          matches = isServiceStale(service, window.currentChecksHash);\n        } else if (filterName === 'installed') {\n          matches = service.installed;\n        } else if (\n          filterName === 'platinum' ||\n          filterName === 'gold' ||\n          filterName === 'silver' ||\n          filterName === 'bronze'\n        ) {\n          matches = service.rank === filterName;\n        }\n\n        // Apply include/exclude logic\n        if (filterState === 'include') {\n          // Include: service must match\n          if (!matches) {\n            return false;\n          }\n        } else if (filterState === 'exclude') {\n          // Exclude: service must NOT match\n          if (matches) {\n            return false;\n          }\n        }\n      }\n    }\n\n    // Search filter - also search team name\n    if (window.searchQuery) {\n      const teamName = getTeamName(service) || '';\n      const searchText =\n        `${service.name} ${service.org} ${service.repo} ${teamName}`.toLowerCase();\n      if (!searchText.includes(window.searchQuery)) {\n        return false;\n      }\n    }\n\n    return true;\n  });\n\n  // Sort\n  window.filteredServices.sort((a, b) => {\n    switch (window.currentSort) {\n    case 'score-desc':\n      return b.score - a.score;\n    case 'score-asc':\n      return a.score - b.score;\n    case 'name-asc':\n      return a.name.localeCompare(b.name);\n    case 'name-desc':\n      return b.name.localeCompare(a.name);\n    case 'updated-desc':\n      return (\n        new Date(b.last_updated).getTime() -\n          new Date(a.last_updated).getTime()\n      );\n    default:\n      return 0;\n    }\n  });\n\n  renderServices();\n}\n\n/**\n * Refresh data (re-fetch from catalog)\n */\nexport async function refreshData(): Promise<void> {\n  const refreshBtn = document.getElementById(\n    'refresh-btn'\n  ) as HTMLButtonElement | null;\n  if (!refreshBtn) {\n    return;\n  }\n\n  // Disable button and show loading state\n  const originalText = refreshBtn.innerHTML;\n  refreshBtn.disabled = true;\n  refreshBtn.innerHTML = '<span class=\"spinner\"></span> Refreshing...';\n\n  try {\n    showToast('Refreshing service data...', 'info');\n\n    // Clear checks hash cache to force refetch\n    window.currentChecksHash = null;\n    window.checksHashTimestamp = 0;\n\n    // Reload services\n    const { services, usedAPI } = await loadServices();\n    window.allServices = services;\n    window.filteredServices = [...services];\n\n    // Fetch checks hash\n    window.currentChecksHash = await fetchCurrentChecksHash();\n    window.checksHashTimestamp = Date.now();\n\n    // Update team filter with new services\n    updateTeamFilter(services);\n\n    // Update check filter with new data\n    updateCheckFilter();\n\n    // Update services for check filter stats\n    setServicesForStats(services);\n\n    // Update UI\n    updateStats();\n    filterAndRenderServices();\n\n    // Show success message\n    const timestamp = new Date().toLocaleTimeString();\n    if (usedAPI) {\n      showToast(\n        `Data refreshed successfully from GitHub API at ${timestamp}. (Fresh data, bypassed cache)`,\n        'success'\n      );\n    } else {\n      showToast(\n        `Data refreshed from CDN at ${timestamp}. (Note: CDN cache may be up to 5 minutes old. Use GitHub PAT in settings for real-time data)`,\n        'success'\n      );\n    }\n  } catch (error) {\n    console.error('Error refreshing data:', error);\n    showToast(\n      `Failed to refresh data: ${error instanceof Error ? error.message : String(error)}`,\n      'error'\n    );\n  } finally {\n    // Restore button state\n    setTimeout(() => {\n      refreshBtn.disabled = false;\n      refreshBtn.innerHTML = originalText;\n    }, 1000);\n  }\n}\n\n/**\n * Update theme toggle button icon\n */\nfunction updateThemeIcon(theme: string): void {\n  const sunIcon = document.getElementById('theme-icon-sun');\n  const moonIcon = document.getElementById('theme-icon-moon');\n  if (sunIcon && moonIcon) {\n    if (theme === 'dark') {\n      sunIcon.style.display = 'none';\n      moonIcon.style.display = 'block';\n    } else {\n      sunIcon.style.display = 'block';\n      moonIcon.style.display = 'none';\n    }\n  }\n}\n\n/**\n * Initialize application on page load\n */\nexport async function initializeApp(): Promise<void> {\n  try {\n    // Initialize theme early to prevent flash\n    initTheme();\n    updateThemeIcon(getCurrentTheme());\n\n    // Load services\n    const { services } = await loadServices();\n    window.allServices = services;\n    window.filteredServices = [...services];\n\n    // Fetch checks hash\n    window.currentChecksHash = await fetchCurrentChecksHash();\n    window.checksHashTimestamp = Date.now();\n\n    // Initialize team filter\n    initTeamFilter(services, () => {\n      filterAndRenderServices();\n    });\n\n    // Initialize check filter\n    initCheckFilter(() => {\n      filterAndRenderServices();\n    });\n\n    // Set services for check filter stats\n    setServicesForStats(services);\n\n    // Initialize team dashboard\n    initTeamDashboard(isServiceStale);\n\n    // Initialize check adoption dashboard\n    initCheckAdoptionDashboard();\n\n    // Initialize UI\n    updateStats();\n    filterAndRenderServices();\n\n    // Re-initialize teams view if hash is #teams (handles direct navigation)\n    // This fixes the race condition where handleHashChange() runs before services load\n    if (window.location.hash === '#teams' && window.initTeamsView) {\n      window.initTeamsView();\n    }\n  } catch (error) {\n    console.error('Error loading services:', error);\n    const textMuted = getCssVar('--color-text-muted');\n    const servicesGrid = document.getElementById('services-grid');\n    if (servicesGrid) {\n      servicesGrid.innerHTML = `\n            <div class=\"empty-state\">\n                <h3>No Services Found</h3>\n                <p>No services have run scorecards yet, or the registry is not available.</p>\n                <p style=\"margin-top: 10px; font-size: 0.9rem; color: ${textMuted};\">\n                    Error: ${error instanceof Error ? error.message : String(error)}\n                </p>\n            </div>\n        `;\n    }\n  }\n}\n","/**\n * Main Application Entry Point\n * Imports all ES6 modules and initializes the application\n */\n\nimport type { ServiceData, ViewType, TeamRegistryEntry } from './types/index.js';\n\n// Base statistics interface that covers both TeamStatistics and TeamStatsEntry\ninterface TeamStatsBase {\n  serviceCount: number;\n  averageScore: number;\n  installedCount: number;\n  staleCount: number;\n  rankDistribution: Record<string, number>;\n  name?: string;\n  github_org?: string | null;\n  github_slug?: string | null;\n}\n\n// Local type definition matching the one in globals.d.ts for window.allTeams\n// This is needed because the globals.d.ts definition is inside declare global {}\ninterface TeamWithStats {\n  id?: string;\n  name: string;\n  description?: string;\n  slug?: string;\n  github_org?: string;\n  github_slug?: string;\n  serviceCount?: number;\n  averageScore?: number;\n  installedCount?: number;\n  staleCount?: number;\n  rankDistribution?: Record<string, number>;\n  slack_channel?: string | null;\n  metadata?: {\n    slack_channel?: string;\n  };\n  statistics?: TeamStatsBase;\n}\n\n// Config modules\nimport * as constants from './config/constants.js';\nimport * as icons from './config/icons.js';\n\n// Utility modules\nimport * as formatting from './utils/formatting.js';\nimport * as crypto from './utils/crypto.js';\nimport * as clipboard from './utils/clipboard.js';\nimport * as dom from './utils/dom.js';\nimport * as cssUtils from './utils/css.js';\nimport * as animation from './utils/animation.js';\nimport * as statistics from './utils/statistics.js';\nimport * as teamStatistics from './utils/team-statistics.js';\nimport * as checkStatistics from './utils/check-statistics.js';\nimport * as durationTracker from './utils/duration-tracker.js';\n\n// UI modules\nimport * as toast from './ui/toast.js';\nimport * as modals from './ui/modals.js';\nimport * as filters from './ui/filters.js';\nimport * as workflowRun from './ui/workflow-run.js';\nimport * as serviceCard from './ui/service-card.js';\nimport * as serviceModal from './ui/service-modal.js';\nimport * as serviceWorkflows from './ui/service-workflows.js';\nimport * as actionsWidget from './ui/actions-widget.js';\nimport * as settings from './ui/settings.js';\nimport * as stats from './ui/stats.js';\nimport * as buttonStates from './ui/button-states.js';\nimport * as teamFilter from './ui/team-filter.js';\nimport * as teamDashboard from './ui/team-dashboard.js';\nimport * as teamEditModal from './ui/team-edit-modal.js';\nimport * as teamModal from './ui/team-modal.js';\nimport * as checkFilter from './ui/check-filter.js';\nimport * as checkAdoptionDashboard from './ui/check-adoption-dashboard.js';\n\n// API modules\nimport * as registry from './api/registry.js';\nimport * as github from './api/github.js';\nimport * as workflowTriggers from './api/workflow-triggers.js';\nimport * as checks from './api/checks.js';\n\n// Service modules\nimport * as auth from './services/auth.js';\nimport * as staleness from './services/staleness.js';\nimport * as theme from './services/theme.js';\n\n// Application initialization\nimport * as appInit from './app-init.js';\n\n// Window types are defined in types/globals.d.ts\n\n// ============================================================================\n// Initialize Global State (previously in app.js)\n// These window properties must be initialized before any other code runs\n// ============================================================================\nwindow.allServices = [];\nwindow.filteredServices = [];\nwindow.activeFilters = new Map();\nwindow.currentSort = 'score-desc';\nwindow.searchQuery = '';\nwindow.currentChecksHash = null;\nwindow.checksHashTimestamp = 0;\nwindow.currentView = 'services';\nwindow.allTeams = [];\nwindow.filteredTeams = [];\nwindow.teamsSort = 'score-desc';\nwindow.teamsSearchQuery = '';\nwindow.teamsActiveFilters = new Map();\nwindow.githubPAT = null;\nwindow.currentServiceOrg = null;\nwindow.currentServiceRepo = null;\nwindow.serviceWorkflowRuns = [];\nwindow.serviceWorkflowFilterStatus = 'all';\nwindow.serviceWorkflowPollInterval = null;\nwindow.serviceWorkflowPollIntervalTime = 30000;\nwindow.serviceWorkflowLoaded = false;\nwindow.serviceDurationUpdateInterval = null;\n\n// Export modules to window for backward compatibility with app.js\n// This allows the existing app.js to use the modular functions\nconst ScorecardModules = {\n  // Config\n  constants,\n  icons,\n  // Utilities\n  formatting,\n  crypto,\n  clipboard,\n  dom,\n  cssUtils,\n  animation,\n  statistics,\n  teamStatistics,\n  checkStatistics,\n  durationTracker,\n  // UI\n  toast,\n  modals,\n  filters,\n  workflowRun,\n  serviceCard,\n  serviceModal,\n  serviceWorkflows,\n  actionsWidget,\n  settings,\n  stats,\n  buttonStates,\n  teamFilter,\n  teamDashboard,\n  teamEditModal,\n  teamModal,\n  checkFilter,\n  checkAdoptionDashboard,\n  // API\n  registry,\n  github,\n  workflowTriggers,\n  checks,\n  // Services\n  auth,\n  staleness,\n  theme,\n  appInit,\n};\n\nwindow.ScorecardModules = ScorecardModules;\n\n// Export individual functions to global scope for easier access\n// (This bridges the gap between ES6 modules and the existing app.js)\n\n// Formatting utilities\nwindow.formatRelativeTime = formatting.formatRelativeTime;\nwindow.formatDate = formatting.formatDate;\nwindow.formatDuration = formatting.formatDuration;\nwindow.formatInterval = formatting.formatInterval;\nwindow.escapeHtml = formatting.escapeHtml;\nwindow.capitalize = formatting.capitalize;\n\n// Crypto utilities\nwindow.md5 = crypto.md5;\n\n// CSS utilities\nwindow.getCssVar = cssUtils.getCssVar;\n\n// Animation utilities\nwindow.startButtonSpin = animation.startButtonSpin;\nwindow.stopButtonSpin = animation.stopButtonSpin;\n\n// Statistics utilities\nwindow.countByRank = statistics.countByRank;\nwindow.calculateAverageScore = statistics.calculateAverageScore;\n\n// Duration tracker utilities\nwindow.startLiveDurationUpdates = durationTracker.startLiveDurationUpdates;\nwindow.stopLiveDurationUpdates = durationTracker.stopLiveDurationUpdates;\n\n// Icon utilities\nwindow.getIcon = icons.getIcon;\n\n// Clipboard utilities\nwindow.copyBadgeCode = clipboard.copyBadgeCode;\n\n// API Explorer\nwindow.openApiExplorer = function (org: string, repo: string): void {\n  const explorerUrl = `api-explorer.html?org=${encodeURIComponent(org)}&repo=${encodeURIComponent(repo)}`;\n  window.open(explorerUrl, '_blank');\n};\n\n// Toast notifications\nwindow.showToast = toast.showToast;\n\n// Modal management\nwindow.showModal = modals.showModal;\nwindow.hideModal = modals.hideModal;\nwindow.closeAllModals = modals.closeAllModals;\nwindow.showConfirmation = modals.showConfirmation;\n\n// Auth functions\nwindow.getGitHubToken = auth.getToken;\nwindow.hasGitHubToken = auth.hasToken;\nwindow.setGitHubToken = auth.setToken;\nwindow.clearGitHubToken = auth.clearToken;\nwindow.validateGitHubToken = auth.validateToken;\n\n// Staleness functions\nwindow.isServiceStale = staleness.isServiceStale;\n\n// Theme functions\nwindow.initTheme = theme.initTheme;\nwindow.toggleTheme = theme.toggleTheme;\nwindow.getCurrentTheme = theme.getCurrentTheme;\nwindow.setTheme = theme.setTheme;\n\n// Registry functions\nwindow.loadServicesData = registry.loadServices;\nwindow.fetchCurrentChecksHash = registry.fetchCurrentChecksHash;\nwindow.fetchWithHybridAuth = registry.fetchWithHybridAuth;\nwindow.getRawBaseUrl = registry.getRawBaseUrl;\n\n// GitHub API functions\nwindow.fetchWorkflowRuns = github.fetchWorkflowRuns;\nwindow.triggerScorecardWorkflow = github.triggerScorecardWorkflow;\nwindow.triggerBulkScorecardWorkflows = github.triggerBulkScorecardWorkflows;\nwindow.createInstallationPR = github.createInstallationPR;\nwindow.checkGitHubRateLimit = github.checkRateLimit;\n\n// Filter functions\nwindow.filterServices = filters.filterServices;\nwindow.sortServices = filters.sortServices;\nwindow.filterAndSort = filters.filterAndSort;\nwindow.getFilterStats = filters.getFilterStats;\n\n// Workflow run rendering functions\nwindow.renderWorkflowRun = workflowRun.renderWorkflowRun;\nwindow.getStatusIcon = workflowRun.getStatusIcon;\nwindow.calculateDuration = workflowRun.calculateDuration;\n\n// Service card rendering functions\nwindow.renderServices = serviceCard.renderServices;\n\n// Service modal functions\nwindow.showServiceDetail = serviceModal.showServiceDetail;\nwindow.refreshServiceData = serviceModal.refreshServiceData;\nwindow.closeModal = serviceModal.closeModal;\nwindow.switchTab = serviceModal.switchTab;\nwindow.scrollTabs = serviceModal.scrollTabs;\n\n// Service workflows functions\nwindow.loadWorkflowRunsForService = serviceWorkflows.loadWorkflowRunsForService;\nwindow.startServiceWorkflowPolling = serviceWorkflows.startServiceWorkflowPolling;\nwindow.changeServicePollingInterval = serviceWorkflows.changeServicePollingInterval;\nwindow.refreshServiceWorkflowRuns = serviceWorkflows.refreshServiceWorkflowRuns;\nwindow.renderServiceWorkflowRuns = serviceWorkflows.renderServiceWorkflowRuns;\nwindow.updateServiceFilterCounts = serviceWorkflows.updateServiceFilterCounts;\nwindow.filterServiceWorkflows = serviceWorkflows.filterServiceWorkflows;\nwindow.startServiceLiveDurationUpdates =\n  serviceWorkflows.startServiceLiveDurationUpdates;\n\n// Actions widget functions\nwindow.initializeActionsWidget = actionsWidget.initializeActionsWidget;\nwindow.toggleActionsWidget = actionsWidget.toggleActionsWidget;\nwindow.startWidgetPolling = actionsWidget.startWidgetPolling;\nwindow.stopWidgetPolling = actionsWidget.stopWidgetPolling;\nwindow.fetchWorkflowRuns = actionsWidget.fetchWorkflowRuns;\nwindow.updateWidgetBadge = actionsWidget.updateWidgetBadge;\nwindow.renderWidgetContent = actionsWidget.renderWidgetContent;\nwindow.filterActions = actionsWidget.filterActions;\nwindow.refreshActionsWidget = actionsWidget.refreshActionsWidget;\nwindow.changePollingInterval = actionsWidget.changePollingInterval;\nwindow.handlePATSaved = actionsWidget.handlePATSaved;\nwindow.handlePATCleared = actionsWidget.handlePATCleared;\n\n// Settings functions\nwindow.openSettings = settings.openSettings;\nwindow.closeSettings = settings.closeSettings;\nwindow.testPAT = settings.testPAT;\nwindow.savePAT = settings.savePAT;\nwindow.clearPAT = settings.clearPAT;\nwindow.updateWidgetState = settings.updateWidgetState;\nwindow.updateModeIndicator = settings.updateModeIndicator;\nwindow.checkRateLimit = settings.checkRateLimit;\n\n// Stats functions\nwindow.updateStats = stats.updateStats;\n\n// Team statistics functions\nwindow.getTeamName = teamStatistics.getTeamName;\nwindow.getTeamCount = teamStatistics.getTeamCount;\nwindow.getUniqueTeams = teamStatistics.getUniqueTeams;\nwindow.calculateTeamStats = teamStatistics.calculateTeamStats;\n\n// Team filter functions\nwindow.initTeamFilter = teamFilter.initTeamFilter;\nwindow.updateTeamFilter = teamFilter.updateTeamFilter;\nwindow.filterByTeam = teamFilter.filterByTeam;\nwindow.selectTeam = teamFilter.selectTeam;\nwindow.clearTeamFilter = teamFilter.clearTeamFilter;\n\n// Team dashboard functions\nwindow.initTeamDashboard = teamDashboard.initTeamDashboard;\nwindow.openTeamDashboard = teamDashboard.openTeamDashboard;\nwindow.closeTeamDashboard = teamDashboard.closeTeamDashboard;\nwindow.updateDashboardServices = teamDashboard.updateDashboardServices;\n\n// Team edit modal functions\nwindow.initTeamEditModal = teamEditModal.initTeamEditModal;\nwindow.openTeamEditModal = teamEditModal.openTeamEditModal;\nwindow.openCreateTeamModal = teamEditModal.openCreateTeamModal;\nwindow.closeTeamEditModal = teamEditModal.closeTeamEditModal;\n\n// Check filter functions\nwindow.initCheckFilter = checkFilter.initCheckFilter;\nwindow.updateCheckFilter = checkFilter.updateCheckFilter;\nwindow.filterByChecks = checkFilter.filterByChecks;\nwindow.getCheckFilterState = checkFilter.getCheckFilterState;\nwindow.setCheckFilterState = checkFilter.setCheckFilterState;\nwindow.getActiveFilterCount = checkFilter.getActiveFilterCount;\nwindow.setServicesForStats = checkFilter.setServicesForStats;\nwindow.openCheckFilterModal = checkFilter.openCheckFilterModal;\nwindow.closeCheckFilterModal = checkFilter.closeCheckFilterModal;\n\n// Check adoption dashboard functions\nwindow.initCheckAdoptionDashboard = checkAdoptionDashboard.initCheckAdoptionDashboard;\nwindow.openCheckAdoptionDashboard = checkAdoptionDashboard.openCheckAdoptionDashboard;\nwindow.closeCheckAdoptionDashboard = checkAdoptionDashboard.closeCheckAdoptionDashboard;\n\n// Registry team functions\nwindow.loadTeams = registry.loadTeams;\n\n// Workflow trigger functions\nwindow.triggerServiceWorkflow = workflowTriggers.triggerServiceWorkflow;\nwindow.installService = workflowTriggers.installService;\nwindow.triggerBulkWorkflows = workflowTriggers.triggerBulkWorkflows;\nwindow.handleBulkTrigger = workflowTriggers.handleBulkTrigger;\nwindow.handleBulkTriggerAll = workflowTriggers.handleBulkTriggerAll;\n\n// Application initialization\nwindow.filterAndRenderServices = appInit.filterAndRenderServices;\nwindow.refreshData = appInit.refreshData;\n\n// ============================================================================\n// View Tab Navigation\n// ============================================================================\n\n/**\n * Switch between Services and Teams views\n */\nfunction switchView(view: ViewType): void {\n  if (view !== 'services' && view !== 'teams') {\n    return;\n  }\n  if (view === window.currentView) {\n    return;\n  }\n\n  window.currentView = view;\n\n  // Update tab active states\n  document.querySelectorAll('.view-tab').forEach((tab) => {\n    const tabEl = tab as HTMLElement;\n    tabEl.classList.toggle('active', tabEl.dataset.view === view);\n  });\n\n  // Show/hide view containers\n  document.querySelectorAll('.view-content').forEach((content) => {\n    content.classList.toggle('active', content.id === `${view}-view`);\n  });\n\n  // Update URL hash (without triggering hashchange)\n  history.replaceState(null, '', `#${view}`);\n\n  // Trigger view-specific initialization\n  if (view === 'teams') {\n    initTeamsView();\n  }\n}\n\n/**\n * Initialize teams view - load and render teams\n */\nasync function initTeamsView(): Promise<void> {\n  const grid = document.getElementById('teams-grid');\n  if (!grid) {\n    return;\n  }\n\n  // Show loading state\n  grid.innerHTML = '<div class=\"loading\">Loading teams...</div>';\n\n  try {\n    // Load teams data (services should already be loaded)\n    const services = window.allServices || [];\n\n    // Load teams from registry (includes teams with 0 services)\n    let teamsData: Record<string, TeamRegistryEntry> | null = null;\n    try {\n      const { teams } = await registry.loadTeams();\n      teamsData = teams;\n    } catch (error) {\n      console.warn('Failed to load teams registry:', error);\n    }\n\n    // Calculate stats from services\n    const calculatedStats = teamStatistics.calculateTeamStats(services);\n\n    // Merge registry data with calculated stats\n    let teamData: Record<string, TeamRegistryEntry>;\n    if (teamsData) {\n      teamData = teamStatistics.mergeTeamDataWithStats(teamsData, calculatedStats);\n    } else {\n      // Fallback: use service-derived teams only\n      teamData = Object.fromEntries(\n        Object.entries(calculatedStats).map(([name, stats]) => [\n          name.toLowerCase().replace(/\\s+/g, '-'),\n          {\n            id: name.toLowerCase().replace(/\\s+/g, '-'),\n            name,\n            statistics: stats,\n          },\n        ])\n      ) as Record<string, TeamRegistryEntry>;\n    }\n\n    // Flatten statistics for rendering compatibility\n    window.allTeams = Object.values(teamData).map((t) => ({\n      ...t,\n      ...(t.statistics || {}),\n      // Flatten metadata for slack_channel access\n      slack_channel: t.metadata?.slack_channel || null,\n    })) as TeamWithStats[];\n\n    // Update teams stats\n    updateTeamsStats(window.allTeams, services);\n\n    // Render teams\n    renderTeamsGrid(window.allTeams, services);\n  } catch (error) {\n    console.error('Failed to initialize teams view:', error);\n    grid.innerHTML = `<div class=\"error\">Failed to load teams: ${error instanceof Error ? error.message : String(error)}</div>`;\n  }\n}\n\n/**\n * Update teams view statistics\n */\nfunction updateTeamsStats(teams: TeamWithStats[], services: ServiceData[]): void {\n  // Total teams\n  const totalTeamsEl = document.getElementById('teams-total-teams');\n  if (totalTeamsEl) {\n    totalTeamsEl.textContent = String(teams.length);\n  }\n\n  // Average score across all teams\n  const avgScoreEl = document.getElementById('teams-avg-score');\n  if (avgScoreEl && teams.length > 0) {\n    const avgScore =\n      teams.reduce((sum, t) => sum + (t.averageScore || 0), 0) / teams.length;\n    avgScoreEl.textContent = String(Math.round(avgScore));\n  }\n\n  // Total services\n  const totalServicesEl = document.getElementById('teams-total-services');\n  if (totalServicesEl) {\n    totalServicesEl.textContent = String(services.length);\n  }\n\n  // Services without team\n  const noTeamCount = services.filter((s) => !teamStatistics.getTeamName(s)).length;\n  const noTeamEl = document.getElementById('teams-no-team');\n  if (noTeamEl) {\n    noTeamEl.textContent = String(noTeamCount);\n  }\n\n  // Rank distribution across teams (based on dominant rank)\n  let platinumCount = 0,\n    goldCount = 0,\n    silverCount = 0,\n    bronzeCount = 0;\n  teams.forEach((team) => {\n    const rank = teamStatistics.getRank(team);\n    if (rank === 'platinum') {\n      platinumCount++;\n    } else if (rank === 'gold') {\n      goldCount++;\n    } else if (rank === 'silver') {\n      silverCount++;\n    } else if (rank === 'bronze') {\n      bronzeCount++;\n    }\n  });\n\n  const platinumEl = document.getElementById('teams-platinum-count');\n  const goldEl = document.getElementById('teams-gold-count');\n  const silverEl = document.getElementById('teams-silver-count');\n  const bronzeEl = document.getElementById('teams-bronze-count');\n\n  if (platinumEl) {\n    platinumEl.textContent = String(platinumCount);\n  }\n  if (goldEl) {\n    goldEl.textContent = String(goldCount);\n  }\n  if (silverEl) {\n    silverEl.textContent = String(silverCount);\n  }\n  if (bronzeEl) {\n    bronzeEl.textContent = String(bronzeCount);\n  }\n}\n\n/**\n * Render teams grid\n */\nfunction renderTeamsGrid(teams: TeamWithStats[], services: ServiceData[]): void {\n  const grid = document.getElementById('teams-grid');\n  if (!grid) {\n    return;\n  }\n\n  if (teams.length === 0) {\n    grid.innerHTML = '<div class=\"team-empty-state\">No teams found</div>';\n    return;\n  }\n\n  // Sort teams\n  const sortedTeams = sortTeams([...teams], window.teamsSort);\n\n  // Filter teams by search\n  let filteredTeams = sortedTeams;\n  if (window.teamsSearchQuery) {\n    const query = window.teamsSearchQuery.toLowerCase();\n    filteredTeams = sortedTeams.filter(\n      (t) =>\n        t.name.toLowerCase().includes(query) ||\n        (t.description && t.description.toLowerCase().includes(query))\n    );\n  }\n\n  grid.innerHTML = filteredTeams.map((team) => renderTeamCard(team, services)).join('');\n  window.filteredTeams = filteredTeams;\n}\n\n/**\n * Sort teams by selected criteria\n */\nfunction sortTeams(teams: TeamWithStats[], sortBy: string): TeamWithStats[] {\n  switch (sortBy) {\n  case 'services-desc':\n    return teams.sort((a, b) => {\n      const diff = b.serviceCount - a.serviceCount;\n      return diff !== 0 ? diff : (b.averageScore || 0) - (a.averageScore || 0);\n    });\n  case 'services-asc':\n    return teams.sort((a, b) => {\n      const diff = a.serviceCount - b.serviceCount;\n      return diff !== 0 ? diff : (b.averageScore || 0) - (a.averageScore || 0);\n    });\n  case 'score-desc':\n    return teams.sort((a, b) => (b.averageScore || 0) - (a.averageScore || 0));\n  case 'score-asc':\n    return teams.sort((a, b) => (a.averageScore || 0) - (b.averageScore || 0));\n  case 'name-asc':\n    return teams.sort((a, b) => {\n      const diff = a.name.localeCompare(b.name);\n      return diff !== 0 ? diff : (b.averageScore || 0) - (a.averageScore || 0);\n    });\n  case 'name-desc':\n    return teams.sort((a, b) => {\n      const diff = b.name.localeCompare(a.name);\n      return diff !== 0 ? diff : (b.averageScore || 0) - (a.averageScore || 0);\n    });\n  default:\n    return teams;\n  }\n}\n\n/**\n * Render a single team card\n */\nfunction renderTeamCard(team: TeamWithStats, _services: ServiceData[]): string {\n  const dominantRank = teamStatistics.getRank(team);\n  const rankDist = team.rankDistribution || {};\n\n  // Build mini rank badges\n  const rankBadges = (['platinum', 'gold', 'silver', 'bronze'] as const)\n    .filter((r) => rankDist[r] > 0)\n    .map((r) => `<span class=\"mini-rank-badge rank-${r}\">${rankDist[r]}</span>`)\n    .join('');\n\n  // Calculate installed percentage\n  const installedPct =\n    team.serviceCount > 0\n      ? Math.round((team.installedCount / team.serviceCount) * 100)\n      : 0;\n\n  return `\n        <div class=\"team-card rank-${dominantRank}\" onclick=\"showTeamDetail('${formatting.escapeHtml(team.name)}')\">\n            <div class=\"team-card-header\">\n                <h3 class=\"team-card-name\">${formatting.escapeHtml(team.name)}</h3>\n                ${team.slack_channel ? `<span class=\"team-slack\">${formatting.escapeHtml(team.slack_channel)}</span>` : ''}\n            </div>\n            <div class=\"rank-badge ${dominantRank}\">${formatting.capitalize(dominantRank)}</div>\n            ${team.description ? `<p class=\"team-card-description\">${formatting.escapeHtml(team.description)}</p>` : ''}\n            <div class=\"team-card-stats\">\n                <div class=\"team-stat\">\n                    <span class=\"team-stat-value\">${Math.round(team.averageScore || 0)}</span>\n                    <span class=\"team-stat-label\">Avg Score</span>\n                </div>\n                <div class=\"team-stat\">\n                    <span class=\"team-stat-value\">${team.serviceCount}</span>\n                    <span class=\"team-stat-label\">Services</span>\n                </div>\n                <div class=\"team-stat\">\n                    <span class=\"team-stat-value\">${team.installedCount}</span>\n                    <span class=\"team-stat-label\">Installed</span>\n                </div>\n                ${\n  team.staleCount > 0\n    ? `\n                <div class=\"team-stat warning\">\n                    <span class=\"team-stat-value\">${team.staleCount}</span>\n                    <span class=\"team-stat-label\">Stale</span>\n                </div>\n                `\n    : ''\n}\n            </div>\n            <div class=\"team-card-ranks\">${rankBadges || '<span class=\"mini-rank-badge rank-bronze\">0</span>'}</div>\n            <div class=\"team-card-progress\">\n                <div class=\"progress-label\">\n                    <span>Installed</span>\n                    <span>${installedPct}%</span>\n                </div>\n                <div class=\"progress-bar\">\n                    <div class=\"progress-fill\" style=\"width: ${installedPct}%\"></div>\n                </div>\n            </div>\n        </div>\n    `;\n}\n\n/**\n * Refresh teams view data\n */\nasync function refreshTeamsView(): Promise<void> {\n  // First refresh the services data\n  await appInit.refreshData();\n  // Then re-initialize teams view\n  await initTeamsView();\n}\n\n/**\n * Filter and render teams based on active filters\n */\nfunction filterAndRenderTeams(): void {\n  let teams = [...window.allTeams];\n\n  // Apply rank filters\n  window.teamsActiveFilters.forEach((state, filter) => {\n    if (['platinum', 'gold', 'silver', 'bronze'].includes(filter)) {\n      if (state === 'include') {\n        teams = teams.filter((t) => teamStatistics.getRank(t) === filter);\n      } else if (state === 'exclude') {\n        teams = teams.filter((t) => teamStatistics.getRank(t) !== filter);\n      }\n    }\n  });\n\n  renderTeamsGrid(teams, window.allServices);\n}\n\n/**\n * Handle URL hash changes for view navigation\n */\nfunction handleHashChange(): void {\n  const hash = window.location.hash.replace('#', '');\n  if (hash === 'teams' || hash === 'services') {\n    switchView(hash);\n  }\n}\n\n// Export view navigation functions\nwindow.switchView = switchView;\nwindow.initTeamsView = initTeamsView;\nwindow.refreshTeamsView = refreshTeamsView;\nwindow.renderTeamsGrid = renderTeamsGrid;\nwindow.filterAndRenderTeams = filterAndRenderTeams;\nwindow.handleHashChange = handleHashChange;\n\n/**\n * Update theme toggle button icon\n */\nfunction updateThemeIcon(themeValue: string): void {\n  const sunIcon = document.getElementById('theme-icon-sun');\n  const moonIcon = document.getElementById('theme-icon-moon');\n  if (sunIcon && moonIcon) {\n    if (themeValue === 'dark') {\n      sunIcon.style.display = 'none';\n      moonIcon.style.display = 'block';\n    } else {\n      sunIcon.style.display = 'block';\n      moonIcon.style.display = 'none';\n    }\n  }\n}\n\n/**\n * Setup Event Listeners\n * Initializes all DOM event listeners for the application\n * Uses global variables from app.js: searchQuery, activeFilters, currentSort\n */\nfunction setupEventListeners(): void {\n  // Search\n  const searchInput = document.getElementById('search-input') as HTMLInputElement | null;\n  if (searchInput) {\n    searchInput.addEventListener('input', (e) => {\n      window.searchQuery = (e.target as HTMLInputElement).value.toLowerCase();\n      window.filterAndRenderServices();\n    });\n  }\n\n  // Filterable stat cards (multi-select with include/exclude)\n  document.querySelectorAll('.stat-card.filterable').forEach((card) => {\n    card.addEventListener('click', () => {\n      const cardEl = card as HTMLElement;\n      const filter = cardEl.dataset.filter;\n      if (!filter) {\n        return;\n      }\n\n      // Cycle through states: null -> include -> exclude -> null\n      const currentState = window.activeFilters.get(filter);\n\n      // Remove existing classes\n      cardEl.classList.remove('active', 'exclude');\n\n      if (!currentState) {\n        // Null -> Include\n        window.activeFilters.set(filter, 'include');\n        cardEl.classList.add('active');\n      } else if (currentState === 'include') {\n        // Include -> Exclude\n        window.activeFilters.set(filter, 'exclude');\n        cardEl.classList.add('exclude');\n      } else {\n        // Exclude -> Null\n        window.activeFilters.delete(filter);\n      }\n\n      window.filterAndRenderServices();\n    });\n  });\n\n  // Sort\n  const sortSelect = document.getElementById('sort-select') as HTMLSelectElement | null;\n  if (sortSelect) {\n    sortSelect.addEventListener('change', (e) => {\n      window.currentSort = (e.target as HTMLSelectElement).value;\n      window.filterAndRenderServices();\n    });\n  }\n\n  // Theme toggle\n  const themeToggleBtn = document.getElementById('theme-toggle-btn');\n  if (themeToggleBtn) {\n    themeToggleBtn.addEventListener('click', () => {\n      const newTheme = window.toggleTheme();\n      updateThemeIcon(newTheme);\n    });\n  }\n\n  // Modal close\n  const modalClose = document.querySelector('.modal-close');\n  if (modalClose) {\n    modalClose.addEventListener('click', window.closeModal);\n  }\n\n  const serviceModal = document.getElementById('service-modal');\n  if (serviceModal) {\n    serviceModal.addEventListener('click', (e) => {\n      if ((e.target as HTMLElement).id === 'service-modal') {\n        window.closeModal();\n      }\n    });\n  }\n\n  // Modal close on Escape key\n  document.addEventListener('keydown', (e) => {\n    if (e.key === 'Escape') {\n      const modal = document.getElementById('service-modal');\n      if (modal && !modal.classList.contains('hidden')) {\n        window.closeModal();\n      }\n      const teamModalEl = document.getElementById('team-modal');\n      if (teamModalEl && !teamModalEl.classList.contains('hidden')) {\n        window.closeTeamModal();\n      }\n    }\n  });\n\n  // Teams view search\n  const teamsSearchInput = document.getElementById(\n    'teams-search-input'\n  ) as HTMLInputElement | null;\n  if (teamsSearchInput) {\n    teamsSearchInput.addEventListener('input', (e) => {\n      window.teamsSearchQuery = (e.target as HTMLInputElement).value.toLowerCase();\n      renderTeamsGrid(window.allTeams, window.allServices);\n    });\n  }\n\n  // Teams view sort\n  const teamsSortSelect = document.getElementById(\n    'teams-sort-select'\n  ) as HTMLSelectElement | null;\n  if (teamsSortSelect) {\n    teamsSortSelect.addEventListener('change', (e) => {\n      window.teamsSort = (e.target as HTMLSelectElement).value;\n      renderTeamsGrid(window.allTeams, window.allServices);\n    });\n  }\n\n  // Teams filter stat cards\n  document.querySelectorAll('.stat-card.teams-filter').forEach((card) => {\n    card.addEventListener('click', () => {\n      const cardEl = card as HTMLElement;\n      const filter = cardEl.dataset.filter;\n      if (!filter) {\n        return;\n      }\n\n      const currentState = window.teamsActiveFilters.get(filter);\n\n      cardEl.classList.remove('active', 'exclude');\n\n      if (!currentState) {\n        window.teamsActiveFilters.set(filter, 'include');\n        cardEl.classList.add('active');\n      } else if (currentState === 'include') {\n        window.teamsActiveFilters.set(filter, 'exclude');\n        cardEl.classList.add('exclude');\n      } else {\n        window.teamsActiveFilters.delete(filter);\n      }\n\n      filterAndRenderTeams();\n    });\n  });\n\n  // View tab navigation\n  document.querySelectorAll('.view-tab').forEach((tab) => {\n    tab.addEventListener('click', () => {\n      const tabEl = tab as HTMLElement;\n      const view = tabEl.dataset.view as ViewType | undefined;\n      if (view) {\n        switchView(view);\n      }\n    });\n  });\n\n  // Handle URL hash on load\n  handleHashChange();\n  window.addEventListener('hashchange', handleHashChange);\n}\n\n// Export to window for backward compatibility\nwindow.setupEventListeners = setupEventListeners;\n\n// Initialize modal handlers and event listeners for common modals\ndocument.addEventListener('DOMContentLoaded', () => {\n  // Setup modal handlers\n  const modalIds = ['service-modal', 'settings-modal', 'team-dashboard-modal'];\n  modalIds.forEach((id) => {\n    if (document.getElementById(id)) {\n      modals.setupModalHandlers(id);\n    }\n  });\n\n  // Setup event listeners\n  setupEventListeners();\n\n  // Initialize application (load services and render)\n  appInit.initializeApp();\n});\n\n// Export for ES6 module imports\nexport {\n  // Config\n  constants,\n  icons,\n  // Utilities\n  formatting,\n  crypto,\n  clipboard,\n  dom,\n  cssUtils,\n  animation,\n  statistics,\n  teamStatistics,\n  checkStatistics,\n  durationTracker,\n  // UI\n  toast,\n  modals,\n  filters,\n  workflowRun,\n  serviceCard,\n  serviceModal,\n  serviceWorkflows,\n  actionsWidget,\n  settings,\n  stats,\n  buttonStates,\n  teamFilter,\n  teamDashboard,\n  teamEditModal,\n  teamModal,\n  checkFilter,\n  checkAdoptionDashboard,\n  // API\n  registry,\n  github,\n  workflowTriggers,\n  checks,\n  // Services\n  auth,\n  staleness,\n  theme,\n  appInit,\n};\n"],"names":["API_CONFIG","TIMING","STORAGE_KEYS","RANKS","WORKFLOW_STATUS","WORKFLOW_CONCLUSION","ICONS","getIcon","name","options","icon","result","formatRelativeTime","timestamp","now","date","seconds","minutes","hours","days","formatDate","dateString","diffMs","diffDays","formatDuration","durationMs","formatInterval","ms","escapeHtml","text","div","capitalize","str","md5","string","rotateLeft","lValue","iShiftBits","addUnsigned","lX","lY","lX8","lY8","lX4","lY4","lResult","F","x","y","z","G","H","I","FF","a","b","c","d","s","ac","GG","HH","II","convertToWordArray","lMessageLength","lNumberOfWords_temp1","lNumberOfWords","lWordArray","lBytePosition","lByteCount","lWordCount","wordToHex","wordToHexValue","lCount","wordToHexValue_temp","S11","S12","S13","S14","S21","S22","S23","S24","S31","S32","S33","S34","S41","S42","S43","S44","k","AA","BB","CC","DD","getCssVar","varName","normalizedName","setCssVar","value","fallbackCopyToClipboard","textArea","successful","copyBadgeCode","elementId","event","element","button","originalText","err","message","createElement","tag","attrs","children","key","dataKey","dataValue","child","show","el","hide","toggle","delegateEvent","parent","selector","handler","e","target","toggleClass","className","add","setHTML","html","startButtonSpin","svg","stopButtonSpin","addSpinningClass","removeSpinningClass","countByRank","services","counts","rank","calculateAverageScore","total","sum","calculateServiceStats","isStaleCheck","checksHash","getTeamName","service","_a","getAllTeams","getUniqueTeams","teams","team","getTeamCount","calculateSingleTeamStats","calculateTeamStats","teamServices","teamGitHubInfo","teamStats","teamServiceList","_b","sortTeamStats","sortBy","direction","sortFunctions","sortFn","multiplier","getServicesForTeam","teamName","getServicesWithoutTeam","mergeTeamDataWithStats","teamsData","calculatedStats","merged","teamId","teamData","stats","buildRankSummary","rankDistribution","parts","count","getRank","score","isCheckExcluded","checkId","getExclusionReason","getExcludedServicesForCheck","calculateOverallCheckAdoption","passing","failing","excluded","unknown","status","activeTotal","percentage","calculateCheckAdoptionByTeam","order","orderA","orderB","filterByCheckCriteria","checkFilters","requiredStatus","actualStatus","getServicesPassingCheck","getServicesFailingCheck","getAllChecksAdoptionStats","checks","check","adoption","sortTeamsByAdoption","entries","diff","getActiveCheckFilterCount","intervals","startLiveDurationUpdates","containerSelector","id","stopLiveDurationUpdates","intervalId","currentContainer","updateDurationElements","stopAllDurationUpdates","container","startedAt","start","timeStr","label","showToast","type","toast","showModal","modalId","modal","hideModal","toggleModal","closeAllModals","setupModalHandlers","onClose","showConfirmation","onConfirm","onCancel","updateModalContent","contentSelector","content","contentElement","setModalTitle","title","titleElement","isServiceStale","currentHash","getStalenessInfo","stale","filterStaleServices","getStalenessStats","staleServices","countStaleInstalled","filterServices","activeFilters","searchQuery","filterName","filterState","matches","teamStr","sortServices","filterAndSort","filtered","getFilterStats","allServices","filteredServices","staleCount","installedCount","hasApiCount","renderWorkflowRun","run","statusClass","statusIcon","getStatusIcon","durationInfo","calculateDuration","conclusion","completedAt","timeSince","elapsed","createdAt","waiting","renderTeamLink","renderServices","grid","isStale","canTrigger","githubPAT","getToken","hasToken","setToken","token","clearToken","validateToken","pat","error","validateAndSaveToken","getTokenForAuth","detectRepoOwner","define_process_env_default","hostname","DEPLOYMENT","REPO_OWNER","REPO_NAME","BRANCH","RAW_BASE_URL","currentChecksHashCache","checksHashTimestamp","CACHE_TTL","fetchWithHybridAuth","path","response","usedAPI","apiUrl","rawUrl","fetchCurrentChecksHash","hashUrl","data","hash","loadServices","loadedFromConsolidated","fetchUsedAPI","registryData","registryFiles","item","fetchPromises","teamsDataCache","teamsDataTimestamp","TEAMS_CACHE_TTL","loadTeams","forceRefresh","loadTeamById","clearTeamsCache","getRepoOwner","getRepoName","getBranch","getRawBaseUrl","renderStalenessWarning","org","repo","renderOnDemandTrigger","isInstalled","renderModalHeader","renderModalStats","excludedCount","parseOpenAPISummary","stdout","titleMatch","versionMatch","endpointsMatch","getOpenAPIInfo","openApiCheck","summary","match","renderAPITab","openapiInfo","defaultBranch","specInfo","fromConfig","specFile","branch","viewUrl","envName","envConfig","loadSpecContent","containerId","copySpecContent","codeElement","handleSpecToggle","details","repoData","initSpecDetailsListeners","renderTabs","switchTab","tabName","btn","scrollTabs","tabsContainer","scrollAmount","newScrollLeft","updateTabScrollArrows","leftBtn","rightBtn","scrollLeft","maxScroll","initTabScrollArrows","groupChecksByCategory","categories","category","categoryOrder","orderedCategories","matchingKey","renderCheck","isExcluded","renderChecksTab","categorizedChecks","categoryChecks","passCount","activeCount","allPassed","renderLinksTab","links","link","renderContributorsTab","contributors","contributor","avatarUrl","githubUsername","isGithubEmail","renderWorkflowsTab","renderBadgesTab","rawBaseUrl","composeModalContent","restoreIntervalDropdownState","savedInterval","select","showServiceDetail","detailDiv","resultsPath","registryPath","resultsData","resultsRes","registryRes","registry","refreshServiceData","activeTab","activeTabName","originalContent","tabButtons","closeModal","getServiceOrg","getServiceRepo","loadWorkflowRunsForService","currentServiceOrg","currentServiceRepo","linkBtnColor","linkBtnHover","textSecondary","renderServiceWorkflowRuns","startServiceWorkflowPolling","errorColor","changeServicePollingInterval","newInterval","intervalText","refreshServiceWorkflowRuns","filteredRuns","updateServiceFilterCounts","statusText","startServiceLiveDurationUpdates","all","running","r","queued","completed","setCount","filterServiceWorkflows","workflowsTab","activeBtn","serviceContent","widgetOpen","widgetWorkflowRuns","widgetFilterStatus","widgetPollInterval","widgetLastFetch","currentPollingInterval","WIDGET_CACHE_TTL","initializeActionsWidget","actionsLink","startWidgetPolling","toggleActionsWidget","sidebar","fetchWorkflowRuns","stopWidgetPolling","renderWidgetEmpty","allRuns","oneDayAgo","updateWidgetBadge","renderWidgetContent","badge","activeRuns","updateFilterCounts","filterActions","refreshActionsWidget","changePollingInterval","reason","errorMessage","setZero","handlePATSaved","handlePATCleared","openSettings","updateModeIndicator","checkRateLimit","closeSettings","testPAT","savePAT","input","updateWidgetState","clearPAT","settingsBtn","unlockedIcon","lockedIcon","indicator","currentMode","headers","setElementText","setError","updateStats","avgScore","rankCounts","apiCount","setButtonLoading","setButtonSuccess","duration","resolve","resetButton","setButtonError","selectedTeams","allTeams","includeNoTeam","onFilterChange","initTeamFilter","onChange","renderTeamFilter","updateTeamFilter","selectedCount","hasSelection","toggleTeamDropdown","menu","searchInput","handleClickOutside","dropdown","toggleTeamSelection","checked","updateOptionUI","updateToggleButton","notifyFilterChange","toggleNoTeamFilter","selected","option","header","existingBtn","filterTeamOptions","query","normalizedQuery","teamNameEl","clearTeamFilter","cb","getTeamFilterState","setTeamFilterState","noTeam","filterByTeam","selectTeam","currentServices","currentTeamsData","currentSort","currentChecksHash","MODAL_ID","initTeamDashboard","staleCheckFn","openTeamDashboard","renderDashboard","closeTeamDashboard","teamsArray","flattenedForSort","t","flat","totalServices","totalTeams","servicesWithoutTeam","renderTeamCard","rankSummary","progressPercent","renderMiniRankBadges","searchTeamsDashboard","sortTeamsDashboard","by","filterCatalogByTeam","updateDashboardServices","currentTeam","isCreateMode","onSaveCallback","initTeamEditModal","onSave","ensureModalExists","modalHtml","openTeamEditModal","titleEl","renderForm","openCreateTeamModal","closeTeamEditModal","body","aliasesString","autoGenerateTeamId","nameInput","idInput","submitTeamEdit","form","saveBtn","formData","description","aliases","slackChannel","oncallRotation","triggerTeamUpdateWorkflow","inputs","repoOwner","getRepoOwnerFromUrl","repoName","getRepoNameFromUrl","endpoint","workflowInputs","errorText","ghPagesMatch","metaOwner","pathParts","metaRepo","githubApiRequest","perPage","triggerWorkflowDispatch","workflow","ref","triggerScorecardWorkflow","scorecardOrg","scorecardRepo","triggerBulkScorecardWorkflows","servicesArray","createInstallationPR","getUserInfo","membersCache","fetchTeamMembers","teamSlug","cacheKey","m","getTeamUrl","checksCache","checksTimestamp","loadChecks","getCheckById","getAllChecks","getChecksByCategory","grouped","getCategories","clearChecksCache","createTabManager","config","tabButtonSelector","tabContentSelector","activeClass","getTabContentId","onActivate","getActiveTab","currentTeamServices","selectedCheckId","teamCheckDropdownOpen","teamTabManager","renderGitHubSection","members","teamUrl","membersHtml","showTeamModal","dominantRank","rankDist","rankBars","pct","servicesList","scoreDisplay","rankClass","loadCheckAdoptionTab","section","switchTeamModalTab","renderCheckAdoptionContent","selectedCheck","currentTeamName","checkOptions","passingServices","failingServices","excludedServices","passingList","failingList","excludedList","changeTeamCheck","toggleTeamCheckDropdown","filterTeamCheckOptions","handleClickOutsideTeamCheckDropdown","closeTeamCheckDropdown","selectTeamCheck","lowerQuery","closeTeamModal","CHECK_FILTER_MODAL_ID","checksData","adoptionStatsCache","initCheckFilter","createModalIfNeeded","renderToggleButton","updateCheckFilter","setServicesForStats","openCheckFilterModal","calculateAllAdoptionStats","renderModalContent","closeCheckFilterModal","getAdoptionStats","contentContainer","checksByCategory","renderCheckCategories","categoryId","categoryPassing","categoryTotal","categoryAvgPassing","renderCheckOptionCard","currentState","searchLower","display","progressClass","toggleCheckCategory","setCheckState","state","updateCheckOptionUI","updateFilterSummary","searchSection","existingSummary","summaryHtml","filterCheckOptions","matchesSearch","visibleOptions","clearCheckFilter","filterByChecks","getCheckFilterState","setCheckFilterState","filters","getActiveFilterCount","dropdownOpen","initCheckAdoptionDashboard","openCheckAdoptionDashboard","closeCheckAdoptionDashboard","sortedTeams","comparison","teamRows","rowClass","progressWidth","progressFillClass","overallStats","_totalServices","passingTotal","excludedTotal","overallPercentage","toggleCheckSelectorDropdown","filterCheckSelectorOptions","handleClickOutsideCheckSelector","closeCheckSelectorDropdown","selectCheckFromDropdown","changeAdoptionCheck","sortAdoptionTable","WORKFLOWS","getWorkflowDispatchUrl","owner","workflowFile","getRepoInfo","triggerServiceWorkflow","buttonElement","errorData","installService","triggerBulkWorkflows","handleBulkTrigger","handleBulkTriggerAll","installedServices","THEME_KEY","THEMES","getOSPreference","getSavedTheme","saved","applyTheme","theme","saveTheme","getCurrentTheme","initTheme","newTheme","toggleTheme","setTheme","filterAndRenderServices","refreshData","refreshBtn","updateThemeIcon","sunIcon","moonIcon","initializeApp","textMuted","servicesGrid","ScorecardModules","constants","icons","formatting","crypto","clipboard","dom","cssUtils","animation","statistics","teamStatistics","checkStatistics","durationTracker","modals","workflowRun","serviceCard","serviceModal","serviceWorkflows","actionsWidget","settings","buttonStates","teamFilter","teamDashboard","teamEditModal","teamModal","checkFilter","checkAdoptionDashboard","github","workflowTriggers","auth","staleness","appInit","formatting.formatRelativeTime","formatting.formatDate","formatting.formatDuration","formatting.formatInterval","formatting.escapeHtml","formatting.capitalize","crypto.md5","cssUtils.getCssVar","animation.startButtonSpin","animation.stopButtonSpin","statistics.countByRank","statistics.calculateAverageScore","durationTracker.startLiveDurationUpdates","durationTracker.stopLiveDurationUpdates","icons.getIcon","clipboard.copyBadgeCode","explorerUrl","toast.showToast","modals.showModal","modals.hideModal","modals.closeAllModals","modals.showConfirmation","auth.getToken","auth.hasToken","auth.setToken","auth.clearToken","auth.validateToken","staleness.isServiceStale","theme.initTheme","theme.toggleTheme","theme.getCurrentTheme","theme.setTheme","registry.loadServices","registry.fetchCurrentChecksHash","registry.fetchWithHybridAuth","registry.getRawBaseUrl","github.fetchWorkflowRuns","github.triggerScorecardWorkflow","github.triggerBulkScorecardWorkflows","github.createInstallationPR","github.checkRateLimit","filters.filterServices","filters.sortServices","filters.filterAndSort","filters.getFilterStats","workflowRun.renderWorkflowRun","workflowRun.getStatusIcon","workflowRun.calculateDuration","serviceCard.renderServices","serviceModal.showServiceDetail","serviceModal.refreshServiceData","serviceModal.closeModal","serviceModal.switchTab","serviceModal.scrollTabs","serviceWorkflows.loadWorkflowRunsForService","serviceWorkflows.startServiceWorkflowPolling","serviceWorkflows.changeServicePollingInterval","serviceWorkflows.refreshServiceWorkflowRuns","serviceWorkflows.renderServiceWorkflowRuns","serviceWorkflows.updateServiceFilterCounts","serviceWorkflows.filterServiceWorkflows","serviceWorkflows.startServiceLiveDurationUpdates","actionsWidget.initializeActionsWidget","actionsWidget.toggleActionsWidget","actionsWidget.startWidgetPolling","actionsWidget.stopWidgetPolling","actionsWidget.fetchWorkflowRuns","actionsWidget.updateWidgetBadge","actionsWidget.renderWidgetContent","actionsWidget.filterActions","actionsWidget.refreshActionsWidget","actionsWidget.changePollingInterval","actionsWidget.handlePATSaved","actionsWidget.handlePATCleared","settings.openSettings","settings.closeSettings","settings.testPAT","settings.savePAT","settings.clearPAT","settings.updateWidgetState","settings.updateModeIndicator","settings.checkRateLimit","stats.updateStats","teamStatistics.getTeamName","teamStatistics.getTeamCount","teamStatistics.getUniqueTeams","teamStatistics.calculateTeamStats","teamFilter.initTeamFilter","teamFilter.updateTeamFilter","teamFilter.filterByTeam","teamFilter.selectTeam","teamFilter.clearTeamFilter","teamDashboard.initTeamDashboard","teamDashboard.openTeamDashboard","teamDashboard.closeTeamDashboard","teamDashboard.updateDashboardServices","teamEditModal.initTeamEditModal","teamEditModal.openTeamEditModal","teamEditModal.openCreateTeamModal","teamEditModal.closeTeamEditModal","checkFilter.initCheckFilter","checkFilter.updateCheckFilter","checkFilter.filterByChecks","checkFilter.getCheckFilterState","checkFilter.setCheckFilterState","checkFilter.getActiveFilterCount","checkFilter.setServicesForStats","checkFilter.openCheckFilterModal","checkFilter.closeCheckFilterModal","checkAdoptionDashboard.initCheckAdoptionDashboard","checkAdoptionDashboard.openCheckAdoptionDashboard","checkAdoptionDashboard.closeCheckAdoptionDashboard","registry.loadTeams","workflowTriggers.triggerServiceWorkflow","workflowTriggers.installService","workflowTriggers.triggerBulkWorkflows","workflowTriggers.handleBulkTrigger","workflowTriggers.handleBulkTriggerAll","appInit.filterAndRenderServices","appInit.refreshData","switchView","view","tab","tabEl","initTeamsView","teamStatistics.mergeTeamDataWithStats","updateTeamsStats","renderTeamsGrid","totalTeamsEl","avgScoreEl","totalServicesEl","noTeamCount","noTeamEl","platinumCount","goldCount","silverCount","bronzeCount","teamStatistics.getRank","platinumEl","goldEl","silverEl","bronzeEl","sortTeams","filteredTeams","_services","rankBadges","installedPct","refreshTeamsView","filterAndRenderTeams","filter","handleHashChange","themeValue","setupEventListeners","card","cardEl","sortSelect","themeToggleBtn","modalClose","teamModalEl","teamsSearchInput","teamsSortSelect","modals.setupModalHandlers","appInit.initializeApp"],"mappings":"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"}
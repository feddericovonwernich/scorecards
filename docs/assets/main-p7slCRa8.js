const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/github-teams-Cp8A-NML.js","assets/useTheme-DTvtv0tD.js"])))=>i.map(i=>d[i]);
import{r as d,j as e,a as Y,R as Se,_ as ee,u as Aa,c as Ea}from"./useTheme-DTvtv0tD.js";function gs(t){var s,a,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(s=0;s<r;s++)t[s]&&(a=gs(t[s]))&&(n&&(n+=" "),n+=a)}else for(a in t)t[a]&&(n&&(n+=" "),n+=a);return n}function Ma(){for(var t,s,a=0,n="",r=arguments.length;a<r;a++)(t=arguments[a])&&(s=gs(t))&&(n&&(n+=" "),n+=s);return n}function B(...t){return Ma(t)}function we(t){const s=t.startsWith("--")?t:`--${t}`;return getComputedStyle(document.documentElement).getPropertyValue(s).trim()}function La(t,s){const a=t.startsWith("--")?t:`--${t}`;document.documentElement.style.setProperty(a,s)}const Ra=Object.freeze(Object.defineProperty({__proto__:null,cn:B,getCssVar:we,setCssVar:La},Symbol.toStringTag,{value:"Module"})),fs={success:"✓",error:"✗",warning:"⚠",info:"ℹ"};function Ia({toast:t,onDismiss:s}){const[a,n]=d.useState(!1);return d.useEffect(()=>{const r=setTimeout(()=>n(!0),10),i=setTimeout(()=>{n(!1),setTimeout(()=>s(t.id),300)},5e3);return()=>{clearTimeout(r),clearTimeout(i)}},[t.id,s]),e.jsxs("div",{className:B("toast","toast-react",`toast-react--${t.type}`,a?"toast-react--visible":"toast-react--hidden"),children:[e.jsx("span",{className:"toast-react__icon",children:fs[t.type]}),e.jsx("span",{className:"toast-react__message",children:t.message})]})}function ps({message:t,type:s,onClose:a}){const[n,r]=d.useState(!1);return d.useEffect(()=>{const i=setTimeout(()=>r(!0),10),l=setTimeout(()=>{r(!1),setTimeout(()=>a(),300)},5e3);return()=>{clearTimeout(i),clearTimeout(l)}},[a]),e.jsxs("div",{className:B("toast","toast-react",`toast-react--${s}`,n?"toast-react--visible":"toast-react--hidden"),children:[e.jsx("span",{className:"toast-react__icon",children:fs[s]}),e.jsx("span",{className:"toast-react__message",children:t})]})}function $a({toasts:t,onDismiss:s}){return t.length===0?null:e.jsx(e.Fragment,{children:t.map(a=>e.jsx(Ia,{toast:a,onDismiss:s},a.id))})}function Da(){const[t,s]=d.useState([]),a=d.useCallback((r,i="info")=>{const l=`toast-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;s(o=>[...o,{id:l,message:r,type:i}])},[]),n=d.useCallback(r=>{s(i=>i.filter(l=>l.id!==r))},[]);return{toasts:t,showToast:a,dismissToast:n}}let dt=null;function Wt(t){dt=t}function z(t,s="info"){dt?dt(t,s):console.warn("[Toast]",s,t)}function Pa(t){return t.charAt(0).toUpperCase()+t.slice(1)}function ut({rank:t,className:s="",isModalHeader:a=!1}){return e.jsx("div",{className:B("rank-badge",t,a&&"mb-0",s),children:Pa(t)})}function ht({rank:t,count:s,className:a=""}){return e.jsx("span",{className:B("mini-rank-badge",`mini-rank-badge--${t}`,a),children:s})}function Ba({distribution:t,className:s=""}){const n=["platinum","gold","silver","bronze"].filter(r=>t[r]>0);return n.length===0?e.jsx(ht,{rank:"bronze",count:0}):e.jsx("div",{className:B("rank-badge-group",s),children:n.map(r=>e.jsx(ht,{rank:r,count:t[r]},r))})}const Oa={api:"API",stale:"STALE",installed:"INSTALLED"};function Ae({type:t,className:s=""}){return e.jsx("span",{className:B(`badge-${t}`,s),children:Oa[t]})}function Ut({hasApi:t=!1,isStale:s=!1,isInstalled:a=!1,className:n=""}){return t||s||a?e.jsxs("div",{className:B("service-badges",n),children:[t&&e.jsx(Ae,{type:"api"}),s&&e.jsx(Ae,{type:"stale"}),a&&e.jsx(Ae,{type:"installed"})]}):null}function qt({score:t,className:s=""}){return e.jsx("div",{className:B("score-badge-inline",s),children:t})}const Ha={platinum:"platinum",gold:"gold",silver:"silver",bronze:"bronze","has-api":"api",stale:"stale",installed:"installed"};function U({value:t,label:s,filterable:a=!1,filterType:n,filterState:r=null,onClick:i,className:l="",id:o}){const c=()=>{a&&n&&i&&i(n)},u=h=>{a&&(h.key==="Enter"||h.key===" ")&&(h.preventDefault(),c())},p=n?Ha[n]:null,k=r==="include",b=r==="exclude";return e.jsxs("div",{className:B("stat-card","stat-card-react",a&&"stat-card-react--filterable",!a&&"stat-card-react--static",k&&p&&`stat-card-react--active-${p}`,b&&"stat-card-react--excluded",l),onClick:c,onKeyDown:u,role:a?"button":void 0,tabIndex:a?0:void 0,"data-filter":n,id:o,children:[e.jsx("div",{className:B("stat-value","stat-card-react__value",k&&p&&`stat-card-react__value--${p}`),id:o?`${o}-value`:void 0,children:t}),e.jsx("div",{className:"stat-label stat-card-react__label",children:s})]})}function ie({isOpen:t,onClose:s,children:a,className:n="",contentClassName:r="",showCloseButton:i=!0,closeOnBackdrop:l=!0,closeOnEscape:o=!0,testId:c}){const u=d.useCallback(b=>{o&&b.key==="Escape"&&s()},[o,s]);d.useEffect(()=>(t&&(document.body.style.overflow="hidden",document.addEventListener("keydown",u)),()=>{document.body.style.overflow="",document.removeEventListener("keydown",u)}),[t,u]);const p=b=>{l&&b.target===b.currentTarget&&s()};if(!t)return null;const k=e.jsx("div",{id:c,className:`modal ${n}`,onClick:p,role:"dialog","aria-modal":"true",children:e.jsxs("div",{className:`modal-content ${r}`,children:[i&&e.jsx("button",{className:"modal-close",onClick:s,"aria-label":"Close modal",children:"×"}),a]})});return Y.createPortal(k,document.body)}function vs({tabs:t,defaultTab:s,activeTab:a,onTabChange:n,className:r="",showScrollArrows:i=!1}){var E,S;const l=t.filter(m=>!m.hidden),o=s||((E=l[0])==null?void 0:E.id)||"",[c,u]=d.useState(o),[p,k]=d.useState(!1),[b,h]=d.useState(!1),T=d.useRef(null),v=a??c,_=m=>{a||u(m),n==null||n(m)},A=d.useCallback(()=>{const m=T.current;if(!m||!i)return;const{scrollLeft:g,scrollWidth:I,clientWidth:y}=m;k(g>0),h(g+y<I-1)},[i]),w=m=>{const g=T.current;if(!g)return;const I=150;g.scrollBy({left:m==="left"?-I:I,behavior:"smooth"})};d.useEffect(()=>(A(),window.addEventListener("resize",A),()=>window.removeEventListener("resize",A)),[l.length,A]);const M=(S=l.find(m=>m.id===v))==null?void 0:S.content;return e.jsxs("div",{className:`tabs-container ${r}`,children:[e.jsxs("div",{className:"tabs-wrapper",children:[i&&p&&e.jsx("button",{className:"tab-scroll-arrow tab-scroll-left",onClick:()=>w("left"),"aria-label":"Scroll tabs left",children:e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M9.78 12.78a.75.75 0 0 1-1.06 0L4.47 8.53a.75.75 0 0 1 0-1.06l4.25-4.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042L6.06 8l3.72 3.72a.75.75 0 0 1 0 1.06Z"})})}),e.jsx("div",{ref:T,className:"tabs",onScroll:A,children:l.map(m=>e.jsx("button",{className:`tab-btn ${v===m.id?"active":""}`,onClick:()=>_(m.id),disabled:m.disabled,"data-tab":m.id,children:m.label},m.id))}),i&&b&&e.jsx("button",{className:"tab-scroll-arrow tab-scroll-right",onClick:()=>w("right"),"aria-label":"Scroll tabs right",children:e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M6.22 3.22a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042L9.94 8 6.22 4.28a.75.75 0 0 1 0-1.06Z"})})})]}),e.jsx("div",{className:"tab-content active",children:M})]})}const Fa="_actionButton_1v2qq_3",Za="_loading_1v2qq_12",za="_success_1v2qq_16",Va="_error_1v2qq_21",Ga="_spinning_1v2qq_26",Wa="_spin_1v2qq_26",mt={actionButton:Fa,loading:Za,success:za,error:Va,spinning:Ga,spin:Wa};function Kt({children:t,state:s="idle",loadingText:a="Loading...",successText:n="Success!",errorText:r="Failed",onClick:i,disabled:l,className:o="",title:c,variant:u="default"}){const p=l||s==="loading",k=()=>{switch(s){case"loading":return e.jsxs(e.Fragment,{children:[e.jsx(Ua,{}),a]});case"success":return e.jsxs(e.Fragment,{children:[e.jsx(qa,{}),n]});case"error":return e.jsxs(e.Fragment,{children:[e.jsx(Ka,{}),r]});default:return t}},b=()=>{switch(s){case"loading":return a;case"success":return"✓ "+n;case"error":return"✗ "+r;default:return c}},h=u!=="default"?`trigger-btn-${u}`:"";return e.jsx("button",{className:`trigger-btn ${h} ${mt.actionButton} ${mt[s]} ${o}`,onClick:i,disabled:p,title:b(),"data-state":s,children:k()})}function Ua(){return e.jsx("svg",{className:mt.spinning,width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M1.705 8.005a.75.75 0 0 1 .834.656 5.5 5.5 0 0 0 9.592 2.97l-1.204-1.204a.25.25 0 0 1 .177-.427h3.646a.25.25 0 0 1 .25.25v3.646a.25.25 0 0 1-.427.177l-1.38-1.38A7.002 7.002 0 0 1 1.05 8.84a.75.75 0 0 1 .656-.834ZM8 2.5a5.487 5.487 0 0 0-4.131 1.869l1.204 1.204A.25.25 0 0 1 4.896 6H1.25A.25.25 0 0 1 1 5.75V2.104a.25.25 0 0 1 .427-.177l1.38 1.38A7.002 7.002 0 0 1 14.95 7.16a.75.75 0 0 1-1.49.178A5.5 5.5 0 0 0 8 2.5Z"})})}function qa(){return e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"})})}function Ka(){return e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M3.72 3.72a.75.75 0 0 1 1.06 0L8 6.94l3.22-3.22a.749.749 0 0 1 1.275.326.749.749 0 0 1-.215.734L9.06 8l3.22 3.22a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L8 9.06l-3.22 3.22a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042L6.94 8 3.72 4.78a.75.75 0 0 1 0-1.06Z"})})}function Yt(){return e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"})})}function Qt(){return e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M1.5 3.25a2.25 2.25 0 1 1 3 2.122v5.256a2.251 2.251 0 1 1-1.5 0V5.372A2.25 2.25 0 0 1 1.5 3.25Zm5.677-.177L9.573.677A.25.25 0 0 1 10 .854V2.5h1A2.5 2.5 0 0 1 13.5 5v5.628a2.251 2.251 0 1 1-1.5 0V5a1 1 0 0 0-1-1h-1v1.646a.25.25 0 0 1-.427.177L7.177 3.427a.25.25 0 0 1 0-.354ZM3.75 2.5a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Zm0 9.5a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Zm8.25.75a.75.75 0 1 0 1.5 0 .75.75 0 0 0-1.5 0Z"})})}function Jt(){return e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M1.705 8.005a.75.75 0 0 1 .834.656 5.5 5.5 0 0 0 9.592 2.97l-1.204-1.204a.25.25 0 0 1 .177-.427h3.646a.25.25 0 0 1 .25.25v3.646a.25.25 0 0 1-.427.177l-1.38-1.38A7.002 7.002 0 0 1 1.05 8.84a.75.75 0 0 1 .656-.834ZM8 2.5a5.487 5.487 0 0 0-4.131 1.869l1.204 1.204A.25.25 0 0 1 4.896 6H1.25A.25.25 0 0 1 1 5.75V2.104a.25.25 0 0 1 .427-.177l1.38 1.38A7.002 7.002 0 0 1 14.95 7.16a.75.75 0 0 1-1.49.178A5.5 5.5 0 0 0 8 2.5Z"})})}function Xt(){return e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M2 5.5a3.5 3.5 0 1 1 5.898 2.549 5.508 5.508 0 0 1 3.034 4.084.75.75 0 1 1-1.482.235 4 4 0 0 0-7.9 0 .75.75 0 0 1-1.482-.236A5.507 5.507 0 0 1 3.102 8.05 3.493 3.493 0 0 1 2 5.5ZM11 4a3.001 3.001 0 0 1 2.22 5.018 5.01 5.01 0 0 1 2.56 3.012.749.749 0 0 1-.885.954.752.752 0 0 1-.549-.514 3.507 3.507 0 0 0-2.522-2.372.75.75 0 0 1-.574-.73v-.352a.75.75 0 0 1 .416-.672A1.5 1.5 0 0 0 11 5.5.75.75 0 0 1 11 4Zm-5.5-.5a2 2 0 1 0-.001 3.999A2 2 0 0 0 5.5 3.5Z"})})}function es(t){const s=new Date(t),n=new Date().getTime()-s.getTime(),r=Math.floor(n/(1e3*60*60*24));return r===0?"Today":r===1?"Yesterday":r<7?`${r} days ago`:s.toLocaleDateString()}function Ya(t){const s=new Date(t),n=new Date().getTime()-s.getTime(),r=Math.floor(n/(1e3*60)),i=Math.floor(n/(1e3*60*60)),l=Math.floor(n/(1e3*60*60*24));return r<1?"just now":r<60?`${r}m ago`:i<24?`${i}h ago`:`${l}d ago`}const Qa=d.memo(function({service:s,isStale:a=!1,variant:n="grid",onCardClick:r,onTeamClick:i,onTriggerWorkflow:l}){var _,A;const o=a&&s.installed,c=(_=s.team)==null?void 0:_.primary,u=n==="list",p=()=>{r==null||r(s.org,s.repo)},k=w=>{w.stopPropagation(),c&&(i==null||i(c))},b=w=>{w.stopPropagation(),l==null||l(s.org,s.repo,w.currentTarget)},h=w=>{w.stopPropagation()},T=w=>{w.stopPropagation()},v=w=>{(w.key==="Enter"||w.key===" ")&&(w.preventDefault(),p())};return u?e.jsxs("div",{className:`service-card rank-${s.rank} service-card--list`,onClick:p,role:"button",tabIndex:0,onKeyDown:v,children:[e.jsxs("div",{className:"service-info",children:[e.jsx("div",{className:"service-name",children:s.name}),e.jsxs("div",{className:"service-org",children:[s.org,"/",s.repo]})]}),e.jsx(ut,{rank:s.rank}),e.jsx("div",{className:"service-badges-cell",children:e.jsx(Ut,{hasApi:s.has_api,isStale:a,isInstalled:s.installed})}),e.jsxs("div",{className:"service-icons",children:[o&&e.jsx("button",{className:"trigger-btn trigger-btn-icon",onClick:b,onKeyDown:w=>{(w.key==="Enter"||w.key===" ")&&w.stopPropagation()},title:"Re-run scorecard workflow",children:e.jsx(Jt,{})}),e.jsx("a",{href:`https://github.com/${s.org}/${s.repo}`,target:"_blank",rel:"noopener noreferrer",className:"github-icon-link",onClick:h,title:"View on GitHub",children:e.jsx(Yt,{})}),!s.installed&&s.installation_pr&&e.jsx("a",{href:s.installation_pr.url,target:"_blank",rel:"noopener noreferrer",className:`pr-icon-link pr-icon-${s.installation_pr.state.toLowerCase()}`,onClick:T,title:`PR #${s.installation_pr.number}`,children:e.jsx(Qt,{})})]}),e.jsx("div",{className:"score-badge-cell",children:e.jsx(qt,{score:s.score})}),c?e.jsx("div",{className:"service-team",children:e.jsxs("span",{className:"service-team-link",onClick:k,role:"button",tabIndex:0,onKeyDown:w=>{(w.key==="Enter"||w.key===" ")&&(w.preventDefault(),k(w))},children:[e.jsx(Xt,{}),c]})}):e.jsx("div",{className:"service-team-empty"}),e.jsx("div",{className:"service-meta",children:e.jsxs("div",{children:["Last updated: ",es(s.last_updated)]})})]}):e.jsxs("div",{className:`service-card rank-${s.rank}`,onClick:p,role:"button",tabIndex:0,onKeyDown:v,children:[e.jsxs("div",{className:"service-header",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"service-title-wrapper",children:[e.jsx("div",{className:"service-name",children:s.name}),e.jsx(Ut,{hasApi:s.has_api,isStale:a,isInstalled:!1})]}),e.jsxs("div",{className:"service-org",children:[s.org,"/",s.repo]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[o&&e.jsx("button",{className:"trigger-btn trigger-btn-icon",onClick:b,onKeyDown:w=>{(w.key==="Enter"||w.key===" ")&&w.stopPropagation()},title:"Re-run scorecard workflow",children:e.jsx(Jt,{})}),e.jsx("a",{href:`https://github.com/${s.org}/${s.repo}`,target:"_blank",rel:"noopener noreferrer",className:"github-icon-link",onClick:h,title:"View on GitHub",children:e.jsx(Yt,{})}),!s.installed&&s.installation_pr&&e.jsx("a",{href:s.installation_pr.url,target:"_blank",rel:"noopener noreferrer",className:`pr-icon-link pr-icon-${s.installation_pr.state.toLowerCase()}`,onClick:T,title:`${s.installation_pr.state==="OPEN"?"Open":"Closed"} installation PR #${s.installation_pr.number}`,children:e.jsx(Qt,{})}),e.jsx(qt,{score:s.score})]})]}),e.jsxs("div",{className:"service-status-row",children:[e.jsx(ut,{rank:s.rank}),c?e.jsx("div",{className:"service-team",children:e.jsxs("span",{className:"service-team-link",onClick:k,role:"button",tabIndex:0,onKeyDown:w=>{(w.key==="Enter"||w.key===" ")&&(w.preventDefault(),k(w))},children:[e.jsx(Xt,{}),c]})}):e.jsx("div",{className:"service-team-empty"})]}),e.jsxs("div",{className:"service-meta",children:[e.jsxs("div",{className:"service-meta-left",children:[e.jsxs("div",{children:["Last updated: ",es(s.last_updated)]}),((A=s.installation_pr)==null?void 0:A.updated_at)&&e.jsxs("div",{className:"pr-status-timestamp",title:`PR status last fetched at ${new Date(s.installation_pr.updated_at).toLocaleString()}`,children:["PR status: ",Ya(s.installation_pr.updated_at)]})]}),s.installed&&e.jsx(Ae,{type:"installed"})]})]})});function Ja({services:t,checksHash:s=null,variant:a="grid",isServiceStale:n,onCardClick:r,onTeamClick:i,onTriggerWorkflow:l}){const o=d.useRef(null);return d.useEffect(()=>{var u;const c=(u=o.current)==null?void 0:u.parentElement;c&&c.id==="services-grid"&&(a==="list"?c.classList.add("services-grid--list"):c.classList.remove("services-grid--list"))},[a]),t.length===0?e.jsx("div",{className:"empty-state",children:e.jsx("h3",{children:"No services match your criteria"})}):e.jsx("div",{ref:o,style:{display:"contents"},children:t.map(c=>{const u=(n==null?void 0:n(c,s))??!1;return e.jsx(Qa,{service:c,isStale:u,variant:a,onCardClick:r,onTeamClick:i,onTriggerWorkflow:l},`${c.org}/${c.repo}`)})})}const ts=t=>{let s;const a=new Set,n=(u,p)=>{const k=typeof u=="function"?u(s):u;if(!Object.is(k,s)){const b=s;s=p??(typeof k!="object"||k===null)?k:Object.assign({},s,k),a.forEach(h=>h(s,b))}},r=()=>s,o={setState:n,getState:r,getInitialState:()=>c,subscribe:u=>(a.add(u),()=>a.delete(u))},c=s=t(n,r,o);return o},Xa=t=>t?ts(t):ts,en=t=>t;function tn(t,s=en){const a=Se.useSyncExternalStore(t.subscribe,Se.useCallback(()=>s(t.getState()),[t,s]),Se.useCallback(()=>s(t.getInitialState()),[t,s]));return Se.useDebugValue(a),a}const ss=t=>{const s=Xa(t),a=n=>tn(s,n);return Object.assign(a,s),a},sn=t=>t?ss(t):ss;function X(t,s){return s?t.checks_hash?t.checks_hash!==s:!0:!1}function an(t,s){const a=X(t,s);return{isStale:a,message:a?"Score may be outdated (checks have been updated)":"Score is current",serviceHash:t.checks_hash||"unknown",currentHash:s||"unknown"}}function xs(t,s){return t.filter(a=>X(a,s))}function nn(t,s){const a=xs(t,s);return{total:t.length,stale:a.length,upToDate:t.length-a.length,percentage:t.length>0?Math.round(a.length/t.length*100):0}}function rn(t,s){return t.filter(a=>X(a,s)&&a.installed).length}const ln=Object.freeze(Object.defineProperty({__proto__:null,countStaleInstalled:rn,filterStaleServices:xs,getStalenessInfo:an,getStalenessStats:nn,isServiceStale:X},Symbol.toStringTag,{value:"Module"})),ne={PER_PAGE:25,GITHUB_BASE_URL:"https://api.github.com",ACCEPT_HEADER:"application/vnd.github.v3+json"},je={BUTTON_FEEDBACK:2e3,TOAST_DURATION:3e3,BUTTON_STATE_DURATION:3e3,ANIMATION_SHORT:100,ANIMATION_MEDIUM:300,ANIMATION_LONG:500,TAB_INIT_DELAY:100,POLLING_ACTIVE:3e4,POLLING_IDLE:6e4,WORKFLOW_POLL_DEFAULT:3e4,CACHE_SHORT:1e4,CACHE_MEDIUM:15e3,WORKFLOW_RECHECK_DELAY:5e3,LIVE_DURATION_UPDATE:1e3},ws={WIDGET_POLL_INTERVAL:"widget_poll_interval",SERVICE_WORKFLOW_POLL_INTERVAL:"service_workflow_poll_interval",THEME:"scorecards_theme"},kt=["platinum","gold","silver","bronze"],on={IN_PROGRESS:"in_progress",QUEUED:"queued",COMPLETED:"completed"},cn={SUCCESS:"success",FAILURE:"failure",CANCELLED:"cancelled"},dn=Object.freeze(Object.defineProperty({__proto__:null,API_CONFIG:ne,RANKS:kt,STORAGE_KEYS:ws,TIMING:je,WORKFLOW_CONCLUSION:cn,WORKFLOW_STATUS:on},Symbol.toStringTag,{value:"Module"}));function Be(t){const s={platinum:0,gold:0,silver:0,bronze:0};return kt.forEach(a=>{s[a]=t.filter(n=>n.rank===a).length}),s}function Oe(t){if(!t||t.length===0)return 0;const s=t.reduce((a,n)=>a+(n.score||0),0);return Math.round(s/t.length)}function un(t,s,a){return{total:t.length,avgScore:Oe(t),ranks:Be(t),apiCount:t.filter(n=>n.has_api).length,staleCount:s?t.filter(n=>s(n,a)).length:0,installedCount:t.filter(n=>n.installed).length}}const hn=Object.freeze(Object.defineProperty({__proto__:null,calculateAverageScore:Oe,calculateServiceStats:un,countByRank:Be},Symbol.toStringTag,{value:"Module"}));function te(t){var s;return t.team?typeof t.team=="string"?t.team:t.team.primary||((s=t.team.all)==null?void 0:s[0])||null:null}function js(t){return t.team?typeof t.team=="string"?[t.team]:t.team.all||(t.team.primary?[t.team.primary]:[]):[]}function Ct(t){const s=new Set;return t.forEach(a=>{const n=te(a);n&&s.add(n)}),Array.from(s).sort((a,n)=>a.localeCompare(n))}function bs(t){return Ct(t).length}function ks(t,s,a){return{serviceCount:t.length,averageScore:Oe(t),rankDistribution:Be(t),staleCount:s?t.filter(n=>s(n,a)).length:0,installedCount:t.filter(n=>n.installed).length}}function He(t,s=null,a=null){const n={},r={};t.forEach(l=>{const o=te(l);o&&(n[o]||(n[o]=[],l.team&&typeof l.team=="object"&&(r[o]={github_org:l.team.github_org||null,github_slug:l.team.github_slug||null})),n[o].push(l))});const i={};return Object.entries(n).forEach(([l,o])=>{var c,u;i[l]={name:l,...ks(o,s,a),github_org:((c=r[l])==null?void 0:c.github_org)||null,github_slug:((u=r[l])==null?void 0:u.github_slug)||null}}),i}function Cs(t,s="serviceCount",a="desc"){const n=Object.values(t),r={name:(o,c)=>o.name.localeCompare(c.name),serviceCount:(o,c)=>o.serviceCount-c.serviceCount,averageScore:(o,c)=>o.averageScore-c.averageScore,staleCount:(o,c)=>o.staleCount-c.staleCount},i=r[s]||r.serviceCount,l=a==="asc"?1:-1;return n.sort((o,c)=>i(o,c)*l)}function mn(t,s){return t.filter(a=>js(a).includes(s))}function gn(t){return t.filter(s=>!te(s))}function Nt(t,s){const a={};return t&&t.teams&&Object.entries(t.teams).forEach(([n,r])=>{const i=r.name||n,l=s[i]||{serviceCount:0,averageScore:0,rankDistribution:{platinum:0,gold:0,silver:0,bronze:0},staleCount:0,installedCount:0};a[n]={id:n,name:i,description:r.description||null,aliases:r.aliases||[],github_org:r.github_org,github_slug:r.github_slug,metadata:r.metadata||{},statistics:l}}),Object.entries(s).forEach(([n,r])=>{const i=n.toLowerCase().replace(/\s+/g,"-");a[i]||(a[i]={id:i,name:n,description:null,aliases:[],metadata:{},statistics:r})}),a}function fn(t){if(!t)return"";const s=[];return kt.forEach(a=>{const n=t[a]||0;n>0&&s.push(`${n} ${a.charAt(0).toUpperCase()+a.slice(1)}`)}),s.join(", ")}function ge(t){const s=t.averageScore||0;return s>=90?"platinum":s>=75?"gold":s>=50?"silver":"bronze"}const gt=Object.freeze(Object.defineProperty({__proto__:null,buildRankSummary:fn,calculateSingleTeamStats:ks,calculateTeamStats:He,getAllTeams:js,getRank:ge,getServicesForTeam:mn,getServicesWithoutTeam:gn,getTeamCount:bs,getTeamName:te,getUniqueTeams:Ct,mergeTeamDataWithStats:Nt,sortTeamStats:Cs},Symbol.toStringTag,{value:"Module"}));function Fe(t,s){var a;return((a=t.excluded_checks)==null?void 0:a.some(n=>n.check===s))??!1}function St(t,s){var a,n;return((n=(a=t.excluded_checks)==null?void 0:a.find(r=>r.check===s))==null?void 0:n.reason)??null}function pn(t,s){return t.filter(a=>Fe(a,s)).map(a=>({org:a.org,repo:a.repo,name:a.name,score:a.score,rank:a.rank,exclusionReason:St(a,s)}))}function yt(t,s){var u;let a=0,n=0,r=0,i=0;for(const p of t){if(Fe(p,s)){r++;continue}const k=(u=p.check_results)==null?void 0:u[s];k==="pass"?a++:k==="fail"?n++:i++}const l=t.length,o=l-r,c=o>0?Math.round(a/o*100):0;return{total:l,activeTotal:o,passing:a,failing:n,excluded:r,unknown:i,percentage:c}}function Ns(t,s){var n;const a={};for(const r of t){const i=te(r)||"No Team";a[i]||(a[i]={total:0,activeTotal:0,passing:0,failing:0,excluded:0,unknown:0,percentage:0,services:[]});const l=a[i];if(l.total++,Fe(r,s)){l.excluded++,l.services.push({org:r.org,repo:r.repo,name:r.name,score:r.score,rank:r.rank,checkStatus:"excluded",exclusionReason:St(r,s)});continue}const c=(n=r.check_results)==null?void 0:n[s];c==="pass"?l.passing++:c==="fail"?l.failing++:l.unknown++,l.services.push({org:r.org,repo:r.repo,name:r.name,score:r.score,rank:r.rank,checkStatus:c||"unknown"})}for(const r of Object.keys(a)){const i=a[r];i.activeTotal=i.total-i.excluded,i.percentage=i.activeTotal>0?Math.round(i.passing/i.activeTotal*100):0,i.services.sort((l,o)=>{const c={pass:0,fail:1,excluded:2,unknown:3},u=c[l.checkStatus||"unknown"]??3,p=c[o.checkStatus||"unknown"]??3;return u!==p?u-p:o.score-l.score})}return a}function Ss(t,s){return!s||s.size===0?t:t.filter(a=>{var n;for(const[r,i]of s){if(i==null)continue;const l=(n=a.check_results)==null?void 0:n[r];if(i==="pass"&&l!=="pass"||i==="fail"&&l!=="fail")return!1}return!0})}function vn(t,s){return t.filter(a=>{var n;return((n=a.check_results)==null?void 0:n[s])==="pass"})}function xn(t,s){return t.filter(a=>{var n;return((n=a.check_results)==null?void 0:n[s])==="fail"})}function wn(t,s){return s.map(a=>{const n=yt(t,a.id);return{checkId:a.id,name:a.name,category:a.category,weight:a.weight,...n}})}function ys(t,s="desc"){const a=Object.entries(t).map(([n,r])=>({teamName:n,...r}));return a.sort((n,r)=>{const i=n.percentage-r.percentage;return s==="desc"?-i:i}),a}function jn(t){if(!t)return 0;let s=0;for(const[,a]of t)a!=null&&s++;return s}const bn=Object.freeze(Object.defineProperty({__proto__:null,calculateCheckAdoptionByTeam:Ns,calculateOverallCheckAdoption:yt,filterByCheckCriteria:Ss,getActiveCheckFilterCount:jn,getAllChecksAdoptionStats:wn,getExcludedServicesForCheck:pn,getExclusionReason:St,getServicesFailingCheck:xn,getServicesPassingCheck:vn,isCheckExcluded:Fe,sortTeamsByAdoption:ys},Symbol.toStringTag,{value:"Module"})),kn={active:new Map,search:"",sort:"score-desc",teamFilter:null,checkFilters:new Map},Cn={pat:null,validated:!1,rateLimit:null,user:null},Nn={currentModal:null,activeModal:{type:null},checksHash:null,checksHashTimestamp:0,currentView:"services",displayMode:localStorage.getItem("scorecards-display-mode")||"grid"},Sn={open:!1,runs:[],filterStatus:"all",loading:!1,lastFetch:0,pollInterval:3e4,pollIntervalRef:null},as={services:{all:[],filtered:[],loading:!1},teams:{all:[],filtered:[],sort:"score-desc",search:"",activeFilters:new Map},filters:kn,auth:Cn,ui:Nn,serviceModal:{org:null,repo:null,workflowRuns:[],filterStatus:"all",pollInterval:null,pollIntervalTime:3e4,loaded:!1,durationUpdateInterval:null},actionsWidget:Sn};function yn(t,s,a,n,r,i){let l=t;if(n&&(l=l.filter(o=>{var u;return(typeof o.team=="string"?o.team:((u=o.team)==null?void 0:u.primary)||"").toLowerCase()===n.toLowerCase()})),s.size>0&&(l=l.filter(o=>{for(const[c,u]of s){if(u===null)continue;let p=!1;if(c==="has-api"?p=!!o.has_api:c==="stale"?p=X(o,i):c==="installed"?p=!!o.installed:(c==="platinum"||c==="gold"||c==="silver"||c==="bronze")&&(p=o.rank===c),u==="include"&&!p||u==="exclude"&&p)return!1}return!0})),r.size>0&&(l=Ss(l,r)),a){const o=a.toLowerCase();l=l.filter(c=>{var k;const u=typeof c.team=="string"?c.team:((k=c.team)==null?void 0:k.primary)||"";return`${c.name} ${c.org} ${c.repo} ${u}`.toLowerCase().includes(o)})}return l}function Tn(t,s){const a=[...t];return a.sort((n,r)=>{switch(s){case"score-desc":return r.score-n.score;case"score-asc":return n.score-r.score;case"name-asc":return n.name.localeCompare(r.name);case"name-desc":return r.name.localeCompare(n.name);case"updated-desc":return new Date(r.last_updated).getTime()-new Date(n.last_updated).getTime();case"updated-asc":return new Date(n.last_updated).getTime()-new Date(r.last_updated).getTime();default:return 0}}),a}const L=sn((t,s)=>({...as,setServices:a=>t(n=>({services:{...n.services,all:a}})),setFilteredServices:a=>t(n=>({services:{...n.services,filtered:a}})),setServicesLoading:a=>t(n=>({services:{...n.services,loading:a}})),filterAndSortServices:()=>{const a=s(),{all:n}=a.services,{active:r,search:i,sort:l,teamFilter:o,checkFilters:c}=a.filters,{checksHash:u}=a.ui,p=yn(n,r,i,o,c,u),k=Tn(p,l);t(b=>({services:{...b.services,filtered:k}}))},setTeams:a=>t(n=>({teams:{...n.teams,all:a}})),setFilteredTeams:a=>t(n=>({teams:{...n.teams,filtered:a}})),updateTeamsState:a=>t(n=>({teams:{...n.teams,...a}})),filterAndSortTeams:()=>{const a=s(),{all:n,search:r,sort:i}=a.teams;let l=n;if(r){const c=r.toLowerCase();l=n.filter(u=>u.name.toLowerCase().includes(c)||u.description&&u.description.toLowerCase().includes(c))}const o=[...l].sort((c,u)=>{switch(i){case"services-desc":return(u.serviceCount||0)-(c.serviceCount||0);case"services-asc":return(c.serviceCount||0)-(u.serviceCount||0);case"score-desc":return(u.averageScore||0)-(c.averageScore||0);case"score-asc":return(c.averageScore||0)-(u.averageScore||0);case"name-asc":return c.name.localeCompare(u.name);case"name-desc":return u.name.localeCompare(c.name);default:return(u.averageScore||0)-(c.averageScore||0)}});t(c=>({teams:{...c.teams,filtered:o}}))},setAuth:(a,n=!1)=>t(r=>({auth:{...r.auth,pat:a,validated:n}})),setRateLimit:a=>t(n=>({auth:{...n.auth,rateLimit:a}})),setAuthUser:a=>t(n=>({auth:{...n.auth,user:a}})),setCurrentView:a=>t(n=>({ui:{...n.ui,currentView:a}})),setDisplayMode:a=>{localStorage.setItem("scorecards-display-mode",a),t(n=>({ui:{...n.ui,displayMode:a}}))},setChecksHash:a=>t(n=>({ui:{...n.ui,checksHash:a,checksHashTimestamp:Date.now()}})),openModal:(a,n)=>t(r=>({ui:{...r.ui,activeModal:{type:a,data:n},currentModal:a}})),closeModal:()=>t(a=>({ui:{...a.ui,activeModal:{type:null},currentModal:null}})),updateServiceModal:a=>t(n=>({serviceModal:{...n.serviceModal,...a}})),updateFilters:a=>{t(n=>({filters:{...n.filters,...a}})),s().filterAndSortServices()},setFilter:(a,n)=>{t(r=>{const i=new Map(r.filters.active);return n===null?i.delete(a):i.set(a,n),{filters:{...r.filters,active:i}}}),s().filterAndSortServices()},clearFilters:()=>{t(a=>({filters:{...a.filters,active:new Map,search:"",teamFilter:null}})),s().filterAndSortServices()},setCheckFilter:(a,n)=>{t(r=>{const i=new Map(r.filters.checkFilters);return n===null?i.delete(a):i.set(a,n),{filters:{...r.filters,checkFilters:i}}}),s().filterAndSortServices()},clearCheckFilters:()=>{t(a=>({filters:{...a.filters,checkFilters:new Map}})),s().filterAndSortServices()},updateActionsWidget:a=>t(n=>({actionsWidget:{...n.actionsWidget,...a}})),toggleActionsWidget:()=>t(a=>({actionsWidget:{...a.actionsWidget,open:!a.actionsWidget.open}})),setActionsWidgetRuns:a=>{const n=a.filter(r=>r.status==="in_progress"||r.status==="queued").length;return t(r=>({actionsWidget:{...r.actionsWidget,runs:a,loading:!1,lastFetch:Date.now()}})),n},resetState:()=>t(()=>({...as}))})),Tt=t=>t.services.all,_n=t=>t.services.filtered,An=t=>t.teams.filtered,fe=t=>t.auth.pat,En=t=>t.auth.rateLimit,Mn=t=>t.auth.user,Ts=t=>t.ui.currentView,_t=t=>t.ui.displayMode,_s=t=>t.ui.checksHash,Ln=t=>t.actionsWidget.open;function Rn(t,s){return X(t,s)}function In(){const t=L(_n),s=L(_s),a=L(_t),n=d.useCallback((l,o)=>{var c;(c=window.showServiceDetail)==null||c.call(window,l,o)},[]),r=d.useCallback(l=>{var o;(o=window.showTeamDetail)==null||o.call(window,l)},[]),i=d.useCallback((l,o,c)=>{var u;(u=window.triggerServiceWorkflow)==null||u.call(window,l,o,c)},[]);return e.jsx(Ja,{services:t,checksHash:s,variant:a,isServiceStale:Rn,onCardClick:n,onTeamClick:r,onTriggerWorkflow:i})}function $n(t){const s=["platinum","gold","silver","bronze"];for(const a of s)if(t[a]>0)return a;return"bronze"}function ye({value:t,label:s,warning:a=!1}){return e.jsxs("div",{className:`team-stat${a?" warning":""}`,children:[e.jsx("span",{className:"team-stat-value",children:t}),e.jsx("span",{className:"team-stat-label",children:s})]})}function Dn({label:t,percentage:s}){return e.jsxs("div",{className:"team-card-progress",children:[e.jsxs("div",{className:"progress-label",children:[e.jsx("span",{children:t}),e.jsxs("span",{children:[s,"%"]})]}),e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"progress-fill",style:{width:`${s}%`}})})]})}const Pn=d.memo(function({team:s,variant:a="grid",onCardClick:n}){var h,T,v,_,A;const r=s.serviceCount??((h=s.statistics)==null?void 0:h.serviceCount)??0,i=s.averageScore??((T=s.statistics)==null?void 0:T.averageScore)??0,l=s.installedCount??((v=s.statistics)==null?void 0:v.installedCount)??0,o=s.staleCount??((_=s.statistics)==null?void 0:_.staleCount)??0,c=s.rankDistribution??((A=s.statistics)==null?void 0:A.rankDistribution)??{platinum:0,gold:0,silver:0,bronze:0},u=$n(c),p=r>0?Math.round(l/r*100):0,k=a==="list",b=()=>{n==null||n(s.name)};return e.jsxs("div",{className:`team-card rank-${u}${k?" team-card--list":""}`,onClick:b,role:"button",tabIndex:0,onKeyDown:w=>{(w.key==="Enter"||w.key===" ")&&(w.preventDefault(),b())},children:[e.jsxs("div",{className:"team-card-header",children:[e.jsx("h3",{className:"team-card-name",children:s.name}),s.slack_channel&&e.jsx("span",{className:"team-slack",children:s.slack_channel})]}),e.jsx(ut,{rank:u}),s.description&&e.jsx("p",{className:"team-card-description",children:s.description}),e.jsxs("div",{className:"team-card-stats",children:[e.jsx(ye,{value:Math.round(i),label:"Avg Score"}),e.jsx(ye,{value:r,label:"Services"}),e.jsx(ye,{value:l,label:"Installed"}),o>0&&e.jsx(ye,{value:o,label:"Stale",warning:!0})]}),e.jsx(Ba,{distribution:c,className:"team-card-ranks"}),e.jsx(Dn,{label:"Installed",percentage:p})]})});function Bn({teams:t,variant:s="grid",onCardClick:a,emptyMessage:n="No teams found"}){return d.useLayoutEffect(()=>{const r=document.getElementById("teams-grid");return r&&(s==="list"?r.classList.add("teams-grid--list"):r.classList.remove("teams-grid--list")),()=>{const i=document.getElementById("teams-grid");i&&i.classList.remove("teams-grid--list")}},[s]),t.length===0?e.jsx("div",{className:"empty-state",children:e.jsx("h3",{children:n})}):e.jsx("div",{style:{display:"contents"},children:t.map(r=>e.jsx(Pn,{team:r,variant:s,onCardClick:a},r.id??r.name))})}function On(){const t=L(An),s=L(_t),a=L(Ts),n=d.useCallback(r=>{var i;(i=window.showTeamDetail)==null||i.call(window,r)},[]);return d.useEffect(()=>{a==="teams"&&t.length===0&&window.initTeamsView&&window.initTeamsView()},[a,t.length]),e.jsx(Bn,{teams:t,variant:s,onCardClick:n,emptyMessage:"No teams found"})}const Hn=["Scorecards Setup","Documentation","Testing & CI","Configuration & Compliance","Other"];function Fn(t){switch(t){case"pass":return"✓";case"excluded":return"⊘";default:return"✗"}}function Zn(t){const s={};t.forEach(n=>{const r=n.category||"Other";s[r]||(s[r]=[]),s[r].push(n)});const a={};return Hn.forEach(n=>{const r=Object.keys(s).find(i=>i.toLowerCase()===n.toLowerCase());r&&(a[n]=s[r])}),a}function zn({check:t}){const s=t.status==="excluded";return e.jsxs("div",{className:`check-result ${t.status}`,children:[e.jsxs("div",{className:"check-name",children:[Fn(t.status)," ",t.name]}),t.description&&e.jsx("div",{className:"check-description",children:t.description}),s&&e.jsx("div",{className:"check-excluded-notice",children:e.jsx("em",{children:"Excluded from scoring"})}),t.stdout&&t.stdout.trim()&&e.jsxs("div",{className:"check-output",children:[e.jsx("strong",{children:"Output:"}),e.jsx("br",{}),t.stdout.trim()]}),t.stderr&&t.stderr.trim()&&t.status==="fail"&&e.jsxs("div",{className:"check-output check-output-error",children:[e.jsx("strong",{children:"Error:"}),e.jsx("br",{}),t.stderr.trim()]}),e.jsxs("div",{className:"check-meta",children:["Weight: ",t.weight," | Duration: ",t.duration,"s"]})]})}function Vn({category:t,checks:s}){const a=s.filter(l=>l.status==="pass").length,n=s.filter(l=>l.status==="excluded").length,r=s.length-n,i=a===r&&r>0;return e.jsxs("details",{className:"check-category",open:!0,children:[e.jsxs("summary",{className:"check-category-header",children:[e.jsx("span",{className:"category-arrow",children:"▼"}),e.jsx("span",{className:"category-name",children:t}),e.jsxs("span",{className:`category-stats ${i?"all-passed":"has-failures"}`,children:[a,"/",r," passed",n>0&&e.jsxs("span",{className:"excluded-count",children:[" (",n," excluded)"]})]})]}),e.jsx("div",{className:"check-category-content",children:s.map(l=>e.jsx(zn,{check:l},l.check_id))})]})}function Gn({checks:t}){const s=d.useMemo(()=>Zn(t),[t]);return t.length===0?e.jsx("div",{className:"tab-panel",id:"checks-tab",children:e.jsx("div",{className:"empty-state",children:"No check results available"})}):e.jsx("div",{className:"tab-panel",id:"checks-tab",children:e.jsx("div",{className:"check-categories",children:Object.entries(s).map(([a,n])=>e.jsx(Vn,{category:a,checks:n},a))})})}function Wn({openapiInfo:t,org:s,repo:a,defaultBranch:n}){const[r,i]=d.useState(null),[l,o]=d.useState(!1),[c,u]=d.useState(null),[p,k]=d.useState(!1),{specInfo:b,fromConfig:h,summary:T}=t,v=(b==null?void 0:b.spec_file)||"openapi.yaml",_=n||"main",A=`https://github.com/${s}/${a}/blob/${_}/${v}`,w=`https://raw.githubusercontent.com/${s}/${a}/${_}/${v}`,M=d.useCallback(async()=>{if(!(r||l)){o(!0),u(null);try{const m=await fetch(w);if(!m.ok)throw new Error(`HTTP ${m.status}`);const g=await m.text();i(g)}catch(m){u(m instanceof Error?m.message:"Failed to load")}finally{o(!1)}}},[w,r,l]),E=d.useCallback(async()=>{if(r)try{await navigator.clipboard.writeText(r),k(!0),setTimeout(()=>k(!1),2e3)}catch{const m=document.createElement("textarea");m.value=r,document.body.appendChild(m),m.select(),document.execCommand("copy"),document.body.removeChild(m),k(!0),setTimeout(()=>k(!1),2e3)}},[r]),S=d.useCallback(()=>{var m;(m=window.openApiExplorer)==null||m.call(window,s,a)},[s,a]);return t.hasSpec?e.jsx("div",{className:"tab-panel",id:"api-tab",children:e.jsxs("div",{className:"api-tab-content",children:[e.jsxs("div",{className:"api-summary-card",children:[(T==null?void 0:T.title)&&e.jsx("div",{className:"api-summary-title",children:T.title}),e.jsxs("div",{className:"api-summary-meta",children:[e.jsxs("span",{className:"api-meta-item",children:[e.jsx("strong",{children:"File:"})," ",e.jsx("code",{children:v})]}),(T==null?void 0:T.openApiVersion)&&e.jsxs("span",{className:"api-meta-item",children:[e.jsx("strong",{children:"OpenAPI:"})," ",T.openApiVersion]}),(T==null?void 0:T.paths)&&e.jsxs("span",{className:"api-meta-item",children:[e.jsx("strong",{children:"Endpoints:"})," ",T.paths," path",T.paths!==1?"s":"",", ",T.operations," operation",T.operations!==1?"s":""]})]}),e.jsx("div",{className:"api-actions",children:e.jsxs("a",{href:A,target:"_blank",rel:"noopener noreferrer",className:"github-link-button",children:[e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"})}),"View on GitHub"]})})]}),e.jsxs("details",{className:"spec-details",onToggle:M,children:[e.jsx("summary",{className:"spec-summary",children:"View Raw Specification"}),e.jsxs("div",{className:"spec-content",children:[l&&e.jsx("div",{className:"spec-loading",children:"Loading specification..."}),c&&e.jsxs("div",{className:"spec-error",children:[e.jsxs("p",{children:["Failed to load spec: ",c]}),e.jsx("a",{href:w,target:"_blank",rel:"noopener noreferrer",className:"spec-error-link",children:"View raw file on GitHub"})]}),r&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"spec-toolbar",children:e.jsx("button",{onClick:E,className:`copy-spec-button ${p?"copied":""}`,children:p?"Copied!":"Copy"})}),e.jsx("pre",{className:"spec-code",children:e.jsx("code",{children:r})})]})]})]}),(b==null?void 0:b.environments)&&e.jsxs(e.Fragment,{children:[e.jsx("h4",{className:"api-section-header",children:"Environments"}),e.jsx("div",{className:"environments-grid",children:Object.entries(b.environments).map(([m,g])=>e.jsxs("div",{className:"environment-card",children:[e.jsx("div",{className:"environment-card-name",children:m}),e.jsx("div",{className:"environment-card-url",children:g.base_url}),g.description&&e.jsx("div",{className:"environment-card-description",children:g.description})]},m))}),e.jsxs("div",{className:"api-explorer-section",children:[e.jsx("button",{onClick:S,className:"api-explorer-button",children:"Open API Explorer"}),e.jsx("p",{className:"environment-card-description",children:"Explore and test the API with an interactive Swagger UI interface"})]})]}),!h&&e.jsxs("p",{className:"environment-card-description api-hint",children:["Configure environments in ",e.jsx("code",{children:".scorecard/config.yml"})," to enable the interactive API Explorer."]})]})}):null}function Un({links:t}){return!t||t.length===0?null:e.jsx("div",{className:"tab-panel",id:"links-tab",children:e.jsx("ul",{className:"link-list",children:t.map((s,a)=>e.jsx("li",{className:"link-item",children:e.jsxs("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",children:[e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",style:{flexShrink:0,marginRight:8},children:e.jsx("path",{d:"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"})}),e.jsxs("div",{className:"link-content",children:[e.jsx("strong",{className:"link-name",children:s.name}),s.description&&e.jsx("p",{className:"link-description",children:s.description})]})]})},a))})})}function qn(t){let s=0;for(let a=0;a<t.length;a++){const n=t.charCodeAt(a);s=(s<<5)-s+n,s=s&s}return Math.abs(s).toString(16).padStart(32,"0")}function Kn(t){return new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}function Yn({contributor:t}){const a=`https://www.gravatar.com/avatar/${d.useMemo(()=>qn(t.email.toLowerCase().trim()),[t.email])}?d=identicon&s=48`,n=t.email.split("@")[0].replace(/[^a-zA-Z0-9-]/g,""),r=t.email.includes("github")||t.email.includes("users.noreply.github.com"),i=l=>{l.currentTarget.src="https://www.gravatar.com/avatar/00000000000000000000000000000000?d=mp&s=48"};return e.jsxs("div",{className:"contributor-item",children:[e.jsx("img",{src:a,alt:t.name,className:"contributor-avatar",onError:i}),e.jsxs("div",{className:"contributor-info",children:[e.jsxs("div",{className:"contributor-name",children:[e.jsx("strong",{children:t.name}),r&&e.jsx("a",{href:`https://github.com/${n}`,target:"_blank",rel:"noopener noreferrer",className:"contributor-github-link",title:"View GitHub profile",children:e.jsx("svg",{width:"14",height:"14",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"})})})]}),e.jsx("div",{className:"contributor-email",children:t.email}),e.jsxs("div",{className:"contributor-meta",children:[e.jsxs("span",{className:"contributor-commits",title:`${t.commit_count} commit${t.commit_count!==1?"s":""}`,children:[e.jsx("svg",{width:"12",height:"12",viewBox:"0 0 16 16",fill:"currentColor",style:{verticalAlign:"middle",marginRight:4},children:e.jsx("path",{d:"M1.643 3.143.427 1.927A.25.25 0 0 1 .604 1.5h6.792a.25.25 0 0 1 .177.427L6.357 3.143a.25.25 0 0 1-.177.073H1.82a.25.25 0 0 1-.177-.073ZM2.976 7.5A2.5 2.5 0 0 1 0 7.5v-2a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 .5.5v2a2.5 2.5 0 0 1-2.024 0Zm1.524-.5h-3v.25a1.5 1.5 0 0 0 3 0V7ZM8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0ZM1.5 8a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0Z"})}),t.commit_count," commit",t.commit_count!==1?"s":""]}),e.jsxs("span",{className:"contributor-date",title:new Date(t.last_commit_date).toLocaleString(),children:["Last commit: ",Kn(t.last_commit_date)]}),e.jsx("span",{className:"contributor-hash",children:e.jsx("code",{children:t.last_commit_hash})})]})]})]})}function Qn({contributors:t}){return!t||t.length===0?null:e.jsxs("div",{className:"tab-panel",id:"contributors-tab",children:[e.jsx("h4",{className:"tab-section-header",children:"Recent Contributors (Last 20 Commits)"}),e.jsx("p",{className:"tab-section-description",style:{marginBottom:20},children:"Contributors who have committed to this repository recently, ordered by commit count."}),e.jsx("div",{className:"contributors-list",children:t.map((s,a)=>e.jsx(Yn,{contributor:s},a))})]})}function As(t){if(!t)return"Unknown";const s=new Date,a=new Date(t),n=Math.floor((s.getTime()-a.getTime())/1e3);if(n<60)return"Just now";if(n<3600){const r=Math.floor(n/60);return`${r} minute${r!==1?"s":""} ago`}if(n<86400){const r=Math.floor(n/3600);return`${r} hour${r!==1?"s":""} ago`}if(n<604800){const r=Math.floor(n/86400);return`${r} day${r!==1?"s":""} ago`}return a.toLocaleDateString()}function Es(t){const s=new Date(t),n=new Date().getTime()-s.getTime(),r=Math.floor(n/(1e3*60*60*24));return r===0?"Today":r===1?"Yesterday":r<7?`${r} days ago`:r<30?`${Math.floor(r/7)} weeks ago`:s.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}function me(t){const s=Math.floor(t/1e3),a=Math.floor(s/60),n=Math.floor(a/60);return n>0?`${n}h ${a%60}m ago`:a>0?`${a}m ago`:`${s}s ago`}function At(t){if(t===0)return"Off";if(t<6e4)return`${t/1e3} second${t!==1e3?"s":""}`;{const s=t/6e4;return`${s} minute${s!==1?"s":""}`}}function he(t){const s=document.createElement("div");return s.textContent=t,s.innerHTML}function Et(t){return t?t.charAt(0).toUpperCase()+t.slice(1):""}const Jn=Object.freeze(Object.defineProperty({__proto__:null,capitalize:Et,escapeHtml:he,formatDate:Es,formatDuration:me,formatInterval:At,formatRelativeTime:As},Symbol.toStringTag,{value:"Module"}));function Xn(t,s){return t==="in_progress"?e.jsx("span",{className:"inline-block w-3 h-3 border-2 border-current border-t-transparent rounded-full animate-spin"}):t==="queued"?e.jsx("span",{children:"⌛"}):t==="completed"?s==="success"?e.jsx("span",{className:"text-success",children:"✓"}):s==="failure"?e.jsx("span",{className:"text-error",children:"✗"}):s==="cancelled"?e.jsx("span",{className:"text-text-muted",children:"∅"}):e.jsx("span",{children:"●"}):e.jsx("span",{children:"●"})}function ns(t){const s=new Date;if(t.status==="completed"){const r=new Date(t.updated_at),i=s.getTime()-r.getTime();return{label:"Completed",time:me(i)}}if(t.status==="in_progress"){const r=new Date(t.run_started_at||t.created_at),i=s.getTime()-r.getTime();return{label:"Running for",time:me(i)}}const a=new Date(t.created_at),n=s.getTime()-a.getTime();return{label:"Queued",time:me(n)}}function Ms({run:t}){const[s,a]=d.useState(()=>ns(t));d.useEffect(()=>{if(t.status==="in_progress"||t.status==="queued"){const i=setInterval(()=>{a(ns(t))},1e3);return()=>clearInterval(i)}},[t]);const n=t.status==="completed"?`widget-run-item--${t.conclusion||"neutral"}`:`widget-run-item--${t.status}`,r=t.status==="completed"?`status-${t.conclusion||"neutral"}`:`status-${t.status}`;return e.jsxs("div",{className:B("widget-run-item",n),children:[e.jsxs("div",{className:"widget-run-header",children:[e.jsx("span",{className:B("widget-run-status",r),children:Xn(t.status,t.conclusion)}),e.jsxs("div",{className:"widget-run-info",children:[e.jsx("div",{className:"widget-run-name",children:t.name}),e.jsxs("div",{className:"widget-run-repo",children:[t.org,"/",t.repo]})]})]}),e.jsxs("div",{className:"widget-run-meta",children:[e.jsxs("span",{className:"widget-run-duration",children:[s.label," ",s.time]}),e.jsxs("a",{href:t.html_url,target:"_blank",rel:"noopener noreferrer",className:"widget-run-link",onClick:i=>i.stopPropagation(),children:["View",e.jsx("svg",{width:"10",height:"10",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M3.75 2h3.5a.75.75 0 0 1 0 1.5h-3.5a.25.25 0 0 0-.25.25v8.5c0 .138.112.25.25.25h8.5a.25.25 0 0 0 .25-.25v-3.5a.75.75 0 0 1 1.5 0v3.5A1.75 1.75 0 0 1 12.25 14h-8.5A1.75 1.75 0 0 1 2 12.25v-8.5C2 2.784 2.784 2 3.75 2Zm6.854-1h4.146a.25.25 0 0 1 .25.25v4.146a.25.25 0 0 1-.427.177L13.03 4.03 9.28 7.78a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042l3.75-3.75-1.543-1.543A.25.25 0 0 1 10.604 1Z"})})]})]})]})}const er=[{value:5e3,label:"5s"},{value:1e4,label:"10s"},{value:15e3,label:"15s"},{value:3e4,label:"30s"},{value:6e4,label:"1m"},{value:12e4,label:"2m"},{value:3e5,label:"5m"},{value:0,label:"Off"}];function tr({org:t,repo:s,runs:a,onRunsUpdate:n}){const r=L(fe),[i,l]=d.useState("all"),[o,c]=d.useState(3e4),[u,p]=d.useState(!1),[k,b]=d.useState(null),h=d.useRef(null),T=d.useCallback(async()=>{if(!(!t||!s||!r)){p(!0),b(null);try{const{fetchWorkflowRuns:A}=await ee(async()=>{const{fetchWorkflowRuns:M}=await Promise.resolve().then(()=>Bt);return{fetchWorkflowRuns:M}},void 0),w=await A(t,s);n(w)}catch(A){b(A instanceof Error?A.message:"Failed to load workflows")}finally{p(!1)}}},[t,s,r,n]);d.useEffect(()=>{T()},[T]),d.useEffect(()=>(h.current&&(clearInterval(h.current),h.current=null),o>0&&(h.current=setInterval(T,o)),()=>{h.current&&clearInterval(h.current)}),[o,T]);const v=a.filter(A=>i==="all"?!0:A.status===i),_={all:a.length,in_progress:a.filter(A=>A.status==="in_progress").length,queued:a.filter(A=>A.status==="queued").length,completed:a.filter(A=>A.status==="completed").length};return r?e.jsxs("div",{className:"tab-panel",id:"workflows-tab",children:[e.jsx("div",{style:{marginBottom:20},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:15},children:[e.jsx("div",{className:"widget-filters",style:{margin:0,flex:1},children:["all","in_progress","queued","completed"].map(A=>e.jsxs("button",{className:`filter-btn ${i===A?"filter-btn--active":""}`,onClick:()=>l(A),children:[A==="all"?"All":A==="in_progress"?"Running":A==="queued"?"Queued":"Done",e.jsxs("span",{className:"filter-btn__count",children:["(",_[A],")"]})]},A))}),e.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[e.jsx("select",{className:"widget-interval-select",value:o,onChange:A=>c(Number(A.target.value)),title:"Auto-refresh interval","aria-label":"Auto-refresh interval",children:er.map(A=>e.jsx("option",{value:A.value,children:A.label},A.value))}),e.jsx("button",{className:"widget-refresh-btn",onClick:T,title:"Refresh",style:{padding:"6px 10px"},disabled:u,children:e.jsx("svg",{width:"14",height:"14",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M1.705 8.005a.75.75 0 0 1 .834.656 5.5 5.5 0 0 0 9.592 2.97l-1.204-1.204a.25.25 0 0 1 .177-.427h3.646a.25.25 0 0 1 .25.25v3.646a.25.25 0 0 1-.427.177l-1.38-1.38A7.002 7.002 0 0 1 1.05 8.84a.75.75 0 0 1 .656-.834ZM8 2.5a5.487 5.487 0 0 0-4.131 1.869l1.204 1.204A.25.25 0 0 1 4.896 6H1.25A.25.25 0 0 1 1 5.75V2.104a.25.25 0 0 1 .427-.177l1.38 1.38A7.002 7.002 0 0 1 14.95 7.16a.75.75 0 0 1-1.49.178A5.5 5.5 0 0 0 8 2.5Z"})})})]})]})}),e.jsxs("div",{id:"service-workflows-content",children:[u&&a.length===0&&e.jsx("div",{className:"loading",children:"Loading workflow runs..."}),k&&e.jsxs("div",{className:"error-state",children:[e.jsx("p",{children:k}),e.jsx("button",{onClick:T,className:"btn-primary",children:"Try Again"})]}),!u&&!k&&v.length===0&&e.jsx("div",{className:"empty-state",children:"No workflow runs found"}),v.length>0&&e.jsx("div",{className:"workflow-runs-list",children:v.map(A=>e.jsx(Ms,{run:A},A.id))})]})]}):e.jsx("div",{className:"tab-panel",id:"workflows-tab",children:e.jsxs("div",{className:"widget-empty",children:[e.jsx("svg",{width:"32",height:"32",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M4 4a4 4 0 1 1 8 0v2h.25c.966 0 1.75.784 1.75 1.75v5.5A1.75 1.75 0 0 1 12.25 15h-8.5A1.75 1.75 0 0 1 2 13.25v-5.5C2 6.784 2.784 6 3.75 6H4Zm8.25 3.5h-8.5a.25.25 0 0 0-.25.25v5.5c0 .138.112.25.25.25h8.5a.25.25 0 0 0 .25-.25v-5.5a.25.25 0 0 0-.25-.25ZM10.5 4a2.5 2.5 0 1 0-5 0v2h5Z"})}),e.jsx("p",{children:"Configure GitHub PAT in settings to view workflow runs"}),e.jsx("button",{onClick:()=>L.getState().openModal("settings"),className:"btn btn--primary",children:"Configure Token"})]})})}function sr({org:t,repo:s}){const[a,n]=d.useState(""),[r,i]=d.useState(!1),[l,o]=d.useState(!1);d.useEffect(()=>{(async()=>{try{const{getRawBaseUrl:T}=await ee(async()=>{const{getRawBaseUrl:v}=await Promise.resolve().then(()=>$e);return{getRawBaseUrl:v}},void 0);n(T())}catch{n("https://raw.githubusercontent.com/example/scorecards/catalog")}})()},[]);const c=`https://img.shields.io/endpoint?url=${a}/badges/${t}/${s}/score.json`,u=`https://img.shields.io/endpoint?url=${a}/badges/${t}/${s}/rank.json`,p=`![Score](${c})`,k=`![Rank](${u})`,b=d.useCallback(async(h,T)=>{try{await navigator.clipboard.writeText(h),T==="score"?(i(!0),setTimeout(()=>i(!1),2e3)):(o(!0),setTimeout(()=>o(!1),2e3))}catch{const v=document.createElement("textarea");v.value=h,document.body.appendChild(v),v.select(),document.execCommand("copy"),document.body.removeChild(v),T==="score"?(i(!0),setTimeout(()=>i(!1),2e3)):(o(!0),setTimeout(()=>o(!1),2e3))}},[]);return e.jsxs("div",{className:"tab-panel",id:"badges-tab",children:[e.jsx("h4",{className:"tab-section-header",children:"Badge Preview"}),e.jsxs("div",{className:"badge-preview-container",children:[e.jsx("img",{src:c,alt:"Score Badge",style:{height:20}}),e.jsx("img",{src:u,alt:"Rank Badge",style:{height:20}})]}),e.jsx("h4",{className:"tab-section-header",style:{marginBottom:10},children:"Add to Your README"}),e.jsx("p",{className:"tab-section-description",children:"Copy the markdown below:"}),e.jsxs("div",{style:{position:"relative",marginBottom:15},children:[e.jsx("button",{onClick:()=>b(p,"score"),className:`copy-button ${r?"copied":""}`,children:r?"Copied!":"Copy"}),e.jsx("pre",{className:"badge-code-block",children:p})]}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("button",{onClick:()=>b(k,"rank"),className:`copy-button ${l?"copied":""}`,children:l?"Copied!":"Copy"}),e.jsx("pre",{className:"badge-code-block",children:k})]})]})}function ar(t){return t.charAt(0).toUpperCase()+t.slice(1)}function nr(t){if(!t)return null;const s=t.match(/Title: (.+)/),a=t.match(/OpenAPI version: ([\d.]+)/),n=t.match(/Endpoints: (\d+) paths?, (\d+) operations?/);return!s&&!a&&!n?null:{title:s?s[1].trim():null,openApiVersion:a?a[1]:null,paths:n?parseInt(n[1]):null,operations:n?parseInt(n[2]):null}}function rr(t){var n,r;const s=(n=t.checks)==null?void 0:n.find(i=>i.check_id==="06-openapi-spec"),a=(s==null?void 0:s.status)==="pass"?nr(s.stdout||""):null;if(t.service.openapi)return{hasSpec:!0,specInfo:t.service.openapi,fromConfig:!0,summary:a};if(s&&s.status==="pass"){const i=(r=s.stdout)==null?void 0:r.match(/found and validated: (.+)/);return{hasSpec:!0,specInfo:{spec_file:i?i[1].trim():"openapi.yaml"},fromConfig:!1,summary:a}}return{hasSpec:!1,specInfo:null,fromConfig:!1,summary:null}}function ir({isOpen:t,onClose:s,org:a,repo:n}){const[r,i]=d.useState(!0),[l,o]=d.useState(null),[c,u]=d.useState(null),[p,k]=d.useState([]),[b,h]=d.useState(!1);d.useEffect(()=>{if(!t||!a||!n)return;(async()=>{var M;i(!0),o(null);try{const{fetchWithHybridAuth:E}=await ee(async()=>{const{fetchWithHybridAuth:f}=await Promise.resolve().then(()=>$e);return{fetchWithHybridAuth:f}},void 0),S=`results/${a}/${n}/results.json`,m=`registry/${a}/${n}.json`,[g,I]=await Promise.all([E(S),E(m)]),y=g.response,$=I.response;if(!y.ok)throw new Error(`Failed to fetch results: ${y.status}`);const R=await y.json();if($.ok){const f=await $.json();f.installation_pr&&(R.installation_pr=f.installation_pr),f.default_branch&&(R.default_branch=f.default_branch)}const D={service:{...R.service,rank:R.rank,score:R.score,installed:R.installed,default_branch:R.default_branch,checks_hash:R.checks_hash,openapi:(M=R.service)==null?void 0:M.openapi},checks:R.checks||[],contributors:R.recent_contributors||[]};u(D);const O=L.getState().ui.checksHash,N=O!==null&&R.checks_hash!==O;h(N)}catch(E){o(E instanceof Error?E.message:"Failed to load service")}finally{i(!1)}})()},[t,a,n]);const T=d.useCallback(async()=>{var w,M;if(!(!a||!n))try{const{triggerScorecardWorkflow:E}=await ee(async()=>{const{triggerScorecardWorkflow:S}=await Promise.resolve().then(()=>Bt);return{triggerScorecardWorkflow:S}},void 0);await E(a,n),(w=window.showToast)==null||w.call(window,"Workflow triggered successfully","success")}catch(E){(M=window.showToast)==null||M.call(window,E instanceof Error?E.message:"Failed to trigger workflow","error")}},[a,n]),v=d.useCallback(async()=>{var w;if(!(!a||!n)){i(!0);try{const{fetchWithHybridAuth:M}=await ee(async()=>{const{fetchWithHybridAuth:D}=await Promise.resolve().then(()=>$e);return{fetchWithHybridAuth:D}},void 0),E=`results/${a}/${n}/results.json`,S=`registry/${a}/${n}.json`,[m,g]=await Promise.all([M(E),M(S)]),I=m.response,y=g.response;if(!I.ok)throw new Error(`Failed to fetch results: ${I.status}`);const $=await I.json();if(y.ok){const D=await y.json();D.installation_pr&&($.installation_pr=D.installation_pr),D.default_branch&&($.default_branch=D.default_branch)}const R={service:{...$.service,rank:$.rank,score:$.score,installed:$.installed,default_branch:$.default_branch,checks_hash:$.checks_hash,openapi:(w=$.service)==null?void 0:w.openapi},checks:$.checks||[],contributors:$.recent_contributors||[]};u(R)}catch(M){o(M instanceof Error?M.message:"Failed to refresh")}finally{i(!1)}}},[a,n]),_=d.useMemo(()=>{if(!c)return[];const w=c.service,M=c.checks||[],E=c.contributors||[],S=w.links||[],m=rr(c),g=[{id:"checks",label:"Check Results",content:e.jsx(Gn,{checks:M})}];return m.hasSpec&&g.push({id:"api",label:"API Specification",content:e.jsx(Wn,{openapiInfo:m,org:a||"",repo:n||"",defaultBranch:w.default_branch||"main"})}),S.length>0&&g.push({id:"links",label:"Links",content:e.jsx(Un,{links:S})}),E.length>0&&g.push({id:"contributors",label:"Contributors",content:e.jsx(Qn,{contributors:E})}),g.push({id:"workflows",label:"Workflow Runs",content:e.jsx(tr,{org:a||"",repo:n||"",runs:p,onRunsUpdate:k})}),g.push({id:"badges",label:"Badges",content:e.jsx(sr,{org:a||"",repo:n||""})}),g},[c,a,n,p]),A=()=>{if(r)return e.jsx("div",{className:"loading",children:"Loading service details..."});if(l)return e.jsxs("div",{className:"error-state",children:[e.jsx("h3",{children:"Error loading service"}),e.jsx("p",{children:l}),e.jsx("button",{onClick:v,className:"btn-primary",children:"Try Again"})]});if(!c)return e.jsx("div",{className:"empty-state",children:"Service not found"});const w=c.service,M=c.checks||[],E=M.filter(g=>g.status==="pass").length,S=M.filter(g=>g.status!=="excluded").length,m=M.filter(g=>g.status==="excluded").length;return e.jsxs("div",{id:"service-detail",children:[e.jsxs("div",{className:"service-modal-title-row",children:[e.jsx("h2",{children:w.name}),e.jsx("div",{className:`rank-badge modal-header-badge ${w.rank}`,children:ar(w.rank)})]}),e.jsxs("p",{className:"tab-section-description",children:[a,"/",n]}),e.jsxs("div",{className:"service-modal-actions",children:[e.jsxs("a",{href:`https://github.com/${a}/${n}`,target:"_blank",rel:"noopener noreferrer",className:"github-button",title:"View on GitHub",children:[e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"})}),"View on GitHub"]}),e.jsxs("button",{onClick:v,className:"github-button",title:"Refresh data",children:[e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M1.705 8.005a.75.75 0 0 1 .834.656 5.5 5.5 0 0 0 9.592 2.97l-1.204-1.204a.25.25 0 0 1 .177-.427h3.646a.25.25 0 0 1 .25.25v3.646a.25.25 0 0 1-.427.177l-1.38-1.38A7.002 7.002 0 0 1 1.05 8.84a.75.75 0 0 1 .656-.834ZM8 2.5a5.487 5.487 0 0 0-4.131 1.869l1.204 1.204A.25.25 0 0 1 4.896 6H1.25A.25.25 0 0 1 1 5.75V2.104a.25.25 0 0 1 .427-.177l1.38 1.38A7.002 7.002 0 0 1 14.95 7.16a.75.75 0 0 1-1.49.178A5.5 5.5 0 0 0 8 2.5Z"})}),"Refresh Data"]}),b&&w.installed&&e.jsx("button",{onClick:T,className:"github-button primary",title:"Re-run scorecard workflow",children:"Run Scorecard"})]}),b&&e.jsxs("div",{className:"staleness-warning",children:[e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M6.457 1.047c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0 1 14.082 15H1.918a1.75 1.75 0 0 1-1.543-2.575L6.457 1.047ZM8 5a.75.75 0 0 0-.75.75v2.5a.75.75 0 0 0 1.5 0v-2.5A.75.75 0 0 0 8 5Zm0 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z"})}),e.jsx("span",{children:"This service was scored with an older version of checks. Re-run the scorecard to get updated results."})]}),e.jsxs("div",{className:"modal-stats-container",children:[e.jsxs("div",{className:"modal-stat-item",children:[e.jsx("div",{className:"modal-stat-value",children:w.score}),e.jsx("div",{className:"modal-stat-label",children:"Score"})]}),e.jsxs("div",{className:"modal-stat-item",children:[e.jsxs("div",{className:"modal-stat-value",children:[E,"/",S]}),e.jsx("div",{className:"modal-stat-label",children:"Checks Passed"})]}),m>0&&e.jsxs("div",{className:"modal-stat-item",children:[e.jsx("div",{className:"modal-stat-value modal-stat-excluded",children:m}),e.jsx("div",{className:"modal-stat-label",children:"Excluded"})]})]}),e.jsx(vs,{tabs:_,defaultTab:"checks",showScrollArrows:!0})]})};return e.jsx(ie,{isOpen:t,onClose:s,className:"service-modal-wrapper",contentClassName:"service-modal-content",testId:"service-modal",children:A()})}function lr({services:t,onServiceClick:s}){return!t||t.length===0?e.jsx("div",{className:"tab-panel",id:"team-tab-services",children:e.jsx("div",{className:"empty-state",children:"No services in this team"})}):e.jsx("div",{className:"tab-panel",id:"team-tab-services",children:e.jsx("div",{className:"team-services-list",children:t.map(a=>{const n=a.score!==null&&a.score!==void 0?Math.round(a.score):"-",r=a.rank?`rank-${a.rank}`:"";return e.jsxs("div",{className:"team-service-item",onClick:()=>s(a.org,a.repo),role:"button",tabIndex:0,onKeyDown:i=>{(i.key==="Enter"||i.key===" ")&&s(a.org,a.repo)},children:[e.jsx("span",{className:"service-name",children:a.repo}),e.jsx("span",{className:`service-score ${r}`,children:n})]},`${a.org}/${a.repo}`)})})})}const or=["platinum","gold","silver","bronze"];function cr(t){return t.charAt(0).toUpperCase()+t.slice(1)}function dr({rankDistribution:t,serviceCount:s}){return e.jsx("div",{className:"tab-panel",id:"team-tab-distribution",children:e.jsx("div",{className:"rank-distribution-detail",children:or.map(a=>{const n=t[a]||0,r=s>0?Math.round(n/s*100):0;return e.jsxs("div",{className:"rank-dist-row",children:[e.jsx("span",{className:"rank-dist-label",children:cr(a)}),e.jsx("div",{className:"rank-dist-bar-container",children:e.jsx("div",{className:`rank-dist-bar rank-${a}`,style:{width:`${r}%`}})}),e.jsx("span",{className:"rank-dist-count",children:n})]},a)})})})}function ur({teamServices:t,teamName:s}){const a=d.useRef(null),[n,r]=d.useState([]),[i,l]=d.useState(null),[o,c]=d.useState(!0),[u,p]=d.useState(null),[k,b]=d.useState(!1),[h,T]=d.useState("");d.useEffect(()=>{if(!k)return;const g=I=>{a.current&&!a.current.contains(I.target)&&b(!1)};return document.addEventListener("mousedown",g),()=>document.removeEventListener("mousedown",g)},[k]),d.useEffect(()=>{(async()=>{var I;c(!0);try{const{loadChecks:y}=await ee(async()=>{const{loadChecks:R}=await Promise.resolve().then(()=>Lt);return{loadChecks:R}},void 0),$=await y();r($.checks||[]),((I=$.checks)==null?void 0:I.length)>0&&!i&&l($.checks[0].id)}catch(y){p(y instanceof Error?y.message:"Failed to load check data")}finally{c(!1)}})()},[i]);const v=d.useMemo(()=>{if(!i||t.length===0)return null;const g=t.map(O=>{var C,j;const N=(C=O.check_results)==null?void 0:C[i],f=(j=O.excluded_checks)==null?void 0:j.find(x=>x.check===i);return{org:O.org,repo:O.repo,name:O.name,score:O.score,rank:O.rank,checkStatus:f?"excluded":N==="pass"?"pass":"fail",exclusionReason:f==null?void 0:f.reason}}),I=g.filter(O=>O.checkStatus==="pass").length,y=g.filter(O=>O.checkStatus==="fail").length,$=g.filter(O=>O.checkStatus==="excluded").length,R=I+y,D=R>0?Math.round(I/R*100):0;return{passing:I,failing:y,excluded:$,total:g.length,activeTotal:R,percentage:D,services:g}},[i,t]),_=d.useCallback(g=>{l(g),b(!1)},[]),A=d.useCallback((g,I)=>{var y;(y=window.showServiceDetail)==null||y.call(window,g,I)},[]),w=d.useMemo(()=>{if(!h)return n;const g=h.toLowerCase();return n.filter(I=>{var y;return I.name.toLowerCase().includes(g)||I.id.toLowerCase().includes(g)||((y=I.description)==null?void 0:y.toLowerCase().includes(g))})},[n,h]),M=n.find(g=>g.id===i);if(o)return e.jsx("div",{className:"tab-panel",id:"team-tab-adoption",children:e.jsxs("div",{className:"check-adoption-loading",children:[e.jsx("span",{className:"loading-spinner"})," Loading check data..."]})});if(u)return e.jsx("div",{className:"tab-panel",id:"team-tab-adoption",children:e.jsx("div",{className:"empty-state",children:u})});if(n.length===0)return e.jsx("div",{className:"tab-panel",id:"team-tab-adoption",children:e.jsx("div",{className:"empty-state",children:"No check metadata available"})});const E=(v==null?void 0:v.services.filter(g=>g.checkStatus==="pass"))||[],S=(v==null?void 0:v.services.filter(g=>g.checkStatus==="fail"))||[],m=(v==null?void 0:v.services.filter(g=>g.checkStatus==="excluded"))||[];return e.jsx("div",{className:"tab-panel",id:"team-tab-adoption",children:e.jsxs("div",{className:"check-adoption-content",children:[e.jsxs("div",{className:"check-card-selector",ref:a,children:[e.jsx("button",{onClick:()=>b(!k),className:B("check-card-selected",k&&"open"),children:M?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"check-card-header",children:[e.jsx("span",{className:"check-card-name",children:M.name}),e.jsx("span",{className:"check-card-category",children:M.category}),e.jsx("svg",{className:"check-card-chevron",width:"20",height:"20",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M4.22 6.22a.75.75 0 0 1 1.06 0L8 8.94l2.72-2.72a.75.75 0 0 1 1.06 1.06l-3.25 3.25a.75.75 0 0 1-1.06 0L4.22 7.28a.75.75 0 0 1 0-1.06z"})})]}),e.jsx("p",{className:"check-card-description",children:M.description})]}):e.jsx("span",{className:"check-card-placeholder",children:"Select a check to view adoption..."})}),e.jsxs("div",{className:B("check-card-dropdown",k&&"open"),children:[e.jsx("div",{className:"check-card-search",children:e.jsx("input",{type:"text",value:h,onChange:g=>T(g.target.value),placeholder:"Search checks...",autoFocus:k})}),e.jsxs("div",{className:"check-card-options",children:[w.map(g=>{var I;return e.jsxs("button",{onClick:()=>_(g.id),className:B("check-card-option",g.id===i&&"selected"),children:[e.jsxs("div",{className:"check-card-option-header",children:[e.jsx("span",{className:"check-card-name",children:g.name}),e.jsx("span",{className:"check-card-category",children:g.category})]}),e.jsxs("p",{className:"check-card-option-desc",children:[(I=g.description)==null?void 0:I.slice(0,100),g.description&&g.description.length>100?"...":""]})]},g.id)}),w.length===0&&e.jsx("div",{className:"check-card-empty",children:"No checks found"})]})]})]}),v&&e.jsxs("div",{className:"adoption-progress",children:[e.jsxs("div",{className:"progress-header",children:[e.jsx("span",{className:"progress-label",children:"Adoption Rate"}),e.jsxs("span",{className:"progress-value",children:[v.percentage,"% (",v.passing,"/",v.activeTotal," active)",m.length>0&&e.jsxs("span",{className:"excluded-note",children:[m.length," excluded"]})]})]}),e.jsx("div",{className:"progress-bar-large",children:e.jsx("div",{className:`progress-fill ${v.percentage>=80?"high":v.percentage>=50?"medium":"low"}`,style:{width:`${v.percentage}%`}})})]}),e.jsxs("div",{className:`adoption-lists ${m.length>0?"three-columns":""}`,children:[e.jsxs("div",{className:"adoption-column passing",children:[e.jsxs("h4",{children:["Passing (",E.length,")"]}),e.jsx("div",{className:"adoption-service-list",children:E.length===0?e.jsx("div",{className:"empty-list",children:"No passing services"}):E.map(g=>e.jsxs("div",{className:"adoption-service-item passing",onClick:()=>A(g.org,g.repo),children:[e.jsx("span",{className:"service-name",children:g.name}),e.jsx("span",{className:`service-score rank-${g.rank}`,children:Math.round(g.score)})]},`${g.org}/${g.repo}`))})]}),e.jsxs("div",{className:"adoption-column failing",children:[e.jsxs("h4",{children:["Failing (",S.length,")"]}),e.jsx("div",{className:"adoption-service-list",children:S.length===0?e.jsx("div",{className:"empty-list",children:"No failing services"}):S.map(g=>e.jsxs("div",{className:"adoption-service-item failing",onClick:()=>A(g.org,g.repo),children:[e.jsx("span",{className:"service-name",children:g.name}),e.jsx("span",{className:`service-score rank-${g.rank}`,children:Math.round(g.score)})]},`${g.org}/${g.repo}`))})]}),m.length>0&&e.jsxs("div",{className:"adoption-column excluded",children:[e.jsxs("h4",{children:["Excluded (",m.length,")"]}),e.jsx("div",{className:"adoption-service-list excluded-list",children:m.map(g=>e.jsxs("div",{className:"adoption-service-item excluded",onClick:()=>A(g.org,g.repo),children:[e.jsx("span",{className:"service-name",children:g.name}),e.jsx("span",{className:"exclusion-reason",title:g.exclusionReason||"Excluded",children:g.exclusionReason||"Excluded"})]},`${g.org}/${g.repo}`))})]})]})]})})}function hr({githubOrg:t,githubSlug:s,members:a,loading:n}){const r=d.useCallback(()=>{var l;(l=window.openSettings)==null||l.call(window)},[]);if(!t||!s)return e.jsx("div",{className:"tab-panel",id:"team-tab-github",children:e.jsx("div",{className:"team-not-linked",children:"Not linked to a GitHub team"})});const i=`https://github.com/orgs/${t}/teams/${s}`;return n?e.jsx("div",{className:"tab-panel",id:"team-tab-github",children:e.jsxs("div",{className:"team-github-section team-github-loading",children:[e.jsx("span",{className:"loading-spinner"})," Loading GitHub team..."]})}):a===null?e.jsx("div",{className:"tab-panel",id:"team-tab-github",children:e.jsxs("div",{className:"team-github-section",children:[e.jsxs("a",{href:i,target:"_blank",rel:"noopener noreferrer",className:"team-github-link",children:[e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"})}),s,e.jsx("svg",{width:"14",height:"14",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0ZM1.5 8a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0Zm4.879-2.773 4.264 2.559a.25.25 0 0 1 0 .428l-4.264 2.559A.25.25 0 0 1 6 10.559V5.442a.25.25 0 0 1 .379-.215Z"})})]}),e.jsx("div",{className:"team-github-signin",children:e.jsx("button",{className:"btn-link",onClick:r,children:"Sign in to view team members"})})]})}):!a||a.length===0?e.jsx("div",{className:"tab-panel",id:"team-tab-github",children:e.jsxs("div",{className:"team-github-section",children:[e.jsxs("a",{href:i,target:"_blank",rel:"noopener noreferrer",className:"team-github-link",children:[e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"})}),s,e.jsx("svg",{width:"14",height:"14",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0ZM1.5 8a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0Zm4.879-2.773 4.264 2.559a.25.25 0 0 1 0 .428l-4.264 2.559A.25.25 0 0 1 6 10.559V5.442a.25.25 0 0 1 .379-.215Z"})})]}),e.jsx("div",{className:"team-members-empty",children:"No members found or unable to access team"})]})}):e.jsx("div",{className:"tab-panel",id:"team-tab-github",children:e.jsxs("div",{className:"team-github-section",children:[e.jsxs("a",{href:i,target:"_blank",rel:"noopener noreferrer",className:"team-github-link",children:[e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"})}),s,e.jsx("svg",{width:"14",height:"14",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0ZM1.5 8a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0Zm4.879-2.773 4.264 2.559a.25.25 0 0 1 0 .428l-4.264 2.559A.25.25 0 0 1 6 10.559V5.442a.25.25 0 0 1 .379-.215Z"})})]}),e.jsxs("div",{className:"team-members",children:[e.jsxs("span",{className:"members-label",children:["Members (",a.length,"):"]}),e.jsx("div",{className:"members-grid",children:a.map(l=>e.jsxs("a",{href:l.html_url,target:"_blank",rel:"noopener noreferrer",className:"team-member",title:l.login,children:[e.jsx("img",{src:`${l.avatar_url}&s=48`,alt:l.login,className:"team-member-avatar"}),e.jsxs("span",{className:"team-member-name",children:["@",l.login]})]},l.login))})]})]})})}function mr(t){return t.charAt(0).toUpperCase()+t.slice(1)}function gr(t){const s=["platinum","gold","silver","bronze"];for(const a of s)if(t[a]>0)return a;return"bronze"}function fr({isOpen:t,onClose:s,teamName:a}){const[n,r]=d.useState(!0),[i,l]=d.useState(null),[o,c]=d.useState(null),[u,p]=d.useState([]),[k,b]=d.useState(null),[h,T]=d.useState(!1);d.useEffect(()=>{if(!t||!a)return;(async()=>{r(!0),l(null);try{const E=L.getState().teams.all||[],S=L.getState().services.all||[];if(E.length===0&&S.length>0){const{calculateTeamStats:$}=await ee(async()=>{const{calculateTeamStats:D}=await Promise.resolve().then(()=>gt);return{calculateTeamStats:D}},void 0),R=$(S);L.getState().teams.all=Object.values(R).map(D=>({...D,github_org:D.github_org??void 0,github_slug:D.github_slug??void 0}))}const m=(L.getState().teams.all||[]).find($=>$.name===a);if(!m){l("Team not found");return}c(m);const{getTeamName:g}=await ee(async()=>{const{getTeamName:$}=await Promise.resolve().then(()=>gt);return{getTeamName:$}},void 0),I=a.toLowerCase(),y=S.filter($=>{var R;return((R=g($))==null?void 0:R.toLowerCase())===I});p(y)}catch(E){l(E instanceof Error?E.message:"Failed to load team")}finally{r(!1)}})()},[t,a]),d.useEffect(()=>{if(!t||!(o!=null&&o.github_org)||!(o!=null&&o.github_slug))return;(async()=>{T(!0);try{const{fetchTeamMembers:E}=await ee(async()=>{const{fetchTeamMembers:m}=await import("./github-teams-Cp8A-NML.js");return{fetchTeamMembers:m}},__vite__mapDeps([0,1])),S=await E(o.github_org,o.github_slug);b(S)}catch{b([])}finally{T(!1)}})()},[t,o==null?void 0:o.github_org,o==null?void 0:o.github_slug]);const v=d.useCallback((M,E)=>{var S;(S=window.showServiceDetail)==null||S.call(window,M,E)},[]),_=d.useCallback(()=>{var E;if(!o)return;const M=o.id||o.name.toLowerCase().replace(/\s+/g,"-");(E=window.openTeamEditModal)==null||E.call(window,"edit",M)},[o]),A=d.useMemo(()=>o?[{id:"services",label:"Services",content:e.jsx(lr,{services:u,onServiceClick:v})},{id:"distribution",label:"Distribution",content:e.jsx(dr,{rankDistribution:o.rankDistribution??{},serviceCount:o.serviceCount??0})},{id:"adoption",label:"Check Adoption",content:e.jsx(ur,{teamServices:u,teamName:a||""})},{id:"github",label:"GitHub",content:e.jsx(hr,{githubOrg:o.github_org,githubSlug:o.github_slug,members:k,loading:h})}]:[],[o,u,a,k,h,v]),w=()=>{if(n)return e.jsx("div",{className:"loading",children:"Loading team details..."});if(i)return e.jsxs("div",{className:"error-state",children:[e.jsx("h3",{children:"Error loading team"}),e.jsx("p",{children:i})]});if(!o)return e.jsx("div",{className:"empty-state",children:"Team not found"});const M=gr(o.rankDistribution??{}),E=o.id||o.name.toLowerCase().replace(/\s+/g,"-");return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"service-modal-title-row",children:[e.jsxs("h2",{children:[o.name,e.jsx("button",{className:"edit-icon-btn",onClick:_,title:"Edit Team",children:e.jsx("svg",{width:"14",height:"14",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M11.013 1.427a1.75 1.75 0 012.474 0l1.086 1.086a1.75 1.75 0 010 2.474l-8.61 8.61c-.21.21-.47.364-.756.445l-3.251.93a.75.75 0 01-.927-.928l.929-3.25c.081-.286.235-.547.445-.758l8.61-8.61zm.176 4.823L9.75 4.81l-6.286 6.287a.253.253 0 00-.064.108l-.558 1.953 1.953-.558a.253.253 0 00.108-.064l6.286-6.286zm1.238-3.763a.25.25 0 00-.354 0L10.811 3.75l1.439 1.44 1.263-1.263a.25.25 0 000-.354l-1.086-1.086z"})})})]}),e.jsx("div",{className:`rank-badge modal-header-badge ${M}`,children:mr(M)})]}),e.jsxs("div",{className:"team-metadata",children:[e.jsxs("span",{className:"team-id",children:["ID: ",E]}),o.description&&e.jsx("p",{className:"team-description",children:o.description}),o.aliases&&o.aliases.length>0&&e.jsxs("div",{className:"team-aliases",children:[e.jsx("span",{className:"aliases-label",children:"Also known as:"}),o.aliases.map((S,m)=>e.jsx("span",{className:"alias-tag",children:S},m))]})]}),e.jsxs("div",{className:"team-modal-stats",children:[e.jsxs("div",{className:"team-modal-stat",children:[e.jsx("span",{className:"stat-value",children:Math.round(o.averageScore||0)}),e.jsx("span",{className:"stat-label",children:"Average Score"})]}),e.jsxs("div",{className:"team-modal-stat",children:[e.jsx("span",{className:"stat-value",children:o.serviceCount}),e.jsx("span",{className:"stat-label",children:"Services"})]}),e.jsxs("div",{className:"team-modal-stat",children:[e.jsx("span",{className:"stat-value",children:o.installedCount}),e.jsx("span",{className:"stat-label",children:"Installed"})]}),e.jsxs("div",{className:`team-modal-stat ${(o.staleCount??0)>0?"warning":""}`,children:[e.jsx("span",{className:"stat-value",children:o.staleCount||0}),e.jsx("span",{className:"stat-label",children:"Stale"})]})]}),(o.slack_channel||o.oncall_rotation)&&e.jsxs("div",{className:"team-modal-contact",children:[o.slack_channel&&e.jsxs("span",{className:"contact-item",children:[e.jsx("svg",{width:"14",height:"14",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M5.2 8.4a1.2 1.2 0 102.4 0 1.2 1.2 0 00-2.4 0zm6 0a1.2 1.2 0 102.4 0 1.2 1.2 0 00-2.4 0z"})}),o.slack_channel]}),o.oncall_rotation&&e.jsxs("span",{className:"contact-item",children:[e.jsx("svg",{width:"14",height:"14",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0ZM1.5 8a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0Zm7-3.25v2.992l2.028.812a.75.75 0 0 1-.557 1.392l-2.5-1A.75.75 0 0 1 7 8.25v-3.5a.75.75 0 0 1 1.5 0Z"})}),o.oncall_rotation]})]}),e.jsx(vs,{tabs:A,defaultTab:"services"})]})};return e.jsx(ie,{isOpen:t,onClose:s,className:"team-modal-wrapper",contentClassName:"team-modal-content",testId:"team-modal",children:e.jsx("div",{id:"team-detail",children:w()})})}const pr=["Scorecards Setup","Documentation","Testing & CI","Configuration & Compliance","Other"];function vr(t,s){let a=0,n=0,r=0;t.forEach(o=>{var p,k;const c=(p=o.check_results)==null?void 0:p[s];((k=o.excluded_checks)==null?void 0:k.some(b=>b.check===s))?r++:c==="pass"?a++:n++});const i=a+n,l=i>0?Math.round(a/i*100):0;return{passing:a,failing:n,excluded:r,total:t.length,percentage:l}}function xr({check:t,stats:s,currentState:a,onStateChange:n,visible:r}){let i="low";return s.percentage>=75?i="high":s.percentage>=40&&(i="medium"),r?e.jsxs("div",{className:"check-option-card","data-check-id":t.id,children:[e.jsxs("div",{className:"check-option-info",children:[e.jsx("div",{className:"check-option-name",children:t.name}),t.description&&e.jsx("div",{className:"check-option-description",children:t.description}),e.jsxs("div",{className:"check-option-stats",children:[e.jsxs("span",{className:"check-option-stat passing",children:[e.jsx("svg",{width:"12",height:"12",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"})}),e.jsx("span",{className:"check-option-stat-value",children:s.passing})," ","passing"]}),e.jsxs("span",{className:"check-option-stat failing",children:[e.jsx("svg",{width:"12",height:"12",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M3.72 3.72a.75.75 0 0 1 1.06 0L8 6.94l3.22-3.22a.749.749 0 0 1 1.275.326.749.749 0 0 1-.215.734L9.06 8l3.22 3.22a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L8 9.06l-3.22 3.22a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042L6.94 8 3.72 4.78a.75.75 0 0 1 0-1.06Z"})}),e.jsx("span",{className:"check-option-stat-value",children:s.failing})," ","failing"]}),s.excluded>0&&e.jsxs("span",{className:"check-option-stat excluded",children:[e.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 16 16",fill:"currentColor",children:[e.jsx("circle",{cx:"8",cy:"8",r:"7",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),e.jsx("line",{x1:"3",y1:"13",x2:"13",y2:"3",stroke:"currentColor",strokeWidth:"1.5"})]}),e.jsx("span",{className:"check-option-stat-value",children:s.excluded})," ","excluded"]}),e.jsxs("span",{className:"check-option-progress",children:[e.jsx("span",{className:"check-option-progress-bar",children:e.jsx("span",{className:`check-option-progress-fill ${i}`,style:{width:`${s.percentage}%`}})}),e.jsxs("span",{className:"check-option-progress-text",children:[s.percentage,"%"]})]})]})]}),e.jsxs("div",{className:"check-state-toggle",children:[e.jsx("button",{className:`state-btn state-any ${a===null?"active":""}`,onClick:()=>n(t.id,null),title:"Any status",children:"Any"}),e.jsx("button",{className:`state-btn state-pass ${a==="pass"?"active":""}`,onClick:()=>n(t.id,"pass"),title:"Must pass",children:e.jsx("svg",{width:"12",height:"12",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"})})}),e.jsx("button",{className:`state-btn state-fail ${a==="fail"?"active":""}`,onClick:()=>n(t.id,"fail"),title:"Must fail",children:e.jsx("svg",{width:"12",height:"12",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M3.72 3.72a.75.75 0 0 1 1.06 0L8 6.94l3.22-3.22a.749.749 0 0 1 1.275.326.749.749 0 0 1-.215.734L9.06 8l3.22 3.22a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L8 9.06l-3.22 3.22a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042L6.94 8 3.72 4.78a.75.75 0 0 1 0-1.06Z"})})})]})]}):null}function wr({category:t,checks:s,filters:a,services:n,searchQuery:r,onStateChange:i,collapsed:l,onToggle:o}){let c=0,u=0;const p=new Map;s.forEach(v=>{const _=vr(n,v.id);p.set(v.id,_),c+=_.passing,u+=_.total});const k=u>0?Math.round(c/u*100):0,b=r.toLowerCase(),h=s.filter(v=>{var _;return r?v.name.toLowerCase().includes(b)||v.id.toLowerCase().includes(b)||((_=v.description)==null?void 0:_.toLowerCase().includes(b)):!0});if(h.length===0)return null;const T=t.toLowerCase().replace(/\s+/g,"-");return e.jsxs("div",{className:`check-category-section ${l?"collapsed":""}`,"data-category":T,children:[e.jsxs("div",{className:"check-category-header",onClick:o,children:[e.jsxs("div",{className:"check-category-header-left",children:[e.jsx("svg",{width:"12",height:"12",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M6.22 3.22a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042L9.94 8 6.22 4.28a.75.75 0 0 1 0-1.06Z"})}),e.jsx("span",{className:"check-category-header-title",children:t}),e.jsxs("span",{className:"check-category-header-count",children:["(",s.length,")"]})]}),n.length>0&&e.jsxs("span",{className:"check-category-header-stats",children:[k,"% avg adoption"]})]}),e.jsx("div",{className:"check-category-content",id:`check-category-${T}`,children:h.map(v=>e.jsx(xr,{check:v,stats:p.get(v.id),currentState:a.get(v.id)||null,onStateChange:i,visible:!0},v.id))})]})}function jr({isOpen:t,onClose:s,filters:a,onFiltersChange:n,services:r}){const[i,l]=d.useState([]),[o,c]=d.useState(!0),[u,p]=d.useState(""),[k,b]=d.useState(new Set);d.useEffect(()=>{if(!t)return;(async()=>{c(!0);try{const{loadChecks:M}=await ee(async()=>{const{loadChecks:S}=await Promise.resolve().then(()=>Lt);return{loadChecks:S}},void 0),E=await M();l(E.checks||[])}catch{}finally{c(!1)}})()},[t]);const h=d.useMemo(()=>{const w={};i.forEach(E=>{const S=E.category||"Other";w[S]||(w[S]=[]),w[S].push(E)});const M={};return pr.forEach(E=>{const S=Object.keys(w).find(m=>m.toLowerCase()===E.toLowerCase());S&&(M[E]=w[S])}),M},[i]),T=d.useCallback((w,M)=>{const E=new Map(a);M===null?E.delete(w):E.set(w,M),n(E)},[a,n]),v=d.useCallback(()=>{n(new Map)},[n]),_=d.useCallback(w=>{b(M=>{const E=new Set(M);return E.has(w)?E.delete(w):E.add(w),E})},[]),A=a.size;return e.jsxs(ie,{isOpen:t,onClose:s,className:"check-filter-modal-wrapper",contentClassName:"check-filter-modal-content",showCloseButton:!1,testId:"check-filter-modal",children:[e.jsxs("div",{className:"check-filter-modal-header",children:[e.jsx("h2",{children:"Filter by Check"}),e.jsx("button",{className:"modal-close",onClick:s,"aria-label":"Close modal",children:"×"})]}),e.jsx("div",{className:"check-filter-modal-body",children:o?e.jsx("div",{className:"loading",children:"Loading checks..."}):e.jsxs("div",{id:"check-filter-modal-content",children:[e.jsxs("div",{className:"check-filter-search-section",children:[e.jsx("input",{type:"text",id:"check-filter-search",placeholder:"Search checks by name or description...",value:u,onChange:w=>p(w.target.value),autoFocus:!0}),A>0&&e.jsxs("div",{className:"check-filter-summary",children:[e.jsxs("span",{className:"check-filter-summary-count",children:[e.jsx("strong",{children:A})," filter",A!==1?"s":""," active"]}),e.jsx("button",{className:"check-clear-btn",onClick:v,children:"Clear all"})]})]}),e.jsx("div",{id:"check-filter-categories",children:Object.keys(h).length===0?e.jsx("div",{className:"check-filter-empty",children:"No checks available"}):Object.entries(h).map(([w,M])=>e.jsx(wr,{category:w,checks:M,filters:a,services:r,searchQuery:u,onStateChange:T,collapsed:k.has(w),onToggle:()=>_(w)},w))})]})})]})}let Ze=null;function re(){return Ze}function Ls(){return!!Ze}function ze(t){Ze=t?t.trim():null}function pe(){Ze=null}async function Ve(t){try{return(await fetch("https://api.github.com/user",{headers:{Authorization:`token ${t}`,Accept:"application/vnd.github.v3+json"}})).ok}catch(s){return console.error("Error validating PAT:",s),!1}}async function br(t){return!t||!t.trim()?!1:await Ve(t.trim())?(ze(t.trim()),!0):!1}function kr(){return re()}const Cr=Object.freeze(Object.defineProperty({__proto__:null,clearToken:pe,getToken:re,getTokenForAuth:kr,hasToken:Ls,setToken:ze,validateAndSaveToken:br,validateToken:Ve},Symbol.toStringTag,{value:"Module"}));function Nr(){return e.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"3"}),e.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]})}function Sr(){return e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"}),e.jsx("path",{d:"m9 12 2 2 4-4"})]})}function yr(){return e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),e.jsx("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"})]})}function Tr(){return e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"})})}function _r(){return e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),e.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]})}function Ar(){return e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M6.22 3.22a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.75.75 0 0 1-1.06-1.06L9.94 8 6.22 4.28a.75.75 0 0 1 0-1.06z"})})}function rs(){return e.jsxs("svg",{className:"settings-spinner",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}function Er(){return e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M13 2L3 14h9l-1 8 10-12h-9l1-8z"})})}function Mr(){return e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),e.jsx("circle",{cx:"12",cy:"12",r:"3"})]})}function Lr(){return e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),e.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]})}function Rr({isOpen:t,onClose:s}){const a=L(fe),n=L(En),r=L(Mn),i=L(f=>f.setAuth),l=L(f=>f.setRateLimit),o=L(f=>f.setAuthUser),[c,u]=d.useState(""),[p,k]=d.useState(!1),[b,h]=d.useState(!1),[T,v]=d.useState(!1),[_,A]=d.useState(null),[w,M]=d.useState(!1),E=(f,C)=>{A({message:f,type:C})},S=d.useCallback(async()=>{try{const f=a,C=f?{Authorization:`token ${f}`}:{},x=await(await fetch("https://api.github.com/rate_limit",{headers:C})).json(),P={remaining:x.rate.remaining,limit:x.rate.limit,reset:new Date(x.rate.reset*1e3),used:x.rate.used};l(P)}catch(f){console.error("Error checking rate limit:",f),l({remaining:null,limit:null,reset:null,error:"Failed to fetch rate limit"})}},[a,l]);d.useEffect(()=>{t&&a?u(a):t&&!a&&u("")},[t,a]),d.useEffect(()=>{t&&S()},[t,S]);const m=async f=>{try{const C=await fetch("https://api.github.com/user",{headers:{Authorization:`token ${f}`,Accept:"application/vnd.github.v3+json"}});return C.ok?await C.json():null}catch{return null}},g=d.useCallback(async()=>{const f=c.trim();if(!f){E("Please enter a valid PAT","error");return}h(!0),E("Validating token...","info");try{if(await Ve(f)){ze(f),i(f,!0);const j=await m(f);j&&o({login:j.login,avatar_url:j.avatar_url}),E("PAT saved successfully! Using GitHub API mode.","success"),await S()}else E("Invalid PAT. Please check and try again.","error")}catch(C){console.error("Error validating PAT:",C),E("Error validating PAT. Please try again.","error")}finally{h(!1)}},[c,i,o,S]),I=d.useCallback(()=>{pe(),i(null,!1),o(null),u(""),E("PAT cleared. Using public CDN mode.","info"),S()},[i,o,S]),y=d.useCallback(async()=>{v(!0),await S(),v(!1),E("Rate limit updated","info")},[S]),$=f=>f?(f instanceof Date?f:new Date(f)).toLocaleTimeString():"-",R=()=>!(n!=null&&n.remaining)||!(n!=null&&n.limit)?0:n.remaining/n.limit*100,D=n!==null&&n.remaining!==null&&n.remaining<100,O=n!==null&&n.remaining!==null&&n.remaining<10,N=()=>O?"critical":D?"low":"normal";return e.jsxs(e.Fragment,{children:[e.jsx(ie,{isOpen:t,onClose:s,contentClassName:"settings-modal-content",testId:"settings-modal",children:e.jsxs("div",{className:"settings-content",children:[e.jsxs("div",{className:"settings-header settings-animate settings-animate-1",children:[e.jsx("div",{className:"settings-header-icon",children:e.jsx(Nr,{})}),e.jsxs("div",{className:"settings-header-text",children:[e.jsx("h2",{children:"Settings"}),e.jsx("p",{children:"Configure GitHub authentication"})]})]}),e.jsx("div",{className:`settings-hero settings-animate settings-animate-2 ${a?"settings-hero--authenticated":""}`,children:e.jsxs("div",{className:"settings-hero-content",children:[e.jsxs("div",{className:"settings-hero-main",children:[e.jsx("div",{className:"settings-mode-icon",children:a?e.jsx(Sr,{}):e.jsx(yr,{})}),e.jsxs("div",{className:"settings-mode-info",children:[e.jsxs("div",{className:"settings-mode-title",children:[e.jsx("h3",{children:a?"GitHub API Mode":"Public CDN Mode"}),a&&e.jsx("span",{className:"settings-mode-badge",children:e.jsx(Er,{})})]}),e.jsx("p",{className:"settings-mode-description",children:a?"Fast, authenticated access with 5,000 requests/hour":"Slower fallback mode with no rate limits"})]})]}),r&&e.jsxs("div",{className:"settings-user-info",children:[e.jsx("div",{className:"settings-user-avatar",children:e.jsx("img",{src:r.avatar_url,alt:r.login})}),e.jsxs("div",{className:"settings-user-details",children:[e.jsx("div",{className:"settings-user-label",children:"Authenticated as"}),e.jsxs("div",{className:"settings-user-name",children:["@",r.login]})]})]}),!a&&e.jsx("div",{className:"settings-hero-prompt",children:e.jsx("p",{children:"Add a Personal Access Token for faster GitHub API access and higher rate limits."})})]})}),e.jsxs("div",{className:"settings-config",children:[e.jsxs("div",{className:"settings-animate settings-animate-3",children:[e.jsxs("button",{onClick:()=>M(!w),className:`settings-accordion ${w?"settings-accordion--expanded":""}`,children:[e.jsx("div",{className:"settings-accordion-icon",children:e.jsx(_r,{})}),e.jsx("span",{className:"settings-accordion-text",children:"How to create a Personal Access Token"}),e.jsx("div",{className:"settings-accordion-chevron",children:e.jsx(Ar,{})})]}),w&&e.jsxs("div",{className:"settings-accordion-content",children:[e.jsxs("div",{className:"settings-accordion-item",children:[e.jsx("strong",{children:"Steps:"})," ","Go to GitHub Settings → Developer settings → Personal access tokens → Tokens (classic). Create a token with ",e.jsx("code",{children:"workflow"})," scope."]}),e.jsxs("div",{className:"settings-accordion-item",children:[e.jsx("strong",{children:"Benefits:"})," ","Using a PAT provides faster API access with higher rate limits (5000/hr vs 60/hr for unauthenticated)."]}),e.jsxs("div",{className:"settings-accordion-item",children:[e.jsx("strong",{children:"Security:"})," ","Your token is stored in memory only and never persisted to localStorage or sent to external servers."]})]})]}),e.jsxs("div",{className:"settings-input-section settings-animate settings-animate-4",children:[e.jsx("label",{htmlFor:"github-pat",className:"settings-input-label",children:"GitHub Personal Access Token"}),e.jsxs("div",{className:"settings-input-wrapper",children:[e.jsx("div",{className:"settings-input-icon",children:e.jsx(Tr,{})}),e.jsx("input",{id:"github-pat",type:p?"text":"password",value:c,onChange:f=>u(f.target.value),placeholder:"ghp_xxxxxxxxxxxxxxxxxxxx",className:"settings-input"}),e.jsx("button",{type:"button",onClick:()=>k(!p),className:"settings-input-toggle","aria-label":p?"Hide token":"Show token",children:p?e.jsx(Mr,{}):e.jsx(Lr,{})})]}),e.jsx("p",{className:"settings-input-hint",children:"Token is stored in memory only and not persisted to localStorage"})]}),e.jsxs("div",{className:"settings-actions settings-animate settings-animate-5",children:[e.jsx("button",{onClick:y,disabled:T,className:"settings-btn settings-btn--secondary",children:T?e.jsx(rs,{}):"Check Rate"}),e.jsx("button",{onClick:g,disabled:b||!c.trim(),className:"settings-btn settings-btn--primary",children:b?e.jsx(rs,{}):"Save Token"}),e.jsx("button",{onClick:I,disabled:!a,className:"settings-btn settings-btn--ghost",children:"Clear Token"})]})]}),e.jsx("div",{className:"settings-rate-limit settings-animate settings-animate-6",children:e.jsxs("div",{className:"settings-rate-limit-inner",children:[e.jsxs("div",{className:"settings-rate-limit-header",children:[e.jsx("h3",{className:"settings-rate-limit-title",children:"API Rate Limit"}),(n==null?void 0:n.limit)&&e.jsxs("span",{className:"settings-rate-limit-value",children:[e.jsx("span",{className:`settings-rate-limit-current settings-rate-limit-current--${N()}`,children:n.remaining}),e.jsx("span",{className:"settings-rate-limit-divider",children:"/"}),e.jsx("span",{children:n.limit}),e.jsx("span",{className:"settings-rate-limit-unit",children:"requests"})]})]}),(n==null?void 0:n.limit)&&e.jsxs("div",{className:"settings-progress",children:[e.jsx("div",{className:`settings-progress-glow settings-progress-glow--${N()}`,style:{width:`${R()}%`}}),e.jsx("div",{className:`settings-progress-fill settings-progress-fill--${N()}`,style:{width:`${R()}%`}})]}),e.jsxs("div",{className:"settings-rate-limit-footer",children:[e.jsxs("span",{className:"settings-rate-limit-reset",children:["Resets at ",$((n==null?void 0:n.reset)??null)]}),D&&e.jsx("span",{className:`settings-rate-limit-badge settings-rate-limit-badge--${O?"critical":"low"}`,children:O?"Critical!":"Running low"})]})]})})]})}),_&&e.jsx(ps,{message:_.message,type:_.type,onClose:()=>A(null)})]})}var Te={};function Ir(){if(typeof process<"u"&&(Te!=null&&Te.SCORECARD_REPO_OWNER))return Te.SCORECARD_REPO_OWNER;if(typeof window<"u"){const t=window.location.hostname;return t==="localhost"||t==="127.0.0.1"||t.startsWith("192.168.")?window.SCORECARD_REPO_OWNER||"feddericovonwernich":t.split(".")[0]||"feddericovonwernich"}return"feddericovonwernich"}const ve={repoOwner:Ir(),repoName:"scorecards",catalogBranch:"catalog",ports:{devServer:8080,testServer:8080},api:{githubBase:"https://api.github.com",version:"2022-11-28",acceptHeader:"application/vnd.github.v3+json"},git:{botName:"scorecard-bot",botEmail:"scorecard-bot@users.noreply.github.com"}},Ge=ve.repoOwner,We=ve.repoName,Ue=ve.catalogBranch,Mt=`https://raw.githubusercontent.com/${Ge}/${We}/${Ue}`;let _e=null,is=0;const $r=10*1e3;async function oe(t,s={}){const a=re();let n,r=!1;if(a)try{const i=`https://api.github.com/repos/${Ge}/${We}/contents/${t}?ref=${Ue}`;n=await fetch(i,{...s,cache:"no-cache",headers:{...s.headers,Accept:"application/vnd.github.raw",Authorization:`token ${a}`}}),r=!0,n.status===403||n.status===429||n.status===401?(console.warn(`API fetch failed with status ${n.status}, falling back to CDN`),r=!1):n.ok||(console.warn(`API fetch failed with status ${n.status}, falling back to CDN`),r=!1)}catch(i){console.error("Error with API fetch, falling back to CDN:",i),r=!1}if(!r){const i=`${Mt}/${t}?t=${Date.now()}`;n=await fetch(i,{...s,cache:"no-cache"})}return{response:n,usedAPI:r}}async function qe(){const t=Date.now();if(_e&&t-is<$r)return console.log("Using cached checks hash:",_e),_e;console.log("Fetching current checks hash from catalog...");try{const s=`${Mt}/current-checks.json?t=${Date.now()}`,a=await fetch(s,{cache:"no-cache"});if(!a.ok)return console.error("Failed to fetch current checks hash:",a.status),null;const n=await a.json(),r=n.checks_hash;return _e=r,is=t,console.log("Current checks hash:",r),console.log("Checks count:",n.checks_count),console.log("Generated at:",n.generated_at),r}catch(s){return console.error("Error fetching current checks hash:",s),null}}async function Ke(){let t=!1,s=!1,a=[];try{console.log("Attempting to load consolidated registry...");const{response:n,usedAPI:r}=await oe("registry/all-services.json");if(s=r,n.ok){const i=await n.json();i.services&&Array.isArray(i.services)&&(a=i.services,t=!0,console.log(`Loaded ${a.length} services from consolidated registry (generated at ${i.generated_at})`))}}catch(n){console.warn("Failed to load consolidated registry, falling back to tree API:",n)}if(!t){console.log("Loading services via tree API...");const n=`https://api.github.com/repos/${Ge}/${We}/git/trees/${Ue}?recursive=1`,r=await fetch(n);if(!r.ok)throw new Error(`Failed to fetch repository tree: ${r.status}`);const l=(await r.json()).tree.filter(u=>u.path.startsWith("registry/")&&u.path.endsWith(".json")&&u.path!=="registry/all-services.json").map(u=>u.path);if(l.length===0)throw new Error("No services registered yet");const o=l.map(async u=>{const{response:p,usedAPI:k}=await oe(u);return k&&(s=!0),p.ok?p.json():null});a=(await Promise.all(o)).filter(u=>u!==null),console.log(`Loaded ${a.length} services via tree API`)}return{services:a,usedAPI:s}}let Ee=null,ft=0;const Dr=60*1e3;async function Ye(t=!1){const s=Date.now();if(!t&&Ee&&s-ft<Dr)return console.log("Using cached teams data"),{teams:Ee,usedAPI:!1};console.log("Loading teams from registry...");try{const{response:a,usedAPI:n}=await oe("teams/all-teams.json");if(!a.ok)return console.warn("Failed to load teams registry:",a.status),{teams:null,usedAPI:n};const r=await a.json();return Ee=r,ft=s,console.log(`Loaded ${r.count||0} teams from registry (generated at ${r.generated_at})`),{teams:r,usedAPI:n}}catch(a){return console.error("Error loading teams:",a),{teams:null,usedAPI:!1}}}async function Rs(t){try{const{response:s}=await oe(`teams/${t}.json`);return s.ok?s.json():(console.warn(`Failed to load team ${t}:`,s.status),null)}catch(s){return console.error(`Error loading team ${t}:`,s),null}}function Pr(){Ee=null,ft=0}function ce(){return Ge}function de(){return We}function Br(){return Ue}function Is(){return Mt}const $e=Object.freeze(Object.defineProperty({__proto__:null,clearTeamsCache:Pr,fetchCurrentChecksHash:qe,fetchWithHybridAuth:oe,getBranch:Br,getRawBaseUrl:Is,getRepoName:de,getRepoOwner:ce,loadServices:Ke,loadTeamById:Rs,loadTeams:Ye},Symbol.toStringTag,{value:"Module"}));function Or(t={}){const{org:s,repo:a,initialInterval:n=je.WORKFLOW_POLL_DEFAULT,autoStart:r=!1,storageKey:i,cacheTTL:l=je.CACHE_MEDIUM,recentHours:o=24}=t,c=s||ce(),u=a||de(),p=L(fe),[k,b]=d.useState([]),[h,T]=d.useState("all"),[v,_]=d.useState(!1),[A,w]=d.useState(null),[M,E]=d.useState(()=>{if(i){const j=localStorage.getItem(i);if(j!==null)return parseInt(j,10)}return n}),[S,m]=d.useState(!1),g=d.useRef(null),I=d.useRef(0),y={all:k.length,in_progress:k.filter(j=>j.status==="in_progress").length,queued:k.filter(j=>j.status==="queued").length,completed:k.filter(j=>j.status==="completed").length},$=y.in_progress+y.queued,R=h==="all"?k:k.filter(j=>j.status===h),D=d.useCallback(async(j=!1)=>{if(!p){w("No GitHub PAT configured"),b([]);return}const x=Date.now();if(!(!j&&x-I.current<l&&k.length>0)){_(!0),w(null);try{const P=await fetch(`${ne.GITHUB_BASE_URL}/repos/${c}/${u}/actions/runs?per_page=${ne.PER_PAGE}&_t=${x}`,{headers:{Authorization:`token ${p}`,Accept:ne.ACCEPT_HEADER},cache:"no-cache"});if(!P.ok)throw new Error(`Failed to fetch workflow runs: ${P.status}`);const H=await P.json(),W=new Date(x-o*60*60*1e3),V=H.workflow_runs.map(Z=>({...Z,org:c,repo:u,service_name:u})).filter(Z=>new Date(Z.created_at)>W).sort((Z,G)=>new Date(G.created_at).getTime()-new Date(Z.created_at).getTime());b(V),I.current=x}catch(P){const H=P instanceof Error?P.message:String(P);w(H),console.error("Error fetching workflow runs:",P)}finally{_(!1)}}},[p,c,u,l,o,k.length]),O=d.useCallback(async()=>{I.current=0,await D(!0)},[D]),N=d.useCallback(()=>{if(g.current&&(clearInterval(g.current),g.current=null),D(),M===0){m(!1);return}g.current=setInterval(()=>{D()},M),m(!0)},[D,M]),f=d.useCallback(()=>{g.current&&(clearInterval(g.current),g.current=null),m(!1)},[]),C=d.useCallback(j=>{E(j),i&&localStorage.setItem(i,String(j)),S&&(g.current&&(clearInterval(g.current),g.current=null),j===0?m(!1):g.current=setInterval(()=>{D()},j))},[i,S,D]);return d.useEffect(()=>(r&&p&&N(),()=>{g.current&&(clearInterval(g.current),g.current=null)}),[r,p,N]),d.useEffect(()=>{p&&S?D(!0):p||(b([]),w("No GitHub PAT configured"))},[p,S,D]),{runs:k,filteredRuns:R,filterStatus:h,loading:v,error:A,filterCounts:y,badgeCount:$,pollInterval:M,isPolling:S,refresh:O,startPolling:N,stopPolling:f,setFilterStatus:T,setPollingInterval:C}}function $s(){return Or({storageKey:ws.WIDGET_POLL_INTERVAL,autoStart:!1,recentHours:24})}const Hr=[{value:0,label:"Disabled"},{value:5e3,label:"5s"},{value:1e4,label:"10s"},{value:15e3,label:"15s"},{value:3e4,label:"30s"},{value:6e4,label:"1m"},{value:12e4,label:"2m"},{value:3e5,label:"5m"}];function Fr(){const t=L(Ln),s=L(fe),a=L(S=>S.toggleActionsWidget),{filteredRuns:n,filterStatus:r,loading:i,error:l,filterCounts:o,pollInterval:c,isPolling:u,refresh:p,startPolling:k,stopPolling:b,setFilterStatus:h,setPollingInterval:T}=$s();d.useEffect(()=>(t&&s?k():b(),()=>{b()}),[t,s,k,b]);const v=d.useCallback(S=>{h(S)},[h]),_=d.useCallback(S=>{const m=parseInt(S.target.value,10);T(m)},[T]),A=d.useCallback(async()=>{await p()},[p]),w=d.useCallback(()=>{a()},[a]),M=`https://github.com/${ce()}/${de()}/actions`,E=e.jsxs(e.Fragment,{children:[t&&e.jsx("div",{className:"widget-backdrop",onClick:w}),e.jsxs("div",{className:B("widget-sidebar",t&&"open"),children:[e.jsxs("div",{className:"widget-header",children:[e.jsxs("h3",{children:[e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0ZM1.5 8a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0Zm4.879-2.773 4.264 2.559a.25.25 0 0 1 0 .428l-4.264 2.559A.25.25 0 0 1 6 10.559V5.442a.25.25 0 0 1 .379-.215Z"})}),"GitHub Actions"]}),e.jsxs("div",{className:"widget-header-actions",children:[e.jsx("a",{href:M,target:"_blank",rel:"noopener noreferrer",className:"widget-header-link",title:"Open in GitHub",children:e.jsx("svg",{width:"14",height:"14",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M3.75 2h3.5a.75.75 0 0 1 0 1.5h-3.5a.25.25 0 0 0-.25.25v8.5c0 .138.112.25.25.25h8.5a.25.25 0 0 0 .25-.25v-3.5a.75.75 0 0 1 1.5 0v3.5A1.75 1.75 0 0 1 12.25 14h-8.5A1.75 1.75 0 0 1 2 12.25v-8.5C2 2.784 2.784 2 3.75 2Zm6.854-1h4.146a.25.25 0 0 1 .25.25v4.146a.25.25 0 0 1-.427.177L13.03 4.03 9.28 7.78a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042l3.75-3.75-1.543-1.543A.25.25 0 0 1 10.604 1Z"})})}),e.jsx("button",{onClick:w,className:"widget-close-btn","aria-label":"Close widget",children:e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M3.72 3.72a.75.75 0 0 1 1.06 0L8 6.94l3.22-3.22a.749.749 0 0 1 1.275.326.749.749 0 0 1-.215.734L9.06 8l3.22 3.22a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L8 9.06l-3.22 3.22a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042L6.94 8 3.72 4.78a.75.75 0 0 1 0-1.06Z"})})})]})]}),e.jsx("div",{className:"widget-filters",children:["all","in_progress","queued","completed"].map(S=>e.jsxs("button",{onClick:()=>v(S),className:B("filter-btn",r===S&&"filter-btn--active"),children:[S==="all"?"All":S==="in_progress"?"Running":S==="queued"?"Queued":"Done",e.jsxs("span",{className:"filter-btn__count",children:["(",o[S==="in_progress"?"in_progress":S],")"]})]},S))}),e.jsxs("div",{className:"widget-controls",children:[e.jsxs("div",{className:"widget-controls__interval",children:[e.jsx("span",{children:"Refresh:"}),e.jsx("select",{value:c,onChange:_,"aria-label":"Refresh interval",className:"widget-interval-select",children:Hr.map(S=>e.jsx("option",{value:S.value,children:S.label},S.value))})]}),e.jsx("button",{onClick:A,disabled:i,className:B("widget-refresh-btn",i&&"spinning"),title:"Refresh now",children:e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 16 16",fill:"currentColor",children:[e.jsx("path",{d:"M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2z"}),e.jsx("path",{d:"M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"})]})})]}),e.jsx("div",{className:"widget-content",children:s?l?e.jsxs("div",{className:"widget-empty widget-empty--error",children:[e.jsx("svg",{width:"32",height:"32",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M8 0a8 8 0 1 0 8 8A8 8 0 0 0 8 0Zm3.72 10.78a.75.75 0 1 1-1.06 1.06L8 9.06l-2.66 2.78a.75.75 0 0 1-1.06-1.06L6.94 8 4.28 5.22a.75.75 0 0 1 1.06-1.06L8 6.94l2.66-2.78a.75.75 0 0 1 1.06 1.06L9.06 8Z"})}),e.jsx("p",{className:"widget-error-msg",children:"Error loading workflow runs"}),e.jsx("p",{children:l})]}):n.length===0?e.jsxs("div",{className:"widget-empty",children:[e.jsx("svg",{width:"32",height:"32",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0ZM1.5 8a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0Zm4.879-2.773 4.264 2.559a.25.25 0 0 1 0 .428l-4.264 2.559A.25.25 0 0 1 6 10.559V5.442a.25.25 0 0 1 .379-.215Z"})}),e.jsxs("p",{children:["No ",r==="all"?"":r.replace("_"," ")," workflow runs in the last 24 hours"]})]}):e.jsx(e.Fragment,{children:n.map(S=>e.jsx(Ms,{run:S},S.id))}):e.jsxs("div",{className:"widget-empty",children:[e.jsx("svg",{width:"32",height:"32",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M4 4a4 4 0 1 1 8 0v2h.25c.966 0 1.75.784 1.75 1.75v5.5A1.75 1.75 0 0 1 12.25 15h-8.5A1.75 1.75 0 0 1 2 13.25v-5.5C2 6.784 2.784 6 3.75 6H4Zm8.25 3.5h-8.5a.25.25 0 0 0-.25.25v5.5c0 .138.112.25.25.25h8.5a.25.25 0 0 0 .25-.25v-5.5a.25.25 0 0 0-.25-.25ZM10.5 4a2.5 2.5 0 1 0-5 0v2h5Z"})}),e.jsx("p",{children:"Configure GitHub PAT in settings to view workflow runs"}),e.jsx("button",{onClick:()=>{w(),L.getState().openModal("settings")},className:"btn btn--primary",children:"Configure Token"})]})}),e.jsx("div",{className:B("widget-status-bar",!u&&"widget-status-bar--disabled"),children:u?e.jsxs("span",{children:["Auto-refreshing every ",At(c)]}):e.jsx("span",{children:"Auto-refresh disabled"})})]})]});return Y.createPortal(E,document.body)}const Zr=[{value:"serviceCount-desc",label:"Services: High to Low"},{value:"serviceCount-asc",label:"Services: Low to High"},{value:"averageScore-desc",label:"Score: High to Low"},{value:"averageScore-asc",label:"Score: Low to High"},{value:"name-asc",label:"Name: A to Z"},{value:"name-desc",label:"Name: Z to A"}];function zr({isOpen:t,onClose:s,onCreateTeam:a,onEditTeam:n}){const r=L(Tt),i=L(_s),l=L(m=>m.updateFilters),o=L(m=>m.openModal),[c,u]=d.useState(null),[p,k]=d.useState(""),[b,h]=d.useState("serviceCount-desc"),[T,v]=d.useState(!1);d.useEffect(()=>{if(!t)return;let m=!1;return(async()=>{v(!0);try{const{teams:I}=await Ye();m||u(I)}catch(I){console.error("Failed to load teams:",I),m||u(null)}finally{m||v(!1)}})(),()=>{m=!0}},[t]);const _=d.useMemo(()=>He(r,g=>X(g,i),i),[r,i]),A=d.useMemo(()=>{let m;if(c){const R=Nt(c,_);m=Object.values(R)}else m=Object.entries(_).map(([R,D])=>({id:R.toLowerCase().replace(/\s+/g,"-"),name:R,description:null,aliases:[],metadata:{},statistics:D}));if(p){const R=p.toLowerCase();m=m.filter(D=>{var O,N;return D.name.toLowerCase().includes(R)||((O=D.description)==null?void 0:O.toLowerCase().includes(R))||((N=D.aliases)==null?void 0:N.some(f=>f.toLowerCase().includes(R)))})}const[g,I]=b.split("-"),y=m.reduce((R,D)=>{var O,N,f,C,j;return R[D.id]={name:D.name,serviceCount:((O=D.statistics)==null?void 0:O.serviceCount)??0,averageScore:((N=D.statistics)==null?void 0:N.averageScore)??0,staleCount:((f=D.statistics)==null?void 0:f.staleCount)??0,installedCount:((C=D.statistics)==null?void 0:C.installedCount)??0,rankDistribution:((j=D.statistics)==null?void 0:j.rankDistribution)??{platinum:0,gold:0,silver:0,bronze:0},github_org:null,github_slug:null},R},{});return Cs(y,g,I).map(R=>m.find(D=>D.name===R.name)).filter(Boolean)},[c,_,p,b]),w=d.useMemo(()=>{const m=Object.values(_).reduce((y,$)=>y+$.serviceCount,0),g=Object.keys(_).length,I=r.filter(y=>!y.team).length;return{totalServices:m,totalTeams:g,servicesWithoutTeam:I}},[_,r]),M=m=>{l({teamFilter:m}),s()},E=()=>{o("teamEdit",{mode:"create"})},S=m=>{o("teamEdit",{mode:"edit",teamId:m})};return e.jsx(ie,{isOpen:t,onClose:s,contentClassName:"team-dashboard-modal",testId:"team-dashboard-modal",children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"team-dashboard-header p-4 border-b border-border",children:[e.jsx("h2",{className:"modal-title mb-4",children:"Team Dashboard"}),e.jsxs("div",{className:"team-dashboard-summary flex gap-4 mb-4",children:[e.jsxs("div",{className:"team-summary-stat",children:[e.jsx("div",{className:"team-summary-stat__value",children:w.totalTeams}),e.jsx("div",{className:"team-summary-stat__label",children:"Teams"})]}),e.jsxs("div",{className:"team-summary-stat",children:[e.jsx("div",{className:"team-summary-stat__value",children:w.totalServices}),e.jsx("div",{className:"team-summary-stat__label",children:"With Team"})]}),w.servicesWithoutTeam>0&&e.jsxs("div",{className:"team-summary-stat team-summary-stat--warning",children:[e.jsx("div",{className:"team-summary-stat__value team-summary-stat__value--warning",children:w.servicesWithoutTeam}),e.jsx("div",{className:"team-summary-stat__label team-summary-stat__label--warning",children:"Without Team"})]})]}),e.jsxs("div",{className:"team-dashboard-controls flex gap-2",children:[e.jsx("input",{type:"text",placeholder:"Search teams...",value:p,onChange:m=>k(m.target.value),className:"team-dashboard-search"}),e.jsx("select",{value:b,onChange:m=>h(m.target.value),"aria-label":"Sort teams by",className:"team-dashboard-sort",children:Zr.map(m=>e.jsx("option",{value:m.value,children:m.label},m.value))}),e.jsxs("button",{onClick:E,className:"team-dashboard-create-btn",children:[e.jsx("svg",{width:"14",height:"14",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M7.75 2a.75.75 0 0 1 .75.75V7h4.25a.75.75 0 0 1 0 1.5H8.5v4.25a.75.75 0 0 1-1.5 0V8.5H2.75a.75.75 0 0 1 0-1.5H7V2.75A.75.75 0 0 1 7.75 2Z"})}),"Create Team"]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:T?e.jsx("div",{className:"team-dashboard-loading",children:e.jsx("div",{children:"Loading teams..."})}):A.length===0?e.jsx("div",{className:"team-dashboard-empty",children:e.jsx("div",{children:p?"No teams match your search.":"No teams found."})}):e.jsx("div",{className:"team-dashboard-grid",children:A.map(m=>e.jsx(Vr,{team:m,onFilter:()=>M(m.name),onEdit:()=>S(m.id)},m.id))})})]})})}function Vr({team:t,onFilter:s,onEdit:a}){var o;const n=t.statistics,r=n.serviceCount>0?Math.round(n.installedCount/n.serviceCount*100):0,l=["platinum","gold","silver","bronze"].filter(c=>n.rankDistribution[c]>0);return e.jsxs("div",{className:"team-card-react",children:[e.jsxs("div",{className:"team-card-react__header",children:[e.jsx("h3",{className:"team-card-react__name",children:t.name}),((o=t.metadata)==null?void 0:o.slack_channel)&&e.jsx("span",{className:"team-card-react__slack",children:t.metadata.slack_channel})]}),t.description&&e.jsx("p",{className:"team-card-react__description",children:t.description}),e.jsxs("div",{className:"team-card-react__stats",children:[e.jsxs("div",{className:"team-card-react__stat",children:[e.jsx("div",{className:"team-card-react__stat-value",children:n.serviceCount}),e.jsx("div",{className:"team-card-react__stat-label",children:"Services"})]}),e.jsxs("div",{className:"team-card-react__stat",children:[e.jsx("div",{className:"team-card-react__stat-value",children:n.averageScore}),e.jsx("div",{className:"team-card-react__stat-label",children:"Avg Score"})]}),n.staleCount>0&&e.jsxs("div",{className:"team-card-react__stat",children:[e.jsx("div",{className:"team-card-react__stat-value team-card-react__stat-value--warning",children:n.staleCount}),e.jsx("div",{className:"team-card-react__stat-label",children:"Stale"})]})]}),l.length>0&&e.jsx("div",{className:"team-card-react__ranks",children:l.map(c=>e.jsx(ht,{rank:c,count:n.rankDistribution[c]},c))}),e.jsxs("div",{className:"team-card-react__progress",children:[e.jsxs("div",{className:"team-card-react__progress-header",children:[e.jsx("span",{children:"Installed"}),e.jsxs("span",{children:[n.installedCount,"/",n.serviceCount," (",r,"%)"]})]}),e.jsx("div",{className:"team-card-react__progress-bar",children:e.jsx("div",{className:"team-card-react__progress-fill",style:{width:`${r}%`}})})]}),e.jsxs("div",{className:"team-card-react__actions",children:[e.jsxs("button",{onClick:s,className:"team-card-react__action-btn",children:[e.jsx("svg",{width:"12",height:"12",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M.75 3h14.5a.75.75 0 0 1 0 1.5H.75a.75.75 0 0 1 0-1.5ZM3 7.75A.75.75 0 0 1 3.75 7h8.5a.75.75 0 0 1 0 1.5h-8.5A.75.75 0 0 1 3 7.75Zm3 4a.75.75 0 0 1 .75-.75h2.5a.75.75 0 0 1 0 1.5h-2.5a.75.75 0 0 1-.75-.75Z"})}),"Filter"]}),e.jsxs("button",{onClick:a,className:"team-card-react__action-btn",children:[e.jsx("svg",{width:"12",height:"12",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M11.013 1.427a1.75 1.75 0 0 1 2.474 0l1.086 1.086a1.75 1.75 0 0 1 0 2.474l-8.61 8.61c-.21.21-.47.364-.756.445l-3.251.93a.75.75 0 0 1-.927-.928l.929-3.25c.081-.286.235-.547.445-.758l8.61-8.61Zm.176 4.823L9.75 4.81l-6.286 6.287a.253.253 0 0 0-.064.108l-.558 1.953 1.953-.558a.253.253 0 0 0 .108-.064Zm1.238-3.763a.25.25 0 0 0-.354 0L10.811 3.75l1.439 1.44 1.263-1.263a.25.25 0 0 0 0-.354Z"})}),"Edit"]})]})]})}const Gr=t=>t.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim();function Wr({isOpen:t,onClose:s,mode:a,teamId:n,onSave:r}){const i=L(fe),[l,o]=d.useState({id:"",name:"",description:"",aliases:[],slack_channel:"",oncall_rotation:""}),[c,u]=d.useState(""),[p,k]=d.useState(!1),[b,h]=d.useState(!1),[T,v]=d.useState(null);d.useEffect(()=>{t&&a==="edit"&&n&&i?(k(!0),Rs(n).then(m=>{var g,I;m&&o({id:m.id||n,name:m.name||"",description:m.description||"",aliases:m.aliases||[],slack_channel:((g=m.metadata)==null?void 0:g.slack_channel)||"",oncall_rotation:((I=m.metadata)==null?void 0:I.oncall_rotation)||""})}).catch(m=>{console.error("Failed to load team:",m),v({message:"Failed to load team data",type:"error"})}).finally(()=>k(!1))):t&&a==="create"&&o({id:"",name:"",description:"",aliases:[],slack_channel:"",oncall_rotation:""})},[t,a,n,i]);const _=(m,g)=>{v({message:m,type:g})},A=m=>{o(g=>({...g,name:m,id:a==="create"?Gr(m):g.id}))},w=()=>{const m=c.trim();m&&!l.aliases.includes(m)&&(o(g=>({...g,aliases:[...g.aliases,m]})),u(""))},M=m=>{o(g=>({...g,aliases:g.aliases.filter(I=>I!==m)}))},E=m=>{m.key==="Enter"&&(m.preventDefault(),w())},S=d.useCallback(async()=>{if(!i){_("GitHub PAT required. Please configure in Settings.","error");return}if(!l.name.trim()){_("Team name is required","error");return}h(!0),_("Triggering workflow...","info");try{const m={team_id:l.id,action:a==="create"?"create":"update",name:l.name,description:l.description||"",aliases:l.aliases.join(","),slack_channel:l.slack_channel||"",oncall_rotation:l.oncall_rotation||""},g=await fetch(`${ne.GITHUB_BASE_URL}/repos/${ce()}/${de()}/actions/workflows/update-team-registry.yml/dispatches`,{method:"POST",headers:{Authorization:`token ${i}`,Accept:ne.ACCEPT_HEADER,"Content-Type":"application/json"},body:JSON.stringify({ref:"main",inputs:m})});if(g.ok||g.status===204)_(a==="create"?"Team creation workflow triggered! Changes will appear shortly.":"Team update workflow triggered! Changes will appear shortly.","success"),r==null||r(l.id,a==="create"),setTimeout(()=>s(),1500);else{const I=await g.json().catch(()=>({}));throw new Error(I.message||`Failed with status ${g.status}`)}}catch(m){console.error("Failed to save team:",m),_(`Failed to save: ${m instanceof Error?m.message:String(m)}`,"error")}finally{h(!1)}},[i,l,a,r,s]);return!i&&t?e.jsx(ie,{isOpen:t,onClose:s,contentClassName:"max-w-md",children:e.jsxs("div",{className:"p-6 text-center",children:[e.jsx("h2",{className:"text-xl font-semibold text-text mb-4",children:"PAT Required"}),e.jsxs("p",{className:"text-text-muted mb-4",children:["A GitHub Personal Access Token is required to ",a==="create"?"create":"edit"," teams."]}),e.jsx("button",{onClick:()=>{s(),L.getState().openModal("settings")},className:"px-4 py-2 bg-accent text-white rounded-lg hover:opacity-90",children:"Configure Token"})]})}):e.jsxs(e.Fragment,{children:[e.jsx(ie,{isOpen:t,onClose:s,contentClassName:"team-edit-modal max-w-lg",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-text mb-6",children:a==="create"?"Create Team":"Edit Team"}),p?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"text-text-muted",children:"Loading team data..."})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-text mb-1",children:["Team Name ",e.jsx("span",{className:"text-error",children:"*"})]}),e.jsx("input",{type:"text",value:l.name,onChange:m=>A(m.target.value),className:B("w-full px-3 py-2 rounded-lg","bg-surface border border-border","text-text placeholder:text-text-muted","focus:outline-none focus:ring-2 focus:ring-accent"),placeholder:"e.g., Platform Team"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text mb-1",children:"Team ID"}),e.jsx("input",{type:"text",value:l.id,onChange:m=>o(g=>({...g,id:m.target.value})),disabled:a==="edit",className:B("w-full px-3 py-2 rounded-lg font-mono text-sm","bg-surface border border-border","text-text-muted","focus:outline-none focus:ring-2 focus:ring-accent",a==="edit"&&"opacity-50 cursor-not-allowed"),placeholder:"auto-generated-from-name"}),a==="create"&&e.jsx("p",{className:"text-xs text-text-muted mt-1",children:"Auto-generated from name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text mb-1",children:"Description"}),e.jsx("textarea",{value:l.description,onChange:m=>o(g=>({...g,description:m.target.value})),rows:2,className:B("w-full px-3 py-2 rounded-lg resize-none","bg-surface border border-border","text-text placeholder:text-text-muted","focus:outline-none focus:ring-2 focus:ring-accent"),placeholder:"Brief description of the team"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text mb-1",children:"Aliases"}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("input",{type:"text",value:c,onChange:m=>u(m.target.value),onKeyDown:E,className:B("flex-1 px-3 py-2 rounded-lg","bg-surface border border-border","text-text placeholder:text-text-muted","focus:outline-none focus:ring-2 focus:ring-accent"),placeholder:"Add alias and press Enter"}),e.jsx("button",{type:"button",onClick:w,className:"px-3 py-2 bg-surface-secondary border border-border rounded-lg hover:bg-surface text-text",children:"Add"})]}),l.aliases.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1",children:l.aliases.map(m=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-surface-secondary rounded text-sm text-text",children:[m,e.jsx("button",{type:"button",onClick:()=>M(m),className:"text-text-muted hover:text-error",children:"×"})]},m))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text mb-1",children:"Slack Channel"}),e.jsx("input",{type:"text",value:l.slack_channel,onChange:m=>o(g=>({...g,slack_channel:m.target.value})),className:B("w-full px-3 py-2 rounded-lg","bg-surface border border-border","text-text placeholder:text-text-muted","focus:outline-none focus:ring-2 focus:ring-accent"),placeholder:"#team-channel"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text mb-1",children:"Oncall Rotation URL"}),e.jsx("input",{type:"text",value:l.oncall_rotation,onChange:m=>o(g=>({...g,oncall_rotation:m.target.value})),className:B("w-full px-3 py-2 rounded-lg","bg-surface border border-border","text-text placeholder:text-text-muted","focus:outline-none focus:ring-2 focus:ring-accent"),placeholder:"https://pagerduty.com/..."})]}),e.jsxs("div",{className:"flex gap-2 pt-4 border-t border-border",children:[e.jsx("button",{onClick:s,className:B("flex-1 px-4 py-2 rounded-lg","border border-border","text-text font-medium","hover:bg-surface-secondary transition-colors"),children:"Cancel"}),e.jsx("button",{onClick:S,disabled:b||!l.name.trim(),className:B("flex-1 px-4 py-2 rounded-lg","bg-accent text-white font-medium","hover:opacity-90 transition-opacity","disabled:opacity-50 disabled:cursor-not-allowed"),children:b?"Saving...":a==="create"?"Create Team":"Save Changes"})]})]})]})}),T&&e.jsx(ps,{message:T.message,type:T.type,onClose:()=>v(null)})]})}let q=null,pt=0;const Ur=5*60*1e3;async function Ds(){const t=Date.now();if(q&&t-pt<Ur)return q;try{const{response:s}=await oe("all-checks.json");if(!s.ok)throw new Error(`Failed to fetch all-checks.json: ${s.status}`);return q=await s.json(),pt=t,q}catch(s){return console.warn("Failed to load checks metadata:",s),{version:"1.0.0",checks:[],categories:[],count:0}}}function qr(t){return q&&q.checks.find(s=>s.id===t)||null}function Kr(){return(q==null?void 0:q.checks)||[]}function Yr(){if(!q)return{};const t={};for(const n of q.checks){const r=n.category||"Other";t[r]||(t[r]=[]),t[r].push(n)}const s=q.categories||[],a={};for(const n of s)t[n]&&(a[n]=t[n]);for(const n of Object.keys(t))a[n]||(a[n]=t[n]);return a}function Qr(){return(q==null?void 0:q.categories)||[]}function Jr(){q=null,pt=0}const Lt=Object.freeze(Object.defineProperty({__proto__:null,clearChecksCache:Jr,getAllChecks:Kr,getCategories:Qr,getCheckById:qr,getChecksByCategory:Yr,loadChecks:Ds},Symbol.toStringTag,{value:"Module"}));function Xr({isOpen:t,onClose:s}){const a=L(Tt),n=d.useRef(null),[r,i]=d.useState(null),[l,o]=d.useState(null),[c,u]=d.useState("percentage"),[p,k]=d.useState("desc"),[b,h]=d.useState(!1),[T,v]=d.useState(""),[_,A]=d.useState(!1);d.useEffect(()=>{if(!b)return;const y=$=>{n.current&&!n.current.contains($.target)&&h(!1)};return document.addEventListener("mousedown",y),()=>document.removeEventListener("mousedown",y)},[b]),d.useEffect(()=>{if(!t)return;let y=!1;return(async()=>{A(!0);try{const R=await Ds();y||(i(R),R.checks.length>0&&o(D=>D??R.checks[0].id))}catch(R){console.error("Failed to load checks:",R),y||i({checks:[],categories:[],version:"",count:0})}finally{y||A(!1)}})(),()=>{y=!0}},[t]);const w=d.useMemo(()=>{if(!(r!=null&&r.checks))return[];if(!T)return r.checks;const y=T.toLowerCase();return r.checks.filter($=>{var R;return $.name.toLowerCase().includes(y)||$.id.toLowerCase().includes(y)||((R=$.category)==null?void 0:R.toLowerCase().includes(y))})},[r,T]),M=d.useMemo(()=>l?yt(a,l):null,[a,l]),E=d.useMemo(()=>{if(!l)return[];const y=Ns(a,l),$=ys(y,p);return c==="name"&&$.sort((R,D)=>{const O=R.teamName.localeCompare(D.teamName);return p==="desc"?-O:O}),$},[a,l,c,p]),S=r==null?void 0:r.checks.find(y=>y.id===l),m=y=>{o(y),h(!1)},g=y=>{c===y?k($=>$==="asc"?"desc":"asc"):(u(y),k("desc"))},I=y=>y>=80?"bg-success":y>=50?"bg-warning":"bg-error";return e.jsx(ie,{isOpen:t,onClose:s,contentClassName:"check-adoption-modal max-w-3xl max-h-[90vh] overflow-hidden flex flex-col",testId:"check-adoption-modal",children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"check-adoption-header",children:[e.jsx("h2",{children:"Check Adoption Dashboard"}),e.jsxs("div",{className:"check-card-selector",ref:n,children:[e.jsx("button",{onClick:()=>h(!b),className:B("check-card-selected",b&&"open"),children:S?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"check-card-header",children:[e.jsx("span",{className:"check-card-name",children:S.name}),e.jsx("span",{className:"check-card-category",children:S.category}),e.jsx("svg",{className:"check-card-chevron",width:"20",height:"20",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M4.22 6.22a.75.75 0 0 1 1.06 0L8 8.94l2.72-2.72a.75.75 0 0 1 1.06 1.06l-3.25 3.25a.75.75 0 0 1-1.06 0L4.22 7.28a.75.75 0 0 1 0-1.06z"})})]}),e.jsx("p",{className:"check-card-description",children:S.description})]}):e.jsx("span",{className:"check-card-placeholder",children:"Select a check to view adoption..."})}),e.jsxs("div",{className:B("check-card-dropdown",b&&"open"),children:[e.jsx("div",{className:"check-card-search",children:e.jsx("input",{type:"text",value:T,onChange:y=>v(y.target.value),placeholder:"Search checks...",autoFocus:b})}),e.jsxs("div",{className:"check-card-options",children:[w.map(y=>{var $;return e.jsxs("button",{onClick:()=>m(y.id),className:B("check-card-option",y.id===l&&"selected"),children:[e.jsxs("div",{className:"check-card-option-header",children:[e.jsx("span",{className:"check-card-name",children:y.name}),e.jsx("span",{className:"check-card-category",children:y.category})]}),e.jsxs("p",{className:"check-card-option-desc",children:[($=y.description)==null?void 0:$.slice(0,100),y.description&&y.description.length>100?"...":""]})]},y.id)}),w.length===0&&e.jsx("div",{className:"check-card-empty",children:"No checks found"})]})]})]})]}),M&&e.jsxs("div",{className:"adoption-stats-row",children:[e.jsxs("div",{className:"adoption-stat-card",children:[e.jsxs("div",{className:"adoption-stat-value success",children:[M.passing,"/",M.passing+M.failing]}),e.jsx("div",{className:"adoption-stat-label",children:"Services Passing"})]}),e.jsxs("div",{className:"adoption-stat-card",children:[e.jsx("div",{className:"adoption-stat-value error",children:M.failing}),e.jsx("div",{className:"adoption-stat-label",children:"Services Failing"})]}),e.jsxs("div",{className:B("adoption-stat-card",M.excluded>0&&"excluded"),children:[e.jsx("div",{className:"adoption-stat-value muted",children:M.excluded}),e.jsx("div",{className:"adoption-stat-label",children:"Excluded"})]}),e.jsxs("div",{className:"adoption-stat-card",children:[e.jsxs("div",{className:"adoption-stat-value accent",children:[M.percentage,"%"]}),e.jsx("div",{className:"adoption-stat-label",children:"Adoption"})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:_?e.jsx("div",{className:"flex items-center justify-center h-40",children:e.jsx("div",{className:"text-text-muted",children:"Loading checks..."})}):E.length===0?e.jsx("div",{className:"flex items-center justify-center h-40",children:e.jsx("div",{className:"text-text-muted",children:"No team data available"})}):e.jsxs("table",{className:"adoption-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsxs("th",{onClick:()=>g("name"),children:["Team",c==="name"&&e.jsx("span",{className:"sort-indicator",children:p==="asc"?"↑":"↓"})]}),e.jsxs("th",{onClick:()=>g("percentage"),style:{textAlign:"center",width:"100px"},children:["Adoption",c==="percentage"&&e.jsx("span",{className:"sort-indicator",children:p==="asc"?"↑":"↓"})]}),e.jsx("th",{style:{textAlign:"center",width:"160px"},children:"Progress"}),e.jsx("th",{style:{textAlign:"center",width:"80px"},children:"Passing"}),e.jsx("th",{style:{textAlign:"center",width:"64px"},children:"Excl."})]})}),e.jsx("tbody",{children:E.map(y=>{const $=y.teamName==="No Team"||y.teamName==="Unassigned";return e.jsxs("tr",{className:B("adoption-row",$&&"no-team"),onClick:()=>{!$&&window.showTeamModal&&window.showTeamModal(y.teamName)},children:[e.jsxs("td",{className:"adoption-cell",children:[e.jsx("div",{className:"team-name",children:y.teamName}),e.jsxs("div",{className:"team-services",children:[y.total," service",y.total!==1?"s":""]})]}),e.jsx("td",{className:"adoption-cell",style:{textAlign:"center"},children:e.jsxs("span",{className:"adoption-percentage",children:[y.percentage,"%"]})}),e.jsx("td",{className:"adoption-cell",children:e.jsx("div",{className:"progress-bar-inline",children:e.jsx("div",{className:B("progress-fill",I(y.percentage)),style:{width:`${y.percentage}%`}})})}),e.jsx("td",{className:"adoption-cell",style:{textAlign:"center"},children:e.jsx("span",{className:"passing-count",children:y.passing})}),e.jsx("td",{className:B("adoption-cell",y.excluded>0&&"has-excluded"),style:{textAlign:"center"},children:e.jsx("span",{className:"excluded-count",children:y.excluded>0?y.excluded:"—"})})]},y.teamName)})})]})})]})})}const lt="__no_team__";function ei(t){const s=new Set;return t.forEach(a=>{var n;(n=a.team)!=null&&n.primary&&s.add(a.team.primary)}),Array.from(s).sort()}function ti(t){return t.some(s=>!s.team)}function si({services:t,selectedTeams:s,onTeamsChange:a}){const[n,r]=d.useState(!1),i=d.useRef(null),l=d.useMemo(()=>ei(t),[t]),o=d.useMemo(()=>ti(t),[t]);d.useEffect(()=>{const h=T=>{i.current&&!i.current.contains(T.target)&&r(!1)};return n&&document.addEventListener("mousedown",h),()=>{document.removeEventListener("mousedown",h)}},[n]),d.useEffect(()=>{const h=T=>{T.key==="Escape"&&r(!1)};return n&&document.addEventListener("keydown",h),()=>{document.removeEventListener("keydown",h)}},[n]);const c=d.useCallback(()=>{r(h=>!h)},[]),u=d.useCallback(h=>{const T=s.includes(h)?s.filter(v=>v!==h):[...s,h];a(T)},[s,a]),p=d.useCallback(()=>{a([])},[a]),k=d.useMemo(()=>{if(s.length===0)return"All Teams";if(s.length===1){const h=s[0];return h===lt?"No Team":h}return`${s.length} teams`},[s]),b=s.length>0;return e.jsxs("div",{className:"team-filter-dropdown",ref:i,children:[e.jsxs("button",{className:`team-filter-toggle ${b?"active":""}`,onClick:c,"aria-expanded":n,"aria-haspopup":"listbox",children:[e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",style:{marginRight:"8px"},children:e.jsx("path",{d:"M2 5.5a3.5 3.5 0 1 1 5.898 2.549 5.508 5.508 0 0 1 3.034 4.084.75.75 0 1 1-1.482.235 4 4 0 0 0-7.9 0 .75.75 0 0 1-1.482-.236A5.507 5.507 0 0 1 3.102 8.05 3.493 3.493 0 0 1 2 5.5ZM11 4a3.001 3.001 0 0 1 2.22 5.018 5.01 5.01 0 0 1 2.56 3.012.75.75 0 0 1-1.449.39A3.51 3.51 0 0 0 11 9.5a.75.75 0 0 1 0-1.5 1.5 1.5 0 1 0-.672-2.842.75.75 0 1 1-.67-1.343c.435-.217.917-.335 1.342-.315ZM5.5 4a2 2 0 1 0-.001 3.999A2 2 0 0 0 5.5 4Z"})}),e.jsx("span",{children:k}),e.jsx("svg",{width:"12",height:"12",viewBox:"0 0 16 16",fill:"currentColor",style:{marginLeft:"8px"},children:e.jsx("path",{d:"m4.427 7.427 3.396 3.396a.25.25 0 0 0 .354 0l3.396-3.396A.25.25 0 0 0 11.396 7H4.604a.25.25 0 0 0-.177.427Z"})})]}),e.jsxs("div",{className:`team-dropdown-menu ${n?"open":""}`,children:[e.jsxs("div",{className:"team-dropdown-header",children:[e.jsx("span",{children:"Filter by Team"}),b&&e.jsx("button",{className:"team-clear-btn",onClick:p,children:"Clear"})]}),e.jsxs("div",{className:"team-dropdown-options",children:[o&&e.jsxs("label",{className:"team-option",children:[e.jsx("input",{type:"checkbox",checked:s.includes(lt),onChange:()=>u(lt)}),e.jsx("span",{className:"team-name no-team",children:"No Team Assigned"})]}),l.map(h=>e.jsxs("label",{className:"team-option",children:[e.jsx("input",{type:"checkbox",checked:s.includes(h),onChange:()=>u(h)}),e.jsx("span",{className:"team-name",children:h})]},h))]})]})]})}function ai(){const[t]=d.useState(()=>document.getElementById("team-filter-container")),[s,a]=d.useState([]),n=L(Tt),r=d.useCallback(i=>{a(i),window.dispatchEvent(new CustomEvent("team-filter-changed",{detail:{teams:i}}))},[]);return t?Y.createPortal(e.jsx(si,{services:n,selectedTeams:s,onTeamsChange:r}),t):null}function ni(){window.dispatchEvent(new CustomEvent("open-check-filter-modal"))}function ri(){const[t,s]=d.useState(0);d.useEffect(()=>{const r=i=>{var o;const l=i;(o=l.detail)!=null&&o.filters&&s(l.detail.filters.size)};return window.addEventListener("check-filters-changed",r),()=>{window.removeEventListener("check-filters-changed",r)}},[]);const a=t>0,n=()=>{ni()};return e.jsxs("button",{onClick:n,className:B("check-filter-toggle",a&&"active"),children:[e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M.75 3a.75.75 0 0 0 0 1.5h14.5a.75.75 0 0 0 0-1.5H.75ZM3 7.75A.75.75 0 0 1 3.75 7h8.5a.75.75 0 0 1 0 1.5h-8.5A.75.75 0 0 1 3 7.75Zm3 4a.75.75 0 0 1 .75-.75h2.5a.75.75 0 0 1 0 1.5h-2.5a.75.75 0 0 1-.75-.75Z"})}),e.jsxs("span",{children:["Check Filter",a&&` (${t})`]})]})}function ii(){const t=document.getElementById("check-filter-container");return t?Y.createPortal(e.jsx(ri,{}),t):null}function li({onFilterChange:t,activeFilters:s}){const a=L(o=>o.services.all),n=L(o=>o.ui.checksHash),r=d.useMemo(()=>{const o=a.length,c=o>0?Math.round(a.reduce((_,A)=>_+A.score,0)/o):0,u=a.filter(_=>_.has_api).length,p=a.filter(_=>X(_,n)).length,k=a.filter(_=>_.installed).length,b=a.filter(_=>_.rank==="platinum").length,h=a.filter(_=>_.rank==="gold").length,T=a.filter(_=>_.rank==="silver").length,v=a.filter(_=>_.rank==="bronze").length;return{total:o,avgScore:c,withApi:u,stale:p,installed:k,platinum:b,gold:h,silver:T,bronze:v}},[a,n]),i=o=>{if(!t)return;const c=(s==null?void 0:s.get(o))??null;let u;c===null?u="include":c==="include"?u="exclude":u=null,t(o,u)},l=o=>(s==null?void 0:s.get(o))??null;return e.jsxs(e.Fragment,{children:[e.jsx(U,{value:r.total,label:"Total Services",filterable:!1,id:"total-services"}),e.jsx(U,{value:r.avgScore,label:"Average Score",filterable:!1,id:"avg-score"}),e.jsx(U,{value:r.withApi,label:"With API",filterable:!0,filterType:"has-api",filterState:l("has-api"),onClick:i,id:"api-count"}),e.jsx(U,{value:r.stale,label:"Stale",filterable:!0,filterType:"stale",filterState:l("stale"),onClick:i,id:"stale-count"}),e.jsx(U,{value:r.installed,label:"Installed",filterable:!0,filterType:"installed",filterState:l("installed"),onClick:i,id:"installed-count"}),e.jsx(U,{value:r.platinum,label:"Platinum",filterable:!0,filterType:"platinum",filterState:l("platinum"),onClick:i,id:"platinum-count"}),e.jsx(U,{value:r.gold,label:"Gold",filterable:!0,filterType:"gold",filterState:l("gold"),onClick:i,id:"gold-count"}),e.jsx(U,{value:r.silver,label:"Silver",filterable:!0,filterType:"silver",filterState:l("silver"),onClick:i,id:"silver-count"}),e.jsx(U,{value:r.bronze,label:"Bronze",filterable:!0,filterType:"bronze",filterState:l("bronze"),onClick:i,id:"bronze-count"})]})}function oi({onFilterChange:t,activeFilters:s}){const a=L(o=>o.teams.all),n=L(o=>o.services.all),r=d.useMemo(()=>{const o=a.length,c=o>0?Math.round(a.reduce((v,_)=>v+(_.averageScore||0),0)/o):0,u=n.length,p=n.filter(v=>!te(v)).length;let k=0,b=0,h=0,T=0;return a.forEach(v=>{const _=ge(v);_==="platinum"?k++:_==="gold"?b++:_==="silver"?h++:_==="bronze"&&T++}),{totalTeams:o,avgScore:c,totalServices:u,noTeam:p,platinum:k,gold:b,silver:h,bronze:T}},[a,n]),i=o=>{if(!t)return;const c=(s==null?void 0:s.get(o))??null;let u;c===null?u="include":c==="include"?u="exclude":u=null,t(o,u)},l=o=>(s==null?void 0:s.get(o))??null;return e.jsxs(e.Fragment,{children:[e.jsx(U,{value:r.totalTeams,label:"Total Teams",filterable:!1,id:"total-teams"}),e.jsx(U,{value:r.avgScore,label:"Average Score",filterable:!1,id:"teams-avg-score"}),e.jsx(U,{value:r.totalServices,label:"Total Services",filterable:!1,id:"teams-total-services"}),e.jsx(U,{value:r.noTeam,label:"No Team",filterable:!1,id:"no-team-count"}),e.jsx(U,{value:r.platinum,label:"Platinum",filterable:!0,filterType:"platinum",filterState:l("platinum"),onClick:i,id:"teams-platinum-count"}),e.jsx(U,{value:r.gold,label:"Gold",filterable:!0,filterType:"gold",filterState:l("gold"),onClick:i,id:"teams-gold-count"}),e.jsx(U,{value:r.silver,label:"Silver",filterable:!0,filterType:"silver",filterState:l("silver"),onClick:i,id:"teams-silver-count"}),e.jsx(U,{value:r.bronze,label:"Bronze",filterable:!0,filterType:"bronze",filterState:l("bronze"),onClick:i,id:"teams-bronze-count"})]})}function Ps(t,s,a){const n=d.useRef(void 0);d.useEffect(()=>(n.current=setTimeout(t,s),()=>{n.current&&clearTimeout(n.current)}),[...a,s])}function ls(t={}){const{autoResetDelay:s=3e3}=t,[a,n]=d.useState("idle"),r=d.useRef();d.useEffect(()=>()=>{r.current&&clearTimeout(r.current)},[]);const i=()=>{r.current&&(clearTimeout(r.current),r.current=void 0)},l=d.useCallback(()=>{i(),n("idle")},[]),o=d.useCallback(()=>{i(),n("loading")},[]),c=d.useCallback((p=!0)=>{i(),n("success"),p&&(r.current=setTimeout(l,s))},[s,l]),u=d.useCallback((p=!0)=>{i(),n("error"),p&&(r.current=setTimeout(l,s))},[s,l]);return{state:a,isLoading:a==="loading",isSuccess:a==="success",isError:a==="error",setLoading:o,setSuccess:c,setError:u,reset:l}}const Rt={files:{triggerService:"trigger-service-workflow.yml",createInstallPR:"create-installation-pr.yml",scorecard:"scorecard.yml"},polling:{default:3e4,min:1e4,max:12e4}};function It(t,s,a){return`https://api.github.com/repos/${t}/${s}/actions/workflows/${a}/dispatches`}function ke(){return L.getState().services.all}function Bs(t){L.getState().setServices(t)}function $t(t){L.getState().setFilteredServices(t)}function ci(){return L.getState().teams.all}function di(t){L.getState().setTeams(t)}function Os(t){L.getState().setFilteredTeams(t)}function ui(){return L.getState().teams.sort}function os(){return L.getState().teams.search}function hi(){return L.getState().teams.activeFilters}function cs(){return L.getState().filters.active}function ds(){return L.getState().filters.search}function mi(){return L.getState().filters.sort}function Qe(){return L.getState().ui.checksHash}function vt(t){L.getState().setChecksHash(t)}const gi='<svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z" /></svg>',fi='<svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M3.72 3.72a.75.75 0 0 1 1.06 0L8 6.94l3.22-3.22a.749.749 0 0 1 1.275.326.749.749 0 0 1-.215.734L9.06 8l3.22 3.22a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L8 9.06l-3.22 3.22a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042L6.94 8 3.72 4.78a.75.75 0 0 1 0-1.06Z" /></svg>',pi='<svg class="spinning" width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M1.705 8.005a.75.75 0 0 1 .834.656 5.5 5.5 0 0 0 9.592 2.97l-1.204-1.204a.25.25 0 0 1 .177-.427h3.646a.25.25 0 0 1 .25.25v3.646a.25.25 0 0 1-.427.177l-1.38-1.38A7.002 7.002 0 0 1 1.05 8.84a.75.75 0 0 1 .656-.834ZM8 2.5a5.487 5.487 0 0 0-4.131 1.869l1.204 1.204A.25.25 0 0 1 4.896 6H1.25A.25.25 0 0 1 1 5.75V2.104a.25.25 0 0 1 .427-.177l1.38 1.38A7.002 7.002 0 0 1 14.95 7.16a.75.75 0 0 1-1.49.178A5.5 5.5 0 0 0 8 2.5Z" /></svg>';function Dt(t,s="Triggering..."){t.disabled=!0,t.dataset.originalHtml=t.innerHTML,t.dataset.originalTitle=t.title,t.dataset.originalBg=t.style.backgroundColor,t.innerHTML=pi,t.title=s}async function Hs(t,s="✓ Triggered Successfully"){t.innerHTML=gi,t.title=s,t.style.backgroundColor="#10b981",t.classList.add("success"),await new Promise(a=>setTimeout(a,3e3)),ae(t)}async function ot(t,s="✗ Trigger Failed"){t.innerHTML=fi,t.title=s,t.style.backgroundColor="#ef4444",t.classList.add("error"),await new Promise(a=>setTimeout(a,3e3)),ae(t)}function ae(t){t.disabled=!1,t.classList.remove("success","error"),t.style.backgroundColor="",t.dataset.originalHtml&&(t.innerHTML=t.dataset.originalHtml,delete t.dataset.originalHtml),t.dataset.originalTitle&&(t.title=t.dataset.originalTitle,delete t.dataset.originalTitle),t.dataset.originalBg&&(t.style.backgroundColor=t.dataset.originalBg,delete t.dataset.originalBg)}const Pt=()=>{const{getRepoOwner:t,getRepoName:s}=window.ScorecardModules.registry;return{owner:t(),name:s()}};async function Fs(t,s,a){var r;const n=re();if(!n)return z("Please configure a GitHub PAT in Settings to trigger workflows","warning"),(r=window.openSettings)==null||r.call(window),!1;Dt(a,"Triggering...");try{const{owner:i,name:l}=Pt(),o=await fetch(It(i,l,Rt.files.triggerService),{method:"POST",headers:{Accept:"application/vnd.github+json",Authorization:`Bearer ${n}`,"X-GitHub-Api-Version":ve.api.version,"Content-Type":"application/json"},body:JSON.stringify({ref:"main",inputs:{org:t,repo:s}})});if(o.status===204)return z(`Scorecard workflow triggered for ${t}/${s}`,"success"),await Hs(a,"✓ Triggered Successfully"),!0;if(o.status===401)return pe(),z("Invalid GitHub token. Please enter a valid token in Settings.","error"),await ot(a,"✗ Trigger Failed"),!1;{const c=await o.json().catch(()=>({}));return console.error("Failed to trigger workflow:",o.status,c),z(`Failed to trigger workflow: ${c.message||o.statusText}`,"error"),await ot(a,"✗ Trigger Failed"),!1}}catch(i){return console.error("Error triggering workflow:",i),z(`Error triggering workflow: ${i instanceof Error?i.message:String(i)}`,"error"),await ot(a,"✗ Trigger Failed"),!1}}async function Zs(t,s,a){const n=re();if(!n)return z("GitHub token is required to create installation PRs","error"),!1;Dt(a,"Creating PR...");try{const{owner:r,name:i}=Pt(),l=await fetch(It(r,i,Rt.files.createInstallPR),{method:"POST",headers:{Accept:"application/vnd.github+json",Authorization:`Bearer ${n}`,"X-GitHub-Api-Version":ve.api.version,"Content-Type":"application/json"},body:JSON.stringify({ref:"main",inputs:{org:t,repo:s}})});if(l.status===204)return z(`Installation PR creation started for ${t}/${s}`,"success"),setTimeout(()=>{z("Note: PR status will appear in the catalog in 3-5 minutes due to GitHub Pages deployment.","info")},2e3),a&&(a.innerHTML="⏳ PR Creating...",setTimeout(async()=>{try{await new Promise(c=>setTimeout(c,5e3)),z("Installation PR created! Refreshing...","success");const o=document.getElementById("service-modal");o==null||o.classList.add("hidden"),setTimeout(()=>{var c;return(c=window.showServiceDetail)==null?void 0:c.call(window,t,s)},500)}catch(o){console.error("Error checking PR status:",o),ae(a)}},1e3)),!0;if(l.status===401)return pe(),z("Invalid GitHub token. Please enter a valid token with workflow permissions.","error"),ae(a),!1;{const o=await l.json().catch(()=>({}));return console.error("Failed to create installation PR:",l.status,o),z(`Failed to create installation PR: ${o.message||l.statusText}`,"error"),ae(a),!1}}catch(r){return console.error("Error creating installation PR:",r),z(`Error creating installation PR: ${r instanceof Error?r.message:String(r)}`,"error"),ae(a),!1}}async function Ce(t,s){const a=re();if(!a)return z("GitHub token is required to trigger workflows","error"),!1;Dt(s,"Triggering...");try{const n=t.map(o=>({org:o.org,repo:o.repo})),{owner:r,name:i}=Pt(),l=await fetch(It(r,i,Rt.files.triggerService),{method:"POST",headers:{Accept:"application/vnd.github+json",Authorization:`Bearer ${a}`,"X-GitHub-Api-Version":ve.api.version,"Content-Type":"application/json"},body:JSON.stringify({ref:"main",inputs:{services:JSON.stringify(n)}})});if(l.status===204){const o=t.length;return z(`Triggered workflows for ${o} service${o!==1?"s":""}`,"success"),await Hs(s,`✓ Triggered ${o} service${o!==1?"s":""}`),!0}else{if(l.status===401)return pe(),z("Invalid GitHub token. Please enter a valid token in Settings.","error"),ae(s),!1;{const o=await l.json().catch(()=>({}));return console.error("Failed to trigger bulk workflows:",l.status,o),z(`Failed to trigger workflows: ${o.message||l.statusText}`,"error"),ae(s),!1}}}catch(n){return console.error("Error triggering bulk workflows:",n),z(`Error triggering workflows: ${n instanceof Error?n.message:String(n)}`,"error"),ae(s),!1}}function vi(t){t.preventDefault();const{isServiceStale:s}=window.ScorecardModules.staleness,a=ke().filter(n=>s(n,Qe())&&n.installed);if(a.length===0){z("No stale services to trigger","info");return}confirm(`This will trigger scorecard workflows for ${a.length} stale service${a.length!==1?"s":""}.

Continue?`)&&Ce(a,t.currentTarget)}function xi(t){t.preventDefault();const s=ke().filter(a=>a.installed);if(s.length===0){z("No installed services to trigger","info");return}confirm(`This will trigger scorecard workflows for ALL ${s.length} installed service${s.length!==1?"s":""}.

This may take a while. Continue?`)&&Ce(s,t.currentTarget)}const wi=Object.freeze(Object.defineProperty({__proto__:null,handleBulkTrigger:vi,handleBulkTriggerAll:xi,installService:Zs,triggerBulkWorkflows:Ce,triggerServiceWorkflow:Fs},Symbol.toStringTag,{value:"Module"}));async function us(t){const s=document.createElement("button");return await Ce(t,s)}function Je(){let t=[...ke()];const s=L.getState(),a=s.filters.teamFilter;if(a){const i=a.split(",").map(o=>o.trim().toLowerCase()),l=i.includes("__no_team__");t=t.filter(o=>{const c=te(o);return l&&!!!c?!0:c?i.includes(c.toLowerCase()):!1})}const n=s.filters.checkFilters;n&&n.size>0&&(t=t.filter(i=>{var l;for(const[o,c]of n){const u=(l=i.check_results)==null?void 0:l[o];if(c==="pass"&&u!=="pass"||c==="fail"&&u!=="fail")return!1}return!0}));const r=t.filter(i=>{if(cs().size>0)for(const[l,o]of cs()){let c=!1;if(l==="has-api"?c=i.has_api??!1:l==="stale"?c=X(i,Qe()):l==="installed"?c=i.installed??!1:(l==="platinum"||l==="gold"||l==="silver"||l==="bronze")&&(c=i.rank===l),o==="include"){if(!c)return!1}else if(o==="exclude"&&c)return!1}if(ds()){const l=te(i)||"";if(!`${i.name} ${i.org} ${i.repo} ${l}`.toLowerCase().includes(ds()))return!1}return!0});r.sort((i,l)=>{switch(mi()){case"score-desc":return l.score-i.score;case"score-asc":return i.score-l.score;case"name-asc":return i.name.localeCompare(l.name);case"name-desc":return l.name.localeCompare(i.name);case"updated-desc":return new Date(l.last_updated).getTime()-new Date(i.last_updated).getTime();default:return 0}}),$t(r)}async function Xe(){const t=document.getElementById("refresh-btn");if(!t)return;const s=t.innerHTML;t.disabled=!0,t.innerHTML='<span class="spinner"></span> Refreshing...';try{z("Refreshing service data...","info"),vt(null);const{services:a,usedAPI:n}=await Ke();Bs(a),$t([...a]),vt(await qe());const r=L.getState();r.setServices(a),r.setFilteredServices([...a]),r.setChecksHash(Qe()),Je();const i=new Date().toLocaleTimeString();z(n?`Data refreshed successfully from GitHub API at ${i}. (Fresh data, bypassed cache)`:`Data refreshed from CDN at ${i}. (Note: CDN cache may be up to 5 minutes old. Use GitHub PAT in settings for real-time data)`,"success")}catch(a){console.error("Error refreshing data:",a),z(`Failed to refresh data: ${a instanceof Error?a.message:String(a)}`,"error")}finally{setTimeout(()=>{t.disabled=!1,t.innerHTML=s},1e3)}}async function zs(){try{const{services:t}=await Ke();Bs(t),$t([...t]),vt(await qe());const s=L.getState();s.setServices(t),s.setFilteredServices([...t]),s.setChecksHash(Qe()),Je(),window.location.hash==="#teams"&&window.initTeamsView&&window.initTeamsView()}catch(t){console.error("Error loading services:",t);const s=we("--color-text-muted"),a=document.getElementById("services-grid");a&&!window.__REACT_MANAGES_SERVICES_GRID&&(a.innerHTML=`
            <div class="empty-state">
                <h3>No Services Found</h3>
                <p>No services have run scorecards yet, or the registry is not available.</p>
                <p style="margin-top: 10px; font-size: 0.9rem; color: ${s};">
                    Error: ${t instanceof Error?t.message:String(t)}
                </p>
            </div>
        `)}}const ji=Object.freeze(Object.defineProperty({__proto__:null,filterAndRenderServices:Je,initializeApp:zs,refreshData:Xe},Symbol.toStringTag,{value:"Module"}));function bi(){const t=L(v=>v.updateFilters),s=L(v=>v.filters),a=L(v=>v.services.all),n=L(v=>v.ui.checksHash),[r,i]=d.useState(s.search),[l,o]=d.useState(!1),c=ls(),u=ls();Ps(()=>{t({search:r})},300,[r]);const p=v=>{i(v.target.value)},k=v=>{t({sort:v.target.value})},b=async()=>{o(!0);try{await Xe()}finally{o(!1)}},h=async()=>{const v=a.filter(A=>X(A,n)&&A.installed);if(v.length===0){z("No stale services to trigger","info");return}if(!confirm(`Trigger workflows for ${v.length} stale service(s)?`))return;c.setLoading(),await us(v)?c.setSuccess():c.setError()},T=async()=>{const v=a.filter(A=>A.installed);if(v.length===0){z("No installed services to trigger","info");return}if(!confirm(`Trigger workflows for ALL ${v.length} installed service(s)?`))return;u.setLoading(),await us(v)?u.setSuccess():u.setError()};return e.jsxs("section",{className:"controls",children:[e.jsx("input",{type:"text",id:"search-input",placeholder:"Search services...",className:"search-box",value:r,onChange:p}),e.jsxs("select",{id:"sort-select",className:"sort-select","aria-label":"Sort by",value:s.sort,onChange:k,children:[e.jsx("option",{value:"score-desc",children:"Score: High to Low"}),e.jsx("option",{value:"score-asc",children:"Score: Low to High"}),e.jsx("option",{value:"name-asc",children:"Name: A to Z"}),e.jsx("option",{value:"name-desc",children:"Name: Z to A"}),e.jsx("option",{value:"updated-desc",children:"Recently Updated"})]}),e.jsxs("button",{id:"refresh-btn",className:"refresh-btn",onClick:b,disabled:l,title:"Re-fetch service data from catalog",children:[e.jsx(ct,{spinning:l}),l?"Refreshing...":"Refresh Data"]}),e.jsxs(Kt,{state:c.state,onClick:h,loadingText:"Triggering...",successText:"Triggered!",errorText:"Failed",variant:"bulk",children:[e.jsx(ct,{}),"Re-run All Stale"]}),e.jsxs(Kt,{state:u.state,onClick:T,loadingText:"Triggering...",successText:"Triggered!",errorText:"Failed",variant:"neutral",title:"Trigger scorecard workflow for all installed services",children:[e.jsx(ct,{}),"Re-run All Installed"]})]})}function ct({spinning:t=!1}){return e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",style:{marginRight:6},className:t?"spinning":"",children:e.jsx("path",{d:"M1.705 8.005a.75.75 0 0 1 .834.656 5.5 5.5 0 0 0 9.592 2.97l-1.204-1.204a.25.25 0 0 1 .177-.427h3.646a.25.75 0 0 1 .25.25v3.646a.25.75 0 0 1-.427.177l-1.38-1.38A7.002 7.002 0 0 1 1.05 8.84a.75.75 0 0 1 .656-.834ZM8 2.5a5.487 5.487 0 0 0-4.131 1.869l1.204 1.204A.25.25 0 0 1 4.896 6H1.25A.25.25 0 0 1 1 5.75V2.104a.25.25 0 0 1 .427-.177l1.38 1.38A7.002 7.002 0 0 1 14.95 7.16a.75.75 0 0 1-1.49.178A5.5 5.5 0 0 0 8 2.5Z"})})}function ki(){const t=L(b=>b.teams),s=L(b=>b.updateTeamsState),a=L(b=>b.filterAndSortTeams),[n,r]=d.useState(t.search),[i,l]=d.useState(!1);Ps(()=>{s({search:n}),a()},300,[n]);const o=b=>{r(b.target.value)},c=b=>{s({sort:b.target.value}),a()},u=async()=>{l(!0);try{window.refreshTeamsView&&await window.refreshTeamsView()}finally{l(!1)}},p=()=>{window.openTeamEditModal&&window.openTeamEditModal("create")},k=()=>{window.openCheckAdoptionDashboard&&window.openCheckAdoptionDashboard()};return e.jsxs("section",{className:"controls teams-controls",children:[e.jsx("input",{type:"text",id:"teams-search-input",placeholder:"Search teams...",className:"search-box",value:n,onChange:o}),e.jsxs("select",{id:"teams-sort-select",className:"sort-select",value:t.sort,onChange:c,children:[e.jsx("option",{value:"score-desc",children:"Score: High to Low"}),e.jsx("option",{value:"score-asc",children:"Score: Low to High"}),e.jsx("option",{value:"services-desc",children:"Services: High to Low"}),e.jsx("option",{value:"services-asc",children:"Services: Low to High"}),e.jsx("option",{value:"name-asc",children:"Name: A to Z"}),e.jsx("option",{value:"name-desc",children:"Name: Z to A"})]}),e.jsxs("button",{className:"refresh-btn",onClick:u,disabled:i,children:[e.jsx(Ci,{spinning:i}),"Refresh Data"]}),e.jsx("button",{className:"create-btn",onClick:p,children:"+ Create Team"}),e.jsxs("button",{className:"trigger-btn trigger-btn-accent",onClick:k,title:"View check adoption rates across all teams",children:[e.jsx(Ni,{}),"Check Adoption"]})]})}function Ci({spinning:t=!1}){return e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",style:{marginRight:6},className:t?"spinning":"",children:e.jsx("path",{d:"M1.705 8.005a.75.75 0 0 1 .834.656 5.5 5.5 0 0 0 9.592 2.97l-1.204-1.204a.25.25 0 0 1 .177-.427h3.646a.25.25 0 0 1 .25.25v3.646a.25.25 0 0 1-.427.177l-1.38-1.38A7.002 7.002 0 0 1 1.05 8.84a.75.75 0 0 1 .656-.834ZM8 2.5a5.487 5.487 0 0 0-4.131 1.869l1.204 1.204A.25.25 0 0 1 4.896 6H1.25A.25.25 0 0 1 1 5.75V2.104a.25.25 0 0 1 .427-.177l1.38 1.38A7.002 7.002 0 0 1 14.95 7.16a.75.75 0 0 1-1.49.178A5.5 5.5 0 0 0 8 2.5Z"})})}function Ni(){return e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",style:{marginRight:6},children:e.jsx("path",{d:"M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"})})}function Si({className:t=""}){return e.jsxs("svg",{className:t,viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("rect",{x:"12",y:"8",width:"14",height:"18",rx:"2",fill:"#1e3a5f",stroke:"#38BDF8",strokeWidth:"1"}),e.jsx("path",{d:"M16 14l2 2 3-3",stroke:"#38BDF8",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("rect",{x:"9",y:"6",width:"14",height:"18",rx:"2",fill:"#4a1e1e",stroke:"#f87171",strokeWidth:"1"}),e.jsx("path",{d:"M18 12l-4 4M14 12l4 4",stroke:"#f87171",strokeWidth:"1.5",strokeLinecap:"round"}),e.jsx("rect",{x:"6",y:"4",width:"14",height:"18",rx:"2",fill:"#0f2942",stroke:"#0EA5E9",strokeWidth:"1.2"}),e.jsx("path",{d:"M10 11l2 2 4-4",stroke:"#38BDF8",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"})]})}function yi({title:t="Scorecards"}){return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:B("header-strip","header-strip-react")}),e.jsx("header",{className:"header-bar header-bar-react",children:e.jsxs("div",{className:"header-brand header-brand-react",children:[e.jsx(Si,{className:"header-logo header-logo-react"}),e.jsx("span",{className:"header-title header-title-react",children:t})]})})]})}function Ti({className:t=""}){return e.jsxs("svg",{className:t,viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("rect",{x:"12",y:"8",width:"14",height:"18",rx:"2",fill:"#1e3a5f",stroke:"#38BDF8",strokeWidth:"1"}),e.jsx("path",{d:"M16 14l2 2 3-3",stroke:"#38BDF8",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("rect",{x:"9",y:"6",width:"14",height:"18",rx:"2",fill:"#4a1e1e",stroke:"#f87171",strokeWidth:"1"}),e.jsx("path",{d:"M18 12l-4 4M14 12l4 4",stroke:"#f87171",strokeWidth:"1.5",strokeLinecap:"round"}),e.jsx("rect",{x:"6",y:"4",width:"14",height:"18",rx:"2",fill:"#0f2942",stroke:"#0EA5E9",strokeWidth:"1.2"}),e.jsx("path",{d:"M10 11l2 2 4-4",stroke:"#38BDF8",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"})]})}function _i({docsUrl:t="https://github.com/feddericovonwernich-org/scorecards"}){return e.jsxs(e.Fragment,{children:[e.jsx("footer",{className:"footer-react",children:e.jsx("div",{className:"footer-react__container",children:e.jsxs("div",{className:"footer-react__content",children:[e.jsx(Ti,{className:"footer-react__logo"}),e.jsxs("p",{className:"footer-react__text",children:["Powered by Scorecards |"," ",e.jsx("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"footer-react__link",children:"Documentation"})]})]})})}),e.jsx("div",{className:B("footer-strip","footer-strip-react")})]})}function Ai({className:t=""}){return e.jsx("svg",{className:t,viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})}function Ei({className:t=""}){return e.jsx("svg",{className:t,viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{d:"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zM16 18v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z"})})}const hs="tab-icon";function Mi(){const t=L(Ts),s=L(n=>n.setCurrentView),a=d.useCallback(n=>{s(n),history.replaceState(null,"",`#${n}`);const r=document.getElementById("services-view"),i=document.getElementById("teams-view");r&&i&&(n==="services"?(r.classList.add("active"),i.classList.remove("active")):(r.classList.remove("active"),i.classList.add("active"))),window.dispatchEvent(new CustomEvent("view-changed",{detail:{view:n}}))},[s]);return d.useEffect(()=>{const n=()=>{const r=window.location.hash.replace("#","");if(r==="teams"||r==="services"){s(r);const i=document.getElementById("services-view"),l=document.getElementById("teams-view");i&&l&&(r==="services"?(i.classList.add("active"),l.classList.remove("active")):(i.classList.remove("active"),l.classList.add("active")))}};return n(),window.addEventListener("hashchange",n),()=>window.removeEventListener("hashchange",n)},[s]),e.jsxs("nav",{className:"view-tabs",role:"tablist",children:[e.jsxs("button",{className:B("view-tab",t==="services"&&"active"),"data-view":"services",onClick:()=>a("services"),role:"tab","aria-selected":t==="services","aria-controls":"services-view",children:[e.jsx(Ai,{className:hs}),"Services"]}),e.jsxs("button",{className:B("view-tab",t==="teams"&&"active"),"data-view":"teams",onClick:()=>a("teams"),role:"tab","aria-selected":t==="teams","aria-controls":"teams-view",children:[e.jsx(Ei,{className:hs}),"Teams"]})]})}function Li({className:t=""}){return e.jsx("svg",{className:t,width:"24",height:"24",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M8 12a4 4 0 1 1 0-8 4 4 0 0 1 0 8Zm0-1.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Zm5.657-8.157a.75.75 0 0 1 0 1.061l-1.061 1.06a.749.749 0 0 1-1.275-.326.749.749 0 0 1 .215-.734l1.06-1.06a.75.75 0 0 1 1.06 0Zm-9.193 9.193a.75.75 0 0 1 0 1.06l-1.06 1.061a.75.75 0 1 1-1.061-1.06l1.06-1.061a.75.75 0 0 1 1.061 0ZM8 0a.75.75 0 0 1 .75.75v1.5a.75.75 0 0 1-1.5 0V.75A.75.75 0 0 1 8 0ZM3 8a.75.75 0 0 1-.75.75H.75a.75.75 0 0 1 0-1.5h1.5A.75.75 0 0 1 3 8Zm13 0a.75.75 0 0 1-.75.75h-1.5a.75.75 0 0 1 0-1.5h1.5A.75.75 0 0 1 16 8Zm-8 5a.75.75 0 0 1 .75.75v1.5a.75.75 0 0 1-1.5 0v-1.5A.75.75 0 0 1 8 13Zm3.536-1.464a.75.75 0 0 1 1.06 0l1.061 1.06a.75.75 0 0 1-1.06 1.061l-1.061-1.06a.75.75 0 0 1 0-1.061ZM2.343 2.343a.75.75 0 0 1 1.061 0l1.06 1.061a.751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018l-1.06-1.06a.75.75 0 0 1 0-1.06Z"})})}function Ri({className:t=""}){return e.jsx("svg",{className:t,width:"24",height:"24",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M9.598 1.591a.749.749 0 0 1 .785-.175 7.001 7.001 0 1 1-8.967 8.967.75.75 0 0 1 .961-.96 5.5 5.5 0 0 0 7.046-7.046.75.75 0 0 1 .175-.786Zm1.616 1.945a7 7 0 0 1-7.678 7.678 5.499 5.499 0 1 0 7.678-7.678Z"})})}function Ii({hasToken:t,className:s=""}){return t?e.jsx("svg",{className:s,width:"24",height:"24",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M4 4a4 4 0 0 1 8 0v2h.25c.966 0 1.75.784 1.75 1.75v5.5A1.75 1.75 0 0 1 12.25 15h-8.5A1.75 1.75 0 0 1 2 13.25v-5.5C2 6.784 2.784 6 3.75 6H4Zm8.25 3.5h-8.5a.25.25 0 0 0-.25.25v5.5c0 .138.112.25.25.25h8.5a.25.25 0 0 0 .25-.25v-5.5a.25.25 0 0 0-.25-.25ZM10.5 6V4a2.5 2.5 0 1 0-5 0v2Z"})}):e.jsx("svg",{className:s,width:"24",height:"24",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M5.5 4a2.5 2.5 0 0 1 4.607-1.346.75.75 0 1 0 1.264-.808A4 4 0 0 0 4 4v1.5H3A1.5 1.5 0 0 0 1.5 7v7A1.5 1.5 0 0 0 3 15.5h10a1.5 1.5 0 0 0 1.5-1.5V7A1.5 1.5 0 0 0 13 5.5h-7V4Z"})})}function $i({className:t=""}){return e.jsx("svg",{className:t,width:"24",height:"24",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0ZM1.5 8a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0Zm7-3.25v2.992l2.028.812a.75.75 0 0 1-.557 1.392l-2.5-1A.75.75 0 0 1 7 8.25v-3.5a.75.75 0 0 1 1.5 0Z"})})}function Di({className:t=""}){return e.jsx("svg",{className:t,width:"24",height:"24",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M1 2.5A1.5 1.5 0 0 1 2.5 1h3A1.5 1.5 0 0 1 7 2.5v3A1.5 1.5 0 0 1 5.5 7h-3A1.5 1.5 0 0 1 1 5.5v-3Zm8 0A1.5 1.5 0 0 1 10.5 1h3A1.5 1.5 0 0 1 15 2.5v3A1.5 1.5 0 0 1 13.5 7h-3A1.5 1.5 0 0 1 9 5.5v-3Zm-8 8A1.5 1.5 0 0 1 2.5 9h3A1.5 1.5 0 0 1 7 10.5v3A1.5 1.5 0 0 1 5.5 15h-3A1.5 1.5 0 0 1 1 13.5v-3Zm8 0A1.5 1.5 0 0 1 10.5 9h3a1.5 1.5 0 0 1 1.5 1.5v3a1.5 1.5 0 0 1-1.5 1.5h-3A1.5 1.5 0 0 1 9 13.5v-3Z"})})}function Pi({className:t=""}){return e.jsx("svg",{className:t,width:"24",height:"24",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M2 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm3.75-1.5a.75.75 0 0 0 0 1.5h8.5a.75.75 0 0 0 0-1.5h-8.5Zm0 5a.75.75 0 0 0 0 1.5h8.5a.75.75 0 0 0 0-1.5h-8.5Zm0 5a.75.75 0 0 0 0 1.5h8.5a.75.75 0 0 0 0-1.5h-8.5ZM3 8a1 1 0 1 1-2 0 1 1 0 0 1 2 0Zm-1 6a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z"})})}function Bi({onSettingsClick:t,onActionsWidgetClick:s,actionsBadgeCount:a=0}){const{theme:n,toggleTheme:r}=Aa(),i=n==="dark",o=!!L(fe),c=L(_t),u=L(h=>h.setDisplayMode),p=d.useCallback(()=>{u(c==="grid"?"list":"grid")},[c,u]),k=d.useCallback(()=>{var h;t?t():(h=window.openSettings)==null||h.call(window)},[t]),b=d.useCallback(()=>{var h;s?s():(h=window.toggleActionsWidget)==null||h.call(window)},[s]);return e.jsxs("div",{className:"floating-controls",children:[e.jsx("button",{className:"floating-btn floating-btn--display",title:`Switch to ${c==="grid"?"list":"grid"} view`,"aria-label":`Switch to ${c==="grid"?"list":"grid"} view`,onClick:p,children:c==="grid"?e.jsx(Pi,{}):e.jsx(Di,{})}),e.jsx("button",{className:"floating-btn floating-btn--theme",title:"Toggle night mode","aria-label":"Toggle night mode",onClick:r,children:i?e.jsx(Ri,{}):e.jsx(Li,{})}),e.jsx("button",{className:B("floating-btn floating-btn--settings",o&&"has-token"),title:o?"Settings (PAT active)":"Settings","aria-label":o?"Settings (PAT active)":"Settings",onClick:k,children:e.jsx(Ii,{hasToken:o})}),e.jsxs("button",{className:"floating-btn floating-btn--widget",title:"Show GitHub Actions","aria-label":"Show GitHub Actions",onClick:b,children:[e.jsx($i,{}),a>0&&e.jsx("span",{className:"widget-badge","data-count":a,children:a})]})]})}let xt=[],Vs=!1;function Oi(){const t=[...xt];return xt=[],t}function Hi(){Vs=!0}let Me=null,Le=null,Gs=null,Ws=null,wt=null,Us=null,Re=null,Ie=null,jt=null,bt=null;function Fi(){Me=document.getElementById("services-grid"),Le=document.getElementById("teams-grid"),Gs=document.getElementById("react-header"),Ws=document.getElementById("react-footer"),wt=document.getElementById("react-navigation"),Us=document.getElementById("react-floating-controls"),Me&&(window.__REACT_MANAGES_SERVICES_GRID=!0,Me.innerHTML=""),Le&&(window.__REACT_MANAGES_TEAMS_GRID=!0,Le.innerHTML=""),wt&&(window.__REACT_MANAGES_NAVIGATION=!0),Re=document.querySelector(".services-stats"),Ie=document.querySelector(".teams-stats"),Re&&(window.__REACT_MANAGES_SERVICES_STATS=!0,Re.innerHTML=""),Ie&&(window.__REACT_MANAGES_TEAMS_STATS=!0,Ie.innerHTML=""),jt=document.querySelector("#services-view .controls"),bt=document.querySelector("#teams-view .controls"),jt&&(window.__REACT_MANAGES_SERVICES_CONTROLS=!0),bt&&(window.__REACT_MANAGES_TEAMS_CONTROLS=!0)}function Zi({servicesGrid:t,teamsGrid:s,header:a,footer:n,navigation:r,floatingControls:i,servicesStats:l,teamsStats:o,servicesControls:c,teamsControls:u}){const{toasts:p,showToast:k,dismissToast:b}=Da(),{filterCounts:h}=$s(),T=h.in_progress+h.queued,v=L(F=>F.toggleActionsWidget),[_,A]=d.useState(!1),[w,M]=d.useState(!1),[E,S]=d.useState(!1),[m,g]=d.useState(!1),[I,y]=d.useState("create"),[$,R]=d.useState(void 0),[D,O]=d.useState(!1),[N,f]=d.useState(null),[C,j]=d.useState(null),[x,P]=d.useState(!1),[H,W]=d.useState(null),[V,Z]=d.useState(!1),[G,J]=d.useState(new Map),xe=d.useCallback((F,K)=>{f(F),j(K),O(!0)},[]),ue=d.useCallback(()=>{O(!1)},[]),st=d.useCallback(F=>{W(F),P(!0)},[]),at=d.useCallback(()=>{P(!1)},[]),Ft=d.useCallback(()=>{Z(!0)},[]),da=d.useCallback(()=>{Z(!1)},[]),ua=d.useCallback(F=>{J(F),window.dispatchEvent(new CustomEvent("check-filters-changed",{detail:{filters:F}}))},[]),ha=L(F=>F.filters.active),Zt=L(F=>F.setFilter),ma=d.useCallback((F,K)=>{Zt(F,K),window.dispatchEvent(new CustomEvent("filters-changed"))},[Zt]),nt=L(F=>F.teams.activeFilters),zt=L(F=>F.updateTeamsState),ga=d.useCallback((F,K)=>{const se=new Map(nt);K===null?se.delete(F):se.set(F,K),zt({activeFilters:se}),window.dispatchEvent(new CustomEvent("teams-filters-changed"))},[nt,zt]);d.useEffect(()=>{const F=()=>{Z(!0)};return window.addEventListener("open-check-filter-modal",F),()=>{window.removeEventListener("open-check-filter-modal",F)}},[]);const rt=d.useCallback(()=>{A(!0)},[]),fa=d.useCallback(()=>{A(!1)},[]),Vt=d.useCallback(()=>{M(!0)},[]),pa=d.useCallback(()=>{M(!1)},[]),Gt=d.useCallback(()=>{S(!0)},[]),va=d.useCallback(()=>{S(!1)},[]),Ne=d.useCallback((F,K)=>{y(F),R(K),g(!0)},[]),xa=d.useCallback(()=>{g(!1)},[]),wa=d.useCallback((F,K)=>{},[]);d.useEffect(()=>(Wt(k),Hi(),window.showToast=(K,se)=>{k(K,se||"info")},Oi().forEach(({message:K,type:se})=>{k(K,se)}),()=>{Wt(()=>{})}),[k]),d.useEffect(()=>{const F=window.showServiceDetail,K=window.showTeamDetail,se=window.showTeamModal,ba=window.openCheckFilterModal,ka=window.closeModal,Ca=window.closeTeamModal,Na=window.openSettings,Sa=window.toggleActionsWidget,ya=window.openTeamDashboard,Ta=window.openTeamEditModal,_a=window.openCheckAdoptionDashboard;return window.showServiceDetail=async(le,it)=>{xe(le,it)},window.showTeamDetail=async le=>{st(le)},window.showTeamModal=async le=>{st(le)},window.openCheckFilterModal=()=>{Ft()},window.closeModal=()=>{ue()},window.closeTeamModal=()=>{at()},window.openSettings=()=>{rt()},window.toggleActionsWidget=()=>{v()},window.openTeamDashboard=()=>{Vt()},window.openTeamEditModal=(le,it)=>{Ne(le||"create",it)},window.openCheckAdoptionDashboard=()=>{Gt()},()=>{window.showServiceDetail=F,window.showTeamDetail=K,window.showTeamModal=se,window.openCheckFilterModal=ba,window.closeModal=ka,window.closeTeamModal=Ca,window.openSettings=Na,window.toggleActionsWidget=Sa,window.openTeamDashboard=ya,window.openTeamEditModal=Ta,window.openCheckAdoptionDashboard=_a}},[xe,ue,st,at,Ft,rt,v,Vt,Ne,Gt]);const ja=L.getState().services.all||[];return e.jsxs(e.Fragment,{children:[e.jsx($a,{toasts:p,onDismiss:b}),a&&Y.createPortal(e.jsx(yi,{}),a),n&&Y.createPortal(e.jsx(_i,{}),n),r&&Y.createPortal(e.jsx(Mi,{}),r),i&&Y.createPortal(e.jsx(Bi,{actionsBadgeCount:T,onSettingsClick:rt,onActionsWidgetClick:v}),i),l&&Y.createPortal(e.jsx(li,{onFilterChange:ma,activeFilters:ha}),l),o&&Y.createPortal(e.jsx(oi,{onFilterChange:ga,activeFilters:nt}),o),c&&Y.createPortal(e.jsx(bi,{}),c),u&&Y.createPortal(e.jsx(ki,{}),u),t&&Y.createPortal(e.jsx(In,{}),t),s&&Y.createPortal(e.jsx(On,{}),s),e.jsx(ir,{isOpen:D,onClose:ue,org:N,repo:C}),e.jsx(fr,{isOpen:x,onClose:at,teamName:H}),e.jsx(jr,{isOpen:V,onClose:da,filters:G,onFiltersChange:ua,services:ja}),e.jsx(Rr,{isOpen:_,onClose:fa}),e.jsx(Fr,{}),e.jsx(zr,{isOpen:w,onClose:pa,onCreateTeam:()=>Ne("create"),onEditTeam:F=>Ne("edit",F)}),e.jsx(Wr,{isOpen:m,onClose:xa,mode:I,teamId:$,onSave:wa}),e.jsx(Xr,{isOpen:E,onClose:va}),e.jsx(ai,{}),e.jsx(ii,{})]})}function ms(){const t=document.getElementById("react-root");if(!t){console.warn("React root element not found");return}Fi(),window.showToast||(window.showToast=(a,n)=>{Vs||xt.push({message:a,type:n||"info"})}),Ea.createRoot(t).render(e.jsx(d.StrictMode,{children:e.jsx(Zi,{servicesGrid:Me,teamsGrid:Le,header:Gs,footer:Ws,navigation:wt,floatingControls:Us,servicesStats:Re,teamsStats:Ie,servicesControls:jt,teamsControls:bt})}))}typeof document<"u"&&(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",ms):ms());const qs={github:`<svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
        <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path>
    </svg>`,refresh:`<svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
        <path d="M1.705 8.005a.75.75 0 0 1 .834.656 5.5 5.5 0 0 0 9.592 2.97l-1.204-1.204a.25.25 0 0 1 .177-.427h3.646a.25.25 0 0 1 .25.25v3.646a.25.25 0 0 1-.427.177l-1.38-1.38A7.002 7.002 0 0 1 1.05 8.84a.75.75 0 0 1 .656-.834ZM8 2.5a5.487 5.487 0 0 0-4.131 1.869l1.204 1.204A.25.25 0 0 1 4.896 6H1.25A.25.25 0 0 1 1 5.75V2.104a.25.25 0 0 1 .427-.177l1.38 1.38A7.002 7.002 0 0 1 14.95 7.16a.75.75 0 0 1-1.49.178A5.5 5.5 0 0 0 8 2.5Z"></path>
    </svg>`,checkmark:`<svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
        <path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"></path>
    </svg>`,xMark:`<svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
        <path d="M3.72 3.72a.75.75 0 0 1 1.06 0L8 6.94l3.22-3.22a.749.749 0 0 1 1.275.326.749.749 0 0 1-.215.734L9.06 8l3.22 3.22a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L8 9.06l-3.22 3.22a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042L6.94 8 3.72 4.78a.75.75 0 0 1 0-1.06Z"></path>
    </svg>`,externalLink:`<svg width="12" height="12" viewBox="0 0 16 16" fill="currentColor">
        <path d="M3.75 2h3.5a.75.75 0 0 1 0 1.5h-3.5a.25.25 0 0 0-.25.25v8.5c0 .138.112.25.25.25h8.5a.25.25 0 0 0 .25-.25v-3.5a.75.75 0 0 1 1.5 0v3.5A1.75 1.75 0 0 1 12.25 14h-8.5A1.75 1.75 0 0 1 2 12.25v-8.5C2 2.784 2.784 2 3.75 2Zm6.854-1h4.146a.25.25 0 0 1 .25.25v4.146a.25.25 0 0 1-.427.177L13.03 4.03 9.28 7.78a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042l3.75-3.75-1.543-1.543A.25.25 0 0 1 10.604 1Z"></path>
    </svg>`,pullRequest:`<svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
        <path d="M1.5 3.25a2.25 2.25 0 1 1 3 2.122v5.256a2.251 2.251 0 1 1-1.5 0V5.372A2.25 2.25 0 0 1 1.5 3.25Zm5.677-.177L9.573.677A.25.25 0 0 1 10 .854V2.5h1A2.5 2.5 0 0 1 13.5 5v5.628a2.251 2.251 0 1 1-1.5 0V5a1 1 0 0 0-1-1h-1v1.646a.25.25 0 0 1-.427.177L7.177 3.427a.25.25 0 0 1 0-.354ZM3.75 2.5a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Zm0 9.5a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Zm8.25.75a.75.75 0 1 0 1.5 0 .75.75 0 0 0-1.5 0Z"></path>
    </svg>`,download:`<svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
        <path d="M2.75 14A1.75 1.75 0 0 1 1 12.25v-2.5a.75.75 0 0 1 1.5 0v2.5c0 .138.112.25.25.25h10.5a.25.25 0 0 0 .25-.25v-2.5a.75.75 0 0 1 1.5 0v2.5A1.75 1.75 0 0 1 13.25 14Z"></path>
        <path d="M7.25 7.689V2a.75.75 0 0 1 1.5 0v5.689l1.97-1.969a.749.749 0 1 1 1.06 1.06l-3.25 3.25a.749.749 0 0 1-1.06 0L4.22 6.78a.749.749 0 1 1 1.06-1.06l1.97 1.969Z"></path>
    </svg>`,arrowLeft:`<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M15 18l-6-6 6-6"></path>
    </svg>`,arrowRight:`<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M9 18l6-6-6-6"></path>
    </svg>`,chevronDown:`<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <polyline points="6 9 12 15 18 9"></polyline>
    </svg>`};function Ks(t,s={}){const a=qs[t];if(!a)return console.warn(`Icon "${t}" not found`),"";let n=a;return s.size&&(n=n.replace(/width="\d+"/,`width="${s.size}"`).replace(/height="\d+"/,`height="${s.size}"`)),s.className&&(n=n.replace("<svg",`<svg class="${s.className}"`)),n}const zi=Object.freeze(Object.defineProperty({__proto__:null,ICONS:qs,getIcon:Ks},Symbol.toStringTag,{value:"Module"}));function Ys(t){function s(x,P){return x<<P|x>>>32-P}function a(x,P){const H=x&2147483648,W=P&2147483648,V=x&1073741824,Z=P&1073741824,G=(x&1073741823)+(P&1073741823);return V&Z?G^2147483648^H^W:V|Z?G&1073741824?G^3221225472^H^W:G^1073741824^H^W:G^H^W}function n(x,P,H){return x&P|~x&H}function r(x,P,H){return x&H|P&~H}function i(x,P,H){return x^P^H}function l(x,P,H){return P^(x|~H)}function o(x,P,H,W,V,Z,G){return x=a(x,a(a(n(P,H,W),V),G)),a(s(x,Z),P)}function c(x,P,H,W,V,Z,G){return x=a(x,a(a(r(P,H,W),V),G)),a(s(x,Z),P)}function u(x,P,H,W,V,Z,G){return x=a(x,a(a(i(P,H,W),V),G)),a(s(x,Z),P)}function p(x,P,H,W,V,Z,G){return x=a(x,a(a(l(P,H,W),V),G)),a(s(x,Z),P)}function k(x){const P=x.length,H=P+8,V=((H-H%64)/64+1)*16,Z=new Array(V-1);let G=0,J=0;for(;J<P;){const ue=(J-J%4)/4;G=J%4*8,Z[ue]=Z[ue]|x.charCodeAt(J)<<G,J++}const xe=(J-J%4)/4;return G=J%4*8,Z[xe]=Z[xe]|128<<G,Z[V-2]=P<<3,Z[V-1]=P>>>29,Z}function b(x){let P="";for(let H=0;H<=3;H++){const V="0"+(x>>>H*8&255).toString(16);P=P+V.substr(V.length-2,2)}return P}const h=k(t),T=7,v=12,_=17,A=22,w=5,M=9,E=14,S=20,m=4,g=11,I=16,y=23,$=6,R=10,D=15,O=21;let N=1732584193,f=4023233417,C=2562383102,j=271733878;for(let x=0;x<h.length;x+=16){const P=N,H=f,W=C,V=j;N=o(N,f,C,j,h[x+0],T,3614090360),j=o(j,N,f,C,h[x+1],v,3905402710),C=o(C,j,N,f,h[x+2],_,606105819),f=o(f,C,j,N,h[x+3],A,3250441966),N=o(N,f,C,j,h[x+4],T,4118548399),j=o(j,N,f,C,h[x+5],v,1200080426),C=o(C,j,N,f,h[x+6],_,2821735955),f=o(f,C,j,N,h[x+7],A,4249261313),N=o(N,f,C,j,h[x+8],T,1770035416),j=o(j,N,f,C,h[x+9],v,2336552879),C=o(C,j,N,f,h[x+10],_,4294925233),f=o(f,C,j,N,h[x+11],A,2304563134),N=o(N,f,C,j,h[x+12],T,1804603682),j=o(j,N,f,C,h[x+13],v,4254626195),C=o(C,j,N,f,h[x+14],_,2792965006),f=o(f,C,j,N,h[x+15],A,1236535329),N=c(N,f,C,j,h[x+1],w,4129170786),j=c(j,N,f,C,h[x+6],M,3225465664),C=c(C,j,N,f,h[x+11],E,643717713),f=c(f,C,j,N,h[x+0],S,3921069994),N=c(N,f,C,j,h[x+5],w,3593408605),j=c(j,N,f,C,h[x+10],M,38016083),C=c(C,j,N,f,h[x+15],E,3634488961),f=c(f,C,j,N,h[x+4],S,3889429448),N=c(N,f,C,j,h[x+9],w,568446438),j=c(j,N,f,C,h[x+14],M,3275163606),C=c(C,j,N,f,h[x+3],E,4107603335),f=c(f,C,j,N,h[x+8],S,1163531501),N=c(N,f,C,j,h[x+13],w,2850285829),j=c(j,N,f,C,h[x+2],M,4243563512),C=c(C,j,N,f,h[x+7],E,1735328473),f=c(f,C,j,N,h[x+12],S,2368359562),N=u(N,f,C,j,h[x+5],m,4294588738),j=u(j,N,f,C,h[x+8],g,2272392833),C=u(C,j,N,f,h[x+11],I,1839030562),f=u(f,C,j,N,h[x+14],y,4259657740),N=u(N,f,C,j,h[x+1],m,2763975236),j=u(j,N,f,C,h[x+4],g,1272893353),C=u(C,j,N,f,h[x+7],I,4139469664),f=u(f,C,j,N,h[x+10],y,3200236656),N=u(N,f,C,j,h[x+13],m,681279174),j=u(j,N,f,C,h[x+0],g,3936430074),C=u(C,j,N,f,h[x+3],I,3572445317),f=u(f,C,j,N,h[x+6],y,76029189),N=u(N,f,C,j,h[x+9],m,3654602809),j=u(j,N,f,C,h[x+12],g,3873151461),C=u(C,j,N,f,h[x+15],I,530742520),f=u(f,C,j,N,h[x+2],y,3299628645),N=p(N,f,C,j,h[x+0],$,4096336452),j=p(j,N,f,C,h[x+7],R,1126891415),C=p(C,j,N,f,h[x+14],D,2878612391),f=p(f,C,j,N,h[x+5],O,4237533241),N=p(N,f,C,j,h[x+12],$,1700485571),j=p(j,N,f,C,h[x+3],R,2399980690),C=p(C,j,N,f,h[x+10],D,4293915773),f=p(f,C,j,N,h[x+1],O,2240044497),N=p(N,f,C,j,h[x+8],$,1873313359),j=p(j,N,f,C,h[x+15],R,4264355552),C=p(C,j,N,f,h[x+6],D,2734768916),f=p(f,C,j,N,h[x+13],O,1309151649),N=p(N,f,C,j,h[x+4],$,4149444226),j=p(j,N,f,C,h[x+11],R,3174756917),C=p(C,j,N,f,h[x+2],D,718787259),f=p(f,C,j,N,h[x+9],O,3951481745),N=a(N,P),f=a(f,H),C=a(C,W),j=a(j,V)}return(b(N)+b(f)+b(C)+b(j)).toLowerCase()}const Vi=Object.freeze(Object.defineProperty({__proto__:null,md5:Ys},Symbol.toStringTag,{value:"Module"}));function Gi(t){const s=document.createElement("textarea");s.value=t,s.style.position="fixed",s.style.left="-999999px",s.style.top="-999999px",document.body.appendChild(s),s.focus(),s.select();try{const a=document.execCommand("copy");return document.body.removeChild(s),a}catch{return document.body.removeChild(s),!1}}async function Qs(t,s){const a=document.getElementById(t);if(!a)return;const n=a.textContent||"",r=(s==null?void 0:s.currentTarget)||(s==null?void 0:s.target);try{if(navigator.clipboard&&window.isSecureContext)await navigator.clipboard.writeText(n);else if(!Gi(n))throw new Error("Fallback copy failed");if(r){const i=r.textContent||"";r.textContent="Copied!",r.style.background=we("--color-copy-success"),setTimeout(()=>{r.textContent=i,r.style.background=we("--color-copy-default")},je.BUTTON_FEEDBACK)}}catch(i){console.error("Failed to copy:",i);let l="Failed to copy to clipboard. ";window.isSecureContext?i instanceof Error&&i.name==="NotAllowedError"?l+="Please allow clipboard access in your browser.":l+="Please select and copy the text manually.":l+="This page must be served over HTTPS.",alert(l)}}const Wi=Object.freeze(Object.defineProperty({__proto__:null,copyBadgeCode:Qs},Symbol.toStringTag,{value:"Module"}));function Ui(t,s={},a=[]){const n=document.createElement(t);return Object.entries(s).forEach(([i,l])=>{i==="className"&&typeof l=="string"?n.className=l:i==="style"&&typeof l=="object"&&l!==null?Object.assign(n.style,l):i.startsWith("on")&&typeof l=="function"?n.addEventListener(i.substring(2).toLowerCase(),l):i==="dataset"&&typeof l=="object"&&l!==null?Object.entries(l).forEach(([o,c])=>{n.dataset[o]=c}):(typeof l=="string"||typeof l=="number")&&n.setAttribute(i,String(l))}),(Array.isArray(a)?a:[a]).forEach(i=>{typeof i=="string"?n.appendChild(document.createTextNode(i)):i instanceof HTMLElement&&n.appendChild(i)}),n}function qi(t){const s=typeof t=="string"?document.querySelector(t):t;s&&(s.style.display="")}function Ki(t){const s=typeof t=="string"?document.querySelector(t):t;s&&(s.style.display="none")}function Yi(t){const s=typeof t=="string"?document.querySelector(t):t;s&&(s.style.display=s.style.display==="none"?"":"none")}function Qi(t,s,a,n){t.addEventListener(a,r=>{const i=r.target.closest(s);i&&n.call(i,r)})}function Ji(t,s,a){const n=typeof t=="string"?document.querySelector(t):t;n&&(a?n.classList.add(s):n.classList.remove(s))}function Xi(t,s){const a=typeof t=="string"?document.querySelector(t):t;a&&(a.innerHTML=s)}const el=Object.freeze(Object.defineProperty({__proto__:null,createElement:Ui,delegateEvent:Qi,hide:Ki,setHTML:Xi,show:qi,toggle:Yi,toggleClass:Ji},Symbol.toStringTag,{value:"Module"}));function Js(t){if(!t)return;const s=t.tagName==="svg"?t:t.querySelector("svg");s&&(s.style.animation="spin 1s linear infinite")}function Xs(t){if(!t)return;const s=t.tagName==="svg"?t:t.querySelector("svg");s&&(s.style.animation="")}function tl(t){if(!t)return;const s=t.tagName==="svg"?t:t.querySelector("svg");s&&s.classList.add("spinning")}function sl(t){if(!t)return;const s=t.tagName==="svg"?t:t.querySelector("svg");s&&s.classList.remove("spinning")}const al=Object.freeze(Object.defineProperty({__proto__:null,addSpinningClass:tl,removeSpinningClass:sl,startButtonSpin:Js,stopButtonSpin:Xs},Symbol.toStringTag,{value:"Module"})),be=new Map;function ea(t,s="default"){if(De(s),!document.querySelector(t))return null;const n=setInterval(()=>{const r=document.querySelector(t);if(!r){De(s);return}rl(r)},je.LIVE_DURATION_UPDATE);return be.set(s,n),n}function De(t="default"){const s=be.get(t);s&&(clearInterval(s),be.delete(t))}function nl(){be.forEach(t=>{clearInterval(t)}),be.clear()}function rl(t){t.querySelectorAll(".widget-run-duration").forEach(a=>{const n=a.dataset.started,r=a.dataset.status;if(n){const i=new Date(n),o=new Date().getTime()-i.getTime(),c=me(o);let u;r==="in_progress"?u="Running for":r==="queued"?u="Queued":u="Completed",a.textContent=`${u} ${c}`}})}const il=Object.freeze(Object.defineProperty({__proto__:null,startLiveDurationUpdates:ea,stopAllDurationUpdates:nl,stopLiveDurationUpdates:De},Symbol.toStringTag,{value:"Module"}));async function et(t,s={}){const a=re(),n={Accept:ne.ACCEPT_HEADER,...s.headers};return a&&(n.Authorization=`token ${a}`),await fetch(`${ne.GITHUB_BASE_URL}${t}`,{...s,headers:n})}async function ta(){try{const s=await(await et("/rate_limit")).json();return{remaining:s.rate.remaining,limit:s.rate.limit,reset:new Date(s.rate.reset*1e3)}}catch(t){return console.error("Error checking rate limit:",t),{remaining:null,limit:null,reset:null,error:t instanceof Error?t.message:String(t)}}}async function sa(t,s,a={}){const n=a.per_page||ne.PER_PAGE,r=`/repos/${t}/${s}/actions/runs?per_page=${n}&_t=${Date.now()}`;try{const i=await et(r,{cache:"no-cache"});if(!i.ok)throw new Error(`Failed to fetch workflow runs: ${i.status}`);return(await i.json()).workflow_runs.map(o=>({...o,org:t,repo:s}))}catch(i){throw console.error(`Error fetching workflow runs for ${t}/${s}:`,i),i}}async function tt(t,s,a,n={},r="main"){const i=re();if(!i)throw new Error("GitHub token required to trigger workflows");try{return(await fetch(`https://api.github.com/repos/${t}/${s}/actions/workflows/${a}/dispatches`,{method:"POST",headers:{Accept:"application/vnd.github+json",Authorization:`Bearer ${i}`,"X-GitHub-Api-Version":"2022-11-28","Content-Type":"application/json"},body:JSON.stringify({ref:r,inputs:n})})).status===204}catch(l){throw console.error("Error triggering workflow:",l),l}}async function aa(t,s){const a=ce(),n=de();return tt(a,n,"trigger-service-workflow.yml",{org:t,repo:s})}async function na(t){const s=ce(),a=de(),n=t.map(r=>({org:r.org,repo:r.repo}));return tt(s,a,"trigger-service-workflow.yml",{services:JSON.stringify(n)})}async function ra(t,s){const a=ce(),n=de();return tt(a,n,"create-installation-pr.yml",{org:t,repo:s})}async function ll(){const t=await et("/user");if(!t.ok)throw new Error("Failed to fetch user info");return t.json()}const Bt=Object.freeze(Object.defineProperty({__proto__:null,checkRateLimit:ta,createInstallationPR:ra,fetchWorkflowRuns:sa,getUserInfo:ll,githubApiRequest:et,triggerBulkScorecardWorkflows:na,triggerScorecardWorkflow:aa,triggerWorkflowDispatch:tt},Symbol.toStringTag,{value:"Module"})),Ot="theme",Q={LIGHT:"light",DARK:"dark"};function ol(){return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?Q.DARK:Q.LIGHT}function cl(){const t=localStorage.getItem(Ot);return t===Q.DARK||t===Q.LIGHT?t:ol()}function Pe(t){document.documentElement.setAttribute("data-theme",t)}function ia(t){localStorage.setItem(Ot,t)}function la(){return document.documentElement.getAttribute("data-theme")||Q.LIGHT}function dl(){const t=cl();Pe(t),window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",s=>{if(!localStorage.getItem(Ot)){const n=s.matches?Q.DARK:Q.LIGHT;Pe(n)}})}function ul(){const s=la()===Q.DARK?Q.LIGHT:Q.DARK;return Pe(s),ia(s),s}function hl(t){(t===Q.DARK||t===Q.LIGHT)&&(Pe(t),ia(t))}const ml=Object.freeze(Object.defineProperty({__proto__:null,getCurrentTheme:la,initTheme:dl,setTheme:hl,toggleTheme:ul},Symbol.toStringTag,{value:"Module"})),gl={constants:dn,icons:zi,formatting:Jn,crypto:Vi,clipboard:Wi,dom:el,cssUtils:Ra,animation:al,statistics:hn,teamStatistics:gt,checkStatistics:bn,durationTracker:il,registry:$e,github:Bt,workflowTriggers:wi,checks:Lt,auth:Cr,staleness:ln,theme:ml,appInit:ji};window.ScorecardModules=gl;window.formatRelativeTime=As;window.formatDate=Es;window.formatDuration=me;window.formatInterval=At;window.escapeHtml=he;window.capitalize=Et;window.md5=Ys;window.getCssVar=we;window.startButtonSpin=Js;window.stopButtonSpin=Xs;window.countByRank=Be;window.calculateAverageScore=Oe;window.startLiveDurationUpdates=ea;window.stopLiveDurationUpdates=De;window.getIcon=Ks;window.copyBadgeCode=Qs;window.openApiExplorer=function(t,s){const a=`api-explorer.html?org=${encodeURIComponent(t)}&repo=${encodeURIComponent(s)}`;window.open(a,"_blank")};window.getGitHubToken=re;window.hasGitHubToken=Ls;window.setGitHubToken=ze;window.clearGitHubToken=pe;window.validateGitHubToken=Ve;window.isServiceStale=X;window.loadServicesData=Ke;window.fetchCurrentChecksHash=qe;window.fetchWithHybridAuth=oe;window.getRawBaseUrl=Is;window.fetchWorkflowRuns=sa;window.triggerScorecardWorkflow=aa;window.triggerBulkScorecardWorkflows=na;window.createInstallationPR=ra;window.checkGitHubRateLimit=ta;window.getTeamName=te;window.getTeamCount=bs;window.getUniqueTeams=Ct;window.calculateTeamStats=He;window.loadTeams=Ye;window.triggerServiceWorkflow=Fs;window.installService=Zs;window.triggerBulkWorkflows=Ce;window.filterAndRenderServices=Je;window.refreshData=Xe;function fl(t){}async function oa(){const t=document.getElementById("teams-grid");if(t){window.__REACT_MANAGES_TEAMS_GRID||(t.innerHTML='<div class="loading">Loading teams...</div>');try{const s=ke()||[];let a=null;try{const{teams:l}=await Ye();a=l}catch(l){console.warn("Failed to load teams registry:",l)}const n=He(s);let r;if(a){const l=Nt(a,n);r=Object.fromEntries(Object.entries(l).map(([o,c])=>[o,{...c,description:c.description??void 0}]))}else r=Object.fromEntries(Object.entries(n).map(([l,o])=>[l.toLowerCase().replace(/\s+/g,"-"),{id:l.toLowerCase().replace(/\s+/g,"-"),name:l,statistics:o}]));const i=Object.values(r).map(l=>{var o;return{...l,...l.statistics||{},slack_channel:((o=l.metadata)==null?void 0:o.slack_channel)||null}});pl(i,s),di(i),Os(i),window.__REACT_MANAGES_TEAMS_GRID||Ht(i,s)}catch(s){console.error("Failed to initialize teams view:",s),window.__REACT_MANAGES_TEAMS_GRID||(t.innerHTML=`<div class="error">Failed to load teams: ${s instanceof Error?s.message:String(s)}</div>`)}}}function pl(t,s){if(window.__REACT_MANAGES_TEAMS_STATS)return;const a=document.getElementById("teams-total-teams");a&&(a.textContent=String(t.length));const n=document.getElementById("teams-avg-score");if(n&&t.length>0){const v=t.reduce((_,A)=>_+(A.averageScore||0),0)/t.length;n.textContent=String(Math.round(v))}const r=document.getElementById("teams-total-services");r&&(r.textContent=String(s.length));const i=s.filter(v=>!te(v)).length,l=document.getElementById("teams-no-team");l&&(l.textContent=String(i));let o=0,c=0,u=0,p=0;t.forEach(v=>{const _=ge(v);_==="platinum"?o++:_==="gold"?c++:_==="silver"?u++:_==="bronze"&&p++});const k=document.getElementById("teams-platinum-count"),b=document.getElementById("teams-gold-count"),h=document.getElementById("teams-silver-count"),T=document.getElementById("teams-bronze-count");k&&(k.textContent=String(o)),b&&(b.textContent=String(c)),h&&(h.textContent=String(u)),T&&(T.textContent=String(p))}function Ht(t,s){if(window.__REACT_MANAGES_TEAMS_GRID)return;const a=document.getElementById("teams-grid");if(!a)return;if(t.length===0){a.innerHTML='<div class="team-empty-state">No teams found</div>';return}const n=vl([...t],ui());let r=n;if(os()){const i=os().toLowerCase();r=n.filter(l=>l.name.toLowerCase().includes(i)||l.description&&l.description.toLowerCase().includes(i))}a.innerHTML=r.map(i=>xl(i)).join(""),Os(r)}function vl(t,s){switch(s){case"services-desc":return t.sort((a,n)=>{const r=(n.serviceCount||0)-(a.serviceCount||0);return r!==0?r:(n.averageScore||0)-(a.averageScore||0)});case"services-asc":return t.sort((a,n)=>{const r=(a.serviceCount||0)-(n.serviceCount||0);return r!==0?r:(n.averageScore||0)-(a.averageScore||0)});case"score-desc":return t.sort((a,n)=>(n.averageScore||0)-(a.averageScore||0));case"score-asc":return t.sort((a,n)=>(a.averageScore||0)-(n.averageScore||0));case"name-asc":return t.sort((a,n)=>{const r=a.name.localeCompare(n.name);return r!==0?r:(n.averageScore||0)-(a.averageScore||0)});case"name-desc":return t.sort((a,n)=>{const r=n.name.localeCompare(a.name);return r!==0?r:(n.averageScore||0)-(a.averageScore||0)});default:return t}}function xl(t,s){const a=ge(t),n=t.rankDistribution||{},r=["platinum","gold","silver","bronze"].filter(l=>n[l]>0).map(l=>`<span class="mini-rank-badge rank-${l}">${n[l]}</span>`).join(""),i=(t.serviceCount||0)>0?Math.round((t.installedCount||0)/(t.serviceCount||1)*100):0;return`
        <div class="team-card rank-${a}" onclick="showTeamDetail('${he(t.name)}')">
            <div class="team-card-header">
                <h3 class="team-card-name">${he(t.name)}</h3>
                ${t.slack_channel?`<span class="team-slack">${he(t.slack_channel)}</span>`:""}
            </div>
            <div class="rank-badge ${a}">${Et(a)}</div>
            ${t.description?`<p class="team-card-description">${he(t.description)}</p>`:""}
            <div class="team-card-stats">
                <div class="team-stat">
                    <span class="team-stat-value">${Math.round(t.averageScore||0)}</span>
                    <span class="team-stat-label">Avg Score</span>
                </div>
                <div class="team-stat">
                    <span class="team-stat-value">${t.serviceCount||0}</span>
                    <span class="team-stat-label">Services</span>
                </div>
                <div class="team-stat">
                    <span class="team-stat-value">${t.installedCount||0}</span>
                    <span class="team-stat-label">Installed</span>
                </div>
                ${(t.staleCount||0)>0?`
                <div class="team-stat warning">
                    <span class="team-stat-value">${t.staleCount}</span>
                    <span class="team-stat-label">Stale</span>
                </div>
                `:""}
            </div>
            <div class="team-card-ranks">${r||'<span class="mini-rank-badge rank-bronze">0</span>'}</div>
            <div class="team-card-progress">
                <div class="progress-label">
                    <span>Installed</span>
                    <span>${i}%</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: ${i}%"></div>
                </div>
            </div>
        </div>
    `}async function wl(){await Xe(),await oa()}function jl(){let t=[...ci()];hi().forEach((s,a)=>{["platinum","gold","silver","bronze"].includes(a)&&(s==="include"?t=t.filter(n=>ge(n)===a):s==="exclude"&&(t=t.filter(n=>ge(n)!==a)))}),Ht(t,ke())}function bl(){}window.switchView=fl;window.initTeamsView=oa;window.refreshTeamsView=wl;window.renderTeamsGrid=Ht;window.filterAndRenderTeams=jl;window.handleHashChange=bl;function ca(){window.addEventListener("team-filter-changed",t=>{const{teams:s}=t.detail,a=L.getState();let n=null;s.length===1?n=s[0]:s.length>1&&(n=s.join(",")),a.updateFilters({teamFilter:n}),window.filterAndRenderServices()})}window.setupEventListeners=ca;document.addEventListener("DOMContentLoaded",()=>{ca(),zs()});export{re as a,et as g};
//# sourceMappingURL=main-p7slCRa8.js.map

{"version":3,"file":"github-teams-DVmYKLBI.js","sources":["../../src/api/github-teams.ts"],"sourcesContent":["/**\n * GitHub Teams API\n * Functions for fetching GitHub team information\n */\n\nimport { githubApiRequest } from './github.js';\nimport { getToken } from '../services/auth.js';\n\nexport interface TeamMember {\n  login: string;\n  id: number;\n  avatar_url: string;\n  html_url: string;\n}\n\ninterface GitHubMemberResponse {\n  login: string;\n  id: number;\n  avatar_url: string;\n  html_url: string;\n}\n\n// In-memory cache for team members (cleared on page refresh)\nconst membersCache = new Map<string, TeamMember[]>();\n\n/**\n * Fetch GitHub team members\n */\nexport async function fetchTeamMembers(\n  org: string,\n  teamSlug: string\n): Promise<TeamMember[] | null> {\n  const token = getToken();\n\n  if (!token) {\n    return null; // Not authenticated\n  }\n\n  // Check cache first\n  const cacheKey = `${org}/${teamSlug}`;\n  if (membersCache.has(cacheKey)) {\n    return membersCache.get(cacheKey)!;\n  }\n\n  try {\n    const response = await githubApiRequest(\n      `/orgs/${org}/teams/${teamSlug}/members`\n    );\n\n    if (!response.ok) {\n      // Team not found or no access\n      console.warn(\n        `Failed to fetch team members for ${org}/${teamSlug}: ${response.status}`\n      );\n      return [];\n    }\n\n    const members: GitHubMemberResponse[] = await response.json();\n    const result: TeamMember[] = members.map((m) => ({\n      login: m.login,\n      id: m.id,\n      avatar_url: m.avatar_url,\n      html_url: m.html_url,\n    }));\n\n    // Cache the result\n    membersCache.set(cacheKey, result);\n\n    return result;\n  } catch (error) {\n    console.error(\n      `Error fetching team members for ${org}/${teamSlug}:`,\n      error\n    );\n    return [];\n  }\n}\n\n/**\n * Get GitHub team URL\n */\nexport function getTeamUrl(org: string, teamSlug: string): string {\n  return `https://github.com/orgs/${org}/teams/${teamSlug}`;\n}\n\n/**\n * Clear the members cache (useful for testing or force refresh)\n */\nexport function clearMembersCache(): void {\n  membersCache.clear();\n}\n"],"names":["membersCache","fetchTeamMembers","org","teamSlug","getToken","cacheKey","response","githubApiRequest","result","m","error"],"mappings":"6EAuBA,MAAMA,MAAmB,IAKzB,eAAsBC,EACpBC,EACAC,EAC8B,CAG9B,GAAI,CAFUC,EAAA,EAGZ,OAAO,KAIT,MAAMC,EAAW,GAAGH,CAAG,IAAIC,CAAQ,GACnC,GAAIH,EAAa,IAAIK,CAAQ,EAC3B,OAAOL,EAAa,IAAIK,CAAQ,EAGlC,GAAI,CACF,MAAMC,EAAW,MAAMC,EACrB,SAASL,CAAG,UAAUC,CAAQ,UAAA,EAGhC,GAAI,CAACG,EAAS,GAEZ,eAAQ,KACN,oCAAoCJ,CAAG,IAAIC,CAAQ,KAAKG,EAAS,MAAM,EAAA,EAElE,CAAA,EAIT,MAAME,GADkC,MAAMF,EAAS,KAAA,GAClB,IAAKG,IAAO,CAC/C,MAAOA,EAAE,MACT,GAAIA,EAAE,GACN,WAAYA,EAAE,WACd,SAAUA,EAAE,QAAA,EACZ,EAGF,OAAAT,EAAa,IAAIK,EAAUG,CAAM,EAE1BA,CACT,OAASE,EAAO,CACd,eAAQ,MACN,mCAAmCR,CAAG,IAAIC,CAAQ,IAClDO,CAAA,EAEK,CAAA,CACT,CACF"}
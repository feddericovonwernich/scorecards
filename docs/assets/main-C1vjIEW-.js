const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/github-CFq7NDJm.js","assets/useTheme-DaWD_7vx.js","assets/github-teams-DgLxnL39.js"])))=>i.map(i=>d[i]);
import{r as c,j as e,R as je,u as Qs,a as Ee,_ as U,c as Xs}from"./useTheme-DaWD_7vx.js";/**
 * react-router v7.10.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var bt="popstate";function ea(t={}){function s(n,r){let{pathname:i,search:l,hash:o}=n.location;return Ve("",{pathname:i,search:l,hash:o},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function a(n,r){return typeof r=="string"?r:he(r)}return sa(s,a,null,t)}function D(t,s){if(t===!1||t===null||typeof t>"u")throw new Error(s)}function z(t,s){if(!t){typeof console<"u"&&console.warn(s);try{throw new Error(s)}catch{}}}function ta(){return Math.random().toString(36).substring(2,10)}function kt(t,s){return{usr:t.state,key:t.key,idx:s}}function Ve(t,s,a=null,n){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof s=="string"?ie(s):s,state:a,key:s&&s.key||n||ta()}}function he({pathname:t="/",search:s="",hash:a=""}){return s&&s!=="?"&&(t+=s.charAt(0)==="?"?s:"?"+s),a&&a!=="#"&&(t+=a.charAt(0)==="#"?a:"#"+a),t}function ie(t){let s={};if(t){let a=t.indexOf("#");a>=0&&(s.hash=t.substring(a),t=t.substring(0,a));let n=t.indexOf("?");n>=0&&(s.search=t.substring(n),t=t.substring(0,n)),t&&(s.pathname=t)}return s}function sa(t,s,a,n={}){let{window:r=document.defaultView,v5Compat:i=!1}=n,l=r.history,o="POP",d=null,u=h();u==null&&(u=0,l.replaceState({...l.state,idx:u},""));function h(){return(l.state||{idx:null}).idx}function m(){o="POP";let w=h(),C=w==null?null:w-u;u=w,d&&d({action:o,location:v.location,delta:C})}function p(w,C){o="PUSH";let j=Ve(v.location,w,C);u=h()+1;let b=kt(j,u),N=v.createHref(j);try{l.pushState(b,"",N)}catch(y){if(y instanceof DOMException&&y.name==="DataCloneError")throw y;r.location.assign(N)}i&&d&&d({action:o,location:v.location,delta:1})}function x(w,C){o="REPLACE";let j=Ve(v.location,w,C);u=h();let b=kt(j,u),N=v.createHref(j);l.replaceState(b,"",N),i&&d&&d({action:o,location:v.location,delta:0})}function k(w){return aa(w)}let v={get action(){return o},get location(){return t(r,l)},listen(w){if(d)throw new Error("A history only accepts one active listener");return r.addEventListener(bt,m),d=w,()=>{r.removeEventListener(bt,m),d=null}},createHref(w){return s(r,w)},createURL:k,encodeLocation(w){let C=k(w);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:p,replace:x,go(w){return l.go(w)}};return v}function aa(t,s=!1){let a="http://localhost";typeof window<"u"&&(a=window.location.origin!=="null"?window.location.origin:window.location.href),D(a,"No window.location.(origin|href) available to create URL");let n=typeof t=="string"?t:he(t);return n=n.replace(/ $/,"%20"),!s&&n.startsWith("//")&&(n=a+n),new URL(n,a)}function Xt(t,s,a="/"){return na(t,s,a,!1)}function na(t,s,a,n){let r=typeof s=="string"?ie(s):s,i=K(r.pathname||"/",a);if(i==null)return null;let l=es(t);ra(l);let o=null;for(let d=0;o==null&&d<l.length;++d){let u=ga(i);o=fa(l[d],u,n)}return o}function es(t,s=[],a=[],n="",r=!1){let i=(l,o,d=r,u)=>{let h={relativePath:u===void 0?l.path||"":u,caseSensitive:l.caseSensitive===!0,childrenIndex:o,route:l};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(n)&&d)return;D(h.relativePath.startsWith(n),`Absolute route path "${h.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(n.length)}let m=q([n,h.relativePath]),p=a.concat(h);l.children&&l.children.length>0&&(D(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),es(l.children,s,p,m,d)),!(l.path==null&&!l.index)&&s.push({path:m,score:ha(m,l.index),routesMeta:p})};return t.forEach((l,o)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))i(l,o);else for(let u of ts(l.path))i(l,o,!0,u)}),s}function ts(t){let s=t.split("/");if(s.length===0)return[];let[a,...n]=s,r=a.endsWith("?"),i=a.replace(/\?$/,"");if(n.length===0)return r?[i,""]:[i];let l=ts(n.join("/")),o=[];return o.push(...l.map(d=>d===""?i:[i,d].join("/"))),r&&o.push(...l),o.map(d=>t.startsWith("/")&&d===""?"/":d)}function ra(t){t.sort((s,a)=>s.score!==a.score?a.score-s.score:ma(s.routesMeta.map(n=>n.childrenIndex),a.routesMeta.map(n=>n.childrenIndex)))}var ia=/^:[\w-]+$/,la=3,oa=2,ca=1,da=10,ua=-2,Ct=t=>t==="*";function ha(t,s){let a=t.split("/"),n=a.length;return a.some(Ct)&&(n+=ua),s&&(n+=oa),a.filter(r=>!Ct(r)).reduce((r,i)=>r+(ia.test(i)?la:i===""?ca:da),n)}function ma(t,s){return t.length===s.length&&t.slice(0,-1).every((n,r)=>n===s[r])?t[t.length-1]-s[s.length-1]:0}function fa(t,s,a=!1){let{routesMeta:n}=t,r={},i="/",l=[];for(let o=0;o<n.length;++o){let d=n[o],u=o===n.length-1,h=i==="/"?s:s.slice(i.length)||"/",m=Ae({path:d.relativePath,caseSensitive:d.caseSensitive,end:u},h),p=d.route;if(!m&&u&&a&&!n[n.length-1].route.index&&(m=Ae({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},h)),!m)return null;Object.assign(r,m.params),l.push({params:r,pathname:q([i,m.pathname]),pathnameBase:ba(q([i,m.pathnameBase])),route:p}),m.pathnameBase!=="/"&&(i=q([i,m.pathnameBase]))}return l}function Ae(t,s){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[a,n]=pa(t.path,t.caseSensitive,t.end),r=s.match(a);if(!r)return null;let i=r[0],l=i.replace(/(.)\/+$/,"$1"),o=r.slice(1);return{params:n.reduce((u,{paramName:h,isOptional:m},p)=>{if(h==="*"){let k=o[p]||"";l=i.slice(0,i.length-k.length).replace(/(.)\/+$/,"$1")}const x=o[p];return m&&!x?u[h]=void 0:u[h]=(x||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:l,pattern:t}}function pa(t,s=!1,a=!0){z(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let n=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,o,d)=>(n.push({paramName:o,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(n.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,s?void 0:"i"),n]}function ga(t){try{return t.split("/").map(s=>decodeURIComponent(s).replace(/\//g,"%2F")).join("/")}catch(s){return z(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${s}).`),t}}function K(t,s){if(s==="/")return t;if(!t.toLowerCase().startsWith(s.toLowerCase()))return null;let a=s.endsWith("/")?s.length-1:s.length,n=t.charAt(a);return n&&n!=="/"?null:t.slice(a)||"/"}var xa=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,va=t=>xa.test(t);function ja(t,s="/"){let{pathname:a,search:n="",hash:r=""}=typeof t=="string"?ie(t):t,i;if(a)if(va(a))i=a;else{if(a.includes("//")){let l=a;a=a.replace(/\/\/+/g,"/"),z(!1,`Pathnames cannot have embedded double slashes - normalizing ${l} -> ${a}`)}a.startsWith("/")?i=yt(a.substring(1),"/"):i=yt(a,s)}else i=s;return{pathname:i,search:ka(n),hash:Ca(r)}}function yt(t,s){let a=s.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?a.length>1&&a.pop():r!=="."&&a.push(r)}),a.length>1?a.join("/"):"/"}function Be(t,s,a,n){return`Cannot include a '${t}' character in a manually specified \`to.${s}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${a}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function wa(t){return t.filter((s,a)=>a===0||s.route.path&&s.route.path.length>0)}function Xe(t){let s=wa(t);return s.map((a,n)=>n===s.length-1?a.pathname:a.pathnameBase)}function et(t,s,a,n=!1){let r;typeof t=="string"?r=ie(t):(r={...t},D(!r.pathname||!r.pathname.includes("?"),Be("?","pathname","search",r)),D(!r.pathname||!r.pathname.includes("#"),Be("#","pathname","hash",r)),D(!r.search||!r.search.includes("#"),Be("#","search","hash",r)));let i=t===""||r.pathname==="",l=i?"/":r.pathname,o;if(l==null)o=a;else{let m=s.length-1;if(!n&&l.startsWith("..")){let p=l.split("/");for(;p[0]==="..";)p.shift(),m-=1;r.pathname=p.join("/")}o=m>=0?s[m]:"/"}let d=ja(r,o),u=l&&l!=="/"&&l.endsWith("/"),h=(i||l===".")&&a.endsWith("/");return!d.pathname.endsWith("/")&&(u||h)&&(d.pathname+="/"),d}var q=t=>t.join("/").replace(/\/\/+/g,"/"),ba=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),ka=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Ca=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function ya(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function Na(t){return t.map(s=>s.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var ss=["POST","PUT","PATCH","DELETE"];new Set(ss);var Sa=["GET",...ss];new Set(Sa);var le=c.createContext(null);le.displayName="DataRouter";var Le=c.createContext(null);Le.displayName="DataRouterState";c.createContext(!1);var as=c.createContext({isTransitioning:!1});as.displayName="ViewTransition";var _a=c.createContext(new Map);_a.displayName="Fetchers";var Ta=c.createContext(null);Ta.displayName="Await";var V=c.createContext(null);V.displayName="Navigation";var me=c.createContext(null);me.displayName="Location";var G=c.createContext({outlet:null,matches:[],isDataRoute:!1});G.displayName="Route";var tt=c.createContext(null);tt.displayName="RouteError";function Aa(t,{relative:s}={}){D(oe(),"useHref() may be used only in the context of a <Router> component.");let{basename:a,navigator:n}=c.useContext(V),{hash:r,pathname:i,search:l}=fe(t,{relative:s}),o=i;return a!=="/"&&(o=i==="/"?a:q([a,i])),n.createHref({pathname:o,search:l,hash:r})}function oe(){return c.useContext(me)!=null}function Y(){return D(oe(),"useLocation() may be used only in the context of a <Router> component."),c.useContext(me).location}var ns="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function rs(t){c.useContext(V).static||c.useLayoutEffect(t)}function st(){let{isDataRoute:t}=c.useContext(G);return t?Wa():Ea()}function Ea(){D(oe(),"useNavigate() may be used only in the context of a <Router> component.");let t=c.useContext(le),{basename:s,navigator:a}=c.useContext(V),{matches:n}=c.useContext(G),{pathname:r}=Y(),i=JSON.stringify(Xe(n)),l=c.useRef(!1);return rs(()=>{l.current=!0}),c.useCallback((d,u={})=>{if(z(l.current,ns),!l.current)return;if(typeof d=="number"){a.go(d);return}let h=et(d,JSON.parse(i),r,u.relative==="path");t==null&&s!=="/"&&(h.pathname=h.pathname==="/"?s:q([s,h.pathname])),(u.replace?a.replace:a.push)(h,u.state,u)},[s,a,i,r,t])}c.createContext(null);function fe(t,{relative:s}={}){let{matches:a}=c.useContext(G),{pathname:n}=Y(),r=JSON.stringify(Xe(a));return c.useMemo(()=>et(t,JSON.parse(r),n,s==="path"),[t,r,n,s])}function La(t,s){return is(t,s)}function is(t,s,a,n,r){var j;D(oe(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=c.useContext(V),{matches:l}=c.useContext(G),o=l[l.length-1],d=o?o.params:{},u=o?o.pathname:"/",h=o?o.pathnameBase:"/",m=o&&o.route;{let b=m&&m.path||"";ls(u,!m||b.endsWith("*")||b.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${b}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${b}"> to <Route path="${b==="/"?"*":`${b}/*`}">.`)}let p=Y(),x;if(s){let b=typeof s=="string"?ie(s):s;D(h==="/"||((j=b.pathname)==null?void 0:j.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${b.pathname}" was given in the \`location\` prop.`),x=b}else x=p;let k=x.pathname||"/",v=k;if(h!=="/"){let b=h.replace(/^\//,"").split("/");v="/"+k.replace(/^\//,"").split("/").slice(b.length).join("/")}let w=Xt(t,{pathname:v});z(m||w!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),z(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let C=Da(w&&w.map(b=>Object.assign({},b,{params:Object.assign({},d,b.params),pathname:q([h,i.encodeLocation?i.encodeLocation(b.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?h:q([h,i.encodeLocation?i.encodeLocation(b.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:b.pathnameBase])})),l,a,n,r);return s&&C?c.createElement(me.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},C):C}function Ra(){let t=Ha(),s=ya(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),a=t instanceof Error?t.stack:null,n="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},l=null;return console.error("Error handled by React Router default ErrorBoundary:",t),l=c.createElement(c.Fragment,null,c.createElement("p",null,"ðŸ’¿ Hey developer ðŸ‘‹"),c.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",c.createElement("code",{style:i},"ErrorBoundary")," or"," ",c.createElement("code",{style:i},"errorElement")," prop on your route.")),c.createElement(c.Fragment,null,c.createElement("h2",null,"Unexpected Application Error!"),c.createElement("h3",{style:{fontStyle:"italic"}},s),a?c.createElement("pre",{style:r},a):null,l)}var Ma=c.createElement(Ra,null),$a=class extends c.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,s){return s.location!==t.location||s.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:s.error,location:s.location,revalidation:t.revalidation||s.revalidation}}componentDidCatch(t,s){this.props.onError?this.props.onError(t,s):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?c.createElement(G.Provider,{value:this.props.routeContext},c.createElement(tt.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Pa({routeContext:t,match:s,children:a}){let n=c.useContext(le);return n&&n.static&&n.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=s.route.id),c.createElement(G.Provider,{value:t},a)}function Da(t,s=[],a=null,n=null,r=null){if(t==null){if(!a)return null;if(a.errors)t=a.matches;else if(s.length===0&&!a.initialized&&a.matches.length>0)t=a.matches;else return null}let i=t,l=a==null?void 0:a.errors;if(l!=null){let h=i.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);D(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),i=i.slice(0,Math.min(i.length,h+1))}let o=!1,d=-1;if(a)for(let h=0;h<i.length;h++){let m=i[h];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=h),m.route.id){let{loaderData:p,errors:x}=a,k=m.route.loader&&!p.hasOwnProperty(m.route.id)&&(!x||x[m.route.id]===void 0);if(m.route.lazy||k){o=!0,d>=0?i=i.slice(0,d+1):i=[i[0]];break}}}let u=a&&n?(h,m)=>{var p,x;n(h,{location:a.location,params:((x=(p=a.matches)==null?void 0:p[0])==null?void 0:x.params)??{},unstable_pattern:Na(a.matches),errorInfo:m})}:void 0;return i.reduceRight((h,m,p)=>{let x,k=!1,v=null,w=null;a&&(x=l&&m.route.id?l[m.route.id]:void 0,v=m.route.errorElement||Ma,o&&(d<0&&p===0?(ls("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),k=!0,w=null):d===p&&(k=!0,w=m.route.hydrateFallbackElement||null)));let C=s.concat(i.slice(0,p+1)),j=()=>{let b;return x?b=v:k?b=w:m.route.Component?b=c.createElement(m.route.Component,null):m.route.element?b=m.route.element:b=h,c.createElement(Pa,{match:m,routeContext:{outlet:h,matches:C,isDataRoute:a!=null},children:b})};return a&&(m.route.ErrorBoundary||m.route.errorElement||p===0)?c.createElement($a,{location:a.location,revalidation:a.revalidation,component:v,error:x,children:j(),routeContext:{outlet:null,matches:C,isDataRoute:!0},onError:u}):j()},null)}function at(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ia(t){let s=c.useContext(le);return D(s,at(t)),s}function Fa(t){let s=c.useContext(Le);return D(s,at(t)),s}function Ba(t){let s=c.useContext(G);return D(s,at(t)),s}function nt(t){let s=Ba(t),a=s.matches[s.matches.length-1];return D(a.route.id,`${t} can only be used on routes that contain a unique "id"`),a.route.id}function Oa(){return nt("useRouteId")}function Ha(){var n;let t=c.useContext(tt),s=Fa("useRouteError"),a=nt("useRouteError");return t!==void 0?t:(n=s.errors)==null?void 0:n[a]}function Wa(){let{router:t}=Ia("useNavigate"),s=nt("useNavigate"),a=c.useRef(!1);return rs(()=>{a.current=!0}),c.useCallback(async(r,i={})=>{z(a.current,ns),a.current&&(typeof r=="number"?await t.navigate(r):await t.navigate(r,{fromRouteId:s,...i}))},[t,s])}var Nt={};function ls(t,s,a){!s&&!Nt[t]&&(Nt[t]=!0,z(!1,a))}c.memo(Za);function Za({routes:t,future:s,state:a,unstable_onError:n}){return is(t,void 0,a,n,s)}function za({to:t,replace:s,state:a,relative:n}){D(oe(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=c.useContext(V);z(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=c.useContext(G),{pathname:l}=Y(),o=st(),d=et(t,Xe(i),l,n==="path"),u=JSON.stringify(d);return c.useEffect(()=>{o(JSON.parse(u),{replace:s,state:a,relative:n})},[o,u,n,s,a]),null}function Ne(t){D(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Va({basename:t="/",children:s=null,location:a,navigationType:n="POP",navigator:r,static:i=!1,unstable_useTransitions:l}){D(!oe(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),d=c.useMemo(()=>({basename:o,navigator:r,static:i,unstable_useTransitions:l,future:{}}),[o,r,i,l]);typeof a=="string"&&(a=ie(a));let{pathname:u="/",search:h="",hash:m="",state:p=null,key:x="default"}=a,k=c.useMemo(()=>{let v=K(u,o);return v==null?null:{location:{pathname:v,search:h,hash:m,state:p,key:x},navigationType:n}},[o,u,h,m,p,x,n]);return z(k!=null,`<Router basename="${o}"> is not able to match the URL "${u}${h}${m}" because it does not start with the basename, so the <Router> won't render anything.`),k==null?null:c.createElement(V.Provider,{value:d},c.createElement(me.Provider,{children:s,value:k}))}function Ua({children:t,location:s}){return La(Ue(t),s)}function Ue(t,s=[]){let a=[];return c.Children.forEach(t,(n,r)=>{if(!c.isValidElement(n))return;let i=[...s,r];if(n.type===c.Fragment){a.push.apply(a,Ue(n.props.children,i));return}D(n.type===Ne,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),D(!n.props.index||!n.props.children,"An index route cannot have child routes.");let l={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(l.children=Ue(n.props.children,i)),a.push(l)}),a}var Se="get",_e="application/x-www-form-urlencoded";function Re(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function Ga(t){return Re(t)&&t.tagName.toLowerCase()==="button"}function qa(t){return Re(t)&&t.tagName.toLowerCase()==="form"}function Ka(t){return Re(t)&&t.tagName.toLowerCase()==="input"}function Ya(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Ja(t,s){return t.button===0&&(!s||s==="_self")&&!Ya(t)}var we=null;function Qa(){if(we===null)try{new FormData(document.createElement("form"),0),we=!1}catch{we=!0}return we}var Xa=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Oe(t){return t!=null&&!Xa.has(t)?(z(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${_e}"`),null):t}function en(t,s){let a,n,r,i,l;if(qa(t)){let o=t.getAttribute("action");n=o?K(o,s):null,a=t.getAttribute("method")||Se,r=Oe(t.getAttribute("enctype"))||_e,i=new FormData(t)}else if(Ga(t)||Ka(t)&&(t.type==="submit"||t.type==="image")){let o=t.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=t.getAttribute("formaction")||o.getAttribute("action");if(n=d?K(d,s):null,a=t.getAttribute("formmethod")||o.getAttribute("method")||Se,r=Oe(t.getAttribute("formenctype"))||Oe(o.getAttribute("enctype"))||_e,i=new FormData(o,t),!Qa()){let{name:u,type:h,value:m}=t;if(h==="image"){let p=u?`${u}.`:"";i.append(`${p}x`,"0"),i.append(`${p}y`,"0")}else u&&i.append(u,m)}}else{if(Re(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');a=Se,n=null,r=_e,l=t}return i&&r==="text/plain"&&(l=i,i=void 0),{action:n,method:a.toLowerCase(),encType:r,formData:i,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function rt(t,s){if(t===!1||t===null||typeof t>"u")throw new Error(s)}function tn(t,s,a){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname=`_root.${a}`:s&&K(n.pathname,s)==="/"?n.pathname=`${s.replace(/\/$/,"")}/_root.${a}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${a}`,n}async function sn(t,s){if(t.id in s)return s[t.id];try{let a=await import(t.module);return s[t.id]=a,a}catch(a){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(a),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function an(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function nn(t,s,a){let n=await Promise.all(t.map(async r=>{let i=s.routes[r.route.id];if(i){let l=await sn(i,a);return l.links?l.links():[]}return[]}));return cn(n.flat(1).filter(an).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function St(t,s,a,n,r,i){let l=(d,u)=>a[u]?d.route.id!==a[u].route.id:!0,o=(d,u)=>{var h;return a[u].pathname!==d.pathname||((h=a[u].route.path)==null?void 0:h.endsWith("*"))&&a[u].params["*"]!==d.params["*"]};return i==="assets"?s.filter((d,u)=>l(d,u)||o(d,u)):i==="data"?s.filter((d,u)=>{var m;let h=n.routes[d.route.id];if(!h||!h.hasLoader)return!1;if(l(d,u)||o(d,u))return!0;if(d.route.shouldRevalidate){let p=d.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:((m=a[0])==null?void 0:m.params)||{},nextUrl:new URL(t,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function rn(t,s,{includeHydrateFallback:a}={}){return ln(t.map(n=>{let r=s.routes[n.route.id];if(!r)return[];let i=[r.module];return r.clientActionModule&&(i=i.concat(r.clientActionModule)),r.clientLoaderModule&&(i=i.concat(r.clientLoaderModule)),a&&r.hydrateFallbackModule&&(i=i.concat(r.hydrateFallbackModule)),r.imports&&(i=i.concat(r.imports)),i}).flat(1))}function ln(t){return[...new Set(t)]}function on(t){let s={},a=Object.keys(t).sort();for(let n of a)s[n]=t[n];return s}function cn(t,s){let a=new Set;return new Set(s),t.reduce((n,r)=>{let i=JSON.stringify(on(r));return a.has(i)||(a.add(i),n.push({key:i,link:r})),n},[])}function os(){let t=c.useContext(le);return rt(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function dn(){let t=c.useContext(Le);return rt(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var it=c.createContext(void 0);it.displayName="FrameworkContext";function cs(){let t=c.useContext(it);return rt(t,"You must render this element inside a <HydratedRouter> element"),t}function un(t,s){let a=c.useContext(it),[n,r]=c.useState(!1),[i,l]=c.useState(!1),{onFocus:o,onBlur:d,onMouseEnter:u,onMouseLeave:h,onTouchStart:m}=s,p=c.useRef(null);c.useEffect(()=>{if(t==="render"&&l(!0),t==="viewport"){let v=C=>{C.forEach(j=>{l(j.isIntersecting)})},w=new IntersectionObserver(v,{threshold:.5});return p.current&&w.observe(p.current),()=>{w.disconnect()}}},[t]),c.useEffect(()=>{if(n){let v=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(v)}}},[n]);let x=()=>{r(!0)},k=()=>{r(!1),l(!1)};return a?t!=="intent"?[i,p,{}]:[i,p,{onFocus:de(o,x),onBlur:de(d,k),onMouseEnter:de(u,x),onMouseLeave:de(h,k),onTouchStart:de(m,x)}]:[!1,p,{}]}function de(t,s){return a=>{t&&t(a),a.defaultPrevented||s(a)}}function hn({page:t,...s}){let{router:a}=os(),n=c.useMemo(()=>Xt(a.routes,t,a.basename),[a.routes,t,a.basename]);return n?c.createElement(fn,{page:t,matches:n,...s}):null}function mn(t){let{manifest:s,routeModules:a}=cs(),[n,r]=c.useState([]);return c.useEffect(()=>{let i=!1;return nn(t,s,a).then(l=>{i||r(l)}),()=>{i=!0}},[t,s,a]),n}function fn({page:t,matches:s,...a}){let n=Y(),{manifest:r,routeModules:i}=cs(),{basename:l}=os(),{loaderData:o,matches:d}=dn(),u=c.useMemo(()=>St(t,s,d,r,n,"data"),[t,s,d,r,n]),h=c.useMemo(()=>St(t,s,d,r,n,"assets"),[t,s,d,r,n]),m=c.useMemo(()=>{if(t===n.pathname+n.search+n.hash)return[];let k=new Set,v=!1;if(s.forEach(C=>{var b;let j=r.routes[C.route.id];!j||!j.hasLoader||(!u.some(N=>N.route.id===C.route.id)&&C.route.id in o&&((b=i[C.route.id])!=null&&b.shouldRevalidate)||j.hasClientLoader?v=!0:k.add(C.route.id))}),k.size===0)return[];let w=tn(t,l,"data");return v&&k.size>0&&w.searchParams.set("_routes",s.filter(C=>k.has(C.route.id)).map(C=>C.route.id).join(",")),[w.pathname+w.search]},[l,o,n,r,u,s,t,i]),p=c.useMemo(()=>rn(h,r),[h,r]),x=mn(h);return c.createElement(c.Fragment,null,m.map(k=>c.createElement("link",{key:k,rel:"prefetch",as:"fetch",href:k,...a})),p.map(k=>c.createElement("link",{key:k,rel:"modulepreload",href:k,...a})),x.map(({key:k,link:v})=>c.createElement("link",{key:k,nonce:a.nonce,...v})))}function pn(...t){return s=>{t.forEach(a=>{typeof a=="function"?a(s):a!=null&&(a.current=s)})}}var ds=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{ds&&(window.__reactRouterVersion="7.10.1")}catch{}function gn({basename:t,children:s,unstable_useTransitions:a,window:n}){let r=c.useRef();r.current==null&&(r.current=ea({window:n,v5Compat:!0}));let i=r.current,[l,o]=c.useState({action:i.action,location:i.location}),d=c.useCallback(u=>{a===!1?o(u):c.startTransition(()=>o(u))},[a]);return c.useLayoutEffect(()=>i.listen(d),[i,d]),c.createElement(Va,{basename:t,children:s,location:l.location,navigationType:l.action,navigator:i,unstable_useTransitions:a===!0})}var us=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,hs=c.forwardRef(function({onClick:s,discover:a="render",prefetch:n="none",relative:r,reloadDocument:i,replace:l,state:o,target:d,to:u,preventScrollReset:h,viewTransition:m,...p},x){let{basename:k,unstable_useTransitions:v}=c.useContext(V),w=typeof u=="string"&&us.test(u),C,j=!1;if(typeof u=="string"&&w&&(C=u,ds))try{let T=new URL(window.location.href),A=u.startsWith("//")?new URL(T.protocol+u):new URL(u),L=K(A.pathname,k);A.origin===T.origin&&L!=null?u=L+A.search+A.hash:j=!0}catch{z(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let b=Aa(u,{relative:r}),[N,y,f]=un(n,p),g=wn(u,{replace:l,state:o,target:d,preventScrollReset:h,relative:r,viewTransition:m,unstable_useTransitions:v});function E(T){s&&s(T),T.defaultPrevented||g(T)}let S=c.createElement("a",{...p,...f,href:C||b,onClick:j||i?s:E,ref:pn(x,y),target:d,"data-discover":!w&&a==="render"?"true":void 0});return N&&!w?c.createElement(c.Fragment,null,S,c.createElement(hn,{page:b})):S});hs.displayName="Link";var xn=c.forwardRef(function({"aria-current":s="page",caseSensitive:a=!1,className:n="",end:r=!1,style:i,to:l,viewTransition:o,children:d,...u},h){let m=fe(l,{relative:u.relative}),p=Y(),x=c.useContext(Le),{navigator:k,basename:v}=c.useContext(V),w=x!=null&&Nn(m)&&o===!0,C=k.encodeLocation?k.encodeLocation(m).pathname:m.pathname,j=p.pathname,b=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;a||(j=j.toLowerCase(),b=b?b.toLowerCase():null,C=C.toLowerCase()),b&&v&&(b=K(b,v)||b);const N=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let y=j===C||!r&&j.startsWith(C)&&j.charAt(N)==="/",f=b!=null&&(b===C||!r&&b.startsWith(C)&&b.charAt(C.length)==="/"),g={isActive:y,isPending:f,isTransitioning:w},E=y?s:void 0,S;typeof n=="function"?S=n(g):S=[n,y?"active":null,f?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let T=typeof i=="function"?i(g):i;return c.createElement(hs,{...u,"aria-current":E,className:S,ref:h,style:T,to:l,viewTransition:o},typeof d=="function"?d(g):d)});xn.displayName="NavLink";var vn=c.forwardRef(({discover:t="render",fetcherKey:s,navigate:a,reloadDocument:n,replace:r,state:i,method:l=Se,action:o,onSubmit:d,relative:u,preventScrollReset:h,viewTransition:m,...p},x)=>{let{unstable_useTransitions:k}=c.useContext(V),v=Cn(),w=yn(o,{relative:u}),C=l.toLowerCase()==="get"?"get":"post",j=typeof o=="string"&&us.test(o),b=N=>{if(d&&d(N),N.defaultPrevented)return;N.preventDefault();let y=N.nativeEvent.submitter,f=(y==null?void 0:y.getAttribute("formmethod"))||l,g=()=>v(y||N.currentTarget,{fetcherKey:s,method:f,navigate:a,replace:r,state:i,relative:u,preventScrollReset:h,viewTransition:m});k&&a!==!1?c.startTransition(()=>g()):g()};return c.createElement("form",{ref:x,method:C,action:w,onSubmit:n?d:b,...p,"data-discover":!j&&t==="render"?"true":void 0})});vn.displayName="Form";function jn(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ms(t){let s=c.useContext(le);return D(s,jn(t)),s}function wn(t,{target:s,replace:a,state:n,preventScrollReset:r,relative:i,viewTransition:l,unstable_useTransitions:o}={}){let d=st(),u=Y(),h=fe(t,{relative:i});return c.useCallback(m=>{if(Ja(m,s)){m.preventDefault();let p=a!==void 0?a:he(u)===he(h),x=()=>d(t,{replace:p,state:n,preventScrollReset:r,relative:i,viewTransition:l});o?c.startTransition(()=>x()):x()}},[u,d,h,a,n,s,t,r,i,l,o])}var bn=0,kn=()=>`__${String(++bn)}__`;function Cn(){let{router:t}=ms("useSubmit"),{basename:s}=c.useContext(V),a=Oa(),n=t.fetch,r=t.navigate;return c.useCallback(async(i,l={})=>{let{action:o,method:d,encType:u,formData:h,body:m}=en(i,s);if(l.navigate===!1){let p=l.fetcherKey||kn();await n(p,a,l.action||o,{preventScrollReset:l.preventScrollReset,formData:h,body:m,formMethod:l.method||d,formEncType:l.encType||u,flushSync:l.flushSync})}else await r(l.action||o,{preventScrollReset:l.preventScrollReset,formData:h,body:m,formMethod:l.method||d,formEncType:l.encType||u,replace:l.replace,state:l.state,fromRouteId:a,flushSync:l.flushSync,viewTransition:l.viewTransition})},[n,r,s,a])}function yn(t,{relative:s}={}){let{basename:a}=c.useContext(V),n=c.useContext(G);D(n,"useFormAction must be used inside a RouteContext");let[r]=n.matches.slice(-1),i={...fe(t||".",{relative:s})},l=Y();if(t==null){i.search=l.search;let o=new URLSearchParams(i.search),d=o.getAll("index");if(d.some(h=>h==="")){o.delete("index"),d.filter(m=>m).forEach(m=>o.append("index",m));let h=o.toString();i.search=h?`?${h}`:""}}return(!t||t===".")&&r.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),a!=="/"&&(i.pathname=i.pathname==="/"?a:q([a,i.pathname])),he(i)}function Nn(t,{relative:s}={}){let a=c.useContext(as);D(a!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=ms("useViewTransitionState"),r=fe(t,{relative:s});if(!a.isTransitioning)return!1;let i=K(a.currentLocation.pathname,n)||a.currentLocation.pathname,l=K(a.nextLocation.pathname,n)||a.nextLocation.pathname;return Ae(r.pathname,l)!=null||Ae(r.pathname,i)!=null}function fs(t){var s,a,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(s=0;s<r;s++)t[s]&&(a=fs(t[s]))&&(n&&(n+=" "),n+=a)}else for(a in t)t[a]&&(n&&(n+=" "),n+=a);return n}function Sn(){for(var t,s,a=0,n="",r=arguments.length;a<r;a++)(t=arguments[a])&&(s=fs(t))&&(n&&(n+=" "),n+=s);return n}function M(...t){return Sn(t)}function _n({className:t=""}){return e.jsxs("svg",{className:t,viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("rect",{x:"12",y:"8",width:"14",height:"18",rx:"2",fill:"#1e3a5f",stroke:"#38BDF8",strokeWidth:"1"}),e.jsx("path",{d:"M16 14l2 2 3-3",stroke:"#38BDF8",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("rect",{x:"9",y:"6",width:"14",height:"18",rx:"2",fill:"#4a1e1e",stroke:"#f87171",strokeWidth:"1"}),e.jsx("path",{d:"M18 12l-4 4M14 12l4 4",stroke:"#f87171",strokeWidth:"1.5",strokeLinecap:"round"}),e.jsx("rect",{x:"6",y:"4",width:"14",height:"18",rx:"2",fill:"#0f2942",stroke:"#0EA5E9",strokeWidth:"1.2"}),e.jsx("path",{d:"M10 11l2 2 4-4",stroke:"#38BDF8",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"})]})}function Tn({title:t="Scorecards"}){return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:M("header-strip","header-strip-react")}),e.jsx("header",{className:"header-bar header-bar-react",children:e.jsxs("div",{className:"header-brand header-brand-react",children:[e.jsx(_n,{className:"header-logo header-logo-react"}),e.jsx("span",{className:"header-title header-title-react",children:t})]})})]})}function An({className:t=""}){return e.jsxs("svg",{className:t,viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("rect",{x:"12",y:"8",width:"14",height:"18",rx:"2",fill:"#1e3a5f",stroke:"#38BDF8",strokeWidth:"1"}),e.jsx("path",{d:"M16 14l2 2 3-3",stroke:"#38BDF8",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("rect",{x:"9",y:"6",width:"14",height:"18",rx:"2",fill:"#4a1e1e",stroke:"#f87171",strokeWidth:"1"}),e.jsx("path",{d:"M18 12l-4 4M14 12l4 4",stroke:"#f87171",strokeWidth:"1.5",strokeLinecap:"round"}),e.jsx("rect",{x:"6",y:"4",width:"14",height:"18",rx:"2",fill:"#0f2942",stroke:"#0EA5E9",strokeWidth:"1.2"}),e.jsx("path",{d:"M10 11l2 2 4-4",stroke:"#38BDF8",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"})]})}function En({docsUrl:t="https://github.com/feddericovonwernich-org/scorecards"}){return e.jsxs(e.Fragment,{children:[e.jsx("footer",{className:"footer-react",children:e.jsx("div",{className:"footer-react__container",children:e.jsxs("div",{className:"footer-react__content",children:[e.jsx(An,{className:"footer-react__logo"}),e.jsxs("p",{className:"footer-react__text",children:["Powered by Scorecards |"," ",e.jsx("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"footer-react__link",children:"Documentation"})]})]})})}),e.jsx("div",{className:M("footer-strip","footer-strip-react")})]})}function Ln({className:t=""}){return e.jsx("svg",{className:t,viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})}function Rn({className:t=""}){return e.jsx("svg",{className:t,viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{d:"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zM16 18v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z"})})}const _t="tab-icon";function Mn(){const t=st(),a=Y().pathname.includes("/teams")?"teams":"services",n=r=>{t(`/${r}`)};return e.jsxs("nav",{className:"view-tabs",role:"tablist",children:[e.jsxs("button",{className:M("view-tab",a==="services"&&"active"),"data-view":"services",onClick:()=>n("services"),role:"tab","aria-selected":a==="services","aria-controls":"services-view",children:[e.jsx(Ln,{className:_t}),"Services"]}),e.jsxs("button",{className:M("view-tab",a==="teams"&&"active"),"data-view":"teams",onClick:()=>n("teams"),role:"tab","aria-selected":a==="teams","aria-controls":"teams-view",children:[e.jsx(Rn,{className:_t}),"Teams"]})]})}const Tt=t=>{let s;const a=new Set,n=(u,h)=>{const m=typeof u=="function"?u(s):u;if(!Object.is(m,s)){const p=s;s=h??(typeof m!="object"||m===null)?m:Object.assign({},s,m),a.forEach(x=>x(s,p))}},r=()=>s,o={setState:n,getState:r,getInitialState:()=>d,subscribe:u=>(a.add(u),()=>a.delete(u))},d=s=t(n,r,o);return o},$n=t=>t?Tt(t):Tt,Pn=t=>t;function Dn(t,s=Pn){const a=je.useSyncExternalStore(t.subscribe,je.useCallback(()=>s(t.getState()),[t,s]),je.useCallback(()=>s(t.getInitialState()),[t,s]));return je.useDebugValue(a),a}const At=t=>{const s=$n(t),a=n=>Dn(s,n);return Object.assign(a,s),a},In=t=>t?At(t):At;function ce(t,s){return s?t.checks_hash?t.checks_hash!==s:!0:!1}const ue={PER_PAGE:25,GITHUB_BASE_URL:"https://api.github.com",ACCEPT_HEADER:"application/vnd.github.v3+json"},Et={WORKFLOW_POLL_DEFAULT:3e4,CACHE_MEDIUM:15e3},Fn={WIDGET_POLL_INTERVAL:"widget_poll_interval"},Bn=["platinum","gold","silver","bronze"];function On(t){const s={platinum:0,gold:0,silver:0,bronze:0};return Bn.forEach(a=>{s[a]=t.filter(n=>n.rank===a).length}),s}function Hn(t){if(!t||t.length===0)return 0;const s=t.reduce((a,n)=>a+(n.score||0),0);return Math.round(s/t.length)}function ne(t){var s;return t.team?typeof t.team=="string"?t.team:t.team.primary||((s=t.team.all)==null?void 0:s[0])||null:null}function ps(t,s,a){return{serviceCount:t.length,averageScore:Hn(t),rankDistribution:On(t),staleCount:s?t.filter(n=>s(n,a)).length:0,installedCount:t.filter(n=>n.installed).length}}function lt(t,s=null,a=null){const n={},r={};t.forEach(l=>{const o=ne(l);o&&(n[o]||(n[o]=[],l.team&&typeof l.team=="object"&&(r[o]={github_org:l.team.github_org||null,github_slug:l.team.github_slug||null})),n[o].push(l))});const i={};return Object.entries(n).forEach(([l,o])=>{var d,u;i[l]={name:l,...ps(o,s,a),github_org:((d=r[l])==null?void 0:d.github_org)||null,github_slug:((u=r[l])==null?void 0:u.github_slug)||null}}),i}function gs(t,s="serviceCount",a="desc"){const n=Object.values(t),r={name:(o,d)=>o.name.localeCompare(d.name),serviceCount:(o,d)=>o.serviceCount-d.serviceCount,averageScore:(o,d)=>o.averageScore-d.averageScore,staleCount:(o,d)=>o.staleCount-d.staleCount},i=r[s]||r.serviceCount,l=a==="asc"?1:-1;return n.sort((o,d)=>i(o,d)*l)}function ot(t,s){const a={};return t&&t.teams&&Object.entries(t.teams).forEach(([n,r])=>{const i=r.name||n,l=s[i]||{serviceCount:0,averageScore:0,rankDistribution:{platinum:0,gold:0,silver:0,bronze:0},staleCount:0,installedCount:0};a[n]={id:n,name:i,description:r.description||null,aliases:r.aliases||[],github_org:r.github_org,github_slug:r.github_slug,metadata:r.metadata||{},statistics:l}}),Object.entries(s).forEach(([n,r])=>{const i=n.toLowerCase().replace(/\s+/g,"-");a[i]||(a[i]={id:i,name:n,description:null,aliases:[],metadata:{},statistics:r})}),a}function xs(t){const s=t.averageScore||0;return s>=90?"platinum":s>=75?"gold":s>=50?"silver":"bronze"}const Lt=Object.freeze(Object.defineProperty({__proto__:null,calculateSingleTeamStats:ps,calculateTeamStats:lt,getRank:xs,getTeamName:ne,mergeTeamDataWithStats:ot,sortTeamStats:gs},Symbol.toStringTag,{value:"Module"}));function vs(t,s){var a;return((a=t.excluded_checks)==null?void 0:a.some(n=>n.check===s))??!1}function Wn(t,s){var a,n;return((n=(a=t.excluded_checks)==null?void 0:a.find(r=>r.check===s))==null?void 0:n.reason)??null}function Zn(t,s){var u;let a=0,n=0,r=0,i=0;for(const h of t){if(vs(h,s)){r++;continue}const m=(u=h.check_results)==null?void 0:u[s];m==="pass"?a++:m==="fail"?n++:i++}const l=t.length,o=l-r,d=o>0?Math.round(a/o*100):0;return{total:l,activeTotal:o,passing:a,failing:n,excluded:r,unknown:i,percentage:d}}function zn(t,s){var n;const a={};for(const r of t){const i=ne(r)||"No Team";a[i]||(a[i]={total:0,activeTotal:0,passing:0,failing:0,excluded:0,unknown:0,percentage:0,services:[]});const l=a[i];if(l.total++,vs(r,s)){l.excluded++,l.services.push({org:r.org,repo:r.repo,name:r.name,score:r.score,rank:r.rank,checkStatus:"excluded",exclusionReason:Wn(r,s)});continue}const d=(n=r.check_results)==null?void 0:n[s];d==="pass"?l.passing++:d==="fail"?l.failing++:l.unknown++,l.services.push({org:r.org,repo:r.repo,name:r.name,score:r.score,rank:r.rank,checkStatus:d||"unknown"})}for(const r of Object.keys(a)){const i=a[r];i.activeTotal=i.total-i.excluded,i.percentage=i.activeTotal>0?Math.round(i.passing/i.activeTotal*100):0,i.services.sort((l,o)=>{const d={pass:0,fail:1,excluded:2,unknown:3},u=d[l.checkStatus||"unknown"]??3,h=d[o.checkStatus||"unknown"]??3;return u!==h?u-h:o.score-l.score})}return a}function Vn(t,s){return!s||s.size===0?t:t.filter(a=>{var n;for(const[r,i]of s){if(i==null)continue;const l=(n=a.check_results)==null?void 0:n[r];if(i==="pass"&&l!=="pass"||i==="fail"&&l!=="fail")return!1}return!0})}function Un(t,s="desc"){const a=Object.entries(t).map(([n,r])=>({teamName:n,...r}));return a.sort((n,r)=>{const i=n.percentage-r.percentage;return s==="desc"?-i:i}),a}const Gn={active:new Map,search:"",sort:"score-desc",teamFilter:null,checkFilters:new Map},qn={pat:null,validated:!1,rateLimit:null,user:null},Kn={currentModal:null,activeModal:{type:null},checksHash:null,checksHashTimestamp:0,displayMode:localStorage.getItem("scorecards-display-mode")||"grid"},Yn={open:!1,runs:[],filterStatus:"all",loading:!1,lastFetch:0,pollInterval:3e4,pollIntervalRef:null},Rt={services:{all:[],filtered:[],loading:!1},teams:{all:[],filtered:[],sort:"score-desc",search:"",activeFilters:new Map},filters:Gn,auth:qn,ui:Kn,serviceModal:{org:null,repo:null,workflowRuns:[],filterStatus:"all",pollInterval:null,pollIntervalTime:3e4,loaded:!1,durationUpdateInterval:null},actionsWidget:Yn};function Jn(t,s,a,n,r,i){let l=t;if(n){const o=n.split(",").map(u=>u.trim().toLowerCase()),d=o.includes("__no_team__");l=l.filter(u=>{var p;const h=typeof u.team=="string"?u.team:((p=u.team)==null?void 0:p.primary)||"";return d&&!!!h?!0:h?o.includes(h.toLowerCase()):!1})}if(s.size>0&&(l=l.filter(o=>{for(const[d,u]of s){if(u===null)continue;let h=!1;if(d==="has-api"?h=!!o.has_api:d==="stale"?h=ce(o,i):d==="installed"?h=!!o.installed:(d==="platinum"||d==="gold"||d==="silver"||d==="bronze")&&(h=o.rank===d),u==="include"&&!h||u==="exclude"&&h)return!1}return!0})),r.size>0&&(l=Vn(l,r)),a){const o=a.toLowerCase();l=l.filter(d=>{var m;const u=typeof d.team=="string"?d.team:((m=d.team)==null?void 0:m.primary)||"";return`${d.name} ${d.org} ${d.repo} ${u}`.toLowerCase().includes(o)})}return l}function Qn(t,s){const a=[...t];return a.sort((n,r)=>{switch(s){case"score-desc":return r.score-n.score;case"score-asc":return n.score-r.score;case"name-asc":return n.name.localeCompare(r.name);case"name-desc":return r.name.localeCompare(n.name);case"updated-desc":return new Date(r.last_updated).getTime()-new Date(n.last_updated).getTime();case"updated-asc":return new Date(n.last_updated).getTime()-new Date(r.last_updated).getTime();default:return 0}}),a}const _=In((t,s)=>({...Rt,setServices:a=>t(n=>({services:{...n.services,all:a}})),setFilteredServices:a=>t(n=>({services:{...n.services,filtered:a}})),setServicesLoading:a=>t(n=>({services:{...n.services,loading:a}})),filterAndSortServices:()=>{const a=s(),{all:n}=a.services,{active:r,search:i,sort:l,teamFilter:o,checkFilters:d}=a.filters,{checksHash:u}=a.ui,h=Jn(n,r,i,o,d,u),m=Qn(h,l);t(p=>({services:{...p.services,filtered:m}}))},setTeams:a=>t(n=>({teams:{...n.teams,all:a}})),setFilteredTeams:a=>t(n=>({teams:{...n.teams,filtered:a}})),updateTeamsState:a=>t(n=>({teams:{...n.teams,...a}})),filterAndSortTeams:()=>{const a=s(),{all:n,search:r,sort:i}=a.teams;let l=n;if(r){const d=r.toLowerCase();l=n.filter(u=>u.name.toLowerCase().includes(d)||u.description&&u.description.toLowerCase().includes(d))}const o=[...l].sort((d,u)=>{switch(i){case"services-desc":return(u.serviceCount||0)-(d.serviceCount||0);case"services-asc":return(d.serviceCount||0)-(u.serviceCount||0);case"score-desc":return(u.averageScore||0)-(d.averageScore||0);case"score-asc":return(d.averageScore||0)-(u.averageScore||0);case"name-asc":return d.name.localeCompare(u.name);case"name-desc":return u.name.localeCompare(d.name);default:return(u.averageScore||0)-(d.averageScore||0)}});t(d=>({teams:{...d.teams,filtered:o}}))},setAuth:(a,n=!1)=>t(r=>({auth:{...r.auth,pat:a,validated:n}})),setRateLimit:a=>t(n=>({auth:{...n.auth,rateLimit:a}})),setAuthUser:a=>t(n=>({auth:{...n.auth,user:a}})),setDisplayMode:a=>{localStorage.setItem("scorecards-display-mode",a),t(n=>({ui:{...n.ui,displayMode:a}}))},setChecksHash:a=>t(n=>({ui:{...n.ui,checksHash:a,checksHashTimestamp:Date.now()}})),openModal:(a,n)=>t(r=>({ui:{...r.ui,activeModal:{type:a,data:n},currentModal:a}})),closeModal:()=>t(a=>({ui:{...a.ui,activeModal:{type:null},currentModal:null}})),updateServiceModal:a=>t(n=>({serviceModal:{...n.serviceModal,...a}})),updateFilters:a=>{t(n=>({filters:{...n.filters,...a}})),s().filterAndSortServices()},setFilter:(a,n)=>{t(r=>{const i=new Map(r.filters.active);return n===null?i.delete(a):i.set(a,n),{filters:{...r.filters,active:i}}}),s().filterAndSortServices()},clearFilters:()=>{t(a=>({filters:{...a.filters,active:new Map,search:"",teamFilter:null}})),s().filterAndSortServices()},setCheckFilter:(a,n)=>{t(r=>{const i=new Map(r.filters.checkFilters);return n===null?i.delete(a):i.set(a,n),{filters:{...r.filters,checkFilters:i}}}),s().filterAndSortServices()},clearCheckFilters:()=>{t(a=>({filters:{...a.filters,checkFilters:new Map}})),s().filterAndSortServices()},updateActionsWidget:a=>t(n=>({actionsWidget:{...n.actionsWidget,...a}})),toggleActionsWidget:()=>t(a=>({actionsWidget:{...a.actionsWidget,open:!a.actionsWidget.open}})),setActionsWidgetRuns:a=>{const n=a.filter(r=>r.status==="in_progress"||r.status==="queued").length;return t(r=>({actionsWidget:{...r.actionsWidget,runs:a,loading:!1,lastFetch:Date.now()}})),n},resetState:()=>t(()=>({...Rt}))})),Me=t=>t.services.all,js=t=>t.services.filtered,ws=t=>t.teams.filtered,ee=t=>t.auth.pat,bs=t=>t.auth.rateLimit,ks=t=>t.auth.user,$e=t=>t.ui.displayMode,ct=t=>t.ui.checksHash,Cs=t=>t.actionsWidget.open,Xn=Object.freeze(Object.defineProperty({__proto__:null,selectActionsWidgetOpen:Cs,selectAuthUser:ks,selectChecksHash:ct,selectDisplayMode:$e,selectPAT:ee,selectRateLimit:bs,selectServicesAll:Me,selectServicesFiltered:js,selectTeamsFiltered:ws,useAppStore:_},Symbol.toStringTag,{value:"Module"}));function er({className:t=""}){return e.jsx("svg",{className:t,width:"24",height:"24",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M8 12a4 4 0 1 1 0-8 4 4 0 0 1 0 8Zm0-1.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Zm5.657-8.157a.75.75 0 0 1 0 1.061l-1.061 1.06a.749.749 0 0 1-1.275-.326.749.749 0 0 1 .215-.734l1.06-1.06a.75.75 0 0 1 1.06 0Zm-9.193 9.193a.75.75 0 0 1 0 1.06l-1.06 1.061a.75.75 0 1 1-1.061-1.06l1.06-1.061a.75.75 0 0 1 1.061 0ZM8 0a.75.75 0 0 1 .75.75v1.5a.75.75 0 0 1-1.5 0V.75A.75.75 0 0 1 8 0ZM3 8a.75.75 0 0 1-.75.75H.75a.75.75 0 0 1 0-1.5h1.5A.75.75 0 0 1 3 8Zm13 0a.75.75 0 0 1-.75.75h-1.5a.75.75 0 0 1 0-1.5h1.5A.75.75 0 0 1 16 8Zm-8 5a.75.75 0 0 1 .75.75v1.5a.75.75 0 0 1-1.5 0v-1.5A.75.75 0 0 1 8 13Zm3.536-1.464a.75.75 0 0 1 1.06 0l1.061 1.06a.75.75 0 0 1-1.06 1.061l-1.061-1.06a.75.75 0 0 1 0-1.061ZM2.343 2.343a.75.75 0 0 1 1.061 0l1.06 1.061a.751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018l-1.06-1.06a.75.75 0 0 1 0-1.06Z"})})}function tr({className:t=""}){return e.jsx("svg",{className:t,width:"24",height:"24",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M9.598 1.591a.749.749 0 0 1 .785-.175 7.001 7.001 0 1 1-8.967 8.967.75.75 0 0 1 .961-.96 5.5 5.5 0 0 0 7.046-7.046.75.75 0 0 1 .175-.786Zm1.616 1.945a7 7 0 0 1-7.678 7.678 5.499 5.499 0 1 0 7.678-7.678Z"})})}function sr({hasToken:t,className:s=""}){return t?e.jsx("svg",{className:s,width:"24",height:"24",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M4 4a4 4 0 0 1 8 0v2h.25c.966 0 1.75.784 1.75 1.75v5.5A1.75 1.75 0 0 1 12.25 15h-8.5A1.75 1.75 0 0 1 2 13.25v-5.5C2 6.784 2.784 6 3.75 6H4Zm8.25 3.5h-8.5a.25.25 0 0 0-.25.25v5.5c0 .138.112.25.25.25h8.5a.25.25 0 0 0 .25-.25v-5.5a.25.25 0 0 0-.25-.25ZM10.5 6V4a2.5 2.5 0 1 0-5 0v2Z"})}):e.jsx("svg",{className:s,width:"24",height:"24",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M5.5 4a2.5 2.5 0 0 1 4.607-1.346.75.75 0 1 0 1.264-.808A4 4 0 0 0 4 4v1.5H3A1.5 1.5 0 0 0 1.5 7v7A1.5 1.5 0 0 0 3 15.5h10a1.5 1.5 0 0 0 1.5-1.5V7A1.5 1.5 0 0 0 13 5.5h-7V4Z"})})}function ar({className:t=""}){return e.jsx("svg",{className:t,width:"24",height:"24",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0ZM1.5 8a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0Zm7-3.25v2.992l2.028.812a.75.75 0 0 1-.557 1.392l-2.5-1A.75.75 0 0 1 7 8.25v-3.5a.75.75 0 0 1 1.5 0Z"})})}function nr({className:t=""}){return e.jsx("svg",{className:t,width:"24",height:"24",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M1 2.5A1.5 1.5 0 0 1 2.5 1h3A1.5 1.5 0 0 1 7 2.5v3A1.5 1.5 0 0 1 5.5 7h-3A1.5 1.5 0 0 1 1 5.5v-3Zm8 0A1.5 1.5 0 0 1 10.5 1h3A1.5 1.5 0 0 1 15 2.5v3A1.5 1.5 0 0 1 13.5 7h-3A1.5 1.5 0 0 1 9 5.5v-3Zm-8 8A1.5 1.5 0 0 1 2.5 9h3A1.5 1.5 0 0 1 7 10.5v3A1.5 1.5 0 0 1 5.5 15h-3A1.5 1.5 0 0 1 1 13.5v-3Zm8 0A1.5 1.5 0 0 1 10.5 9h3a1.5 1.5 0 0 1 1.5 1.5v3a1.5 1.5 0 0 1-1.5 1.5h-3A1.5 1.5 0 0 1 9 13.5v-3Z"})})}function rr({className:t=""}){return e.jsx("svg",{className:t,width:"24",height:"24",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M2 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm3.75-1.5a.75.75 0 0 0 0 1.5h8.5a.75.75 0 0 0 0-1.5h-8.5Zm0 5a.75.75 0 0 0 0 1.5h8.5a.75.75 0 0 0 0-1.5h-8.5Zm0 5a.75.75 0 0 0 0 1.5h8.5a.75.75 0 0 0 0-1.5h-8.5ZM3 8a1 1 0 1 1-2 0 1 1 0 0 1 2 0Zm-1 6a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z"})})}function ir({onSettingsClick:t,onActionsWidgetClick:s,actionsBadgeCount:a=0}){const{theme:n,toggleTheme:r}=Qs(),i=n==="dark",o=!!_(ee),d=_($e),u=_(x=>x.setDisplayMode),h=c.useCallback(()=>{u(d==="grid"?"list":"grid")},[d,u]),m=c.useCallback(()=>{var x;t?t():(x=window.openSettings)==null||x.call(window)},[t]),p=c.useCallback(()=>{var x;s?s():(x=window.toggleActionsWidget)==null||x.call(window)},[s]);return e.jsxs("div",{className:"floating-controls",children:[e.jsx("button",{className:"floating-btn floating-btn--display",title:`Switch to ${d==="grid"?"list":"grid"} view`,"aria-label":`Switch to ${d==="grid"?"list":"grid"} view`,onClick:h,children:d==="grid"?e.jsx(rr,{}):e.jsx(nr,{})}),e.jsx("button",{className:"floating-btn floating-btn--theme",title:"Toggle night mode","aria-label":"Toggle night mode",onClick:r,children:i?e.jsx(tr,{}):e.jsx(er,{})}),e.jsx("button",{className:M("floating-btn floating-btn--settings",o&&"has-token"),title:o?"Settings (PAT active)":"Settings","aria-label":o?"Settings (PAT active)":"Settings",onClick:m,children:e.jsx(sr,{hasToken:o})}),e.jsxs("button",{className:"floating-btn floating-btn--widget",title:"Show GitHub Actions","aria-label":"Show GitHub Actions",onClick:p,children:[e.jsx(ar,{}),a>0&&e.jsx("span",{className:"widget-badge","data-count":a,children:a})]})]})}const lr={platinum:"platinum",gold:"gold",silver:"silver",bronze:"bronze","has-api":"api",stale:"stale",installed:"installed"};function O({value:t,label:s,filterable:a=!1,filterType:n,filterState:r=null,onClick:i,className:l="",id:o}){const d=()=>{a&&n&&i&&i(n)},u=x=>{a&&(x.key==="Enter"||x.key===" ")&&(x.preventDefault(),d())},h=n?lr[n]:null,m=r==="include",p=r==="exclude";return e.jsxs("div",{className:M("stat-card","stat-card-react",a&&"stat-card-react--filterable",!a&&"stat-card-react--static",m&&h&&`stat-card-react--active-${h}`,p&&"stat-card-react--excluded",l),onClick:d,onKeyDown:u,role:a?"button":void 0,tabIndex:a?0:void 0,"data-filter":n,id:o,children:[e.jsx("div",{className:M("stat-value","stat-card-react__value",m&&h&&`stat-card-react__value--${h}`),id:o?`${o}-value`:void 0,children:t}),e.jsx("div",{className:"stat-label stat-card-react__label",children:s})]})}function or({onFilterChange:t,activeFilters:s}){const a=_(o=>o.services.all),n=_(o=>o.ui.checksHash),r=c.useMemo(()=>{const o=a.length,d=o>0?Math.round(a.reduce((w,C)=>w+C.score,0)/o):0,u=a.filter(w=>w.has_api).length,h=a.filter(w=>ce(w,n)).length,m=a.filter(w=>w.installed).length,p=a.filter(w=>w.rank==="platinum").length,x=a.filter(w=>w.rank==="gold").length,k=a.filter(w=>w.rank==="silver").length,v=a.filter(w=>w.rank==="bronze").length;return{total:o,avgScore:d,withApi:u,stale:h,installed:m,platinum:p,gold:x,silver:k,bronze:v}},[a,n]),i=o=>{if(!t)return;const d=(s==null?void 0:s.get(o))??null;let u;d===null?u="include":d==="include"?u="exclude":u=null,t(o,u)},l=o=>(s==null?void 0:s.get(o))??null;return e.jsxs(e.Fragment,{children:[e.jsx(O,{value:r.total,label:"Total Services",filterable:!1,id:"total-services"}),e.jsx(O,{value:r.avgScore,label:"Average Score",filterable:!1,id:"avg-score"}),e.jsx(O,{value:r.withApi,label:"With API",filterable:!0,filterType:"has-api",filterState:l("has-api"),onClick:i,id:"api-count"}),e.jsx(O,{value:r.stale,label:"Stale",filterable:!0,filterType:"stale",filterState:l("stale"),onClick:i,id:"stale-count"}),e.jsx(O,{value:r.installed,label:"Installed",filterable:!0,filterType:"installed",filterState:l("installed"),onClick:i,id:"installed-count"}),e.jsx(O,{value:r.platinum,label:"Platinum",filterable:!0,filterType:"platinum",filterState:l("platinum"),onClick:i,id:"platinum-count"}),e.jsx(O,{value:r.gold,label:"Gold",filterable:!0,filterType:"gold",filterState:l("gold"),onClick:i,id:"gold-count"}),e.jsx(O,{value:r.silver,label:"Silver",filterable:!0,filterType:"silver",filterState:l("silver"),onClick:i,id:"silver-count"}),e.jsx(O,{value:r.bronze,label:"Bronze",filterable:!0,filterType:"bronze",filterState:l("bronze"),onClick:i,id:"bronze-count"})]})}function cr({onFilterChange:t,activeFilters:s}){const a=_(o=>o.teams.all),n=_(o=>o.services.all),r=c.useMemo(()=>{const o=a.length,d=o>0?Math.round(a.reduce((v,w)=>v+(w.averageScore||0),0)/o):0,u=n.length,h=n.filter(v=>!ne(v)).length;let m=0,p=0,x=0,k=0;return a.forEach(v=>{const w=xs(v);w==="platinum"?m++:w==="gold"?p++:w==="silver"?x++:w==="bronze"&&k++}),{totalTeams:o,avgScore:d,totalServices:u,noTeam:h,platinum:m,gold:p,silver:x,bronze:k}},[a,n]),i=o=>{if(!t)return;const d=(s==null?void 0:s.get(o))??null;let u;d===null?u="include":d==="include"?u="exclude":u=null,t(o,u)},l=o=>(s==null?void 0:s.get(o))??null;return e.jsxs(e.Fragment,{children:[e.jsx(O,{value:r.totalTeams,label:"Total Teams",filterable:!1,id:"total-teams"}),e.jsx(O,{value:r.avgScore,label:"Average Score",filterable:!1,id:"teams-avg-score"}),e.jsx(O,{value:r.totalServices,label:"Total Services",filterable:!1,id:"teams-total-services"}),e.jsx(O,{value:r.noTeam,label:"No Team",filterable:!1,id:"no-team-count"}),e.jsx(O,{value:r.platinum,label:"Platinum",filterable:!0,filterType:"platinum",filterState:l("platinum"),onClick:i,id:"teams-platinum-count"}),e.jsx(O,{value:r.gold,label:"Gold",filterable:!0,filterType:"gold",filterState:l("gold"),onClick:i,id:"teams-gold-count"}),e.jsx(O,{value:r.silver,label:"Silver",filterable:!0,filterType:"silver",filterState:l("silver"),onClick:i,id:"teams-silver-count"}),e.jsx(O,{value:r.bronze,label:"Bronze",filterable:!0,filterType:"bronze",filterState:l("bronze"),onClick:i,id:"teams-bronze-count"})]})}function ys(t,s,a){const n=c.useRef(void 0);c.useEffect(()=>(n.current=setTimeout(t,s),()=>{n.current&&clearTimeout(n.current)}),[...a,s])}function Mt(t={}){const{autoResetDelay:s=3e3}=t,[a,n]=c.useState("idle"),r=c.useRef();c.useEffect(()=>()=>{r.current&&clearTimeout(r.current)},[]);const i=()=>{r.current&&(clearTimeout(r.current),r.current=void 0)},l=c.useCallback(()=>{i(),n("idle")},[]),o=c.useCallback(()=>{i(),n("loading")},[]),d=c.useCallback((h=!0)=>{i(),n("success"),h&&(r.current=setTimeout(l,s))},[s,l]),u=c.useCallback((h=!0)=>{i(),n("error"),h&&(r.current=setTimeout(l,s))},[s,l]);return{state:a,isLoading:a==="loading",isSuccess:a==="success",isError:a==="error",setLoading:o,setSuccess:d,setError:u,reset:l}}let dt=null;function ut(){return dt}function dr(t){dt=t?t.trim():null}function ht(){dt=null}async function ur(t){try{return(await fetch("https://api.github.com/user",{headers:{Authorization:`token ${t}`,Accept:"application/vnd.github.v3+json"}})).ok}catch(s){return console.error("Error validating PAT:",s),!1}}const Ns={success:"âœ“",error:"âœ—",warning:"âš ",info:"â„¹"};function hr({toast:t,onDismiss:s}){const[a,n]=c.useState(!1);return c.useEffect(()=>{const r=setTimeout(()=>n(!0),10),i=setTimeout(()=>{n(!1),setTimeout(()=>s(t.id),300)},5e3);return()=>{clearTimeout(r),clearTimeout(i)}},[t.id,s]),e.jsxs("div",{className:M("toast","toast-react",`toast-react--${t.type}`,a?"toast-react--visible":"toast-react--hidden"),children:[e.jsx("span",{className:"toast-react__icon",children:Ns[t.type]}),e.jsx("span",{className:"toast-react__message",children:t.message})]})}function Ss({message:t,type:s,onClose:a}){const[n,r]=c.useState(!1);return c.useEffect(()=>{const i=setTimeout(()=>r(!0),10),l=setTimeout(()=>{r(!1),setTimeout(()=>a(),300)},5e3);return()=>{clearTimeout(i),clearTimeout(l)}},[a]),e.jsxs("div",{className:M("toast","toast-react",`toast-react--${s}`,n?"toast-react--visible":"toast-react--hidden"),children:[e.jsx("span",{className:"toast-react__icon",children:Ns[s]}),e.jsx("span",{className:"toast-react__message",children:t})]})}function mr({toasts:t,onDismiss:s}){return t.length===0?null:e.jsx(e.Fragment,{children:t.map(a=>e.jsx(hr,{toast:a,onDismiss:s},a.id))})}function fr(){const[t,s]=c.useState([]),a=c.useCallback((r,i="info")=>{const l=`toast-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;s(o=>[...o,{id:l,message:r,type:i}])},[]),n=c.useCallback(r=>{s(i=>i.filter(l=>l.id!==r))},[]);return{toasts:t,showToast:a,dismissToast:n}}let Ge=null;function $t(t){Ge=t}function H(t,s="info"){Ge?Ge(t,s):console.warn("[Toast]",s,t)}var be={};function pr(){if(typeof process<"u"&&(be!=null&&be.SCORECARD_REPO_OWNER))return be.SCORECARD_REPO_OWNER;if(typeof window<"u"){const t=window.location.hostname;return t==="localhost"||t==="127.0.0.1"||t.startsWith("192.168.")?window.SCORECARD_REPO_OWNER||"feddericovonwernich":t.split(".")[0]||"feddericovonwernich"}return"feddericovonwernich"}const pe={repoOwner:pr(),repoName:"scorecards",catalogBranch:"catalog",ports:{devServer:8080,testServer:8080},api:{githubBase:"https://api.github.com",version:"2022-11-28",acceptHeader:"application/vnd.github.v3+json"},git:{botName:"scorecard-bot",botEmail:"scorecard-bot@users.noreply.github.com"}},_s={files:{triggerService:"trigger-service-workflow.yml",createInstallPR:"create-installation-pr.yml",scorecard:"scorecard.yml"},polling:{default:3e4,min:1e4,max:12e4}};function Ts(t,s,a){return`https://api.github.com/repos/${t}/${s}/actions/workflows/${a}/dispatches`}function As(){return _.getState().services.all}function Es(t){_.getState().setServices(t)}function mt(t){_.getState().setFilteredServices(t)}function gr(t){_.getState().setTeams(t)}function xr(t){_.getState().setFilteredTeams(t)}function Pt(){return _.getState().filters.active}function Dt(){return _.getState().filters.search}function vr(){return _.getState().filters.sort}function ft(){return _.getState().ui.checksHash}function qe(t){_.getState().setChecksHash(t)}const Pe=pe.repoOwner,De=pe.repoName,pt=pe.catalogBranch,gt=`https://raw.githubusercontent.com/${Pe}/${De}/${pt}`;let ke=null,It=0;const jr=10*1e3;async function re(t,s={}){const a=ut();let n,r=!1;if(a)try{const i=`https://api.github.com/repos/${Pe}/${De}/contents/${t}?ref=${pt}`;n=await fetch(i,{...s,cache:"no-cache",headers:{...s.headers,Accept:"application/vnd.github.raw",Authorization:`token ${a}`}}),r=!0,n.status===403||n.status===429||n.status===401?(console.warn(`API fetch failed with status ${n.status}, falling back to CDN`),r=!1):n.ok||(console.warn(`API fetch failed with status ${n.status}, falling back to CDN`),r=!1)}catch(i){console.error("Error with API fetch, falling back to CDN:",i),r=!1}if(!r){const i=`${gt}/${t}?t=${Date.now()}`;n=await fetch(i,{...s,cache:"no-cache"})}return{response:n,usedAPI:r}}async function xt(){const t=Date.now();if(ke&&t-It<jr)return console.log("Using cached checks hash:",ke),ke;console.log("Fetching current checks hash from catalog...");try{const s=`${gt}/current-checks.json?t=${Date.now()}`,a=await fetch(s,{cache:"no-cache"});if(!a.ok)return console.error("Failed to fetch current checks hash:",a.status),null;const n=await a.json(),r=n.checks_hash;return ke=r,It=t,console.log("Current checks hash:",r),console.log("Checks count:",n.checks_count),console.log("Generated at:",n.generated_at),r}catch(s){return console.error("Error fetching current checks hash:",s),null}}async function vt(){let t=!1,s=!1,a=[];try{console.log("Attempting to load consolidated registry...");const{response:n,usedAPI:r}=await re("registry/all-services.json");if(s=r,n.ok){const i=await n.json();i.services&&Array.isArray(i.services)&&(a=i.services,t=!0,console.log(`Loaded ${a.length} services from consolidated registry (generated at ${i.generated_at})`))}}catch(n){console.warn("Failed to load consolidated registry, falling back to tree API:",n)}if(!t){console.log("Loading services via tree API...");const n=`https://api.github.com/repos/${Pe}/${De}/git/trees/${pt}?recursive=1`,r=await fetch(n);if(!r.ok)throw new Error(`Failed to fetch repository tree: ${r.status}`);const l=(await r.json()).tree.filter(u=>u.path.startsWith("registry/")&&u.path.endsWith(".json")&&u.path!=="registry/all-services.json").map(u=>u.path);if(l.length===0)throw new Error("No services registered yet");const o=l.map(async u=>{const{response:h,usedAPI:m}=await re(u);return m&&(s=!0),h.ok?h.json():null});a=(await Promise.all(o)).filter(u=>u!==null),console.log(`Loaded ${a.length} services via tree API`)}return{services:a,usedAPI:s}}let He=null,Ft=0;const wr=60*1e3;async function jt(t=!1){const s=Date.now();if(!t&&He&&s-Ft<wr)return console.log("Using cached teams data"),{teams:He,usedAPI:!1};console.log("Loading teams from registry...");try{const{response:a,usedAPI:n}=await re("teams/all-teams.json");if(!a.ok)return console.warn("Failed to load teams registry:",a.status),{teams:null,usedAPI:n};const r=await a.json();return He=r,Ft=s,console.log(`Loaded ${r.count||0} teams from registry (generated at ${r.generated_at})`),{teams:r,usedAPI:n}}catch(a){return console.error("Error loading teams:",a),{teams:null,usedAPI:!1}}}async function Ls(t){try{const{response:s}=await re(`teams/${t}.json`);return s.ok?s.json():(console.warn(`Failed to load team ${t}:`,s.status),null)}catch(s){return console.error(`Error loading team ${t}:`,s),null}}function ge(){return Pe}function xe(){return De}function br(){return gt}const Ke=Object.freeze(Object.defineProperty({__proto__:null,fetchCurrentChecksHash:xt,fetchWithHybridAuth:re,getRawBaseUrl:br,getRepoName:xe,getRepoOwner:ge,loadServices:vt,loadTeamById:Ls,loadTeams:jt},Symbol.toStringTag,{value:"Module"})),Rs=()=>({owner:ge(),name:xe()});async function kr(t,s){var n;const a=ut();if(!a)return H("Please configure a GitHub PAT in Settings to trigger workflows","warning"),(n=window.openSettings)==null||n.call(window),!1;try{const{owner:r,name:i}=Rs(),l=await fetch(Ts(r,i,_s.files.triggerService),{method:"POST",headers:{Accept:"application/vnd.github+json",Authorization:`Bearer ${a}`,"X-GitHub-Api-Version":pe.api.version,"Content-Type":"application/json"},body:JSON.stringify({ref:"main",inputs:{org:t,repo:s}})});if(l.status===204)return H(`Scorecard workflow triggered for ${t}/${s}`,"success"),!0;if(l.status===401)return ht(),H("Invalid GitHub token. Please enter a valid token in Settings.","error"),!1;{const o=await l.json().catch(()=>({}));return console.error("Failed to trigger workflow:",l.status,o),H(`Failed to trigger workflow: ${o.message||l.statusText}`,"error"),!1}}catch(r){return console.error("Error triggering workflow:",r),H(`Error triggering workflow: ${r instanceof Error?r.message:String(r)}`,"error"),!1}}async function Cr(t){const s=ut();if(!s)return H("GitHub token is required to trigger workflows","error"),!1;try{const a=t.map(l=>({org:l.org,repo:l.repo})),{owner:n,name:r}=Rs(),i=await fetch(Ts(n,r,_s.files.triggerService),{method:"POST",headers:{Accept:"application/vnd.github+json",Authorization:`Bearer ${s}`,"X-GitHub-Api-Version":pe.api.version,"Content-Type":"application/json"},body:JSON.stringify({ref:"main",inputs:{services:JSON.stringify(a)}})});if(i.status===204){const l=t.length;return H(`Triggered workflows for ${l} service${l!==1?"s":""}`,"success"),!0}else{if(i.status===401)return ht(),H("Invalid GitHub token. Please enter a valid token in Settings.","error"),!1;{const l=await i.json().catch(()=>({}));return console.error("Failed to trigger bulk workflows:",i.status,l),H(`Failed to trigger workflows: ${l.message||i.statusText}`,"error"),!1}}}catch(a){return console.error("Error triggering bulk workflows:",a),H(`Error triggering workflows: ${a instanceof Error?a.message:String(a)}`,"error"),!1}}async function Bt(t){return document.createElement("button"),await Cr(t)}const yr="_actionButton_1v2qq_3",Nr="_loading_1v2qq_12",Sr="_success_1v2qq_16",_r="_error_1v2qq_21",Tr="_spinning_1v2qq_26",Ar="_spin_1v2qq_26",Ye={actionButton:yr,loading:Nr,success:Sr,error:_r,spinning:Tr,spin:Ar};function Ot({children:t,state:s="idle",loadingText:a="Loading...",successText:n="Success!",errorText:r="Failed",onClick:i,disabled:l,className:o="",title:d,variant:u="default"}){const h=l||s==="loading",m=()=>{switch(s){case"loading":return e.jsxs(e.Fragment,{children:[e.jsx(Er,{}),a]});case"success":return e.jsxs(e.Fragment,{children:[e.jsx(Lr,{}),n]});case"error":return e.jsxs(e.Fragment,{children:[e.jsx(Rr,{}),r]});default:return t}},p=()=>{switch(s){case"loading":return a;case"success":return"âœ“ "+n;case"error":return"âœ— "+r;default:return d}},x=u!=="default"?`trigger-btn-${u}`:"";return e.jsx("button",{className:`trigger-btn ${x} ${Ye.actionButton} ${Ye[s]} ${o}`,onClick:i,disabled:h,title:p(),"data-state":s,children:m()})}function Er(){return e.jsx("svg",{className:Ye.spinning,width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M1.705 8.005a.75.75 0 0 1 .834.656 5.5 5.5 0 0 0 9.592 2.97l-1.204-1.204a.25.25 0 0 1 .177-.427h3.646a.25.25 0 0 1 .25.25v3.646a.25.25 0 0 1-.427.177l-1.38-1.38A7.002 7.002 0 0 1 1.05 8.84a.75.75 0 0 1 .656-.834ZM8 2.5a5.487 5.487 0 0 0-4.131 1.869l1.204 1.204A.25.25 0 0 1 4.896 6H1.25A.25.25 0 0 1 1 5.75V2.104a.25.25 0 0 1 .427-.177l1.38 1.38A7.002 7.002 0 0 1 14.95 7.16a.75.75 0 0 1-1.49.178A5.5 5.5 0 0 0 8 2.5Z"})})}function Lr(){return e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"})})}function Rr(){return e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M3.72 3.72a.75.75 0 0 1 1.06 0L8 6.94l3.22-3.22a.749.749 0 0 1 1.275.326.749.749 0 0 1-.215.734L9.06 8l3.22 3.22a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L8 9.06l-3.22 3.22a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042L6.94 8 3.72 4.78a.75.75 0 0 1 0-1.06Z"})})}function wt(){let t=[...As()];const s=_.getState(),a=s.filters.teamFilter;if(a){const i=a.split(",").map(o=>o.trim().toLowerCase()),l=i.includes("__no_team__");t=t.filter(o=>{const d=ne(o);return l&&!!!d?!0:d?i.includes(d.toLowerCase()):!1})}const n=s.filters.checkFilters;n&&n.size>0&&(t=t.filter(i=>{var l;for(const[o,d]of n){const u=(l=i.check_results)==null?void 0:l[o];if(d==="pass"&&u!=="pass"||d==="fail"&&u!=="fail")return!1}return!0}));const r=t.filter(i=>{if(Pt().size>0)for(const[l,o]of Pt()){let d=!1;if(l==="has-api"?d=i.has_api??!1:l==="stale"?d=ce(i,ft()):l==="installed"?d=i.installed??!1:(l==="platinum"||l==="gold"||l==="silver"||l==="bronze")&&(d=i.rank===l),o==="include"){if(!d)return!1}else if(o==="exclude"&&d)return!1}if(Dt()){const l=ne(i)||"";if(!`${i.name} ${i.org} ${i.repo} ${l}`.toLowerCase().includes(Dt()))return!1}return!0});r.sort((i,l)=>{switch(vr()){case"score-desc":return l.score-i.score;case"score-asc":return i.score-l.score;case"name-asc":return i.name.localeCompare(l.name);case"name-desc":return l.name.localeCompare(i.name);case"updated-desc":return new Date(l.last_updated).getTime()-new Date(i.last_updated).getTime();default:return 0}}),mt(r)}async function Ms(){const t=document.getElementById("refresh-btn");if(!t)return;const s=t.innerHTML;t.disabled=!0,t.innerHTML='<span class="spinner"></span> Refreshing...';try{H("Refreshing service data...","info"),qe(null);const{services:a,usedAPI:n}=await vt();Es(a),mt([...a]),qe(await xt());const r=_.getState();r.setServices(a),r.setFilteredServices([...a]),r.setChecksHash(ft()),wt();const i=new Date().toLocaleTimeString();H(n?`Data refreshed successfully from GitHub API at ${i}. (Fresh data, bypassed cache)`:`Data refreshed from CDN at ${i}. (Note: CDN cache may be up to 5 minutes old. Use GitHub PAT in settings for real-time data)`,"success")}catch(a){console.error("Error refreshing data:",a),H(`Failed to refresh data: ${a instanceof Error?a.message:String(a)}`,"error")}finally{setTimeout(()=>{t.disabled=!1,t.innerHTML=s},1e3)}}async function Mr(){try{const{services:t}=await vt();Es(t),mt([...t]),qe(await xt());const s=_.getState();s.setServices(t),s.setFilteredServices([...t]),s.setChecksHash(ft()),wt(),window.location.hash==="#teams"&&window.initTeamsView&&window.initTeamsView()}catch(t){console.error("Error loading services:",t)}}function $r(){const t=_(v=>v.updateFilters),s=_(v=>v.filters),a=_(v=>v.services.all),n=_(v=>v.ui.checksHash),[r,i]=c.useState(s.search),[l,o]=c.useState(!1),d=Mt(),u=Mt();ys(()=>{t({search:r})},300,[r]);const h=v=>{i(v.target.value)},m=v=>{t({sort:v.target.value})},p=async()=>{o(!0);try{await Ms()}finally{o(!1)}},x=async()=>{const v=a.filter(C=>ce(C,n)&&C.installed);if(v.length===0){H("No stale services to trigger","info");return}if(!confirm(`Trigger workflows for ${v.length} stale service(s)?`))return;d.setLoading(),await Bt(v)?d.setSuccess():d.setError()},k=async()=>{const v=a.filter(C=>C.installed);if(v.length===0){H("No installed services to trigger","info");return}if(!confirm(`Trigger workflows for ALL ${v.length} installed service(s)?`))return;u.setLoading(),await Bt(v)?u.setSuccess():u.setError()};return e.jsxs("section",{className:"controls",children:[e.jsx("input",{type:"text",id:"search-input",placeholder:"Search services...",className:"search-box",value:r,onChange:h}),e.jsxs("select",{id:"sort-select",className:"sort-select","aria-label":"Sort by",value:s.sort,onChange:m,children:[e.jsx("option",{value:"score-desc",children:"Score: High to Low"}),e.jsx("option",{value:"score-asc",children:"Score: Low to High"}),e.jsx("option",{value:"name-asc",children:"Name: A to Z"}),e.jsx("option",{value:"name-desc",children:"Name: Z to A"}),e.jsx("option",{value:"updated-desc",children:"Recently Updated"})]}),e.jsxs("button",{id:"refresh-btn",className:"refresh-btn",onClick:p,disabled:l,title:"Re-fetch service data from catalog",children:[e.jsx(We,{spinning:l}),l?"Refreshing...":"Refresh Data"]}),e.jsxs(Ot,{state:d.state,onClick:x,loadingText:"Triggering...",successText:"Triggered!",errorText:"Failed",variant:"bulk",children:[e.jsx(We,{}),"Re-run All Stale"]}),e.jsxs(Ot,{state:u.state,onClick:k,loadingText:"Triggering...",successText:"Triggered!",errorText:"Failed",variant:"neutral",title:"Trigger scorecard workflow for all installed services",children:[e.jsx(We,{}),"Re-run All Installed"]})]})}function We({spinning:t=!1}){return e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",style:{marginRight:6},className:t?"spinning":"",children:e.jsx("path",{d:"M1.705 8.005a.75.75 0 0 1 .834.656 5.5 5.5 0 0 0 9.592 2.97l-1.204-1.204a.25.25 0 0 1 .177-.427h3.646a.25.75 0 0 1 .25.25v3.646a.25.75 0 0 1-.427.177l-1.38-1.38A7.002 7.002 0 0 1 1.05 8.84a.75.75 0 0 1 .656-.834ZM8 2.5a5.487 5.487 0 0 0-4.131 1.869l1.204 1.204A.25.25 0 0 1 4.896 6H1.25A.25.25 0 0 1 1 5.75V2.104a.25.25 0 0 1 .427-.177l1.38 1.38A7.002 7.002 0 0 1 14.95 7.16a.75.75 0 0 1-1.49.178A5.5 5.5 0 0 0 8 2.5Z"})})}function Pr(t){return t.charAt(0).toUpperCase()+t.slice(1)}function Je({rank:t,className:s="",isModalHeader:a=!1}){return e.jsx("div",{className:M("rank-badge",t,a&&"mb-0",s),children:Pr(t)})}function Qe({rank:t,count:s,className:a=""}){return e.jsx("span",{className:M("mini-rank-badge",`mini-rank-badge--${t}`,a),children:s})}function Dr({distribution:t,className:s=""}){const n=["platinum","gold","silver","bronze"].filter(r=>t[r]>0);return n.length===0?e.jsx(Qe,{rank:"bronze",count:0}):e.jsx("div",{className:M("rank-badge-group",s),children:n.map(r=>e.jsx(Qe,{rank:r,count:t[r]},r))})}const Ir={api:"API",stale:"STALE",installed:"INSTALLED"};function Te({type:t,className:s=""}){return e.jsx("span",{className:M(`badge-${t}`,s),children:Ir[t]})}function Ht({hasApi:t=!1,isStale:s=!1,isInstalled:a=!1,className:n=""}){return t||s||a?e.jsxs("div",{className:M("service-badges",n),children:[t&&e.jsx(Te,{type:"api"}),s&&e.jsx(Te,{type:"stale"}),a&&e.jsx(Te,{type:"installed"})]}):null}function Wt({score:t,className:s=""}){return e.jsx("div",{className:M("score-badge-inline",s),children:t})}function Zt(){return e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"})})}function zt(){return e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M1.5 3.25a2.25 2.25 0 1 1 3 2.122v5.256a2.251 2.251 0 1 1-1.5 0V5.372A2.25 2.25 0 0 1 1.5 3.25Zm5.677-.177L9.573.677A.25.25 0 0 1 10 .854V2.5h1A2.5 2.5 0 0 1 13.5 5v5.628a2.251 2.251 0 1 1-1.5 0V5a1 1 0 0 0-1-1h-1v1.646a.25.25 0 0 1-.427.177L7.177 3.427a.25.25 0 0 1 0-.354ZM3.75 2.5a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Zm0 9.5a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Zm8.25.75a.75.75 0 1 0 1.5 0 .75.75 0 0 0-1.5 0Z"})})}function Vt(){return e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M1.705 8.005a.75.75 0 0 1 .834.656 5.5 5.5 0 0 0 9.592 2.97l-1.204-1.204a.25.25 0 0 1 .177-.427h3.646a.25.25 0 0 1 .25.25v3.646a.25.25 0 0 1-.427.177l-1.38-1.38A7.002 7.002 0 0 1 1.05 8.84a.75.75 0 0 1 .656-.834ZM8 2.5a5.487 5.487 0 0 0-4.131 1.869l1.204 1.204A.25.25 0 0 1 4.896 6H1.25A.25.25 0 0 1 1 5.75V2.104a.25.25 0 0 1 .427-.177l1.38 1.38A7.002 7.002 0 0 1 14.95 7.16a.75.75 0 0 1-1.49.178A5.5 5.5 0 0 0 8 2.5Z"})})}function Ut(){return e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M2 5.5a3.5 3.5 0 1 1 5.898 2.549 5.508 5.508 0 0 1 3.034 4.084.75.75 0 1 1-1.482.235 4 4 0 0 0-7.9 0 .75.75 0 0 1-1.482-.236A5.507 5.507 0 0 1 3.102 8.05 3.493 3.493 0 0 1 2 5.5ZM11 4a3.001 3.001 0 0 1 2.22 5.018 5.01 5.01 0 0 1 2.56 3.012.749.749 0 0 1-.885.954.752.752 0 0 1-.549-.514 3.507 3.507 0 0 0-2.522-2.372.75.75 0 0 1-.574-.73v-.352a.75.75 0 0 1 .416-.672A1.5 1.5 0 0 0 11 5.5.75.75 0 0 1 11 4Zm-5.5-.5a2 2 0 1 0-.001 3.999A2 2 0 0 0 5.5 3.5Z"})})}function Gt(t){const s=new Date(t),n=new Date().getTime()-s.getTime(),r=Math.floor(n/(1e3*60*60*24));return r===0?"Today":r===1?"Yesterday":r<7?`${r} days ago`:s.toLocaleDateString()}function Fr(t){const s=new Date(t),n=new Date().getTime()-s.getTime(),r=Math.floor(n/(1e3*60)),i=Math.floor(n/(1e3*60*60)),l=Math.floor(n/(1e3*60*60*24));return r<1?"just now":r<60?`${r}m ago`:i<24?`${i}h ago`:`${l}d ago`}const Br=c.memo(function({service:s,isStale:a=!1,variant:n="grid",onCardClick:r,onTeamClick:i,onTriggerWorkflow:l}){var w,C;const o=a&&s.installed,d=(w=s.team)==null?void 0:w.primary,u=n==="list",h=()=>{r==null||r(s.org,s.repo)},m=j=>{j.stopPropagation(),d&&(i==null||i(d))},p=async j=>{j.stopPropagation(),await(l==null?void 0:l(s.org,s.repo))},x=j=>{j.stopPropagation()},k=j=>{j.stopPropagation()},v=j=>{(j.key==="Enter"||j.key===" ")&&(j.preventDefault(),h())};return u?e.jsxs("div",{className:`service-card rank-${s.rank} service-card--list`,onClick:h,role:"button",tabIndex:0,onKeyDown:v,children:[e.jsxs("div",{className:"service-info",children:[e.jsx("div",{className:"service-name",children:s.name}),e.jsxs("div",{className:"service-org",children:[s.org,"/",s.repo]})]}),e.jsx(Je,{rank:s.rank}),e.jsx("div",{className:"service-badges-cell",children:e.jsx(Ht,{hasApi:s.has_api,isStale:a,isInstalled:s.installed})}),e.jsxs("div",{className:"service-icons",children:[o&&e.jsx("button",{className:"trigger-btn trigger-btn-icon",onClick:p,onKeyDown:j=>{(j.key==="Enter"||j.key===" ")&&j.stopPropagation()},title:"Re-run scorecard workflow",children:e.jsx(Vt,{})}),e.jsx("a",{href:`https://github.com/${s.org}/${s.repo}`,target:"_blank",rel:"noopener noreferrer",className:"github-icon-link",onClick:x,title:"View on GitHub",children:e.jsx(Zt,{})}),!s.installed&&s.installation_pr&&e.jsx("a",{href:s.installation_pr.url,target:"_blank",rel:"noopener noreferrer",className:`pr-icon-link pr-icon-${s.installation_pr.state.toLowerCase()}`,onClick:k,title:`PR #${s.installation_pr.number}`,children:e.jsx(zt,{})})]}),e.jsx("div",{className:"score-badge-cell",children:e.jsx(Wt,{score:s.score})}),d?e.jsx("div",{className:"service-team",children:e.jsxs("span",{className:"service-team-link",onClick:m,role:"button",tabIndex:0,onKeyDown:j=>{(j.key==="Enter"||j.key===" ")&&(j.preventDefault(),m(j))},children:[e.jsx(Ut,{}),d]})}):e.jsx("div",{className:"service-team-empty"}),e.jsx("div",{className:"service-meta",children:e.jsxs("div",{children:["Last updated: ",Gt(s.last_updated)]})})]}):e.jsxs("div",{className:`service-card rank-${s.rank}`,onClick:h,role:"button",tabIndex:0,onKeyDown:v,children:[e.jsxs("div",{className:"service-header",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"service-title-wrapper",children:[e.jsx("div",{className:"service-name",children:s.name}),e.jsx(Ht,{hasApi:s.has_api,isStale:a,isInstalled:!1})]}),e.jsxs("div",{className:"service-org",children:[s.org,"/",s.repo]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[o&&e.jsx("button",{className:"trigger-btn trigger-btn-icon",onClick:p,onKeyDown:j=>{(j.key==="Enter"||j.key===" ")&&j.stopPropagation()},title:"Re-run scorecard workflow",children:e.jsx(Vt,{})}),e.jsx("a",{href:`https://github.com/${s.org}/${s.repo}`,target:"_blank",rel:"noopener noreferrer",className:"github-icon-link",onClick:x,title:"View on GitHub",children:e.jsx(Zt,{})}),!s.installed&&s.installation_pr&&e.jsx("a",{href:s.installation_pr.url,target:"_blank",rel:"noopener noreferrer",className:`pr-icon-link pr-icon-${s.installation_pr.state.toLowerCase()}`,onClick:k,title:`${s.installation_pr.state==="OPEN"?"Open":"Closed"} installation PR #${s.installation_pr.number}`,children:e.jsx(zt,{})}),e.jsx(Wt,{score:s.score})]})]}),e.jsxs("div",{className:"service-status-row",children:[e.jsx(Je,{rank:s.rank}),d?e.jsx("div",{className:"service-team",children:e.jsxs("span",{className:"service-team-link",onClick:m,role:"button",tabIndex:0,onKeyDown:j=>{(j.key==="Enter"||j.key===" ")&&(j.preventDefault(),m(j))},children:[e.jsx(Ut,{}),d]})}):e.jsx("div",{className:"service-team-empty"})]}),e.jsxs("div",{className:"service-meta",children:[e.jsxs("div",{className:"service-meta-left",children:[e.jsxs("div",{children:["Last updated: ",Gt(s.last_updated)]}),((C=s.installation_pr)==null?void 0:C.updated_at)&&e.jsxs("div",{className:"pr-status-timestamp",title:`PR status last fetched at ${new Date(s.installation_pr.updated_at).toLocaleString()}`,children:["PR status: ",Fr(s.installation_pr.updated_at)]})]}),s.installed&&e.jsx(Te,{type:"installed"})]})]})});function Or({services:t,checksHash:s=null,variant:a="grid",isServiceStale:n,onCardClick:r,onTeamClick:i,onTriggerWorkflow:l}){const o=c.useRef(null);return c.useEffect(()=>{var u;const d=(u=o.current)==null?void 0:u.parentElement;d&&d.id==="services-grid"&&(a==="list"?d.classList.add("services-grid--list"):d.classList.remove("services-grid--list"))},[a]),t.length===0?e.jsx("div",{className:"empty-state",children:e.jsx("h3",{children:"No services match your criteria"})}):e.jsx("div",{ref:o,style:{display:"contents"},children:t.map(d=>{const u=(n==null?void 0:n(d,s))??!1;return e.jsx(Br,{service:d,isStale:u,variant:a,onCardClick:r,onTeamClick:i,onTriggerWorkflow:l},`${d.org}/${d.repo}`)})})}function Hr(t,s){return ce(t,s)}function Wr(){const t=_(js),s=_(ct),a=_($e),n=c.useCallback((l,o)=>{var d;(d=window.showServiceDetail)==null||d.call(window,l,o)},[]),r=c.useCallback(l=>{var o;(o=window.showTeamDetail)==null||o.call(window,l)},[]),i=c.useCallback((l,o)=>{var d;return(d=window.triggerServiceWorkflow)==null?void 0:d.call(window,l,o)},[]);return e.jsx("section",{id:"services-grid",className:"services-grid",children:e.jsx(Or,{services:t,checksHash:s,variant:a,isServiceStale:Hr,onCardClick:n,onTeamClick:r,onTriggerWorkflow:i})})}function Zr(){const t=_(n=>n.filters.active),s=_(n=>n.setFilter),a=c.useCallback((n,r)=>{s(n,r)},[s]);return e.jsxs("div",{className:"view-content active",id:"services-view",children:[e.jsx("section",{className:"stats services-stats",children:e.jsx(or,{onFilterChange:a,activeFilters:t})}),e.jsx("section",{className:"controls",children:e.jsx($r,{})}),e.jsx(Wr,{})]})}function zr(){const t=_(p=>p.teams),s=_(p=>p.updateTeamsState),a=_(p=>p.filterAndSortTeams),[n,r]=c.useState(t.search),[i,l]=c.useState(!1);ys(()=>{s({search:n}),a()},300,[n]);const o=p=>{r(p.target.value)},d=p=>{s({sort:p.target.value}),a()},u=async()=>{l(!0);try{window.refreshTeamsView&&await window.refreshTeamsView()}finally{l(!1)}},h=()=>{window.openTeamEditModal&&window.openTeamEditModal("create")},m=()=>{window.openCheckAdoptionDashboard&&window.openCheckAdoptionDashboard()};return e.jsxs("section",{className:"controls teams-controls",children:[e.jsx("input",{type:"text",id:"teams-search-input",placeholder:"Search teams...",className:"search-box",value:n,onChange:o}),e.jsxs("select",{id:"teams-sort-select",className:"sort-select",value:t.sort,onChange:d,children:[e.jsx("option",{value:"score-desc",children:"Score: High to Low"}),e.jsx("option",{value:"score-asc",children:"Score: Low to High"}),e.jsx("option",{value:"services-desc",children:"Services: High to Low"}),e.jsx("option",{value:"services-asc",children:"Services: Low to High"}),e.jsx("option",{value:"name-asc",children:"Name: A to Z"}),e.jsx("option",{value:"name-desc",children:"Name: Z to A"})]}),e.jsxs("button",{className:"refresh-btn",onClick:u,disabled:i,children:[e.jsx(Vr,{spinning:i}),"Refresh Data"]}),e.jsx("button",{className:"create-btn",onClick:h,children:"+ Create Team"}),e.jsxs("button",{className:"trigger-btn trigger-btn-accent",onClick:m,title:"View check adoption rates across all teams",children:[e.jsx(Ur,{}),"Check Adoption"]})]})}function Vr({spinning:t=!1}){return e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",style:{marginRight:6},className:t?"spinning":"",children:e.jsx("path",{d:"M1.705 8.005a.75.75 0 0 1 .834.656 5.5 5.5 0 0 0 9.592 2.97l-1.204-1.204a.25.25 0 0 1 .177-.427h3.646a.25.25 0 0 1 .25.25v3.646a.25.25 0 0 1-.427.177l-1.38-1.38A7.002 7.002 0 0 1 1.05 8.84a.75.75 0 0 1 .656-.834ZM8 2.5a5.487 5.487 0 0 0-4.131 1.869l1.204 1.204A.25.25 0 0 1 4.896 6H1.25A.25.25 0 0 1 1 5.75V2.104a.25.25 0 0 1 .427-.177l1.38 1.38A7.002 7.002 0 0 1 14.95 7.16a.75.75 0 0 1-1.49.178A5.5 5.5 0 0 0 8 2.5Z"})})}function Ur(){return e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",style:{marginRight:6},children:e.jsx("path",{d:"M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"})})}function Gr(t){const s=["platinum","gold","silver","bronze"];for(const a of s)if(t[a]>0)return a;return"bronze"}function Ce({value:t,label:s,warning:a=!1}){return e.jsxs("div",{className:`team-stat${a?" warning":""}`,children:[e.jsx("span",{className:"team-stat-value",children:t}),e.jsx("span",{className:"team-stat-label",children:s})]})}function qr({label:t,percentage:s}){return e.jsxs("div",{className:"team-card-progress",children:[e.jsxs("div",{className:"progress-label",children:[e.jsx("span",{children:t}),e.jsxs("span",{children:[s,"%"]})]}),e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"progress-fill",style:{width:`${s}%`}})})]})}const Kr=c.memo(function({team:s,variant:a="grid",onCardClick:n}){var x,k,v,w,C;const r=s.serviceCount??((x=s.statistics)==null?void 0:x.serviceCount)??0,i=s.averageScore??((k=s.statistics)==null?void 0:k.averageScore)??0,l=s.installedCount??((v=s.statistics)==null?void 0:v.installedCount)??0,o=s.staleCount??((w=s.statistics)==null?void 0:w.staleCount)??0,d=s.rankDistribution??((C=s.statistics)==null?void 0:C.rankDistribution)??{platinum:0,gold:0,silver:0,bronze:0},u=Gr(d),h=r>0?Math.round(l/r*100):0,m=a==="list",p=()=>{n==null||n(s.name)};return e.jsxs("div",{className:`team-card rank-${u}${m?" team-card--list":""}`,onClick:p,role:"button",tabIndex:0,onKeyDown:j=>{(j.key==="Enter"||j.key===" ")&&(j.preventDefault(),p())},children:[e.jsxs("div",{className:"team-card-header",children:[e.jsx("h3",{className:"team-card-name",children:s.name}),s.slack_channel&&e.jsx("span",{className:"team-slack",children:s.slack_channel})]}),e.jsx(Je,{rank:u}),s.description&&e.jsx("p",{className:"team-card-description",children:s.description}),e.jsxs("div",{className:"team-card-stats",children:[e.jsx(Ce,{value:Math.round(i),label:"Avg Score"}),e.jsx(Ce,{value:r,label:"Services"}),e.jsx(Ce,{value:l,label:"Installed"}),o>0&&e.jsx(Ce,{value:o,label:"Stale",warning:!0})]}),e.jsx(Dr,{distribution:d,className:"team-card-ranks"}),e.jsx(qr,{label:"Installed",percentage:h})]})});function Yr({teams:t,variant:s="grid",onCardClick:a,emptyMessage:n="No teams found"}){return c.useLayoutEffect(()=>{const r=document.getElementById("teams-grid");return r&&(s==="list"?r.classList.add("teams-grid--list"):r.classList.remove("teams-grid--list")),()=>{const i=document.getElementById("teams-grid");i&&i.classList.remove("teams-grid--list")}},[s]),t.length===0?e.jsx("div",{className:"empty-state",children:e.jsx("h3",{children:n})}):e.jsx("div",{style:{display:"contents"},children:t.map(r=>e.jsx(Kr,{team:r,variant:s,onCardClick:a},r.id??r.name))})}function Jr(){const t=_(ws),s=_($e),a=c.useCallback(n=>{var r;(r=window.showTeamDetail)==null||r.call(window,n)},[]);return e.jsx("section",{id:"teams-grid",className:"teams-grid",children:e.jsx(Yr,{teams:t,variant:s,onCardClick:a,emptyMessage:"No teams found"})})}async function Qr(){try{const t=As()||[];let s=null;try{const{teams:i}=await jt();s=i}catch(i){console.warn("Failed to load teams registry:",i)}const a=lt(t);let n;if(s){const i=ot(s,a);n=Object.fromEntries(Object.entries(i).map(([l,o])=>[l,{...o,description:o.description??void 0}]))}else n=Object.fromEntries(Object.entries(a).map(([i,l])=>[i.toLowerCase().replace(/\s+/g,"-"),{id:i.toLowerCase().replace(/\s+/g,"-"),name:i,statistics:l}]));const r=Object.values(n).map(i=>{var l;return{...i,...i.statistics||{},slack_channel:((l=i.metadata)==null?void 0:l.slack_channel)||null}});gr(r),xr(r)}catch(t){console.error("Failed to initialize teams view:",t)}}function Xr(){const t=_(n=>n.teams.activeFilters),s=_(n=>n.updateTeamsState),a=c.useCallback((n,r)=>{const i=new Map(t);r===null?i.delete(n):i.set(n,r),s({activeFilters:i})},[t,s]);return c.useEffect(()=>{Qr()},[]),e.jsxs("div",{className:"view-content active",id:"teams-view",children:[e.jsx("section",{className:"stats teams-stats",children:e.jsx(cr,{onFilterChange:a,activeFilters:t})}),e.jsx("section",{className:"controls teams-controls",children:e.jsx(zr,{})}),e.jsx(Jr,{})]})}function J({isOpen:t,onClose:s,children:a,className:n="",contentClassName:r="",showCloseButton:i=!0,closeOnBackdrop:l=!0,closeOnEscape:o=!0,testId:d}){const u=c.useCallback(p=>{o&&p.key==="Escape"&&s()},[o,s]);c.useEffect(()=>(t&&(document.body.style.overflow="hidden",document.addEventListener("keydown",u)),()=>{document.body.style.overflow="",document.removeEventListener("keydown",u)}),[t,u]);const h=p=>{l&&p.target===p.currentTarget&&s()};if(!t)return null;const m=e.jsx("div",{id:d,className:`modal ${n}`,onClick:h,role:"dialog","aria-modal":"true",children:e.jsxs("div",{className:`modal-content ${r}`,children:[i&&e.jsx("button",{className:"modal-close",onClick:s,"aria-label":"Close modal",children:"Ã—"}),a]})});return Ee.createPortal(m,document.body)}function $s({tabs:t,defaultTab:s,activeTab:a,onTabChange:n,className:r="",showScrollArrows:i=!1}){var N,y;const l=t.filter(f=>!f.hidden),o=s||((N=l[0])==null?void 0:N.id)||"",[d,u]=c.useState(o),[h,m]=c.useState(!1),[p,x]=c.useState(!1),k=c.useRef(null),v=a??d,w=f=>{a||u(f),n==null||n(f)},C=c.useCallback(()=>{const f=k.current;if(!f||!i)return;const{scrollLeft:g,scrollWidth:E,clientWidth:S}=f;m(g>0),x(g+S<E-1)},[i]),j=f=>{const g=k.current;if(!g)return;const E=150;g.scrollBy({left:f==="left"?-E:E,behavior:"smooth"})};c.useEffect(()=>(C(),window.addEventListener("resize",C),()=>window.removeEventListener("resize",C)),[l.length,C]);const b=(y=l.find(f=>f.id===v))==null?void 0:y.content;return e.jsxs("div",{className:`tabs-container ${r}`,children:[e.jsxs("div",{className:"tabs-wrapper",children:[i&&h&&e.jsx("button",{className:"tab-scroll-arrow tab-scroll-left",onClick:()=>j("left"),"aria-label":"Scroll tabs left",children:e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M9.78 12.78a.75.75 0 0 1-1.06 0L4.47 8.53a.75.75 0 0 1 0-1.06l4.25-4.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042L6.06 8l3.72 3.72a.75.75 0 0 1 0 1.06Z"})})}),e.jsx("div",{ref:k,className:"tabs",onScroll:C,children:l.map(f=>e.jsx("button",{className:`tab-btn ${v===f.id?"active":""}`,onClick:()=>w(f.id),disabled:f.disabled,"data-tab":f.id,children:f.label},f.id))}),i&&p&&e.jsx("button",{className:"tab-scroll-arrow tab-scroll-right",onClick:()=>j("right"),"aria-label":"Scroll tabs right",children:e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M6.22 3.22a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042L9.94 8 6.22 4.28a.75.75 0 0 1 0-1.06Z"})})})]}),e.jsx("div",{className:"tab-content active",children:b})]})}const ei=["Scorecards Setup","Documentation","Testing & CI","Configuration & Compliance","Other"];function ti(t){switch(t){case"pass":return"âœ“";case"excluded":return"âŠ˜";default:return"âœ—"}}function si(t){const s={};t.forEach(n=>{const r=n.category||"Other";s[r]||(s[r]=[]),s[r].push(n)});const a={};return ei.forEach(n=>{const r=Object.keys(s).find(i=>i.toLowerCase()===n.toLowerCase());r&&(a[n]=s[r])}),a}function ai({check:t}){const s=t.status==="excluded";return e.jsxs("div",{className:`check-result ${t.status}`,children:[e.jsxs("div",{className:"check-name",children:[ti(t.status)," ",t.name]}),t.description&&e.jsx("div",{className:"check-description",children:t.description}),s&&e.jsx("div",{className:"check-excluded-notice",children:e.jsx("em",{children:"Excluded from scoring"})}),t.stdout&&t.stdout.trim()&&e.jsxs("div",{className:"check-output",children:[e.jsx("strong",{children:"Output:"}),e.jsx("br",{}),t.stdout.trim()]}),t.stderr&&t.stderr.trim()&&t.status==="fail"&&e.jsxs("div",{className:"check-output check-output-error",children:[e.jsx("strong",{children:"Error:"}),e.jsx("br",{}),t.stderr.trim()]}),e.jsxs("div",{className:"check-meta",children:["Weight: ",t.weight," | Duration: ",t.duration,"s"]})]})}function ni({category:t,checks:s}){const a=s.filter(l=>l.status==="pass").length,n=s.filter(l=>l.status==="excluded").length,r=s.length-n,i=a===r&&r>0;return e.jsxs("details",{className:"check-category",open:!0,children:[e.jsxs("summary",{className:"check-category-header",children:[e.jsx("span",{className:"category-arrow",children:"â–¼"}),e.jsx("span",{className:"category-name",children:t}),e.jsxs("span",{className:`category-stats ${i?"all-passed":"has-failures"}`,children:[a,"/",r," passed",n>0&&e.jsxs("span",{className:"excluded-count",children:[" (",n," excluded)"]})]})]}),e.jsx("div",{className:"check-category-content",children:s.map(l=>e.jsx(ai,{check:l},l.check_id))})]})}function ri({checks:t}){const s=c.useMemo(()=>si(t),[t]);return t.length===0?e.jsx("div",{className:"tab-panel",id:"checks-tab",children:e.jsx("div",{className:"empty-state",children:"No check results available"})}):e.jsx("div",{className:"tab-panel",id:"checks-tab",children:e.jsx("div",{className:"check-categories",children:Object.entries(s).map(([a,n])=>e.jsx(ni,{category:a,checks:n},a))})})}function ii({openapiInfo:t,org:s,repo:a,defaultBranch:n}){const[r,i]=c.useState(null),[l,o]=c.useState(!1),[d,u]=c.useState(null),[h,m]=c.useState(!1),{specInfo:p,fromConfig:x,summary:k}=t,v=(p==null?void 0:p.spec_file)||"openapi.yaml",w=n||"main",C=`https://github.com/${s}/${a}/blob/${w}/${v}`,j=`https://raw.githubusercontent.com/${s}/${a}/${w}/${v}`,b=c.useCallback(async()=>{if(!(r||l)){o(!0),u(null);try{const f=await fetch(j);if(!f.ok)throw new Error(`HTTP ${f.status}`);const g=await f.text();i(g)}catch(f){u(f instanceof Error?f.message:"Failed to load")}finally{o(!1)}}},[j,r,l]),N=c.useCallback(async()=>{if(r)try{await navigator.clipboard.writeText(r),m(!0),setTimeout(()=>m(!1),2e3)}catch{const f=document.createElement("textarea");f.value=r,document.body.appendChild(f),f.select(),document.execCommand("copy"),document.body.removeChild(f),m(!0),setTimeout(()=>m(!1),2e3)}},[r]),y=c.useCallback(()=>{var f;(f=window.openApiExplorer)==null||f.call(window,s,a)},[s,a]);return t.hasSpec?e.jsx("div",{className:"tab-panel",id:"api-tab",children:e.jsxs("div",{className:"api-tab-content",children:[e.jsxs("div",{className:"api-summary-card",children:[(k==null?void 0:k.title)&&e.jsx("div",{className:"api-summary-title",children:k.title}),e.jsxs("div",{className:"api-summary-meta",children:[e.jsxs("span",{className:"api-meta-item",children:[e.jsx("strong",{children:"File:"})," ",e.jsx("code",{children:v})]}),(k==null?void 0:k.openApiVersion)&&e.jsxs("span",{className:"api-meta-item",children:[e.jsx("strong",{children:"OpenAPI:"})," ",k.openApiVersion]}),(k==null?void 0:k.paths)&&e.jsxs("span",{className:"api-meta-item",children:[e.jsx("strong",{children:"Endpoints:"})," ",k.paths," path",k.paths!==1?"s":"",", ",k.operations," operation",k.operations!==1?"s":""]})]}),e.jsx("div",{className:"api-actions",children:e.jsxs("a",{href:C,target:"_blank",rel:"noopener noreferrer",className:"github-link-button",children:[e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"})}),"View on GitHub"]})})]}),e.jsxs("details",{className:"spec-details",onToggle:b,children:[e.jsx("summary",{className:"spec-summary",children:"View Raw Specification"}),e.jsxs("div",{className:"spec-content",children:[l&&e.jsx("div",{className:"spec-loading",children:"Loading specification..."}),d&&e.jsxs("div",{className:"spec-error",children:[e.jsxs("p",{children:["Failed to load spec: ",d]}),e.jsx("a",{href:j,target:"_blank",rel:"noopener noreferrer",className:"spec-error-link",children:"View raw file on GitHub"})]}),r&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"spec-toolbar",children:e.jsx("button",{onClick:N,className:`copy-spec-button ${h?"copied":""}`,children:h?"Copied!":"Copy"})}),e.jsx("pre",{className:"spec-code",children:e.jsx("code",{children:r})})]})]})]}),(p==null?void 0:p.environments)&&e.jsxs(e.Fragment,{children:[e.jsx("h4",{className:"api-section-header",children:"Environments"}),e.jsx("div",{className:"environments-grid",children:Object.entries(p.environments).map(([f,g])=>e.jsxs("div",{className:"environment-card",children:[e.jsx("div",{className:"environment-card-name",children:f}),e.jsx("div",{className:"environment-card-url",children:g.base_url}),g.description&&e.jsx("div",{className:"environment-card-description",children:g.description})]},f))}),e.jsxs("div",{className:"api-explorer-section",children:[e.jsx("button",{onClick:y,className:"api-explorer-button",children:"Open API Explorer"}),e.jsx("p",{className:"environment-card-description",children:"Explore and test the API with an interactive Swagger UI interface"})]})]}),!x&&e.jsxs("p",{className:"environment-card-description api-hint",children:["Configure environments in ",e.jsx("code",{children:".scorecard/config.yml"})," to enable the interactive API Explorer."]})]})}):null}function li({links:t}){return!t||t.length===0?null:e.jsx("div",{className:"tab-panel",id:"links-tab",children:e.jsx("ul",{className:"link-list",children:t.map((s,a)=>e.jsx("li",{className:"link-item",children:e.jsxs("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",children:[e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",style:{flexShrink:0,marginRight:8},children:e.jsx("path",{d:"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"})}),e.jsxs("div",{className:"link-content",children:[e.jsx("strong",{className:"link-name",children:s.name}),s.description&&e.jsx("p",{className:"link-description",children:s.description})]})]})},a))})})}function oi(t){let s=0;for(let a=0;a<t.length;a++){const n=t.charCodeAt(a);s=(s<<5)-s+n,s=s&s}return Math.abs(s).toString(16).padStart(32,"0")}function ci(t){return new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}function di({contributor:t}){const a=`https://www.gravatar.com/avatar/${c.useMemo(()=>oi(t.email.toLowerCase().trim()),[t.email])}?d=identicon&s=48`,n=t.email.split("@")[0].replace(/[^a-zA-Z0-9-]/g,""),r=t.email.includes("github")||t.email.includes("users.noreply.github.com"),i=l=>{l.currentTarget.src="https://www.gravatar.com/avatar/00000000000000000000000000000000?d=mp&s=48"};return e.jsxs("div",{className:"contributor-item",children:[e.jsx("img",{src:a,alt:t.name,className:"contributor-avatar",onError:i}),e.jsxs("div",{className:"contributor-info",children:[e.jsxs("div",{className:"contributor-name",children:[e.jsx("strong",{children:t.name}),r&&e.jsx("a",{href:`https://github.com/${n}`,target:"_blank",rel:"noopener noreferrer",className:"contributor-github-link",title:"View GitHub profile",children:e.jsx("svg",{width:"14",height:"14",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"})})})]}),e.jsx("div",{className:"contributor-email",children:t.email}),e.jsxs("div",{className:"contributor-meta",children:[e.jsxs("span",{className:"contributor-commits",title:`${t.commit_count} commit${t.commit_count!==1?"s":""}`,children:[e.jsx("svg",{width:"12",height:"12",viewBox:"0 0 16 16",fill:"currentColor",style:{verticalAlign:"middle",marginRight:4},children:e.jsx("path",{d:"M1.643 3.143.427 1.927A.25.25 0 0 1 .604 1.5h6.792a.25.25 0 0 1 .177.427L6.357 3.143a.25.25 0 0 1-.177.073H1.82a.25.25 0 0 1-.177-.073ZM2.976 7.5A2.5 2.5 0 0 1 0 7.5v-2a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 .5.5v2a2.5 2.5 0 0 1-2.024 0Zm1.524-.5h-3v.25a1.5 1.5 0 0 0 3 0V7ZM8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0ZM1.5 8a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0Z"})}),t.commit_count," commit",t.commit_count!==1?"s":""]}),e.jsxs("span",{className:"contributor-date",title:new Date(t.last_commit_date).toLocaleString(),children:["Last commit: ",ci(t.last_commit_date)]}),e.jsx("span",{className:"contributor-hash",children:e.jsx("code",{children:t.last_commit_hash})})]})]})]})}function ui({contributors:t}){return!t||t.length===0?null:e.jsxs("div",{className:"tab-panel",id:"contributors-tab",children:[e.jsx("h4",{className:"tab-section-header",children:"Recent Contributors (Last 20 Commits)"}),e.jsx("p",{className:"tab-section-description",style:{marginBottom:20},children:"Contributors who have committed to this repository recently, ordered by commit count."}),e.jsx("div",{className:"contributors-list",children:t.map((s,a)=>e.jsx(di,{contributor:s},a))})]})}function Ze(t){const s=Math.floor(t/1e3),a=Math.floor(s/60),n=Math.floor(a/60);return n>0?`${n}h ${a%60}m ago`:a>0?`${a}m ago`:`${s}s ago`}function hi(t){if(t===0)return"Off";if(t<6e4)return`${t/1e3} second${t!==1e3?"s":""}`;{const s=t/6e4;return`${s} minute${s!==1?"s":""}`}}function mi(t,s){return t==="in_progress"?e.jsx("span",{className:"inline-block w-3 h-3 border-2 border-current border-t-transparent rounded-full animate-spin"}):t==="queued"?e.jsx("span",{children:"âŒ›"}):t==="completed"?s==="success"?e.jsx("span",{className:"text-success",children:"âœ“"}):s==="failure"?e.jsx("span",{className:"text-error",children:"âœ—"}):s==="cancelled"?e.jsx("span",{className:"text-text-muted",children:"âˆ…"}):e.jsx("span",{children:"â—"}):e.jsx("span",{children:"â—"})}function qt(t){const s=new Date;if(t.status==="completed"){const r=new Date(t.updated_at),i=s.getTime()-r.getTime();return{label:"Completed",time:Ze(i)}}if(t.status==="in_progress"){const r=new Date(t.run_started_at||t.created_at),i=s.getTime()-r.getTime();return{label:"Running for",time:Ze(i)}}const a=new Date(t.created_at),n=s.getTime()-a.getTime();return{label:"Queued",time:Ze(n)}}function Ps({run:t}){const[s,a]=c.useState(()=>qt(t));c.useEffect(()=>{if(t.status==="in_progress"||t.status==="queued"){const i=setInterval(()=>{a(qt(t))},1e3);return()=>clearInterval(i)}},[t]);const n=t.status==="completed"?`widget-run-item--${t.conclusion||"neutral"}`:`widget-run-item--${t.status}`,r=t.status==="completed"?`status-${t.conclusion||"neutral"}`:`status-${t.status}`;return e.jsxs("div",{className:M("widget-run-item",n),children:[e.jsxs("div",{className:"widget-run-header",children:[e.jsx("span",{className:M("widget-run-status",r),children:mi(t.status,t.conclusion)}),e.jsxs("div",{className:"widget-run-info",children:[e.jsx("div",{className:"widget-run-name",children:t.name}),e.jsxs("div",{className:"widget-run-repo",children:[t.org,"/",t.repo]})]})]}),e.jsxs("div",{className:"widget-run-meta",children:[e.jsxs("span",{className:"widget-run-duration",children:[s.label," ",s.time]}),e.jsxs("a",{href:t.html_url,target:"_blank",rel:"noopener noreferrer",className:"widget-run-link",onClick:i=>i.stopPropagation(),children:["View",e.jsx("svg",{width:"10",height:"10",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M3.75 2h3.5a.75.75 0 0 1 0 1.5h-3.5a.25.25 0 0 0-.25.25v8.5c0 .138.112.25.25.25h8.5a.25.25 0 0 0 .25-.25v-3.5a.75.75 0 0 1 1.5 0v3.5A1.75 1.75 0 0 1 12.25 14h-8.5A1.75 1.75 0 0 1 2 12.25v-8.5C2 2.784 2.784 2 3.75 2Zm6.854-1h4.146a.25.25 0 0 1 .25.25v4.146a.25.25 0 0 1-.427.177L13.03 4.03 9.28 7.78a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042l3.75-3.75-1.543-1.543A.25.25 0 0 1 10.604 1Z"})})]})]})]})}const fi=[{value:5e3,label:"5s"},{value:1e4,label:"10s"},{value:15e3,label:"15s"},{value:3e4,label:"30s"},{value:6e4,label:"1m"},{value:12e4,label:"2m"},{value:3e5,label:"5m"},{value:0,label:"Off"}];function pi({org:t,repo:s,runs:a,onRunsUpdate:n}){const r=_(ee),[i,l]=c.useState("all"),[o,d]=c.useState(3e4),[u,h]=c.useState(!1),[m,p]=c.useState(null),x=c.useRef(null),k=c.useCallback(async()=>{if(!(!t||!s||!r)){h(!0),p(null);try{const{fetchWorkflowRuns:C}=await U(async()=>{const{fetchWorkflowRuns:b}=await import("./github-CFq7NDJm.js");return{fetchWorkflowRuns:b}},__vite__mapDeps([0,1])),j=await C(t,s);n(j)}catch(C){p(C instanceof Error?C.message:"Failed to load workflows")}finally{h(!1)}}},[t,s,r,n]);c.useEffect(()=>{k()},[k]),c.useEffect(()=>(x.current&&(clearInterval(x.current),x.current=null),o>0&&(x.current=setInterval(k,o)),()=>{x.current&&clearInterval(x.current)}),[o,k]);const v=a.filter(C=>i==="all"?!0:C.status===i),w={all:a.length,in_progress:a.filter(C=>C.status==="in_progress").length,queued:a.filter(C=>C.status==="queued").length,completed:a.filter(C=>C.status==="completed").length};return r?e.jsxs("div",{className:"tab-panel",id:"workflows-tab",children:[e.jsx("div",{style:{marginBottom:20},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:15},children:[e.jsx("div",{className:"widget-filters",style:{margin:0,flex:1},children:["all","in_progress","queued","completed"].map(C=>e.jsxs("button",{className:`filter-btn ${i===C?"filter-btn--active":""}`,onClick:()=>l(C),children:[C==="all"?"All":C==="in_progress"?"Running":C==="queued"?"Queued":"Done",e.jsxs("span",{className:"filter-btn__count",children:["(",w[C],")"]})]},C))}),e.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[e.jsx("select",{className:"widget-interval-select",value:o,onChange:C=>d(Number(C.target.value)),title:"Auto-refresh interval","aria-label":"Auto-refresh interval",children:fi.map(C=>e.jsx("option",{value:C.value,children:C.label},C.value))}),e.jsx("button",{className:"widget-refresh-btn",onClick:k,title:"Refresh",style:{padding:"6px 10px"},disabled:u,children:e.jsx("svg",{width:"14",height:"14",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M1.705 8.005a.75.75 0 0 1 .834.656 5.5 5.5 0 0 0 9.592 2.97l-1.204-1.204a.25.25 0 0 1 .177-.427h3.646a.25.25 0 0 1 .25.25v3.646a.25.25 0 0 1-.427.177l-1.38-1.38A7.002 7.002 0 0 1 1.05 8.84a.75.75 0 0 1 .656-.834ZM8 2.5a5.487 5.487 0 0 0-4.131 1.869l1.204 1.204A.25.25 0 0 1 4.896 6H1.25A.25.25 0 0 1 1 5.75V2.104a.25.25 0 0 1 .427-.177l1.38 1.38A7.002 7.002 0 0 1 14.95 7.16a.75.75 0 0 1-1.49.178A5.5 5.5 0 0 0 8 2.5Z"})})})]})]})}),e.jsxs("div",{id:"service-workflows-content",children:[u&&a.length===0&&e.jsx("div",{className:"loading",children:"Loading workflow runs..."}),m&&e.jsxs("div",{className:"error-state",children:[e.jsx("p",{children:m}),e.jsx("button",{onClick:k,className:"btn-primary",children:"Try Again"})]}),!u&&!m&&v.length===0&&e.jsx("div",{className:"empty-state",children:"No workflow runs found"}),v.length>0&&e.jsx("div",{className:"workflow-runs-list",children:v.map(C=>e.jsx(Ps,{run:C},C.id))})]})]}):e.jsx("div",{className:"tab-panel",id:"workflows-tab",children:e.jsxs("div",{className:"widget-empty",children:[e.jsx("svg",{width:"32",height:"32",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M4 4a4 4 0 1 1 8 0v2h.25c.966 0 1.75.784 1.75 1.75v5.5A1.75 1.75 0 0 1 12.25 15h-8.5A1.75 1.75 0 0 1 2 13.25v-5.5C2 6.784 2.784 6 3.75 6H4Zm8.25 3.5h-8.5a.25.25 0 0 0-.25.25v5.5c0 .138.112.25.25.25h8.5a.25.25 0 0 0 .25-.25v-5.5a.25.25 0 0 0-.25-.25ZM10.5 4a2.5 2.5 0 1 0-5 0v2h5Z"})}),e.jsx("p",{children:"Configure GitHub PAT in settings to view workflow runs"}),e.jsx("button",{onClick:()=>_.getState().openModal("settings"),className:"btn btn--primary",children:"Configure Token"})]})})}function gi({org:t,repo:s}){const[a,n]=c.useState(""),[r,i]=c.useState(!1),[l,o]=c.useState(!1);c.useEffect(()=>{(async()=>{try{const{getRawBaseUrl:k}=await U(async()=>{const{getRawBaseUrl:v}=await Promise.resolve().then(()=>Ke);return{getRawBaseUrl:v}},void 0);n(k())}catch{n("https://raw.githubusercontent.com/example/scorecards/catalog")}})()},[]);const d=`https://img.shields.io/endpoint?url=${a}/badges/${t}/${s}/score.json`,u=`https://img.shields.io/endpoint?url=${a}/badges/${t}/${s}/rank.json`,h=`![Score](${d})`,m=`![Rank](${u})`,p=c.useCallback(async(x,k)=>{try{await navigator.clipboard.writeText(x),k==="score"?(i(!0),setTimeout(()=>i(!1),2e3)):(o(!0),setTimeout(()=>o(!1),2e3))}catch{const v=document.createElement("textarea");v.value=x,document.body.appendChild(v),v.select(),document.execCommand("copy"),document.body.removeChild(v),k==="score"?(i(!0),setTimeout(()=>i(!1),2e3)):(o(!0),setTimeout(()=>o(!1),2e3))}},[]);return e.jsxs("div",{className:"tab-panel",id:"badges-tab",children:[e.jsx("h4",{className:"tab-section-header",children:"Badge Preview"}),e.jsxs("div",{className:"badge-preview-container",children:[e.jsx("img",{src:d,alt:"Score Badge",style:{height:20}}),e.jsx("img",{src:u,alt:"Rank Badge",style:{height:20}})]}),e.jsx("h4",{className:"tab-section-header",style:{marginBottom:10},children:"Add to Your README"}),e.jsx("p",{className:"tab-section-description",children:"Copy the markdown below:"}),e.jsxs("div",{style:{position:"relative",marginBottom:15},children:[e.jsx("button",{onClick:()=>p(h,"score"),className:`copy-button ${r?"copied":""}`,children:r?"Copied!":"Copy"}),e.jsx("pre",{className:"badge-code-block",children:h})]}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("button",{onClick:()=>p(m,"rank"),className:`copy-button ${l?"copied":""}`,children:l?"Copied!":"Copy"}),e.jsx("pre",{className:"badge-code-block",children:m})]})]})}function xi(t){return t.charAt(0).toUpperCase()+t.slice(1)}function vi(t){if(!t)return null;const s=t.match(/Title: (.+)/),a=t.match(/OpenAPI version: ([\d.]+)/),n=t.match(/Endpoints: (\d+) paths?, (\d+) operations?/);return!s&&!a&&!n?null:{title:s?s[1].trim():null,openApiVersion:a?a[1]:null,paths:n?parseInt(n[1]):null,operations:n?parseInt(n[2]):null}}function ji(t){var n,r;const s=(n=t.checks)==null?void 0:n.find(i=>i.check_id==="06-openapi-spec"),a=(s==null?void 0:s.status)==="pass"?vi(s.stdout||""):null;if(t.service.openapi)return{hasSpec:!0,specInfo:t.service.openapi,fromConfig:!0,summary:a};if(s&&s.status==="pass"){const i=(r=s.stdout)==null?void 0:r.match(/found and validated: (.+)/);return{hasSpec:!0,specInfo:{spec_file:i?i[1].trim():"openapi.yaml"},fromConfig:!1,summary:a}}return{hasSpec:!1,specInfo:null,fromConfig:!1,summary:null}}function wi({isOpen:t,onClose:s,org:a,repo:n}){const[r,i]=c.useState(!0),[l,o]=c.useState(null),[d,u]=c.useState(null),[h,m]=c.useState([]),[p,x]=c.useState(!1);c.useEffect(()=>{if(!t||!a||!n)return;(async()=>{var b;i(!0),o(null);try{const{fetchWithHybridAuth:N}=await U(async()=>{const{fetchWithHybridAuth:R}=await Promise.resolve().then(()=>Ke);return{fetchWithHybridAuth:R}},void 0),y=`results/${a}/${n}/results.json`,f=`registry/${a}/${n}.json`,[g,E]=await Promise.all([N(y),N(f)]),S=g.response,T=E.response;if(!S.ok)throw new Error(`Failed to fetch results: ${S.status}`);const A=await S.json();if(T.ok){const R=await T.json();R.installation_pr&&(A.installation_pr=R.installation_pr),R.default_branch&&(A.default_branch=R.default_branch)}const L={service:{...A.service,rank:A.rank,score:A.score,installed:A.installed,default_branch:A.default_branch,checks_hash:A.checks_hash,openapi:(b=A.service)==null?void 0:b.openapi},checks:A.checks||[],contributors:A.recent_contributors||[]};u(L);const $=_.getState().ui.checksHash,I=$!==null&&A.checks_hash!==$;x(I)}catch(N){o(N instanceof Error?N.message:"Failed to load service")}finally{i(!1)}})()},[t,a,n]);const k=c.useCallback(async()=>{var j,b;if(!(!a||!n))try{const{triggerScorecardWorkflow:N}=await U(async()=>{const{triggerScorecardWorkflow:y}=await import("./github-CFq7NDJm.js");return{triggerScorecardWorkflow:y}},__vite__mapDeps([0,1]));await N(a,n),(j=window.showToast)==null||j.call(window,"Workflow triggered successfully","success")}catch(N){(b=window.showToast)==null||b.call(window,N instanceof Error?N.message:"Failed to trigger workflow","error")}},[a,n]),v=c.useCallback(async()=>{var j;if(!(!a||!n)){i(!0);try{const{fetchWithHybridAuth:b}=await U(async()=>{const{fetchWithHybridAuth:L}=await Promise.resolve().then(()=>Ke);return{fetchWithHybridAuth:L}},void 0),N=`results/${a}/${n}/results.json`,y=`registry/${a}/${n}.json`,[f,g]=await Promise.all([b(N),b(y)]),E=f.response,S=g.response;if(!E.ok)throw new Error(`Failed to fetch results: ${E.status}`);const T=await E.json();if(S.ok){const L=await S.json();L.installation_pr&&(T.installation_pr=L.installation_pr),L.default_branch&&(T.default_branch=L.default_branch)}const A={service:{...T.service,rank:T.rank,score:T.score,installed:T.installed,default_branch:T.default_branch,checks_hash:T.checks_hash,openapi:(j=T.service)==null?void 0:j.openapi},checks:T.checks||[],contributors:T.recent_contributors||[]};u(A)}catch(b){o(b instanceof Error?b.message:"Failed to refresh")}finally{i(!1)}}},[a,n]),w=c.useMemo(()=>{if(!d)return[];const j=d.service,b=d.checks||[],N=d.contributors||[],y=j.links||[],f=ji(d),g=[{id:"checks",label:"Check Results",content:e.jsx(ri,{checks:b})}];return f.hasSpec&&g.push({id:"api",label:"API Specification",content:e.jsx(ii,{openapiInfo:f,org:a||"",repo:n||"",defaultBranch:j.default_branch||"main"})}),y.length>0&&g.push({id:"links",label:"Links",content:e.jsx(li,{links:y})}),N.length>0&&g.push({id:"contributors",label:"Contributors",content:e.jsx(ui,{contributors:N})}),g.push({id:"workflows",label:"Workflow Runs",content:e.jsx(pi,{org:a||"",repo:n||"",runs:h,onRunsUpdate:m})}),g.push({id:"badges",label:"Badges",content:e.jsx(gi,{org:a||"",repo:n||""})}),g},[d,a,n,h]),C=()=>{if(r)return e.jsx("div",{className:"loading",children:"Loading service details..."});if(l)return e.jsxs("div",{className:"error-state",children:[e.jsx("h3",{children:"Error loading service"}),e.jsx("p",{children:l}),e.jsx("button",{onClick:v,className:"btn-primary",children:"Try Again"})]});if(!d)return e.jsx("div",{className:"empty-state",children:"Service not found"});const j=d.service,b=d.checks||[],N=b.filter(g=>g.status==="pass").length,y=b.filter(g=>g.status!=="excluded").length,f=b.filter(g=>g.status==="excluded").length;return e.jsxs("div",{id:"service-detail",children:[e.jsxs("div",{className:"service-modal-title-row",children:[e.jsx("h2",{children:j.name}),e.jsx("div",{className:`rank-badge modal-header-badge ${j.rank}`,children:xi(j.rank)})]}),e.jsxs("p",{className:"tab-section-description",children:[a,"/",n]}),e.jsxs("div",{className:"service-modal-actions",children:[e.jsxs("a",{href:`https://github.com/${a}/${n}`,target:"_blank",rel:"noopener noreferrer",className:"github-button",title:"View on GitHub",children:[e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"})}),"View on GitHub"]}),e.jsxs("button",{onClick:v,className:"github-button",title:"Refresh data",children:[e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M1.705 8.005a.75.75 0 0 1 .834.656 5.5 5.5 0 0 0 9.592 2.97l-1.204-1.204a.25.25 0 0 1 .177-.427h3.646a.25.25 0 0 1 .25.25v3.646a.25.25 0 0 1-.427.177l-1.38-1.38A7.002 7.002 0 0 1 1.05 8.84a.75.75 0 0 1 .656-.834ZM8 2.5a5.487 5.487 0 0 0-4.131 1.869l1.204 1.204A.25.25 0 0 1 4.896 6H1.25A.25.25 0 0 1 1 5.75V2.104a.25.25 0 0 1 .427-.177l1.38 1.38A7.002 7.002 0 0 1 14.95 7.16a.75.75 0 0 1-1.49.178A5.5 5.5 0 0 0 8 2.5Z"})}),"Refresh Data"]}),p&&j.installed&&e.jsx("button",{onClick:k,className:"github-button primary",title:"Re-run scorecard workflow",children:"Run Scorecard"})]}),p&&e.jsxs("div",{className:"staleness-warning",children:[e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M6.457 1.047c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0 1 14.082 15H1.918a1.75 1.75 0 0 1-1.543-2.575L6.457 1.047ZM8 5a.75.75 0 0 0-.75.75v2.5a.75.75 0 0 0 1.5 0v-2.5A.75.75 0 0 0 8 5Zm0 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z"})}),e.jsx("span",{children:"This service was scored with an older version of checks. Re-run the scorecard to get updated results."})]}),e.jsxs("div",{className:"modal-stats-container",children:[e.jsxs("div",{className:"modal-stat-item",children:[e.jsx("div",{className:"modal-stat-value",children:j.score}),e.jsx("div",{className:"modal-stat-label",children:"Score"})]}),e.jsxs("div",{className:"modal-stat-item",children:[e.jsxs("div",{className:"modal-stat-value",children:[N,"/",y]}),e.jsx("div",{className:"modal-stat-label",children:"Checks Passed"})]}),f>0&&e.jsxs("div",{className:"modal-stat-item",children:[e.jsx("div",{className:"modal-stat-value modal-stat-excluded",children:f}),e.jsx("div",{className:"modal-stat-label",children:"Excluded"})]})]}),e.jsx($s,{tabs:w,defaultTab:"checks",showScrollArrows:!0})]})};return e.jsx(J,{isOpen:t,onClose:s,className:"service-modal-wrapper",contentClassName:"service-modal-content",testId:"service-modal",children:C()})}function bi({services:t,onServiceClick:s}){return!t||t.length===0?e.jsx("div",{className:"tab-panel",id:"team-tab-services",children:e.jsx("div",{className:"empty-state",children:"No services in this team"})}):e.jsx("div",{className:"tab-panel",id:"team-tab-services",children:e.jsx("div",{className:"team-services-list",children:t.map(a=>{const n=a.score!==null&&a.score!==void 0?Math.round(a.score):"-",r=a.rank?`rank-${a.rank}`:"";return e.jsxs("div",{className:"team-service-item",onClick:()=>s(a.org,a.repo),role:"button",tabIndex:0,onKeyDown:i=>{(i.key==="Enter"||i.key===" ")&&s(a.org,a.repo)},children:[e.jsx("span",{className:"service-name",children:a.repo}),e.jsx("span",{className:`service-score ${r}`,children:n})]},`${a.org}/${a.repo}`)})})})}const ki=["platinum","gold","silver","bronze"];function Ci(t){return t.charAt(0).toUpperCase()+t.slice(1)}function yi({rankDistribution:t,serviceCount:s}){return e.jsx("div",{className:"tab-panel",id:"team-tab-distribution",children:e.jsx("div",{className:"rank-distribution-detail",children:ki.map(a=>{const n=t[a]||0,r=s>0?Math.round(n/s*100):0;return e.jsxs("div",{className:"rank-dist-row",children:[e.jsx("span",{className:"rank-dist-label",children:Ci(a)}),e.jsx("div",{className:"rank-dist-bar-container",children:e.jsx("div",{className:`rank-dist-bar rank-${a}`,style:{width:`${r}%`}})}),e.jsx("span",{className:"rank-dist-count",children:n})]},a)})})})}function Ni({teamServices:t,teamName:s}){const a=c.useRef(null),[n,r]=c.useState([]),[i,l]=c.useState(null),[o,d]=c.useState(!0),[u,h]=c.useState(null),[m,p]=c.useState(!1),[x,k]=c.useState("");c.useEffect(()=>{if(!m)return;const g=E=>{a.current&&!a.current.contains(E.target)&&p(!1)};return document.addEventListener("mousedown",g),()=>document.removeEventListener("mousedown",g)},[m]),c.useEffect(()=>{(async()=>{var E;d(!0);try{const{loadChecks:S}=await U(async()=>{const{loadChecks:A}=await Promise.resolve().then(()=>Fs);return{loadChecks:A}},void 0),T=await S();r(T.checks||[]),((E=T.checks)==null?void 0:E.length)>0&&!i&&l(T.checks[0].id)}catch(S){h(S instanceof Error?S.message:"Failed to load check data")}finally{d(!1)}})()},[i]);const v=c.useMemo(()=>{if(!i||t.length===0)return null;const g=t.map($=>{var F,P;const I=(F=$.check_results)==null?void 0:F[i],R=(P=$.excluded_checks)==null?void 0:P.find(W=>W.check===i);return{org:$.org,repo:$.repo,name:$.name,score:$.score,rank:$.rank,checkStatus:R?"excluded":I==="pass"?"pass":"fail",exclusionReason:R==null?void 0:R.reason}}),E=g.filter($=>$.checkStatus==="pass").length,S=g.filter($=>$.checkStatus==="fail").length,T=g.filter($=>$.checkStatus==="excluded").length,A=E+S,L=A>0?Math.round(E/A*100):0;return{passing:E,failing:S,excluded:T,total:g.length,activeTotal:A,percentage:L,services:g}},[i,t]),w=c.useCallback(g=>{l(g),p(!1)},[]),C=c.useCallback((g,E)=>{var S;(S=window.showServiceDetail)==null||S.call(window,g,E)},[]),j=c.useMemo(()=>{if(!x)return n;const g=x.toLowerCase();return n.filter(E=>{var S;return E.name.toLowerCase().includes(g)||E.id.toLowerCase().includes(g)||((S=E.description)==null?void 0:S.toLowerCase().includes(g))})},[n,x]),b=n.find(g=>g.id===i);if(o)return e.jsx("div",{className:"tab-panel",id:"team-tab-adoption",children:e.jsxs("div",{className:"check-adoption-loading",children:[e.jsx("span",{className:"loading-spinner"})," Loading check data..."]})});if(u)return e.jsx("div",{className:"tab-panel",id:"team-tab-adoption",children:e.jsx("div",{className:"empty-state",children:u})});if(n.length===0)return e.jsx("div",{className:"tab-panel",id:"team-tab-adoption",children:e.jsx("div",{className:"empty-state",children:"No check metadata available"})});const N=(v==null?void 0:v.services.filter(g=>g.checkStatus==="pass"))||[],y=(v==null?void 0:v.services.filter(g=>g.checkStatus==="fail"))||[],f=(v==null?void 0:v.services.filter(g=>g.checkStatus==="excluded"))||[];return e.jsx("div",{className:"tab-panel",id:"team-tab-adoption",children:e.jsxs("div",{className:"check-adoption-content",children:[e.jsxs("div",{className:"check-card-selector",ref:a,children:[e.jsx("button",{onClick:()=>p(!m),className:M("check-card-selected",m&&"open"),children:b?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"check-card-header",children:[e.jsx("span",{className:"check-card-name",children:b.name}),e.jsx("span",{className:"check-card-category",children:b.category}),e.jsx("svg",{className:"check-card-chevron",width:"20",height:"20",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M4.22 6.22a.75.75 0 0 1 1.06 0L8 8.94l2.72-2.72a.75.75 0 0 1 1.06 1.06l-3.25 3.25a.75.75 0 0 1-1.06 0L4.22 7.28a.75.75 0 0 1 0-1.06z"})})]}),e.jsx("p",{className:"check-card-description",children:b.description})]}):e.jsx("span",{className:"check-card-placeholder",children:"Select a check to view adoption..."})}),e.jsxs("div",{className:M("check-card-dropdown",m&&"open"),children:[e.jsx("div",{className:"check-card-search",children:e.jsx("input",{type:"text",value:x,onChange:g=>k(g.target.value),placeholder:"Search checks...",autoFocus:m})}),e.jsxs("div",{className:"check-card-options",children:[j.map(g=>{var E;return e.jsxs("button",{onClick:()=>w(g.id),className:M("check-card-option",g.id===i&&"selected"),children:[e.jsxs("div",{className:"check-card-option-header",children:[e.jsx("span",{className:"check-card-name",children:g.name}),e.jsx("span",{className:"check-card-category",children:g.category})]}),e.jsxs("p",{className:"check-card-option-desc",children:[(E=g.description)==null?void 0:E.slice(0,100),g.description&&g.description.length>100?"...":""]})]},g.id)}),j.length===0&&e.jsx("div",{className:"check-card-empty",children:"No checks found"})]})]})]}),v&&e.jsxs("div",{className:"adoption-progress",children:[e.jsxs("div",{className:"progress-header",children:[e.jsx("span",{className:"progress-label",children:"Adoption Rate"}),e.jsxs("span",{className:"progress-value",children:[v.percentage,"% (",v.passing,"/",v.activeTotal," active)",f.length>0&&e.jsxs("span",{className:"excluded-note",children:[f.length," excluded"]})]})]}),e.jsx("div",{className:"progress-bar-large",children:e.jsx("div",{className:`progress-fill ${v.percentage>=80?"high":v.percentage>=50?"medium":"low"}`,style:{width:`${v.percentage}%`}})})]}),e.jsxs("div",{className:`adoption-lists ${f.length>0?"three-columns":""}`,children:[e.jsxs("div",{className:"adoption-column passing",children:[e.jsxs("h4",{children:["Passing (",N.length,")"]}),e.jsx("div",{className:"adoption-service-list",children:N.length===0?e.jsx("div",{className:"empty-list",children:"No passing services"}):N.map(g=>e.jsxs("div",{className:"adoption-service-item passing",onClick:()=>C(g.org,g.repo),children:[e.jsx("span",{className:"service-name",children:g.name}),e.jsx("span",{className:`service-score rank-${g.rank}`,children:Math.round(g.score)})]},`${g.org}/${g.repo}`))})]}),e.jsxs("div",{className:"adoption-column failing",children:[e.jsxs("h4",{children:["Failing (",y.length,")"]}),e.jsx("div",{className:"adoption-service-list",children:y.length===0?e.jsx("div",{className:"empty-list",children:"No failing services"}):y.map(g=>e.jsxs("div",{className:"adoption-service-item failing",onClick:()=>C(g.org,g.repo),children:[e.jsx("span",{className:"service-name",children:g.name}),e.jsx("span",{className:`service-score rank-${g.rank}`,children:Math.round(g.score)})]},`${g.org}/${g.repo}`))})]}),f.length>0&&e.jsxs("div",{className:"adoption-column excluded",children:[e.jsxs("h4",{children:["Excluded (",f.length,")"]}),e.jsx("div",{className:"adoption-service-list excluded-list",children:f.map(g=>e.jsxs("div",{className:"adoption-service-item excluded",onClick:()=>C(g.org,g.repo),children:[e.jsx("span",{className:"service-name",children:g.name}),e.jsx("span",{className:"exclusion-reason",title:g.exclusionReason||"Excluded",children:g.exclusionReason||"Excluded"})]},`${g.org}/${g.repo}`))})]})]})]})})}function Si({githubOrg:t,githubSlug:s,members:a,loading:n}){const r=c.useCallback(()=>{var l;(l=window.openSettings)==null||l.call(window)},[]);if(!t||!s)return e.jsx("div",{className:"tab-panel",id:"team-tab-github",children:e.jsx("div",{className:"team-not-linked",children:"Not linked to a GitHub team"})});const i=`https://github.com/orgs/${t}/teams/${s}`;return n?e.jsx("div",{className:"tab-panel",id:"team-tab-github",children:e.jsxs("div",{className:"team-github-section team-github-loading",children:[e.jsx("span",{className:"loading-spinner"})," Loading GitHub team..."]})}):a===null?e.jsx("div",{className:"tab-panel",id:"team-tab-github",children:e.jsxs("div",{className:"team-github-section",children:[e.jsxs("a",{href:i,target:"_blank",rel:"noopener noreferrer",className:"team-github-link",children:[e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"})}),s,e.jsx("svg",{width:"14",height:"14",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0ZM1.5 8a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0Zm4.879-2.773 4.264 2.559a.25.25 0 0 1 0 .428l-4.264 2.559A.25.25 0 0 1 6 10.559V5.442a.25.25 0 0 1 .379-.215Z"})})]}),e.jsx("div",{className:"team-github-signin",children:e.jsx("button",{className:"btn-link",onClick:r,children:"Sign in to view team members"})})]})}):!a||a.length===0?e.jsx("div",{className:"tab-panel",id:"team-tab-github",children:e.jsxs("div",{className:"team-github-section",children:[e.jsxs("a",{href:i,target:"_blank",rel:"noopener noreferrer",className:"team-github-link",children:[e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"})}),s,e.jsx("svg",{width:"14",height:"14",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0ZM1.5 8a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0Zm4.879-2.773 4.264 2.559a.25.25 0 0 1 0 .428l-4.264 2.559A.25.25 0 0 1 6 10.559V5.442a.25.25 0 0 1 .379-.215Z"})})]}),e.jsx("div",{className:"team-members-empty",children:"No members found or unable to access team"})]})}):e.jsx("div",{className:"tab-panel",id:"team-tab-github",children:e.jsxs("div",{className:"team-github-section",children:[e.jsxs("a",{href:i,target:"_blank",rel:"noopener noreferrer",className:"team-github-link",children:[e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"})}),s,e.jsx("svg",{width:"14",height:"14",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0ZM1.5 8a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0Zm4.879-2.773 4.264 2.559a.25.25 0 0 1 0 .428l-4.264 2.559A.25.25 0 0 1 6 10.559V5.442a.25.25 0 0 1 .379-.215Z"})})]}),e.jsxs("div",{className:"team-members",children:[e.jsxs("span",{className:"members-label",children:["Members (",a.length,"):"]}),e.jsx("div",{className:"members-grid",children:a.map(l=>e.jsxs("a",{href:l.html_url,target:"_blank",rel:"noopener noreferrer",className:"team-member",title:l.login,children:[e.jsx("img",{src:`${l.avatar_url}&s=48`,alt:l.login,className:"team-member-avatar"}),e.jsxs("span",{className:"team-member-name",children:["@",l.login]})]},l.login))})]})]})})}function _i(t){return t.charAt(0).toUpperCase()+t.slice(1)}function Ti(t){const s=["platinum","gold","silver","bronze"];for(const a of s)if(t[a]>0)return a;return"bronze"}function Ai({isOpen:t,onClose:s,teamName:a}){const[n,r]=c.useState(!0),[i,l]=c.useState(null),[o,d]=c.useState(null),[u,h]=c.useState([]),[m,p]=c.useState(null),[x,k]=c.useState(!1);c.useEffect(()=>{if(!t||!a)return;(async()=>{r(!0),l(null);try{const N=_.getState().teams.all||[],y=_.getState().services.all||[];if(N.length===0&&y.length>0){const{calculateTeamStats:T}=await U(async()=>{const{calculateTeamStats:L}=await Promise.resolve().then(()=>Lt);return{calculateTeamStats:L}},void 0),A=T(y);_.getState().teams.all=Object.values(A).map(L=>({...L,github_org:L.github_org??void 0,github_slug:L.github_slug??void 0}))}const f=(_.getState().teams.all||[]).find(T=>T.name===a);if(!f){l("Team not found");return}d(f);const{getTeamName:g}=await U(async()=>{const{getTeamName:T}=await Promise.resolve().then(()=>Lt);return{getTeamName:T}},void 0),E=a.toLowerCase(),S=y.filter(T=>{var A;return((A=g(T))==null?void 0:A.toLowerCase())===E});h(S)}catch(N){l(N instanceof Error?N.message:"Failed to load team")}finally{r(!1)}})()},[t,a]),c.useEffect(()=>{if(!t||!(o!=null&&o.github_org)||!(o!=null&&o.github_slug))return;(async()=>{k(!0);try{const{fetchTeamMembers:N}=await U(async()=>{const{fetchTeamMembers:f}=await import("./github-teams-DgLxnL39.js");return{fetchTeamMembers:f}},__vite__mapDeps([2,0,1])),y=await N(o.github_org,o.github_slug);p(y)}catch{p([])}finally{k(!1)}})()},[t,o==null?void 0:o.github_org,o==null?void 0:o.github_slug]);const v=c.useCallback((b,N)=>{var y;(y=window.showServiceDetail)==null||y.call(window,b,N)},[]),w=c.useCallback(()=>{var N;if(!o)return;const b=o.id||o.name.toLowerCase().replace(/\s+/g,"-");(N=window.openTeamEditModal)==null||N.call(window,"edit",b)},[o]),C=c.useMemo(()=>o?[{id:"services",label:"Services",content:e.jsx(bi,{services:u,onServiceClick:v})},{id:"distribution",label:"Distribution",content:e.jsx(yi,{rankDistribution:o.rankDistribution??{},serviceCount:o.serviceCount??0})},{id:"adoption",label:"Check Adoption",content:e.jsx(Ni,{teamServices:u,teamName:a||""})},{id:"github",label:"GitHub",content:e.jsx(Si,{githubOrg:o.github_org,githubSlug:o.github_slug,members:m,loading:x})}]:[],[o,u,a,m,x,v]),j=()=>{if(n)return e.jsx("div",{className:"loading",children:"Loading team details..."});if(i)return e.jsxs("div",{className:"error-state",children:[e.jsx("h3",{children:"Error loading team"}),e.jsx("p",{children:i})]});if(!o)return e.jsx("div",{className:"empty-state",children:"Team not found"});const b=Ti(o.rankDistribution??{}),N=o.id||o.name.toLowerCase().replace(/\s+/g,"-");return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"service-modal-title-row",children:[e.jsxs("h2",{children:[o.name,e.jsx("button",{className:"edit-icon-btn",onClick:w,title:"Edit Team",children:e.jsx("svg",{width:"14",height:"14",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M11.013 1.427a1.75 1.75 0 012.474 0l1.086 1.086a1.75 1.75 0 010 2.474l-8.61 8.61c-.21.21-.47.364-.756.445l-3.251.93a.75.75 0 01-.927-.928l.929-3.25c.081-.286.235-.547.445-.758l8.61-8.61zm.176 4.823L9.75 4.81l-6.286 6.287a.253.253 0 00-.064.108l-.558 1.953 1.953-.558a.253.253 0 00.108-.064l6.286-6.286zm1.238-3.763a.25.25 0 00-.354 0L10.811 3.75l1.439 1.44 1.263-1.263a.25.25 0 000-.354l-1.086-1.086z"})})})]}),e.jsx("div",{className:`rank-badge modal-header-badge ${b}`,children:_i(b)})]}),e.jsxs("div",{className:"team-metadata",children:[e.jsxs("span",{className:"team-id",children:["ID: ",N]}),o.description&&e.jsx("p",{className:"team-description",children:o.description}),o.aliases&&o.aliases.length>0&&e.jsxs("div",{className:"team-aliases",children:[e.jsx("span",{className:"aliases-label",children:"Also known as:"}),o.aliases.map((y,f)=>e.jsx("span",{className:"alias-tag",children:y},f))]})]}),e.jsxs("div",{className:"team-modal-stats",children:[e.jsxs("div",{className:"team-modal-stat",children:[e.jsx("span",{className:"stat-value",children:Math.round(o.averageScore||0)}),e.jsx("span",{className:"stat-label",children:"Average Score"})]}),e.jsxs("div",{className:"team-modal-stat",children:[e.jsx("span",{className:"stat-value",children:o.serviceCount}),e.jsx("span",{className:"stat-label",children:"Services"})]}),e.jsxs("div",{className:"team-modal-stat",children:[e.jsx("span",{className:"stat-value",children:o.installedCount}),e.jsx("span",{className:"stat-label",children:"Installed"})]}),e.jsxs("div",{className:`team-modal-stat ${(o.staleCount??0)>0?"warning":""}`,children:[e.jsx("span",{className:"stat-value",children:o.staleCount||0}),e.jsx("span",{className:"stat-label",children:"Stale"})]})]}),(o.slack_channel||o.oncall_rotation)&&e.jsxs("div",{className:"team-modal-contact",children:[o.slack_channel&&e.jsxs("span",{className:"contact-item",children:[e.jsx("svg",{width:"14",height:"14",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M5.2 8.4a1.2 1.2 0 102.4 0 1.2 1.2 0 00-2.4 0zm6 0a1.2 1.2 0 102.4 0 1.2 1.2 0 00-2.4 0z"})}),o.slack_channel]}),o.oncall_rotation&&e.jsxs("span",{className:"contact-item",children:[e.jsx("svg",{width:"14",height:"14",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0ZM1.5 8a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0Zm7-3.25v2.992l2.028.812a.75.75 0 0 1-.557 1.392l-2.5-1A.75.75 0 0 1 7 8.25v-3.5a.75.75 0 0 1 1.5 0Z"})}),o.oncall_rotation]})]}),e.jsx($s,{tabs:C,defaultTab:"services"})]})};return e.jsx(J,{isOpen:t,onClose:s,className:"team-modal-wrapper",contentClassName:"team-modal-content",testId:"team-modal",children:e.jsx("div",{id:"team-detail",children:j()})})}const Ei=["Scorecards Setup","Documentation","Testing & CI","Configuration & Compliance","Other"];function Li(t,s){let a=0,n=0,r=0;t.forEach(o=>{var h,m;const d=(h=o.check_results)==null?void 0:h[s];((m=o.excluded_checks)==null?void 0:m.some(p=>p.check===s))?r++:d==="pass"?a++:n++});const i=a+n,l=i>0?Math.round(a/i*100):0;return{passing:a,failing:n,excluded:r,total:t.length,percentage:l}}function Ri({check:t,stats:s,currentState:a,onStateChange:n,visible:r}){let i="low";return s.percentage>=75?i="high":s.percentage>=40&&(i="medium"),r?e.jsxs("div",{className:"check-option-card","data-check-id":t.id,children:[e.jsxs("div",{className:"check-option-info",children:[e.jsx("div",{className:"check-option-name",children:t.name}),t.description&&e.jsx("div",{className:"check-option-description",children:t.description}),e.jsxs("div",{className:"check-option-stats",children:[e.jsxs("span",{className:"check-option-stat passing",children:[e.jsx("svg",{width:"12",height:"12",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"})}),e.jsx("span",{className:"check-option-stat-value",children:s.passing})," ","passing"]}),e.jsxs("span",{className:"check-option-stat failing",children:[e.jsx("svg",{width:"12",height:"12",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M3.72 3.72a.75.75 0 0 1 1.06 0L8 6.94l3.22-3.22a.749.749 0 0 1 1.275.326.749.749 0 0 1-.215.734L9.06 8l3.22 3.22a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L8 9.06l-3.22 3.22a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042L6.94 8 3.72 4.78a.75.75 0 0 1 0-1.06Z"})}),e.jsx("span",{className:"check-option-stat-value",children:s.failing})," ","failing"]}),s.excluded>0&&e.jsxs("span",{className:"check-option-stat excluded",children:[e.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 16 16",fill:"currentColor",children:[e.jsx("circle",{cx:"8",cy:"8",r:"7",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),e.jsx("line",{x1:"3",y1:"13",x2:"13",y2:"3",stroke:"currentColor",strokeWidth:"1.5"})]}),e.jsx("span",{className:"check-option-stat-value",children:s.excluded})," ","excluded"]}),e.jsxs("span",{className:"check-option-progress",children:[e.jsx("span",{className:"check-option-progress-bar",children:e.jsx("span",{className:`check-option-progress-fill ${i}`,style:{width:`${s.percentage}%`}})}),e.jsxs("span",{className:"check-option-progress-text",children:[s.percentage,"%"]})]})]})]}),e.jsxs("div",{className:"check-state-toggle",children:[e.jsx("button",{className:`state-btn state-any ${a===null?"active":""}`,onClick:()=>n(t.id,null),title:"Any status",children:"Any"}),e.jsx("button",{className:`state-btn state-pass ${a==="pass"?"active":""}`,onClick:()=>n(t.id,"pass"),title:"Must pass",children:e.jsx("svg",{width:"12",height:"12",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"})})}),e.jsx("button",{className:`state-btn state-fail ${a==="fail"?"active":""}`,onClick:()=>n(t.id,"fail"),title:"Must fail",children:e.jsx("svg",{width:"12",height:"12",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M3.72 3.72a.75.75 0 0 1 1.06 0L8 6.94l3.22-3.22a.749.749 0 0 1 1.275.326.749.749 0 0 1-.215.734L9.06 8l3.22 3.22a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L8 9.06l-3.22 3.22a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042L6.94 8 3.72 4.78a.75.75 0 0 1 0-1.06Z"})})})]})]}):null}function Mi({category:t,checks:s,filters:a,services:n,searchQuery:r,onStateChange:i,collapsed:l,onToggle:o}){let d=0,u=0;const h=new Map;s.forEach(v=>{const w=Li(n,v.id);h.set(v.id,w),d+=w.passing,u+=w.total});const m=u>0?Math.round(d/u*100):0,p=r.toLowerCase(),x=s.filter(v=>{var w;return r?v.name.toLowerCase().includes(p)||v.id.toLowerCase().includes(p)||((w=v.description)==null?void 0:w.toLowerCase().includes(p)):!0});if(x.length===0)return null;const k=t.toLowerCase().replace(/\s+/g,"-");return e.jsxs("div",{className:`check-category-section ${l?"collapsed":""}`,"data-category":k,children:[e.jsxs("div",{className:"check-category-header",onClick:o,children:[e.jsxs("div",{className:"check-category-header-left",children:[e.jsx("svg",{width:"12",height:"12",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M6.22 3.22a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042L9.94 8 6.22 4.28a.75.75 0 0 1 0-1.06Z"})}),e.jsx("span",{className:"check-category-header-title",children:t}),e.jsxs("span",{className:"check-category-header-count",children:["(",s.length,")"]})]}),n.length>0&&e.jsxs("span",{className:"check-category-header-stats",children:[m,"% avg adoption"]})]}),e.jsx("div",{className:"check-category-content",id:`check-category-${k}`,children:x.map(v=>e.jsx(Ri,{check:v,stats:h.get(v.id),currentState:a.get(v.id)||null,onStateChange:i,visible:!0},v.id))})]})}function $i({isOpen:t,onClose:s,filters:a,onFiltersChange:n,services:r}){const[i,l]=c.useState([]),[o,d]=c.useState(!0),[u,h]=c.useState(""),[m,p]=c.useState(new Set);c.useEffect(()=>{if(!t)return;(async()=>{d(!0);try{const{loadChecks:b}=await U(async()=>{const{loadChecks:y}=await Promise.resolve().then(()=>Fs);return{loadChecks:y}},void 0),N=await b();l(N.checks||[])}catch{}finally{d(!1)}})()},[t]);const x=c.useMemo(()=>{const j={};i.forEach(N=>{const y=N.category||"Other";j[y]||(j[y]=[]),j[y].push(N)});const b={};return Ei.forEach(N=>{const y=Object.keys(j).find(f=>f.toLowerCase()===N.toLowerCase());y&&(b[N]=j[y])}),b},[i]),k=c.useCallback((j,b)=>{const N=new Map(a);b===null?N.delete(j):N.set(j,b),n(N)},[a,n]),v=c.useCallback(()=>{n(new Map)},[n]),w=c.useCallback(j=>{p(b=>{const N=new Set(b);return N.has(j)?N.delete(j):N.add(j),N})},[]),C=a.size;return e.jsxs(J,{isOpen:t,onClose:s,className:"check-filter-modal-wrapper",contentClassName:"check-filter-modal-content",showCloseButton:!1,testId:"check-filter-modal",children:[e.jsxs("div",{className:"check-filter-modal-header",children:[e.jsx("h2",{children:"Filter by Check"}),e.jsx("button",{className:"modal-close",onClick:s,"aria-label":"Close modal",children:"Ã—"})]}),e.jsx("div",{className:"check-filter-modal-body",children:o?e.jsx("div",{className:"loading",children:"Loading checks..."}):e.jsxs("div",{id:"check-filter-modal-content",children:[e.jsxs("div",{className:"check-filter-search-section",children:[e.jsx("input",{type:"text",id:"check-filter-search",placeholder:"Search checks by name or description...",value:u,onChange:j=>h(j.target.value),autoFocus:!0}),C>0&&e.jsxs("div",{className:"check-filter-summary",children:[e.jsxs("span",{className:"check-filter-summary-count",children:[e.jsx("strong",{children:C})," filter",C!==1?"s":""," active"]}),e.jsx("button",{className:"check-clear-btn",onClick:v,children:"Clear all"})]})]}),e.jsx("div",{id:"check-filter-categories",children:Object.keys(x).length===0?e.jsx("div",{className:"check-filter-empty",children:"No checks available"}):Object.entries(x).map(([j,b])=>e.jsx(Mi,{category:j,checks:b,filters:a,services:r,searchQuery:u,onStateChange:k,collapsed:m.has(j),onToggle:()=>w(j)},j))})]})})]})}function Pi(){return e.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"3"}),e.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]})}function Di(){return e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"}),e.jsx("path",{d:"m9 12 2 2 4-4"})]})}function Ii(){return e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),e.jsx("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"})]})}function Fi(){return e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"})})}function Bi(){return e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),e.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]})}function Oi(){return e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M6.22 3.22a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.75.75 0 0 1-1.06-1.06L9.94 8 6.22 4.28a.75.75 0 0 1 0-1.06z"})})}function Kt(){return e.jsxs("svg",{className:"settings-spinner",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}function Hi(){return e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M13 2L3 14h9l-1 8 10-12h-9l1-8z"})})}function Wi(){return e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),e.jsx("circle",{cx:"12",cy:"12",r:"3"})]})}function Zi(){return e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),e.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]})}function zi({isOpen:t,onClose:s}){const a=_(ee),n=_(bs),r=_(ks),i=_(R=>R.setAuth),l=_(R=>R.setRateLimit),o=_(R=>R.setAuthUser),[d,u]=c.useState(""),[h,m]=c.useState(!1),[p,x]=c.useState(!1),[k,v]=c.useState(!1),[w,C]=c.useState(null),[j,b]=c.useState(!1),N=(R,F)=>{C({message:R,type:F})},y=c.useCallback(async()=>{try{const R=a,F=R?{Authorization:`token ${R}`}:{},W=await(await fetch("https://api.github.com/rate_limit",{headers:F})).json(),Z={remaining:W.rate.remaining,limit:W.rate.limit,reset:new Date(W.rate.reset*1e3),used:W.rate.used};l(Z)}catch(R){console.error("Error checking rate limit:",R),l({remaining:null,limit:null,reset:null,error:"Failed to fetch rate limit"})}},[a,l]);c.useEffect(()=>{t&&a?u(a):t&&!a&&u("")},[t,a]),c.useEffect(()=>{t&&y()},[t,y]);const f=async R=>{try{const F=await fetch("https://api.github.com/user",{headers:{Authorization:`token ${R}`,Accept:"application/vnd.github.v3+json"}});return F.ok?await F.json():null}catch{return null}},g=c.useCallback(async()=>{const R=d.trim();if(!R){N("Please enter a valid PAT","error");return}x(!0),N("Validating token...","info");try{if(await ur(R)){dr(R),i(R,!0);const P=await f(R);P&&o({login:P.login,avatar_url:P.avatar_url}),N("PAT saved successfully! Using GitHub API mode.","success"),await y()}else N("Invalid PAT. Please check and try again.","error")}catch(F){console.error("Error validating PAT:",F),N("Error validating PAT. Please try again.","error")}finally{x(!1)}},[d,i,o,y]),E=c.useCallback(()=>{ht(),i(null,!1),o(null),u(""),N("PAT cleared. Using public CDN mode.","info"),y()},[i,o,y]),S=c.useCallback(async()=>{v(!0),await y(),v(!1),N("Rate limit updated","info")},[y]),T=R=>R?(R instanceof Date?R:new Date(R)).toLocaleTimeString():"-",A=()=>!(n!=null&&n.remaining)||!(n!=null&&n.limit)?0:n.remaining/n.limit*100,L=n!==null&&n.remaining!==null&&n.remaining<100,$=n!==null&&n.remaining!==null&&n.remaining<10,I=()=>$?"critical":L?"low":"normal";return e.jsxs(e.Fragment,{children:[e.jsx(J,{isOpen:t,onClose:s,contentClassName:"settings-modal-content",testId:"settings-modal",children:e.jsxs("div",{className:"settings-content",children:[e.jsxs("div",{className:"settings-header settings-animate settings-animate-1",children:[e.jsx("div",{className:"settings-header-icon",children:e.jsx(Pi,{})}),e.jsxs("div",{className:"settings-header-text",children:[e.jsx("h2",{children:"Settings"}),e.jsx("p",{children:"Configure GitHub authentication"})]})]}),e.jsx("div",{className:`settings-hero settings-animate settings-animate-2 ${a?"settings-hero--authenticated":""}`,children:e.jsxs("div",{className:"settings-hero-content",children:[e.jsxs("div",{className:"settings-hero-main",children:[e.jsx("div",{className:"settings-mode-icon",children:a?e.jsx(Di,{}):e.jsx(Ii,{})}),e.jsxs("div",{className:"settings-mode-info",children:[e.jsxs("div",{className:"settings-mode-title",children:[e.jsx("h3",{children:a?"GitHub API Mode":"Public CDN Mode"}),a&&e.jsx("span",{className:"settings-mode-badge",children:e.jsx(Hi,{})})]}),e.jsx("p",{className:"settings-mode-description",children:a?"Fast, authenticated access with 5,000 requests/hour":"Slower fallback mode with no rate limits"})]})]}),r&&e.jsxs("div",{className:"settings-user-info",children:[e.jsx("div",{className:"settings-user-avatar",children:e.jsx("img",{src:r.avatar_url,alt:r.login})}),e.jsxs("div",{className:"settings-user-details",children:[e.jsx("div",{className:"settings-user-label",children:"Authenticated as"}),e.jsxs("div",{className:"settings-user-name",children:["@",r.login]})]})]}),!a&&e.jsx("div",{className:"settings-hero-prompt",children:e.jsx("p",{children:"Add a Personal Access Token for faster GitHub API access and higher rate limits."})})]})}),e.jsxs("div",{className:"settings-config",children:[e.jsxs("div",{className:"settings-animate settings-animate-3",children:[e.jsxs("button",{onClick:()=>b(!j),className:`settings-accordion ${j?"settings-accordion--expanded":""}`,children:[e.jsx("div",{className:"settings-accordion-icon",children:e.jsx(Bi,{})}),e.jsx("span",{className:"settings-accordion-text",children:"How to create a Personal Access Token"}),e.jsx("div",{className:"settings-accordion-chevron",children:e.jsx(Oi,{})})]}),j&&e.jsxs("div",{className:"settings-accordion-content",children:[e.jsxs("div",{className:"settings-accordion-item",children:[e.jsx("strong",{children:"Steps:"})," ","Go to GitHub Settings â†’ Developer settings â†’ Personal access tokens â†’ Tokens (classic). Create a token with ",e.jsx("code",{children:"workflow"})," scope."]}),e.jsxs("div",{className:"settings-accordion-item",children:[e.jsx("strong",{children:"Benefits:"})," ","Using a PAT provides faster API access with higher rate limits (5000/hr vs 60/hr for unauthenticated)."]}),e.jsxs("div",{className:"settings-accordion-item",children:[e.jsx("strong",{children:"Security:"})," ","Your token is stored in memory only and never persisted to localStorage or sent to external servers."]})]})]}),e.jsxs("div",{className:"settings-input-section settings-animate settings-animate-4",children:[e.jsx("label",{htmlFor:"github-pat",className:"settings-input-label",children:"GitHub Personal Access Token"}),e.jsxs("div",{className:"settings-input-wrapper",children:[e.jsx("div",{className:"settings-input-icon",children:e.jsx(Fi,{})}),e.jsx("input",{id:"github-pat",type:h?"text":"password",value:d,onChange:R=>u(R.target.value),placeholder:"ghp_xxxxxxxxxxxxxxxxxxxx",className:"settings-input"}),e.jsx("button",{type:"button",onClick:()=>m(!h),className:"settings-input-toggle","aria-label":h?"Hide token":"Show token",children:h?e.jsx(Wi,{}):e.jsx(Zi,{})})]}),e.jsx("p",{className:"settings-input-hint",children:"Token is stored in memory only and not persisted to localStorage"})]}),e.jsxs("div",{className:"settings-actions settings-animate settings-animate-5",children:[e.jsx("button",{onClick:S,disabled:k,className:"settings-btn settings-btn--secondary",children:k?e.jsx(Kt,{}):"Check Rate"}),e.jsx("button",{onClick:g,disabled:p||!d.trim(),className:"settings-btn settings-btn--primary",children:p?e.jsx(Kt,{}):"Save Token"}),e.jsx("button",{onClick:E,disabled:!a,className:"settings-btn settings-btn--ghost",children:"Clear Token"})]})]}),e.jsx("div",{className:"settings-rate-limit settings-animate settings-animate-6",children:e.jsxs("div",{className:"settings-rate-limit-inner",children:[e.jsxs("div",{className:"settings-rate-limit-header",children:[e.jsx("h3",{className:"settings-rate-limit-title",children:"API Rate Limit"}),(n==null?void 0:n.limit)&&e.jsxs("span",{className:"settings-rate-limit-value",children:[e.jsx("span",{className:`settings-rate-limit-current settings-rate-limit-current--${I()}`,children:n.remaining}),e.jsx("span",{className:"settings-rate-limit-divider",children:"/"}),e.jsx("span",{children:n.limit}),e.jsx("span",{className:"settings-rate-limit-unit",children:"requests"})]})]}),(n==null?void 0:n.limit)&&e.jsxs("div",{className:"settings-progress",children:[e.jsx("div",{className:`settings-progress-glow settings-progress-glow--${I()}`,style:{width:`${A()}%`}}),e.jsx("div",{className:`settings-progress-fill settings-progress-fill--${I()}`,style:{width:`${A()}%`}})]}),e.jsxs("div",{className:"settings-rate-limit-footer",children:[e.jsxs("span",{className:"settings-rate-limit-reset",children:["Resets at ",T((n==null?void 0:n.reset)??null)]}),L&&e.jsx("span",{className:`settings-rate-limit-badge settings-rate-limit-badge--${$?"critical":"low"}`,children:$?"Critical!":"Running low"})]})]})})]})}),w&&e.jsx(Ss,{message:w.message,type:w.type,onClose:()=>C(null)})]})}function Vi(t={}){const{org:s,repo:a,initialInterval:n=Et.WORKFLOW_POLL_DEFAULT,autoStart:r=!1,storageKey:i,cacheTTL:l=Et.CACHE_MEDIUM,recentHours:o=24}=t,d=s||ge(),u=a||xe(),h=_(ee),[m,p]=c.useState([]),[x,k]=c.useState("all"),[v,w]=c.useState(!1),[C,j]=c.useState(null),[b,N]=c.useState(()=>{if(i){const P=localStorage.getItem(i);if(P!==null)return parseInt(P,10)}return n}),[y,f]=c.useState(!1),g=c.useRef(null),E=c.useRef(0),S={all:m.length,in_progress:m.filter(P=>P.status==="in_progress").length,queued:m.filter(P=>P.status==="queued").length,completed:m.filter(P=>P.status==="completed").length},T=S.in_progress+S.queued,A=x==="all"?m:m.filter(P=>P.status===x),L=c.useCallback(async(P=!1)=>{if(!h){j("No GitHub PAT configured"),p([]);return}const W=Date.now();if(!(!P&&W-E.current<l&&m.length>0)){w(!0),j(null);try{const Z=await fetch(`${ue.GITHUB_BASE_URL}/repos/${d}/${u}/actions/runs?per_page=${ue.PER_PAGE}&_t=${W}`,{headers:{Authorization:`token ${h}`,Accept:ue.ACCEPT_HEADER},cache:"no-cache"});if(!Z.ok)throw new Error(`Failed to fetch workflow runs: ${Z.status}`);const te=await Z.json(),Ie=new Date(W-o*60*60*1e3),ve=te.workflow_runs.map(Q=>({...Q,org:d,repo:u,service_name:u})).filter(Q=>new Date(Q.created_at)>Ie).sort((Q,se)=>new Date(se.created_at).getTime()-new Date(Q.created_at).getTime());p(ve),E.current=W}catch(Z){const te=Z instanceof Error?Z.message:String(Z);j(te),console.error("Error fetching workflow runs:",Z)}finally{w(!1)}}},[h,d,u,l,o,m.length]),$=c.useCallback(async()=>{E.current=0,await L(!0)},[L]),I=c.useCallback(()=>{if(g.current&&(clearInterval(g.current),g.current=null),L(),b===0){f(!1);return}g.current=setInterval(()=>{L()},b),f(!0)},[L,b]),R=c.useCallback(()=>{g.current&&(clearInterval(g.current),g.current=null),f(!1)},[]),F=c.useCallback(P=>{N(P),i&&localStorage.setItem(i,String(P)),y&&(g.current&&(clearInterval(g.current),g.current=null),P===0?f(!1):g.current=setInterval(()=>{L()},P))},[i,y,L]);return c.useEffect(()=>(r&&h&&I(),()=>{g.current&&(clearInterval(g.current),g.current=null)}),[r,h,I]),c.useEffect(()=>{h&&y?L(!0):h||(p([]),j("No GitHub PAT configured"))},[h,y,L]),{runs:m,filteredRuns:A,filterStatus:x,loading:v,error:C,filterCounts:S,badgeCount:T,pollInterval:b,isPolling:y,refresh:$,startPolling:I,stopPolling:R,setFilterStatus:k,setPollingInterval:F}}function Ds(){return Vi({storageKey:Fn.WIDGET_POLL_INTERVAL,autoStart:!1,recentHours:24})}const Ui=[{value:0,label:"Disabled"},{value:5e3,label:"5s"},{value:1e4,label:"10s"},{value:15e3,label:"15s"},{value:3e4,label:"30s"},{value:6e4,label:"1m"},{value:12e4,label:"2m"},{value:3e5,label:"5m"}];function Gi(){const t=_(Cs),s=_(ee),a=_(y=>y.toggleActionsWidget),{filteredRuns:n,filterStatus:r,loading:i,error:l,filterCounts:o,pollInterval:d,isPolling:u,refresh:h,startPolling:m,stopPolling:p,setFilterStatus:x,setPollingInterval:k}=Ds();c.useEffect(()=>(t&&s?m():p(),()=>{p()}),[t,s,m,p]);const v=c.useCallback(y=>{x(y)},[x]),w=c.useCallback(y=>{const f=parseInt(y.target.value,10);k(f)},[k]),C=c.useCallback(async()=>{await h()},[h]),j=c.useCallback(()=>{a()},[a]),b=`https://github.com/${ge()}/${xe()}/actions`,N=e.jsxs(e.Fragment,{children:[t&&e.jsx("div",{className:"widget-backdrop",onClick:j}),e.jsxs("div",{className:M("widget-sidebar",t&&"open"),children:[e.jsxs("div",{className:"widget-header",children:[e.jsxs("h3",{children:[e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0ZM1.5 8a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0Zm4.879-2.773 4.264 2.559a.25.25 0 0 1 0 .428l-4.264 2.559A.25.25 0 0 1 6 10.559V5.442a.25.25 0 0 1 .379-.215Z"})}),"GitHub Actions"]}),e.jsxs("div",{className:"widget-header-actions",children:[e.jsx("a",{href:b,target:"_blank",rel:"noopener noreferrer",className:"widget-header-link",title:"Open in GitHub",children:e.jsx("svg",{width:"14",height:"14",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M3.75 2h3.5a.75.75 0 0 1 0 1.5h-3.5a.25.25 0 0 0-.25.25v8.5c0 .138.112.25.25.25h8.5a.25.25 0 0 0 .25-.25v-3.5a.75.75 0 0 1 1.5 0v3.5A1.75 1.75 0 0 1 12.25 14h-8.5A1.75 1.75 0 0 1 2 12.25v-8.5C2 2.784 2.784 2 3.75 2Zm6.854-1h4.146a.25.25 0 0 1 .25.25v4.146a.25.25 0 0 1-.427.177L13.03 4.03 9.28 7.78a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042l3.75-3.75-1.543-1.543A.25.25 0 0 1 10.604 1Z"})})}),e.jsx("button",{onClick:j,className:"widget-close-btn","aria-label":"Close widget",children:e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M3.72 3.72a.75.75 0 0 1 1.06 0L8 6.94l3.22-3.22a.749.749 0 0 1 1.275.326.749.749 0 0 1-.215.734L9.06 8l3.22 3.22a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L8 9.06l-3.22 3.22a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042L6.94 8 3.72 4.78a.75.75 0 0 1 0-1.06Z"})})})]})]}),e.jsx("div",{className:"widget-filters",children:["all","in_progress","queued","completed"].map(y=>e.jsxs("button",{onClick:()=>v(y),className:M("filter-btn",r===y&&"filter-btn--active"),children:[y==="all"?"All":y==="in_progress"?"Running":y==="queued"?"Queued":"Done",e.jsxs("span",{className:"filter-btn__count",children:["(",o[y==="in_progress"?"in_progress":y],")"]})]},y))}),e.jsxs("div",{className:"widget-controls",children:[e.jsxs("div",{className:"widget-controls__interval",children:[e.jsx("span",{children:"Refresh:"}),e.jsx("select",{value:d,onChange:w,"aria-label":"Refresh interval",className:"widget-interval-select",children:Ui.map(y=>e.jsx("option",{value:y.value,children:y.label},y.value))})]}),e.jsx("button",{onClick:C,disabled:i,className:M("widget-refresh-btn",i&&"spinning"),title:"Refresh now",children:e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 16 16",fill:"currentColor",children:[e.jsx("path",{d:"M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2z"}),e.jsx("path",{d:"M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"})]})})]}),e.jsx("div",{className:"widget-content",children:s?l?e.jsxs("div",{className:"widget-empty widget-empty--error",children:[e.jsx("svg",{width:"32",height:"32",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M8 0a8 8 0 1 0 8 8A8 8 0 0 0 8 0Zm3.72 10.78a.75.75 0 1 1-1.06 1.06L8 9.06l-2.66 2.78a.75.75 0 0 1-1.06-1.06L6.94 8 4.28 5.22a.75.75 0 0 1 1.06-1.06L8 6.94l2.66-2.78a.75.75 0 0 1 1.06 1.06L9.06 8Z"})}),e.jsx("p",{className:"widget-error-msg",children:"Error loading workflow runs"}),e.jsx("p",{children:l})]}):n.length===0?e.jsxs("div",{className:"widget-empty",children:[e.jsx("svg",{width:"32",height:"32",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0ZM1.5 8a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0Zm4.879-2.773 4.264 2.559a.25.25 0 0 1 0 .428l-4.264 2.559A.25.25 0 0 1 6 10.559V5.442a.25.25 0 0 1 .379-.215Z"})}),e.jsxs("p",{children:["No ",r==="all"?"":r.replace("_"," ")," workflow runs in the last 24 hours"]})]}):e.jsx(e.Fragment,{children:n.map(y=>e.jsx(Ps,{run:y},y.id))}):e.jsxs("div",{className:"widget-empty",children:[e.jsx("svg",{width:"32",height:"32",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M4 4a4 4 0 1 1 8 0v2h.25c.966 0 1.75.784 1.75 1.75v5.5A1.75 1.75 0 0 1 12.25 15h-8.5A1.75 1.75 0 0 1 2 13.25v-5.5C2 6.784 2.784 6 3.75 6H4Zm8.25 3.5h-8.5a.25.25 0 0 0-.25.25v5.5c0 .138.112.25.25.25h8.5a.25.25 0 0 0 .25-.25v-5.5a.25.25 0 0 0-.25-.25ZM10.5 4a2.5 2.5 0 1 0-5 0v2h5Z"})}),e.jsx("p",{children:"Configure GitHub PAT in settings to view workflow runs"}),e.jsx("button",{onClick:()=>{j(),_.getState().openModal("settings")},className:"btn btn--primary",children:"Configure Token"})]})}),e.jsx("div",{className:M("widget-status-bar",!u&&"widget-status-bar--disabled"),children:u?e.jsxs("span",{children:["Auto-refreshing every ",hi(d)]}):e.jsx("span",{children:"Auto-refresh disabled"})})]})]});return Ee.createPortal(N,document.body)}const qi=[{value:"serviceCount-desc",label:"Services: High to Low"},{value:"serviceCount-asc",label:"Services: Low to High"},{value:"averageScore-desc",label:"Score: High to Low"},{value:"averageScore-asc",label:"Score: Low to High"},{value:"name-asc",label:"Name: A to Z"},{value:"name-desc",label:"Name: Z to A"}];function Ki({isOpen:t,onClose:s,onCreateTeam:a,onEditTeam:n}){const r=_(Me),i=_(ct),l=_(f=>f.updateFilters),o=_(f=>f.openModal),[d,u]=c.useState(null),[h,m]=c.useState(""),[p,x]=c.useState("serviceCount-desc"),[k,v]=c.useState(!1);c.useEffect(()=>{if(!t)return;let f=!1;return(async()=>{v(!0);try{const{teams:E}=await jt();f||u(E)}catch(E){console.error("Failed to load teams:",E),f||u(null)}finally{f||v(!1)}})(),()=>{f=!0}},[t]);const w=c.useMemo(()=>lt(r,g=>ce(g,i),i),[r,i]),C=c.useMemo(()=>{let f;if(d){const A=ot(d,w);f=Object.values(A)}else f=Object.entries(w).map(([A,L])=>({id:A.toLowerCase().replace(/\s+/g,"-"),name:A,description:null,aliases:[],metadata:{},statistics:L}));if(h){const A=h.toLowerCase();f=f.filter(L=>{var $,I;return L.name.toLowerCase().includes(A)||(($=L.description)==null?void 0:$.toLowerCase().includes(A))||((I=L.aliases)==null?void 0:I.some(R=>R.toLowerCase().includes(A)))})}const[g,E]=p.split("-"),S=f.reduce((A,L)=>{var $,I,R,F,P;return A[L.id]={name:L.name,serviceCount:(($=L.statistics)==null?void 0:$.serviceCount)??0,averageScore:((I=L.statistics)==null?void 0:I.averageScore)??0,staleCount:((R=L.statistics)==null?void 0:R.staleCount)??0,installedCount:((F=L.statistics)==null?void 0:F.installedCount)??0,rankDistribution:((P=L.statistics)==null?void 0:P.rankDistribution)??{platinum:0,gold:0,silver:0,bronze:0},github_org:null,github_slug:null},A},{});return gs(S,g,E).map(A=>f.find(L=>L.name===A.name)).filter(Boolean)},[d,w,h,p]),j=c.useMemo(()=>{const f=Object.values(w).reduce((S,T)=>S+T.serviceCount,0),g=Object.keys(w).length,E=r.filter(S=>!S.team).length;return{totalServices:f,totalTeams:g,servicesWithoutTeam:E}},[w,r]),b=f=>{l({teamFilter:f}),s()},N=()=>{o("teamEdit",{mode:"create"})},y=f=>{o("teamEdit",{mode:"edit",teamId:f})};return e.jsx(J,{isOpen:t,onClose:s,contentClassName:"team-dashboard-modal",testId:"team-dashboard-modal",children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"team-dashboard-header p-4 border-b border-border",children:[e.jsx("h2",{className:"modal-title mb-4",children:"Team Dashboard"}),e.jsxs("div",{className:"team-dashboard-summary flex gap-4 mb-4",children:[e.jsxs("div",{className:"team-summary-stat",children:[e.jsx("div",{className:"team-summary-stat__value",children:j.totalTeams}),e.jsx("div",{className:"team-summary-stat__label",children:"Teams"})]}),e.jsxs("div",{className:"team-summary-stat",children:[e.jsx("div",{className:"team-summary-stat__value",children:j.totalServices}),e.jsx("div",{className:"team-summary-stat__label",children:"With Team"})]}),j.servicesWithoutTeam>0&&e.jsxs("div",{className:"team-summary-stat team-summary-stat--warning",children:[e.jsx("div",{className:"team-summary-stat__value team-summary-stat__value--warning",children:j.servicesWithoutTeam}),e.jsx("div",{className:"team-summary-stat__label team-summary-stat__label--warning",children:"Without Team"})]})]}),e.jsxs("div",{className:"team-dashboard-controls flex gap-2",children:[e.jsx("input",{type:"text",placeholder:"Search teams...",value:h,onChange:f=>m(f.target.value),className:"team-dashboard-search"}),e.jsx("select",{value:p,onChange:f=>x(f.target.value),"aria-label":"Sort teams by",className:"team-dashboard-sort",children:qi.map(f=>e.jsx("option",{value:f.value,children:f.label},f.value))}),e.jsxs("button",{onClick:N,className:"team-dashboard-create-btn",children:[e.jsx("svg",{width:"14",height:"14",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M7.75 2a.75.75 0 0 1 .75.75V7h4.25a.75.75 0 0 1 0 1.5H8.5v4.25a.75.75 0 0 1-1.5 0V8.5H2.75a.75.75 0 0 1 0-1.5H7V2.75A.75.75 0 0 1 7.75 2Z"})}),"Create Team"]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:k?e.jsx("div",{className:"team-dashboard-loading",children:e.jsx("div",{children:"Loading teams..."})}):C.length===0?e.jsx("div",{className:"team-dashboard-empty",children:e.jsx("div",{children:h?"No teams match your search.":"No teams found."})}):e.jsx("div",{className:"team-dashboard-grid",children:C.map(f=>e.jsx(Yi,{team:f,onFilter:()=>b(f.name),onEdit:()=>y(f.id)},f.id))})})]})})}function Yi({team:t,onFilter:s,onEdit:a}){var o;const n=t.statistics,r=n.serviceCount>0?Math.round(n.installedCount/n.serviceCount*100):0,l=["platinum","gold","silver","bronze"].filter(d=>n.rankDistribution[d]>0);return e.jsxs("div",{className:"team-card-react",children:[e.jsxs("div",{className:"team-card-react__header",children:[e.jsx("h3",{className:"team-card-react__name",children:t.name}),((o=t.metadata)==null?void 0:o.slack_channel)&&e.jsx("span",{className:"team-card-react__slack",children:t.metadata.slack_channel})]}),t.description&&e.jsx("p",{className:"team-card-react__description",children:t.description}),e.jsxs("div",{className:"team-card-react__stats",children:[e.jsxs("div",{className:"team-card-react__stat",children:[e.jsx("div",{className:"team-card-react__stat-value",children:n.serviceCount}),e.jsx("div",{className:"team-card-react__stat-label",children:"Services"})]}),e.jsxs("div",{className:"team-card-react__stat",children:[e.jsx("div",{className:"team-card-react__stat-value",children:n.averageScore}),e.jsx("div",{className:"team-card-react__stat-label",children:"Avg Score"})]}),n.staleCount>0&&e.jsxs("div",{className:"team-card-react__stat",children:[e.jsx("div",{className:"team-card-react__stat-value team-card-react__stat-value--warning",children:n.staleCount}),e.jsx("div",{className:"team-card-react__stat-label",children:"Stale"})]})]}),l.length>0&&e.jsx("div",{className:"team-card-react__ranks",children:l.map(d=>e.jsx(Qe,{rank:d,count:n.rankDistribution[d]},d))}),e.jsxs("div",{className:"team-card-react__progress",children:[e.jsxs("div",{className:"team-card-react__progress-header",children:[e.jsx("span",{children:"Installed"}),e.jsxs("span",{children:[n.installedCount,"/",n.serviceCount," (",r,"%)"]})]}),e.jsx("div",{className:"team-card-react__progress-bar",children:e.jsx("div",{className:"team-card-react__progress-fill",style:{width:`${r}%`}})})]}),e.jsxs("div",{className:"team-card-react__actions",children:[e.jsxs("button",{onClick:s,className:"team-card-react__action-btn",children:[e.jsx("svg",{width:"12",height:"12",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M.75 3h14.5a.75.75 0 0 1 0 1.5H.75a.75.75 0 0 1 0-1.5ZM3 7.75A.75.75 0 0 1 3.75 7h8.5a.75.75 0 0 1 0 1.5h-8.5A.75.75 0 0 1 3 7.75Zm3 4a.75.75 0 0 1 .75-.75h2.5a.75.75 0 0 1 0 1.5h-2.5a.75.75 0 0 1-.75-.75Z"})}),"Filter"]}),e.jsxs("button",{onClick:a,className:"team-card-react__action-btn",children:[e.jsx("svg",{width:"12",height:"12",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M11.013 1.427a1.75 1.75 0 0 1 2.474 0l1.086 1.086a1.75 1.75 0 0 1 0 2.474l-8.61 8.61c-.21.21-.47.364-.756.445l-3.251.93a.75.75 0 0 1-.927-.928l.929-3.25c.081-.286.235-.547.445-.758l8.61-8.61Zm.176 4.823L9.75 4.81l-6.286 6.287a.253.253 0 0 0-.064.108l-.558 1.953 1.953-.558a.253.253 0 0 0 .108-.064Zm1.238-3.763a.25.25 0 0 0-.354 0L10.811 3.75l1.439 1.44 1.263-1.263a.25.25 0 0 0 0-.354Z"})}),"Edit"]})]})]})}const Ji=t=>t.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim();function Qi({isOpen:t,onClose:s,mode:a,teamId:n,onSave:r}){const i=_(ee),[l,o]=c.useState({id:"",name:"",description:"",aliases:[],slack_channel:"",oncall_rotation:""}),[d,u]=c.useState(""),[h,m]=c.useState(!1),[p,x]=c.useState(!1),[k,v]=c.useState(null);c.useEffect(()=>{t&&a==="edit"&&n&&i?(m(!0),Ls(n).then(f=>{var g,E;f&&o({id:f.id||n,name:f.name||"",description:f.description||"",aliases:f.aliases||[],slack_channel:((g=f.metadata)==null?void 0:g.slack_channel)||"",oncall_rotation:((E=f.metadata)==null?void 0:E.oncall_rotation)||""})}).catch(f=>{console.error("Failed to load team:",f),v({message:"Failed to load team data",type:"error"})}).finally(()=>m(!1))):t&&a==="create"&&o({id:"",name:"",description:"",aliases:[],slack_channel:"",oncall_rotation:""})},[t,a,n,i]);const w=(f,g)=>{v({message:f,type:g})},C=f=>{o(g=>({...g,name:f,id:a==="create"?Ji(f):g.id}))},j=()=>{const f=d.trim();f&&!l.aliases.includes(f)&&(o(g=>({...g,aliases:[...g.aliases,f]})),u(""))},b=f=>{o(g=>({...g,aliases:g.aliases.filter(E=>E!==f)}))},N=f=>{f.key==="Enter"&&(f.preventDefault(),j())},y=c.useCallback(async()=>{if(!i){w("GitHub PAT required. Please configure in Settings.","error");return}if(!l.name.trim()){w("Team name is required","error");return}x(!0),w("Triggering workflow...","info");try{const f={team_id:l.id,action:a==="create"?"create":"update",name:l.name,description:l.description||"",aliases:l.aliases.join(","),slack_channel:l.slack_channel||"",oncall_rotation:l.oncall_rotation||""},g=await fetch(`${ue.GITHUB_BASE_URL}/repos/${ge()}/${xe()}/actions/workflows/update-team-registry.yml/dispatches`,{method:"POST",headers:{Authorization:`token ${i}`,Accept:ue.ACCEPT_HEADER,"Content-Type":"application/json"},body:JSON.stringify({ref:"main",inputs:f})});if(g.ok||g.status===204)w(a==="create"?"Team creation workflow triggered! Changes will appear shortly.":"Team update workflow triggered! Changes will appear shortly.","success"),r==null||r(l.id,a==="create"),setTimeout(()=>s(),1500);else{const E=await g.json().catch(()=>({}));throw new Error(E.message||`Failed with status ${g.status}`)}}catch(f){console.error("Failed to save team:",f),w(`Failed to save: ${f instanceof Error?f.message:String(f)}`,"error")}finally{x(!1)}},[i,l,a,r,s]);return!i&&t?e.jsx(J,{isOpen:t,onClose:s,contentClassName:"max-w-md",children:e.jsxs("div",{className:"p-6 text-center",children:[e.jsx("h2",{className:"text-xl font-semibold text-text mb-4",children:"PAT Required"}),e.jsxs("p",{className:"text-text-muted mb-4",children:["A GitHub Personal Access Token is required to ",a==="create"?"create":"edit"," teams."]}),e.jsx("button",{onClick:()=>{s(),_.getState().openModal("settings")},className:"px-4 py-2 bg-accent text-white rounded-lg hover:opacity-90",children:"Configure Token"})]})}):e.jsxs(e.Fragment,{children:[e.jsx(J,{isOpen:t,onClose:s,contentClassName:"team-edit-modal max-w-lg",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-text mb-6",children:a==="create"?"Create Team":"Edit Team"}),h?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"text-text-muted",children:"Loading team data..."})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-text mb-1",children:["Team Name ",e.jsx("span",{className:"text-error",children:"*"})]}),e.jsx("input",{type:"text",value:l.name,onChange:f=>C(f.target.value),className:M("w-full px-3 py-2 rounded-lg","bg-surface border border-border","text-text placeholder:text-text-muted","focus:outline-none focus:ring-2 focus:ring-accent"),placeholder:"e.g., Platform Team"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text mb-1",children:"Team ID"}),e.jsx("input",{type:"text",value:l.id,onChange:f=>o(g=>({...g,id:f.target.value})),disabled:a==="edit",className:M("w-full px-3 py-2 rounded-lg font-mono text-sm","bg-surface border border-border","text-text-muted","focus:outline-none focus:ring-2 focus:ring-accent",a==="edit"&&"opacity-50 cursor-not-allowed"),placeholder:"auto-generated-from-name"}),a==="create"&&e.jsx("p",{className:"text-xs text-text-muted mt-1",children:"Auto-generated from name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text mb-1",children:"Description"}),e.jsx("textarea",{value:l.description,onChange:f=>o(g=>({...g,description:f.target.value})),rows:2,className:M("w-full px-3 py-2 rounded-lg resize-none","bg-surface border border-border","text-text placeholder:text-text-muted","focus:outline-none focus:ring-2 focus:ring-accent"),placeholder:"Brief description of the team"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text mb-1",children:"Aliases"}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("input",{type:"text",value:d,onChange:f=>u(f.target.value),onKeyDown:N,className:M("flex-1 px-3 py-2 rounded-lg","bg-surface border border-border","text-text placeholder:text-text-muted","focus:outline-none focus:ring-2 focus:ring-accent"),placeholder:"Add alias and press Enter"}),e.jsx("button",{type:"button",onClick:j,className:"px-3 py-2 bg-surface-secondary border border-border rounded-lg hover:bg-surface text-text",children:"Add"})]}),l.aliases.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1",children:l.aliases.map(f=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-surface-secondary rounded text-sm text-text",children:[f,e.jsx("button",{type:"button",onClick:()=>b(f),className:"text-text-muted hover:text-error",children:"Ã—"})]},f))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text mb-1",children:"Slack Channel"}),e.jsx("input",{type:"text",value:l.slack_channel,onChange:f=>o(g=>({...g,slack_channel:f.target.value})),className:M("w-full px-3 py-2 rounded-lg","bg-surface border border-border","text-text placeholder:text-text-muted","focus:outline-none focus:ring-2 focus:ring-accent"),placeholder:"#team-channel"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text mb-1",children:"Oncall Rotation URL"}),e.jsx("input",{type:"text",value:l.oncall_rotation,onChange:f=>o(g=>({...g,oncall_rotation:f.target.value})),className:M("w-full px-3 py-2 rounded-lg","bg-surface border border-border","text-text placeholder:text-text-muted","focus:outline-none focus:ring-2 focus:ring-accent"),placeholder:"https://pagerduty.com/..."})]}),e.jsxs("div",{className:"flex gap-2 pt-4 border-t border-border",children:[e.jsx("button",{onClick:s,className:M("flex-1 px-4 py-2 rounded-lg","border border-border","text-text font-medium","hover:bg-surface-secondary transition-colors"),children:"Cancel"}),e.jsx("button",{onClick:y,disabled:p||!l.name.trim(),className:M("flex-1 px-4 py-2 rounded-lg","bg-accent text-white font-medium","hover:opacity-90 transition-opacity","disabled:opacity-50 disabled:cursor-not-allowed"),children:p?"Saving...":a==="create"?"Create Team":"Save Changes"})]})]})]})}),k&&e.jsx(Ss,{message:k.message,type:k.type,onClose:()=>v(null)})]})}let ye=null,Yt=0;const Xi=5*60*1e3;async function Is(){const t=Date.now();if(ye&&t-Yt<Xi)return ye;try{const{response:s}=await re("all-checks.json");if(!s.ok)throw new Error(`Failed to fetch all-checks.json: ${s.status}`);return ye=await s.json(),Yt=t,ye}catch(s){return console.warn("Failed to load checks metadata:",s),{version:"1.0.0",checks:[],categories:[],count:0}}}const Fs=Object.freeze(Object.defineProperty({__proto__:null,loadChecks:Is},Symbol.toStringTag,{value:"Module"}));function el({isOpen:t,onClose:s}){const a=_(Me),n=c.useRef(null),[r,i]=c.useState(null),[l,o]=c.useState(null),[d,u]=c.useState("percentage"),[h,m]=c.useState("desc"),[p,x]=c.useState(!1),[k,v]=c.useState(""),[w,C]=c.useState(!1);c.useEffect(()=>{if(!p)return;const S=T=>{n.current&&!n.current.contains(T.target)&&x(!1)};return document.addEventListener("mousedown",S),()=>document.removeEventListener("mousedown",S)},[p]),c.useEffect(()=>{if(!t)return;let S=!1;return(async()=>{C(!0);try{const A=await Is();S||(i(A),A.checks.length>0&&o(L=>L??A.checks[0].id))}catch(A){console.error("Failed to load checks:",A),S||i({checks:[],categories:[],version:"",count:0})}finally{S||C(!1)}})(),()=>{S=!0}},[t]);const j=c.useMemo(()=>{if(!(r!=null&&r.checks))return[];if(!k)return r.checks;const S=k.toLowerCase();return r.checks.filter(T=>{var A;return T.name.toLowerCase().includes(S)||T.id.toLowerCase().includes(S)||((A=T.category)==null?void 0:A.toLowerCase().includes(S))})},[r,k]),b=c.useMemo(()=>l?Zn(a,l):null,[a,l]),N=c.useMemo(()=>{if(!l)return[];const S=zn(a,l),T=Un(S,h);return d==="name"&&T.sort((A,L)=>{const $=A.teamName.localeCompare(L.teamName);return h==="desc"?-$:$}),T},[a,l,d,h]),y=r==null?void 0:r.checks.find(S=>S.id===l),f=S=>{o(S),x(!1)},g=S=>{d===S?m(T=>T==="asc"?"desc":"asc"):(u(S),m("desc"))},E=S=>S>=80?"bg-success":S>=50?"bg-warning":"bg-error";return e.jsx(J,{isOpen:t,onClose:s,contentClassName:"check-adoption-modal max-w-3xl max-h-[90vh] overflow-hidden flex flex-col",testId:"check-adoption-modal",children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"check-adoption-header",children:[e.jsx("h2",{children:"Check Adoption Dashboard"}),e.jsxs("div",{className:"check-card-selector",ref:n,children:[e.jsx("button",{onClick:()=>x(!p),className:M("check-card-selected",p&&"open"),children:y?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"check-card-header",children:[e.jsx("span",{className:"check-card-name",children:y.name}),e.jsx("span",{className:"check-card-category",children:y.category}),e.jsx("svg",{className:"check-card-chevron",width:"20",height:"20",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M4.22 6.22a.75.75 0 0 1 1.06 0L8 8.94l2.72-2.72a.75.75 0 0 1 1.06 1.06l-3.25 3.25a.75.75 0 0 1-1.06 0L4.22 7.28a.75.75 0 0 1 0-1.06z"})})]}),e.jsx("p",{className:"check-card-description",children:y.description})]}):e.jsx("span",{className:"check-card-placeholder",children:"Select a check to view adoption..."})}),e.jsxs("div",{className:M("check-card-dropdown",p&&"open"),children:[e.jsx("div",{className:"check-card-search",children:e.jsx("input",{type:"text",value:k,onChange:S=>v(S.target.value),placeholder:"Search checks...",autoFocus:p})}),e.jsxs("div",{className:"check-card-options",children:[j.map(S=>{var T;return e.jsxs("button",{onClick:()=>f(S.id),className:M("check-card-option",S.id===l&&"selected"),children:[e.jsxs("div",{className:"check-card-option-header",children:[e.jsx("span",{className:"check-card-name",children:S.name}),e.jsx("span",{className:"check-card-category",children:S.category})]}),e.jsxs("p",{className:"check-card-option-desc",children:[(T=S.description)==null?void 0:T.slice(0,100),S.description&&S.description.length>100?"...":""]})]},S.id)}),j.length===0&&e.jsx("div",{className:"check-card-empty",children:"No checks found"})]})]})]})]}),b&&e.jsxs("div",{className:"adoption-stats-row",children:[e.jsxs("div",{className:"adoption-stat-card",children:[e.jsxs("div",{className:"adoption-stat-value success",children:[b.passing,"/",b.passing+b.failing]}),e.jsx("div",{className:"adoption-stat-label",children:"Services Passing"})]}),e.jsxs("div",{className:"adoption-stat-card",children:[e.jsx("div",{className:"adoption-stat-value error",children:b.failing}),e.jsx("div",{className:"adoption-stat-label",children:"Services Failing"})]}),e.jsxs("div",{className:M("adoption-stat-card",b.excluded>0&&"excluded"),children:[e.jsx("div",{className:"adoption-stat-value muted",children:b.excluded}),e.jsx("div",{className:"adoption-stat-label",children:"Excluded"})]}),e.jsxs("div",{className:"adoption-stat-card",children:[e.jsxs("div",{className:"adoption-stat-value accent",children:[b.percentage,"%"]}),e.jsx("div",{className:"adoption-stat-label",children:"Adoption"})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:w?e.jsx("div",{className:"flex items-center justify-center h-40",children:e.jsx("div",{className:"text-text-muted",children:"Loading checks..."})}):N.length===0?e.jsx("div",{className:"flex items-center justify-center h-40",children:e.jsx("div",{className:"text-text-muted",children:"No team data available"})}):e.jsxs("table",{className:"adoption-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsxs("th",{onClick:()=>g("name"),children:["Team",d==="name"&&e.jsx("span",{className:"sort-indicator",children:h==="asc"?"â†‘":"â†“"})]}),e.jsxs("th",{onClick:()=>g("percentage"),style:{textAlign:"center",width:"100px"},children:["Adoption",d==="percentage"&&e.jsx("span",{className:"sort-indicator",children:h==="asc"?"â†‘":"â†“"})]}),e.jsx("th",{style:{textAlign:"center",width:"160px"},children:"Progress"}),e.jsx("th",{style:{textAlign:"center",width:"80px"},children:"Passing"}),e.jsx("th",{style:{textAlign:"center",width:"64px"},children:"Excl."})]})}),e.jsx("tbody",{children:N.map(S=>{const T=S.teamName==="No Team"||S.teamName==="Unassigned";return e.jsxs("tr",{className:M("adoption-row",T&&"no-team"),onClick:()=>{!T&&window.showTeamModal&&window.showTeamModal(S.teamName)},children:[e.jsxs("td",{className:"adoption-cell",children:[e.jsx("div",{className:"team-name",children:S.teamName}),e.jsxs("div",{className:"team-services",children:[S.total," service",S.total!==1?"s":""]})]}),e.jsx("td",{className:"adoption-cell",style:{textAlign:"center"},children:e.jsxs("span",{className:"adoption-percentage",children:[S.percentage,"%"]})}),e.jsx("td",{className:"adoption-cell",children:e.jsx("div",{className:"progress-bar-inline",children:e.jsx("div",{className:M("progress-fill",E(S.percentage)),style:{width:`${S.percentage}%`}})})}),e.jsx("td",{className:"adoption-cell",style:{textAlign:"center"},children:e.jsx("span",{className:"passing-count",children:S.passing})}),e.jsx("td",{className:M("adoption-cell",S.excluded>0&&"has-excluded"),style:{textAlign:"center"},children:e.jsx("span",{className:"excluded-count",children:S.excluded>0?S.excluded:"â€”"})})]},S.teamName)})})]})})]})})}function tl(){const t=_(B=>B.toggleActionsWidget),[s,a]=c.useState(!1),[n,r]=c.useState(!1),[i,l]=c.useState(!1),[o,d]=c.useState(!1),[u,h]=c.useState("create"),[m,p]=c.useState(void 0),[x,k]=c.useState(!1),[v,w]=c.useState(null),[C,j]=c.useState(null),[b,N]=c.useState(!1),[y,f]=c.useState(null),[g,E]=c.useState(!1),[S,T]=c.useState(new Map),A=c.useCallback((B,ae)=>{w(B),j(ae),k(!0)},[]),L=c.useCallback(()=>{k(!1)},[]),$=c.useCallback(B=>{f(B),N(!0)},[]),I=c.useCallback(()=>{N(!1)},[]),R=c.useCallback(()=>{E(!0)},[]),F=c.useCallback(()=>{E(!1)},[]),P=c.useCallback(B=>{T(B),window.dispatchEvent(new CustomEvent("check-filters-changed",{detail:{filters:B}}))},[]),W=c.useCallback(()=>{a(!0)},[]),Z=c.useCallback(()=>{a(!1)},[]),te=c.useCallback(()=>{r(!0)},[]),Ie=c.useCallback(()=>{r(!1)},[]),ve=c.useCallback(()=>{l(!0)},[]),Q=c.useCallback(()=>{l(!1)},[]),se=c.useCallback((B,ae)=>{h(B),p(ae),d(!0)},[]),Os=c.useCallback(()=>{d(!1)},[]),Hs=c.useCallback((B,ae)=>{},[]);c.useEffect(()=>{const B=()=>{E(!0)};return window.addEventListener("open-check-filter-modal",B),()=>{window.removeEventListener("open-check-filter-modal",B)}},[]),c.useEffect(()=>{const B=window.showServiceDetail,ae=window.showTeamDetail,Zs=window.showTeamModal,zs=window.openCheckFilterModal,Vs=window.closeModal,Us=window.closeTeamModal,Gs=window.openSettings,qs=window.toggleActionsWidget,Ks=window.openTeamDashboard,Ys=window.openTeamEditModal,Js=window.openCheckAdoptionDashboard;return window.showServiceDetail=async(X,Fe)=>{A(X,Fe)},window.showTeamDetail=async X=>{$(X)},window.showTeamModal=async X=>{$(X)},window.openCheckFilterModal=()=>{R()},window.closeModal=()=>{L()},window.closeTeamModal=()=>{I()},window.openSettings=()=>{W()},window.toggleActionsWidget=()=>{t()},window.openTeamDashboard=()=>{te()},window.openTeamEditModal=(X,Fe)=>{se(X||"create",Fe)},window.openCheckAdoptionDashboard=()=>{ve()},()=>{window.showServiceDetail=B,window.showTeamDetail=ae,window.showTeamModal=Zs,window.openCheckFilterModal=zs,window.closeModal=Vs,window.closeTeamModal=Us,window.openSettings=Gs,window.toggleActionsWidget=qs,window.openTeamDashboard=Ks,window.openTeamEditModal=Ys,window.openCheckAdoptionDashboard=Js}},[A,L,$,I,R,W,t,te,se,ve]);const Ws=_.getState().services.all||[];return e.jsxs(e.Fragment,{children:[e.jsx(wi,{isOpen:x,onClose:L,org:v,repo:C}),e.jsx(Ai,{isOpen:b,onClose:I,teamName:y}),e.jsx($i,{isOpen:g,onClose:F,filters:S,onFiltersChange:P,services:Ws}),e.jsx(zi,{isOpen:s,onClose:Z}),e.jsx(Gi,{}),e.jsx(Ki,{isOpen:n,onClose:Ie,onCreateTeam:()=>se("create"),onEditTeam:B=>se("edit",B)}),e.jsx(Qi,{isOpen:o,onClose:Os,mode:u,teamId:m,onSave:Hs}),e.jsx(el,{isOpen:i,onClose:Q})]})}const ze="__no_team__";function sl(t){const s=new Set;return t.forEach(a=>{var n;(n=a.team)!=null&&n.primary&&s.add(a.team.primary)}),Array.from(s).sort()}function al(t){return t.some(s=>!s.team)}function nl({services:t,selectedTeams:s,onTeamsChange:a}){const[n,r]=c.useState(!1),i=c.useRef(null),l=c.useMemo(()=>sl(t),[t]),o=c.useMemo(()=>al(t),[t]);c.useEffect(()=>{const x=k=>{i.current&&!i.current.contains(k.target)&&r(!1)};return n&&document.addEventListener("mousedown",x),()=>{document.removeEventListener("mousedown",x)}},[n]),c.useEffect(()=>{const x=k=>{k.key==="Escape"&&r(!1)};return n&&document.addEventListener("keydown",x),()=>{document.removeEventListener("keydown",x)}},[n]);const d=c.useCallback(()=>{r(x=>!x)},[]),u=c.useCallback(x=>{const k=s.includes(x)?s.filter(v=>v!==x):[...s,x];a(k)},[s,a]),h=c.useCallback(()=>{a([])},[a]),m=c.useMemo(()=>{if(s.length===0)return"All Teams";if(s.length===1){const x=s[0];return x===ze?"No Team":x}return`${s.length} teams`},[s]),p=s.length>0;return e.jsxs("div",{className:"team-filter-dropdown",ref:i,children:[e.jsxs("button",{className:`team-filter-toggle ${p?"active":""}`,onClick:d,"aria-expanded":n,"aria-haspopup":"listbox",children:[e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",style:{marginRight:"8px"},children:e.jsx("path",{d:"M2 5.5a3.5 3.5 0 1 1 5.898 2.549 5.508 5.508 0 0 1 3.034 4.084.75.75 0 1 1-1.482.235 4 4 0 0 0-7.9 0 .75.75 0 0 1-1.482-.236A5.507 5.507 0 0 1 3.102 8.05 3.493 3.493 0 0 1 2 5.5ZM11 4a3.001 3.001 0 0 1 2.22 5.018 5.01 5.01 0 0 1 2.56 3.012.75.75 0 0 1-1.449.39A3.51 3.51 0 0 0 11 9.5a.75.75 0 0 1 0-1.5 1.5 1.5 0 1 0-.672-2.842.75.75 0 1 1-.67-1.343c.435-.217.917-.335 1.342-.315ZM5.5 4a2 2 0 1 0-.001 3.999A2 2 0 0 0 5.5 4Z"})}),e.jsx("span",{children:m}),e.jsx("svg",{width:"12",height:"12",viewBox:"0 0 16 16",fill:"currentColor",style:{marginLeft:"8px"},children:e.jsx("path",{d:"m4.427 7.427 3.396 3.396a.25.25 0 0 0 .354 0l3.396-3.396A.25.25 0 0 0 11.396 7H4.604a.25.25 0 0 0-.177.427Z"})})]}),e.jsxs("div",{className:`team-dropdown-menu ${n?"open":""}`,children:[e.jsxs("div",{className:"team-dropdown-header",children:[e.jsx("span",{children:"Filter by Team"}),p&&e.jsx("button",{className:"team-clear-btn",onClick:h,children:"Clear"})]}),e.jsxs("div",{className:"team-dropdown-options",children:[o&&e.jsxs("label",{className:"team-option",children:[e.jsx("input",{type:"checkbox",checked:s.includes(ze),onChange:()=>u(ze)}),e.jsx("span",{className:"team-name no-team",children:"No Team Assigned"})]}),l.map(x=>e.jsxs("label",{className:"team-option",children:[e.jsx("input",{type:"checkbox",checked:s.includes(x),onChange:()=>u(x)}),e.jsx("span",{className:"team-name",children:x})]},x))]})]})]})}function rl(){const[t,s]=c.useState(null),[a,n]=c.useState([]),r=_(Me);c.useEffect(()=>{const l=document.getElementById("team-filter-container");l&&s(l)},[]);const i=c.useCallback(l=>{n(l);const o=_.getState();let d=null;l.length===1?d=l[0]:l.length>1&&(d=l.join(",")),o.updateFilters({teamFilter:d}),o.filterAndSortServices(),window.dispatchEvent(new CustomEvent("team-filter-changed",{detail:{teams:l}}))},[]);return t?Ee.createPortal(e.jsx(nl,{services:r,selectedTeams:a,onTeamsChange:i}),t):null}function il(){window.dispatchEvent(new CustomEvent("open-check-filter-modal"))}function ll(){const[t,s]=c.useState(0);c.useEffect(()=>{const r=i=>{var o;const l=i;(o=l.detail)!=null&&o.filters&&s(l.detail.filters.size)};return window.addEventListener("check-filters-changed",r),()=>{window.removeEventListener("check-filters-changed",r)}},[]);const a=t>0,n=()=>{il()};return e.jsxs("button",{onClick:n,className:M("check-filter-toggle",a&&"active"),children:[e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M.75 3a.75.75 0 0 0 0 1.5h14.5a.75.75 0 0 0 0-1.5H.75ZM3 7.75A.75.75 0 0 1 3.75 7h8.5a.75.75 0 0 1 0 1.5h-8.5A.75.75 0 0 1 3 7.75Zm3 4a.75.75 0 0 1 .75-.75h2.5a.75.75 0 0 1 0 1.5h-2.5a.75.75 0 0 1-.75-.75Z"})}),e.jsxs("span",{children:["Check Filter",a&&` (${t})`]})]})}function ol(){const[t,s]=c.useState(null);return c.useEffect(()=>{const a=document.getElementById("check-filter-container");a&&s(a)},[]),t?Ee.createPortal(e.jsx(ll,{}),t):null}let Jt=[];function cl(){const t=[...Jt];return Jt=[],t}function dl(){const{toasts:t,showToast:s,dismissToast:a}=fr(),{filterCounts:n}=Ds(),r=n.in_progress+n.queued;c.useEffect(()=>($t(s),window.showToast=(d,u)=>{s(d,u||"info")},cl().forEach(({message:d,type:u})=>{s(d,u)}),()=>{$t(()=>{})}),[s]);const i=()=>{var o;(o=window.openSettings)==null||o.call(window)},l=()=>{var o;(o=window.toggleActionsWidget)==null||o.call(window)};return e.jsxs(e.Fragment,{children:[e.jsx(mr,{toasts:t,onDismiss:a}),e.jsx(Tn,{}),e.jsxs("main",{className:"container",children:[e.jsx(Mn,{}),e.jsxs(Ua,{children:[e.jsx(Ne,{path:"/",element:e.jsx(za,{to:"/services",replace:!0})}),e.jsx(Ne,{path:"/services",element:e.jsx(Zr,{})}),e.jsx(Ne,{path:"/teams",element:e.jsx(Xr,{})})]})]}),e.jsx(En,{}),e.jsx(ir,{actionsBadgeCount:r,onSettingsClick:i,onActionsWidgetClick:l}),e.jsx(tl,{}),e.jsx(rl,{}),e.jsx(ol,{})]})}function ul(){c.useEffect(()=>{const s=window.location.hash.replace("#","");s&&(s==="teams"||s==="services")&&window.history.replaceState(null,"",`/${s}`)},[]);const t="/scorecards/".replace(/\/$/,"");return e.jsx(gn,{basename:t,children:e.jsx(dl,{})})}window.filterAndRenderServices=wt;window.refreshData=Ms;window.triggerServiceWorkflow=kr;function Bs(){window.addEventListener("team-filter-changed",t=>{const{teams:s}=t.detail;let a=null;s.length===1?a=s[0]:s.length>1&&(a=s.join(",")),U(async()=>{const{useAppStore:n}=await Promise.resolve().then(()=>Xn);return{useAppStore:n}},void 0).then(({useAppStore:n})=>{n.getState().updateFilters({teamFilter:a}),window.filterAndRenderServices()})})}window.setupEventListeners=Bs;Bs();Mr();const Qt=document.getElementById("root");Qt?Xs.createRoot(Qt).render(e.jsx(c.StrictMode,{children:e.jsx(ul,{})})):console.error("Root element #root not found");export{ue as A,xe as a,ge as b,ut as g};
//# sourceMappingURL=main-C1vjIEW-.js.map
